{"version":3,"sources":["webpack:///./node_modules/es6-promise/dist/es6-promise.js","webpack:///./node_modules/vue-loader/lib/runtime/componentNormalizer.js","webpack:///./node_modules/xmldom/dom-parser.js","webpack:///./node_modules/vue/dist/vue.runtime.esm.js","webpack:///./node_modules/node-libs-browser/mock/process.js","webpack:///./node_modules/loglevel/lib/loglevel.js","webpack:///./node_modules/geoportal-access-lib/src/Utils/LoggerByDefault.js","webpack:///./node_modules/geoportal-access-lib/src/Utils/MessagesResources.js","webpack:///./node_modules/geoportal-access-lib/src/Exceptions/ErrorService.js","webpack:///./node_modules/geoportal-access-lib/src/Utils/Helper.js","webpack:///./node_modules/geoportal-access-lib/src/Protocols/XHR.js","webpack:///./node_modules/geoportal-access-lib/src/Protocols/JSONP.js","webpack:///./node_modules/geoportal-access-lib/src/Protocols/Protocol.js","webpack:///./node_modules/geoportal-access-lib/src/Services/DefaultUrlService.js","webpack:///./node_modules/geoportal-access-lib/src/Services/CommonService.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Alti/Request/model/AltiRequest.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Alti/Request/model/AltiElevationRequest.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Alti/Request/model/AltiProfilRequest.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Alti/Request/AltiRequestREST.js","webpack:///./node_modules/geoportal-access-lib/src/Formats/WPS.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Alti/Request/AltiRequestWPS.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Alti/Request/AltiRequestFactory.js","webpack:///./node_modules/geoportal-access-lib/src/Formats/XML.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Alti/Response/model/AltiResponse.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Alti/Response/model/Elevation.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Alti/Formats/AltiResponseReader.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Alti/Response/AltiResponseFactory.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Alti/Alti.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Response/model/AutoConfResponse.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Response/model/Constraint.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Response/model/Format.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Response/model/Layer.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Response/model/Legend.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Response/model/Metadata.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Response/model/Originator.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Response/model/Service.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Response/model/Style.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Response/model/Territory.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Response/model/Thematic.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Response/model/TileMatrixSet.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Response/model/TileMatrix.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Response/model/TileMatrixLimit.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Formats/AutoConfResponseReader.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Response/AutoConfResponseFactory.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/AutoConf.js","webpack:///./node_modules/geoportal-access-lib/src/Formats/XLS/RequestHeader.js","webpack:///./node_modules/geoportal-access-lib/src/Formats/XLS/Request.js","webpack:///./node_modules/geoportal-access-lib/src/Formats/XLS/AbstractService.js","webpack:///./node_modules/geoportal-access-lib/src/Formats/XLS.js","webpack:///./node_modules/geoportal-access-lib/src/Formats/XLS/LocationUtilityService/model/Address.js","webpack:///./node_modules/geoportal-access-lib/src/Formats/XLS/LocationUtilityService/GeocodeFilterExtension.js","webpack:///./node_modules/geoportal-access-lib/src/Formats/XLS/LocationUtilityService/GeocodeRequest.js","webpack:///./node_modules/geoportal-access-lib/src/Formats/XLS/LocationUtilityService/model/Position.js","webpack:///./node_modules/geoportal-access-lib/src/Formats/XLS/LocationUtilityService/model/Preference.js","webpack:///./node_modules/geoportal-access-lib/src/Formats/XLS/LocationUtilityService/ReverseGeocodeRequest.js","webpack:///./node_modules/geoportal-access-lib/src/Formats/XLS/LocationUtilityService.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Request/GeocodeLocation.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Request/model/StreetAddress.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Request/model/PositionOfInterest.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Request/model/CadastralParcel.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Request/model/Administratif.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Request/DirectGeocodeRequestFactory.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Response/model/GeocodeResponse.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Response/model/GeocodedLocation.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Response/model/DirectGeocodedLocation.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Formats/DirectGeocodeResponseReader.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Response/DirectGeocodeResponseFactory.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Geocode.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Request/ReverseGeocodeRequestFactory.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Response/model/ReverseGeocodedLocation.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Formats/ReverseGeocodeResponseReader.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Response/ReverseGeocodeResponseFactory.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/ReverseGeocode.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoComplete/Response/model/AutoCompleteResponse.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoComplete/Response/model/SuggestedLocation.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoComplete/Response/AutoCompleteResponseFactory.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoComplete/AutoComplete.js","webpack:///./node_modules/geoportal-access-lib/src/Formats/XLS/RouteService/model/RoutePlan.js","webpack:///./node_modules/geoportal-access-lib/src/Formats/XLS/RouteService/DetermineRouteRequest.js","webpack:///./node_modules/geoportal-access-lib/src/Formats/XLS/RouteService.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Route/Request/RouteRequestOLS.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Route/Request/model/RouteParamREST.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Route/Request/RouteRequestREST.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Route/Request/RouteRequestFactory.js","webpack:///./node_modules/geoportal-access-lib/src/Formats/WKT.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Route/Response/model/RouteResponse.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Route/Response/model/RouteInstruction.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Route/Formats/RouteResponseRESTReader.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Route/Formats/RouteResponseOLSReader.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Route/Response/RouteResponseFactory.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Route/Route.js","webpack:///./node_modules/geoportal-access-lib/src/Services/ProcessIsoCurve/Request/model/ProcessIsoCurveParam.js","webpack:///./node_modules/geoportal-access-lib/src/Services/ProcessIsoCurve/Request/ProcessIsoCurveRequest.js","webpack:///./node_modules/geoportal-access-lib/src/Services/ProcessIsoCurve/Response/model/ProcessIsoCurveResponse.js","webpack:///./node_modules/geoportal-access-lib/src/Services/ProcessIsoCurve/Formats/ProcessIsoCurveResponseReader.js","webpack:///./node_modules/geoportal-access-lib/src/Services/ProcessIsoCurve/Response/ProcessIsoCurveResponseFactory.js","webpack:///./node_modules/geoportal-access-lib/src/Services/ProcessIsoCurve/ProcessIsoCurve.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Services.js","webpack:///./node_modules/geoportal-access-lib/src/Gp.js","webpack:///./node_modules/xmldom/dom.js","webpack:///./node_modules/vue-router/dist/vue-router.esm.js","webpack:///./node_modules/node-fetch/browser.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/xmldom/sax.js","webpack:///./node_modules/path-browserify/index.js"],"names":["global","factory","module","exports","this","objectOrFunction","x","type","isFunction","_isArray","Array","isArray","Object","prototype","toString","call","len","vertxNext","customSchedulerFn","asap","callback","arg","queue","flush","scheduleFlush","setScheduler","scheduleFn","setAsap","asapFn","browserWindow","window","undefined","browserGlobal","BrowserMutationObserver","MutationObserver","WebKitMutationObserver","isNode","self","process","isWorker","Uint8ClampedArray","importScripts","MessageChannel","useNextTick","nextTick","useVertxTimer","useSetTimeout","useMutationObserver","iterations","observer","node","document","createTextNode","observe","characterData","data","useMessageChannel","channel","port1","onmessage","port2","postMessage","globalSetTimeout","setTimeout","i","attemptVertx","vertx","Function","require","runOnLoop","runOnContext","e","then","onFulfillment","onRejection","parent","child","constructor","noop","PROMISE_ID","makePromise","_state","arguments","invokeCallback","_result","subscribe","resolve$1","object","Constructor","promise","resolve","Math","random","substring","PENDING","FULFILLED","REJECTED","selfFulfillment","TypeError","cannotReturnOwn","tryThen","then$$1","value","fulfillmentHandler","rejectionHandler","handleForeignThenable","thenable","sealed","error","fulfill","reason","reject","_label","handleOwnThenable","handleMaybeThenable","maybeThenable","publishRejection","_onerror","publish","_subscribers","length","subscribers","settled","detail","hasCallback","succeeded","initializePromise","resolver","id","nextId","validationError","Error","Enumerator","input","_instanceConstructor","_remaining","_enumerate","_eachEntry","entry","c","resolve$$1","_then","didError","_settledAt","Promise$1","_willSettleAt","state","enumerator","all","entries","race","_","reject$1","needsResolver","needsNew","Promise","catch","finally","polyfill","local","P","promiseToString","cast","_setScheduler","_setAsap","_asap","normalizeComponent","scriptExports","render","staticRenderFns","functionalTemplate","injectStyles","scopeId","moduleIdentifier","shadowMode","hook","options","_compiled","functional","_scopeId","context","$vnode","ssrContext","__VUE_SSR_CONTEXT__","_registeredComponents","add","_ssrRegister","$root","$options","shadowRoot","_injectStyles","originalRender","h","existing","beforeCreate","concat","DOMParser","locator","buildErrorHandler","errorImpl","domBuilder","DOMHandler","errorHandler","isCallback","build","key","fn","msg","_locator","cdata","position","lineNumber","columnNumber","l","systemId","_toString","chars","start","substr","java","lang","String","appendElement","hander","currentElement","appendChild","doc","parseFromString","source","mimeType","sax","XMLReader","defaultNSMap","xmlns","entityMap","setDocumentLocator","test","nbsp","copy","xml","parse","startDocument","DOMImplementation","createDocument","documentURI","startElement","namespaceURI","localName","qName","attrs","el","createElementNS","getURI","getValue","attr","getQName","createAttributeNS","getLocator","nodeValue","setAttributeNode","endElement","current","tagName","parentNode","startPrefixMapping","prefix","uri","endPrefixMapping","processingInstruction","target","ins","createProcessingInstruction","ignorableWhitespace","ch","characters","apply","charNode","createCDATASection","skippedEntity","name","endDocument","normalize","comment","comm","createComment","startCDATA","endCDATA","startDTD","publicId","impl","implementation","createDocumentType","dt","warning","console","warn","fatalError","replace","XMLSerializer","emptyObject","freeze","isUndef","v","isDef","isTrue","isFalse","isPrimitive","isObject","obj","isPlainObject","isRegExp","isValidArrayIndex","val","n","parseFloat","floor","isFinite","isPromise","JSON","stringify","toNumber","isNaN","makeMap","str","expectsLowerCase","map","create","list","split","toLowerCase","isReservedAttribute","remove","arr","item","index","indexOf","splice","hasOwnProperty","hasOwn","cached","cache","hit","camelizeRE","camelize","toUpperCase","capitalize","charAt","slice","hyphenateRE","hyphenate","polyfillBind","ctx","boundFn","a","_length","nativeBind","bind","toArray","ret","extend","to","_from","toObject","res","b","no","identity","looseEqual","isObjectA","isObjectB","isArrayA","isArrayB","every","Date","getTime","keysA","keys","keysB","looseIndexOf","once","called","SSR_ATTR","ASSET_TYPES","LIFECYCLE_HOOKS","config","optionMergeStrategies","silent","productionTip","devtools","performance","warnHandler","ignoredElements","keyCodes","isReservedTag","isReservedAttr","isUnknownElement","getTagNamespace","parsePlatformTagName","mustUseProp","async","_lifecycleHooks","unicodeRegExp","isReserved","charCodeAt","def","enumerable","defineProperty","writable","configurable","bailRE","RegExp","parsePath","path","segments","_isServer","hasProto","inBrowser","inWeex","WXEnvironment","platform","weexPlatform","UA","navigator","userAgent","isIE","isIE9","isEdge","isIOS","isFF","match","nativeWatch","watch","supportsPassive","opts","get","addEventListener","isServerRendering","env","VUE_ENV","__VUE_DEVTOOLS_GLOBAL_HOOK__","isNative","Ctor","_Set","hasSymbol","Symbol","Reflect","ownKeys","Set","set","has","clear","uid","Dep","subs","addSub","sub","push","removeSub","depend","addDep","notify","update","targetStack","pushTarget","popTarget","pop","VNode","tag","children","text","elm","componentOptions","asyncFactory","ns","fnContext","fnOptions","fnScopeId","componentInstance","raw","isStatic","isRootInsert","isComment","isCloned","isOnce","asyncMeta","isAsyncPlaceholder","prototypeAccessors","defineProperties","createEmptyVNode","createTextVNode","cloneVNode","vnode","cloned","arrayProto","arrayMethods","methodsToPatch","forEach","method","original","args","inserted","result","ob","__ob__","observeArray","dep","arrayKeys","getOwnPropertyNames","shouldObserve","toggleObserving","Observer","vmCount","protoAugment","copyAugment","walk","src","__proto__","asRootData","isExtensible","_isVue","defineReactive$$1","customSetter","shallow","property","getOwnPropertyDescriptor","getter","setter","childOb","dependArray","newVal","max","del","items","strats","mergeData","from","toVal","fromVal","mergeDataOrFn","parentVal","childVal","vm","instanceData","defaultData","mergeHook","dedupeHooks","hooks","mergeAssets","key$1","props","methods","inject","computed","provide","defaultStrat","normalizeProps","normalizeInject","normalized","normalizeDirectives","dirs","directives","def$$1","mergeOptions","_base","extends","mixins","mergeField","strat","resolveAsset","warnMissing","assets","camelizedId","PascalCaseId","validateProp","propOptions","propsData","prop","absent","booleanIndex","getTypeIndex","Boolean","stringIndex","getPropDefaultValue","prevShouldObserve","default","_props","getType","isSameType","expectedTypes","handleError","err","info","cur","$parent","errorCaptured","capture","globalHandleError","invokeWithErrorHandling","handler","_handled","logError","timerFunc","isUsingMicroTask","callbacks","pending","flushCallbacks","copies","p","setImmediate","counter","textNode","cb","_resolve","seenObjects","traverse","_traverse","seen","isA","isFrozen","depId","normalizeEvent","passive","once$$1","createFnInvoker","fns","invoker","arguments$1","updateListeners","on","oldOn","remove$$1","createOnceHandler","old","event","params","mergeVNodeHook","hookKey","oldHook","wrappedHook","merged","extractPropsFromVNodeData","altKey","checkProp","hash","preserve","simpleNormalizeChildren","normalizeChildren","normalizeArrayChildren","isTextNode","nestedIndex","lastIndex","last","shift","_isVList","initProvide","_provided","initInjections","resolveInject","provideKey","provideDefault","resolveSlots","slots","slot","name$1","isWhitespace","normalizeScopedSlots","normalSlots","prevSlots","hasNormalSlots","isStable","$stable","$key","_normalized","$hasNormal","normalizeScopedSlot","key$2","proxyNormalSlot","proxy","renderList","iterator","next","done","renderSlot","fallback","bindObject","nodes","scopedSlotFn","$scopedSlots","$slots","$createElement","resolveFilter","isKeyNotMatch","expect","actual","checkKeyCodes","eventKeyCode","builtInKeyCode","eventKeyName","builtInKeyName","mappedKeyCode","bindObjectProps","asProp","isSync","loop","domProps","camelizedKey","hyphenatedKey","$event","renderStatic","isInFor","_staticTrees","tree","_renderProxy","markStatic","markOnce","markStaticNode","bindObjectListeners","ours","resolveScopedSlots","hasDynamicKeys","contentHashKey","bindDynamicKeys","baseObj","values","prependModifier","symbol","installRenderHelpers","_o","_n","_s","_l","_t","_q","_i","_m","_f","_k","_b","_v","_e","_u","_g","_d","_p","FunctionalRenderContext","contextVm","this$1","_original","isCompiled","needNormalization","listeners","injections","scopedSlots","_c","d","createElement","createFunctionalComponent","mergeProps","renderContext","cloneAndMarkFunctionalResult","vnodes","clone","componentVNodeHooks","init","hydrating","_isDestroyed","keepAlive","mountedNode","prepatch","createComponentInstanceForVnode","activeInstance","$mount","oldVnode","updateChildComponent","insert","_isMounted","callHook","queueActivatedComponent","activateChildComponent","destroy","deactivateChildComponent","$destroy","hooksToMerge","createComponent","baseCtor","cid","resolveAsyncComponent","createAsyncPlaceholder","resolveConstructorOptions","model","transformModel","nativeOn","abstract","installComponentHooks","_isComponent","_parentVnode","inlineTemplate","toMerge","_merged","mergeHook$1","f1","f2","SIMPLE_NORMALIZE","ALWAYS_NORMALIZE","normalizationType","alwaysNormalize","_createElement","is","pre","applyNS","registerDeepBindings","force","style","class","initRender","_vnode","parentVnode","_renderChildren","parentData","_parentListeners","currentRenderingInstance","renderMixin","Vue","$nextTick","_render","ref","ensureCtor","comp","base","__esModule","toStringTag","errorComp","resolved","owner","owners","loading","loadingComp","sync","timerLoading","timerTimeout","$on","forceRender","renderCompleted","$forceUpdate","clearTimeout","component","delay","timeout","getFirstComponentChild","initEvents","_events","_hasHookEvent","updateComponentListeners","remove$1","$off","_target","onceHandler","oldListeners","eventsMixin","hookRE","$once","i$1","cbs","$emit","setActiveInstance","prevActiveInstance","initLifecycle","$children","$refs","_watcher","_inactive","_directInactive","_isBeingDestroyed","lifecycleMixin","_update","prevEl","$el","prevVnode","restoreActiveInstance","__patch__","__vue__","teardown","_watchers","_data","mountComponent","updateComponent","Watcher","before","renderChildren","newScopedSlots","oldScopedSlots","hasDynamicScopedSlot","needsForceUpdate","$attrs","$listeners","propKeys","_propKeys","isInInactiveTree","direct","handlers","j","activatedChildren","waiting","flushing","resetSchedulerState","currentFlushTimestamp","getNow","now","createEvent","timeStamp","flushSchedulerQueue","watcher","sort","run","activatedQueue","updatedQueue","callActivatedHooks","callUpdatedHooks","emit","queueWatcher","uid$2","expOrFn","isRenderWatcher","deep","user","lazy","active","dirty","deps","newDeps","depIds","newDepIds","expression","cleanupDeps","tmp","oldValue","evaluate","sharedPropertyDefinition","sourceKey","initState","initProps","initMethods","initData","initComputed","initWatch","propsOptions","isRoot","getData","computedWatcherOptions","watchers","_computedWatchers","isSSR","userDef","defineComputed","shouldCache","createComputedGetter","createGetterInvoker","createWatcher","$watch","stateMixin","dataDef","propsDef","$set","$delete","immediate","uid$3","initMixin","_init","_uid","initInternalComponent","_self","vnodeComponentOptions","_componentTag","super","superOptions","cachedSuperOptions","modifiedOptions","resolveModifiedOptions","extendOptions","components","modified","latest","sealedOptions","initUse","use","plugin","installedPlugins","_installedPlugins","unshift","install","initMixin$1","mixin","initExtend","Super","SuperId","cachedCtors","_Ctor","Sub","initProps$1","initComputed$1","Comp","initAssetRegisters","definition","getComponentName","matches","pattern","pruneCache","keepAliveInstance","filter","cachedNode","pruneCacheEntry","cached$$1","patternTypes","KeepAlive","include","exclude","Number","created","destroyed","mounted","ref$1","parseInt","builtInComponents","initGlobalAPI","configDef","util","defineReactive","delete","observable","version","acceptValue","isEnumeratedAttr","isValidContentEditableValue","convertEnumeratedValue","isFalsyAttrValue","isBooleanAttr","xlinkNS","isXlink","getXlinkProp","genClassForVnode","childNode","mergeClassData","renderClass","staticClass","dynamicClass","stringifyClass","stringifyArray","stringifyObject","stringified","namespaceMap","svg","math","isHTMLTag","isSVG","unknownElementCache","HTMLUnknownElement","HTMLElement","isTextInputType","query","selected","querySelector","createElement$1","multiple","setAttribute","namespace","insertBefore","newNode","referenceNode","removeChild","nextSibling","setTextContent","textContent","setStyleScope","nodeOps","registerRef","isRemoval","refs","refInFor","emptyNode","sameVnode","sameInputType","typeA","typeB","createKeyToOldIdx","beginIdx","endIdx","createPatchFunction","backend","modules","emptyNodeAt","createRmCb","childElm","removeNode","createElm","insertedVnodeQueue","parentElm","refElm","nested","ownerArray","setScope","createChildren","invokeCreateHooks","isReactivated","initComponent","reactivateComponent","pendingInsert","isPatchable","innerNode","transition","activate","ref$$1","ancestor","addVnodes","startIdx","invokeDestroyHook","removeVnodes","removeAndInvokeRemoveHook","rm","updateChildren","oldCh","newCh","removeOnly","oldKeyToIdx","idxInOld","vnodeToMove","oldStartIdx","newStartIdx","oldEndIdx","oldStartVnode","oldEndVnode","newEndIdx","newStartVnode","newEndVnode","canMove","patchVnode","findIdxInOld","end","hydrate","postpatch","invokeInsertHook","initial","isRenderedModule","inVPre","hasChildNodes","innerHTML","childrenMatch","firstChild","fullInvoke","isInitialPatch","isRealElement","nodeType","hasAttribute","removeAttribute","oldElm","_leaveCb","patchable","i$2","updateDirectives","oldDir","dir","isCreate","isDestroy","oldDirs","normalizeDirectives$1","newDirs","dirsWithInsert","dirsWithPostpatch","oldArg","callHook$1","componentUpdated","callInsert","emptyModifiers","modifiers","getRawDirName","rawName","join","baseModules","updateAttrs","inheritAttrs","oldAttrs","setAttr","removeAttributeNS","baseSetAttr","setAttributeNS","__ieph","blocker","stopImmediatePropagation","removeEventListener","updateClass","oldData","cls","transitionClass","_transitionClasses","_prevClass","target$1","klass","RANGE_TOKEN","CHECKBOX_RADIO_TOKEN","normalizeEvents","change","createOnceHandler$1","remove$2","useMicrotaskFix","add$1","attachedTimestamp","_wrapper","currentTarget","ownerDocument","updateDOMListeners","svgContainer","events","updateDOMProps","oldProps","childNodes","_value","strCur","shouldUpdateValue","checkVal","composing","isNotInFocusAndDirty","isDirtyWithModifiers","notInFocus","activeElement","_vModifiers","number","trim","parseStyleText","cssText","listDelimiter","propertyDelimiter","normalizeStyleData","normalizeStyleBinding","staticStyle","bindingStyle","getStyle","checkChild","styleData","emptyStyle","cssVarRE","importantRE","setProp","setProperty","normalizedName","vendorNames","capName","updateStyle","oldStaticStyle","oldStyleBinding","normalizedStyle","oldStyle","newStyle","whitespaceRE","addClass","classList","getAttribute","removeClass","tar","resolveTransition","css","autoCssTransition","enterClass","enterToClass","enterActiveClass","leaveClass","leaveToClass","leaveActiveClass","hasTransition","TRANSITION","ANIMATION","transitionProp","transitionEndEvent","animationProp","animationEndEvent","ontransitionend","onwebkittransitionend","onanimationend","onwebkitanimationend","raf","requestAnimationFrame","nextFrame","addTransitionClass","transitionClasses","removeTransitionClass","whenTransitionEnds","expectedType","getTransitionInfo","propCount","ended","onEnd","transformRE","styles","getComputedStyle","transitionDelays","transitionDurations","transitionTimeout","getTimeout","animationDelays","animationDurations","animationTimeout","hasTransform","delays","durations","toMs","s","enter","toggleDisplay","cancelled","_enterCb","appearClass","appearToClass","appearActiveClass","beforeEnter","afterEnter","enterCancelled","beforeAppear","appear","afterAppear","appearCancelled","duration","transitionNode","isAppear","startClass","activeClass","toClass","beforeEnterHook","enterHook","afterEnterHook","enterCancelledHook","explicitEnterDuration","expectsCSS","userWantsControl","getHookArgumentsLength","show","pendingNode","_pending","isValidDuration","leave","beforeLeave","afterLeave","leaveCancelled","delayLeave","explicitLeaveDuration","performLeave","invokerFns","_enter","platformModules","patch","vmodel","trigger","directive","binding","_vOptions","setSelected","onCompositionStart","onCompositionEnd","prevOptions","curOptions","some","o","needReset","hasNoMatchingOption","actuallySetSelected","isMultiple","option","selectedIndex","initEvent","dispatchEvent","locateNode","transition$$1","originalDisplay","__vOriginalDisplay","display","unbind","platformDirectives","transitionProps","mode","getRealChild","compOptions","extractTransitionData","placeholder","rawChild","hasParentTransition","isSameChild","oldChild","isNotTextNode","isVShowDirective","Transition","_leaving","oldRawChild","delayedLeave","moveClass","TransitionGroup","beforeMount","kept","prevChildren","rawChildren","transitionData","removed","c$1","pos","getBoundingClientRect","updated","hasMove","callPendingCbs","recordPosition","applyTranslation","_reflow","body","offsetHeight","moved","transform","WebkitTransform","transitionDuration","_moveCb","propertyName","_hasMove","cloneNode","newPos","oldPos","dx","left","dy","top","platformComponents","arch","execPath","title","pid","browser","argv","cwd","chdir","exit","kill","umask","dlopen","uptime","memoryUsage","uvCounters","features","root","undefinedType","logMethods","bindMethod","methodName","traceForIE","log","trace","realMethod","replaceLoggingMethods","level","loggerName","methodFactory","debug","enableLoggingWhenConsoleArrives","defaultMethodFactory","Logger","defaultLevel","currentLevel","storageKey","persistLevelIfPossible","levelNum","levelName","localStorage","ignore","cookie","encodeURIComponent","getPersistedLevel","storedLevel","location","exec","levels","getLevel","setLevel","persist","SILENT","setDefaultLevel","enableAll","TRACE","disableAll","initialLevel","defaultLogger","_loggersByName","getLogger","logger","_log","noConflict","getLoggers","LoggerByDefault","logname","MessagesResources","PARAM_MISSING","PARAM_EMPTY","PARAM_TYPE","PARAM_FORMAT","PARAM_NOT_SUPPORT","PARAM_NOT_SUPPORT_NODEJS","PARAM_UNKNOWN","SERVICE_REQUEST_BUILD","SERVICE_REQUEST_EMPTY","SERVICE_RESPONSE_EXCEPTION","SERVICE_RESPONSE_EXCEPTION_2","SERVICE_RESPONSE_ANALYSE","SERVICE_RESPONSE_ANALYSE_2","SERVICE_RESPONSE_EMPTY","SERVICE_RESPONSE_EMPTY_2","SERVICE_RESPONSE_FORMAT","SERVICE_RESPONSE_FORMAT_2","SERVICE_RESPONSE_FORMAT_3","CLASS_CONSTRUCTOR","getMessage","clef","parametres","message","ErrorService","status","TYPE_UNKERR","stack","TYPE_SRVERR","TYPE_USEERR","Helper","normalyzeParameters","myParams","tabParams","normalyzeUrl","url","encode","myUrl","k","indent","num","XHR","settings","format","timeOut","scope","content","headers","referer","__call","response","onResponse","onFailure","__callJSON","__callXML","corps","hXHR","nodefetch","Referer","ok","statusText","XMLHttpRequest","open","overrideMimeType","onTimeOutTrigger","setRequestHeader","onerror","ontimeout","onreadystatechange","readyState","responseURL","data4xhr","send","XDomainRequest","onload","responseText","data4xdr","xmlDoc","parser","ActiveXObject","loadXML","JSONP","uuid","callbackId","callbackSuffix","urlHasCallbackKey","urlHasCallbackName","idx","callbackName","HasCallbackName","onTimeOut","_deleteScript","_createScript","scriptu","scripto","getElementById","documentElement","getElementsByTagName","replaceChild","script","Protocol","protocol","wrap","nocache","output","t","HOSTNAME","DefaultUrlService","ssl","_protocol","Alti","_key","wps","ProcessIsoCurve","AutoComplete","ReverseGeocode","AutoConf","apiKey","apiKeys","aggregate","Geocode","Route","ols","CommonService","opt","proxyURL","httpMethod","rawResponse","onSuccess","serverUrl","bOnSuccess","urlByDefault","CLASSNAME","outputFormat","request","buildRequest","onError","onBuildRequest","callService","onCallService","analyzeResponse","onAnalyzeResponse","success","strUrlProxified","strData","bUrlProxified","contentType","http","onBeforeParse","newResponse","AltiRequest","positions","delimiter","crs","setPositions","lstPosition","lon","lat","getPositions","addPositions","getLon","lstLon","getLat","lstLat","AltiElevationRequest","zonly","_zonly","z","AltiProfilRequest","sampling","_sampling","AltiRequestREST","DataObject","param","requestString","template","point","profil","post","processRequestString","__addDataInputs","myTemplate","tmpl","WPS","paramservice","service","paramversion","paramidentifier","identifier","paramrawdataoutput","rawdataoutput","paramrequest","namespaceByDefault","schemaLocationByDefault","sep","that","__addDataInput","setMethod","getMethod","AltiRequestWPS","rqstWPS","AltiRequestFactory","bOnError","api","myReq","XML","xmlString","reader","__getXMLDOC","setReader","errorMsg","parseError","errorCode","line","linepos","parsererror","__getRootNode","__readDefault","attributes","dataAttributes","__getAttributes","childData","nodeName","nodeAttributes","attribute","getXMLString","setXMLString","getReader","read","getXMLDoc","setXMLDoc","parserOutput","AltiResponse","elevations","Elevation","AltiResponseReader","READERS","altiResponse","elevation","acc","exceptionreport","exceptionReport","exception","exceptionCode","code","description","AltiResponseFactory","JSONResponse","errorMess","lstUrlByDefault","urlFound","lastIndexOf","extension","AutoConfResponse","generalOptions","defaultGMLGFIStyle","theme","wgs84Resolutions","layers","territories","tileMatrixSets","services","isConfLoaded","getLayersId","getLayersConf","layersIdArray","lyrId","getLayerConf","layerId","getTileMatrixSets","getTMSConf","tmsID","getTerritories","getTerritoryConf","territoryID","getServices","getServiceConf","serviceID","Constraint","bbox","right","bottom","minScaleDenominator","maxScaleDenominator","temporalExtent","Format","Layer","getName","getTitle","getDescription","getLayerId","getQuicklookUrl","quicklookUrl","getDefaultProjection","defaultProjection","getProjections","projections","proj","additionalProjections","getBBOX","globalConstraint","getMinScaleDenominator","getMaxScaleDenominator","getTMSID","wmtsOptions","tileMatrixSetLink","getServiceParams","serviceParams","getServerUrl","getLegends","legends","getMetadata","metadata","getStyles","getDefaultStyle","getThematics","thematics","getDefaultFormat","formats","f","getConstraints","constraints","getOriginators","originators","getDimensions","dimensions","getAggregatedLayers","isAggregate","aggregatedLayers","Legend","Metadata","Originator","attribution","logo","Service","Style","Territory","isDefault","defaultCRS","additionalCRS","geoBBOX","geoCenter","defaultOptions","resolution","defaultLayers","Thematic","inspire","TileMatrixSet","projection","nativeResolutions","matrixIds","tileMatrices","getResolutions","getMatrixIds","getProjection","getTileMatrices","getTopLeftCorner","topLeftCorner","matrices","TileMatrix","matrixId","matrixHeight","matrixWidth","scaleDenominator","tileHeight","tileWidth","getScaleDenominator","getTileHeight","getTileWidth","getMatrixHeight","getMatrixWidth","TileMatrixLimit","minTileRow","maxTileRow","minTileCol","maxTileCol","AutoConfResponseReader","__getChildNodes","childName","childPrefix","baseName","DEFAULTPREFIX","__getChildValue","__checkServiceAttributes","viewContextNode","xlsAttributes","att","VERSION","NAMESPACES","SCHEMALOCATION","gpp","ows","sld","wmts","xlink","xsi","ViewContext","Title","titleNode","lyr","Abstract","Server","serverId","OnlineResource","LayerList","layerListNode","layerConfig","tmsLink","tms","layerNode","lyrData","hidden","queryable","serviceid","resourceId","Name","SRS","Dimension","dim","visibilityRange","visibilityMode","geometricType","noDataValue","Theme","themeNode","defaultGMLGFIStyleUrl","territoryNode","tid","territory","AdditionalCRS","addCRS","DefaultLayer","BoundingBox","minT","maxT","multiConstraints","newConstraint","Resolution","y","Resolutions","resNode","more","constraint","CRS","InspireThematic","Attribution","originator","Logo","URL","LegendURL","legend","QuickLook","MetadataURL","m","Key","Identifier","SupportedCRS","tmsData","TMS","MinScaleDenominator","minScale","MaxScaleDenominator","maxScale","TileMatrixSetLimits","limits","tileMatrixSetLimits","TileMatrixLimits","limitId","limit","resolutions","tm","tileMatrix","r","ScaleDenominator","scale","TopLeftCorner","TileWidth","TileHeight","MatrixWidth","MatrixHeight","serviceException","nsPrefix","AutoConfReponseFactory","isEmpty","Gp","Config","mergeConfig","GpConfig","bLocal","AutoConfResponseFactory","RequestHeader","srsName","Request","maximumResponses","guid","AbstractService","strRequest","oRequest","oFilter","addRequest","addFilter","XLS","oService","setService","getService","addNamespace","regex","subst","keyNS","bFound","allNS","element","bService","oHeader","CLASSTYPE","Address","address","freeFormAddress","streetAddress","container","building","street","place","postalCode","envelope","tmplFreeFormAddress","tmplBuilding","tmplStreet","tmplStreetAddress","tmplPostalCode","tmplEnvelope","Places","tmplPlace","filters","tmplPlaceCity","city","GeocodeFilterExtension","addFilterExtensions","oGeocodeLocation","getNames","names","getFilter","getFilters","getAttributs","attributs","attributesList","setPlaceAttributs","placeAttributes","getPlaceAttributs","places","GeocodeRequest","oAddress","addAddress","filterOptions","mFilter","idxe","matchingKey","serviceAttributes","kplace","Position","gml","circle","polygon","multipolygon","tmplGmlPoint","tmplGmlFilter","radius","strPoints","lstPoints","coord","Preference","Preferences","tmplPreference","ReverseGeocodeRequest","oPosition","oPreference","addPosition","addPreferences","LocationUtilityService","oLUSRequest","settingsDirect","returnFreeForm","settingsInv","GeocodeLocation","StreetAddress","PositionOfInterest","CadastralParcel","Administratif","DirectGeocodeRequestFactory","oLUS","oXLS","srs","myRequest","GeocodeResponse","locations","GeocodedLocation","matchType","DirectGeocodedLocation","accuracy","DirectGeocodeResponseReader","XLSNode","xls","xlsext","geocodeResponse","GeocodedAddress","geocodedLocation","GeocodeMatchCode","countrycode","freeform","Building","Street","cadastralParcel","Place","placeType","placeName","municipality","commune","department","insee","quality","ID","IDTR","importance","nature","sheet","section","absorbedCity","arrondissement","origin","prefecture","inseeRegion","inseeDepartment","PostalCode","srvMess","ExceptionReport","Exception","mess","DirectGeocodeReponseFactory","filtersCouldBeNumberList","DirectGeocodeResponseFactory","ReverseGeocodeRequestFactory","ReverseGeocodedLocation","searchCenterDistance","ReverseGeocodeResponseReader","reverseGeocodeResponse","reverseGeocodedLocation","SearchCentreDistance","ExtendedGeocodeMatchCode","ReverseGeocodeReponseFactory","geoEPSG","coords","ReverseGeocodeResponseFactory","AutoCompleteResponse","suggestedLocations","SuggestedLocation","fullText","classification","poi","kind","AutoCompleteResponseFactory","results","suggestedLocation","country","fulltext","zipcode","types","terr","RoutePlan","startPoint","endPoint","routePlan","routePreference","graph","wayPointList","viaPoint","avoidList","avoidFeature","tmplAvoidList","avoidFeatures","tmplAvoidFeature","tmplVehicle","tmplWayPointList","tmplPoint","points","DetermineRouteRequest","oRoutePlan","determineRouteRequest","routeInstructionRequest","routeGeometryRequest","routeMapRequest","addRoute","distanceUnit","route","tmplInstruction","provideGeometry","provideBoundingBox","tmplGeometry","tmplMap","RouteService","expectedStartTime","RouteRequestOLS","viaPoints","provideBbox","exclusions","geometryInInstructions","oRS","RouteParamREST","destination","waypoints","startDateTime","graphName","tolerance","profileId","profileName","getWaypoints","array","getExclusions","getParams","RouteRequestREST","oParams","RouteRequestFactory","WKT","toJson","strWkt","json","$1","coordinates","RouteResponse","totalTime","totalDistance","routeGeometry","routeInstructions","RouteInstruction","distance","instruction","geometry","RouteResponseRESTReader","routeResult","durationSeconds","bounds","geometryWkt","geomWkt","onWKTSuccess","onWKTError","step","routeInstruction","RouteResponseOLSReader","RouteResponseFactory","routeReader","legs","legSteps","steps","distanceMeters","simplifiedWkt","legList","navInstruction","ProcessIsoCurveParam","reverse","smoothing","holes","time","getLocation","ProcessIsoCurveRequest","feature","tmplExclusions","tmplFeature","tmplDistance","tmplTime","ProcessIsoCurveResponse","ProcessIsoCurveResponseReader","isochronResult","wktGeometry","serviceResult","errMsg","ProcessIsoCurveResponseFactory","oIsoCurve","Services","getConfig","autoconfService","getAltitude","altiService","geocode","geocodeService","reverseGeocode","reverseGeocodeService","autoComplete","autoCompleteService","routeService","isoCurve","processIsoCurveService","servicesVersion","servicesDate","date","Protocols","DefaultUrl","GetConfigResponse","IsoCurveResponse","dest","_extends","Class","pt","ppt","htmlns","NodeType","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","ExceptionCode","ExceptionMessage","HIERARCHY_REQUEST_ERR","INDEX_SIZE_ERR","DOMSTRING_SIZE_ERR","NOT_FOUND_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR","NO_DATA_ALLOWED_ERR","NO_MODIFICATION_ALLOWED_ERR","INUSE_ATTRIBUTE_ERR","NOT_SUPPORTED_ERR","INVALID_STATE_ERR","SYNTAX_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR","DOMException","captureStackTrace","NodeList","LiveNodeList","refresh","_node","_refresh","_updateLiveList","inc","_inc","ls","__set__","NamedNodeMap","_findNodeIndex","_addNamedNode","newAttr","oldAttr","ownerElement","_onRemoveAttribute","_onAddAttribute","_removeNamedNode","_features","Node","_xmlEncoder","_visitNode","Document","_nsMap","_onUpdateChild","newChild","cs","_removeChild","previous","previousSibling","lastChild","_insertBefore","nextChild","cp","newFirst","newLast","_appendSingleChild","Element","Attr","CharacterData","Text","Comment","CDATASection","DocumentType","Notation","Entity","EntityReference","DocumentFragment","ProcessingInstruction","nodeSerializeToString","isHtml","nodeFilter","buf","refNode","lookupPrefix","visibleNamespaces","serializeToString","needNamespaceDefine","isHTML","pubid","sysid","internalSubset","importNode","node2","attrs2","_ownerElement","getNamedItem","setNamedItem","setNamedItemNS","getNamedItemNS","removeNamedItem","removeNamedItemNS","hasFeature","versions","qualifiedName","doctype","refChild","appendData","isSupported","hasAttributes","lookupNamespaceURI","isDefaultNamespace","importedNode","rtv","createDocumentFragment","createAttribute","specified","createEntityReference","pl","getAttributeNode","removeAttributeNode","setAttributeNodeNS","getAttributeNodeNS","hasAttributeNS","getAttributeNS","getElementsByTagNameNS","substringData","offset","count","insertData","replaceData","deleteData","splitText","newText","getTextContent","$$length","condition","encodeReserveRE","encodeReserveReplacer","commaRE","decode","decodeURIComponent","resolveQuery","extraQuery","_parseQuery","parsedQuery","parseQuery","castQueryParamValue","parts","stringifyQuery","val2","trailingSlashRE","createRoute","record","redirectedFrom","router","meta","fullPath","getFullPath","matched","formatMatch","START","_stringifyQuery","isSameRoute","onlyPath","isObjectEqual","aKeys","bKeys","aVal","bKey","bVal","isIncludedRoute","queryIncludes","handleRouteEntered","instances","instance","enteredCbs","View","routerView","$route","_routerViewCache","depth","inactive","_routerRoot","vnodeData","routerViewDepth","cachedData","cachedComponent","configProps","fillPropsinData","registerRouteInstance","propsToPass","resolveProps","resolvePath","relative","append","firstChar","segment","hashIndex","queryIndex","cleanPath","isarray","pathToRegexp_1","pathToRegexp","parse_1","compile_1","compile","tokensToFunction_1","tokensToFunction","tokensToRegExp_1","tokensToRegExp","PATH_REGEXP","tokens","defaultDelimiter","escaped","group","modifier","asterisk","partial","repeat","optional","escapeGroup","escapeString","encodeURIComponentPretty","encodeURI","encodeAsterisk","flags","pretty","token","attachKeys","re","sensitive","regexpToRegexp","groups","arrayToRegexp","regexp","stringToRegexp","strict","endsWithDelimiter","regexpCompileCache","fillParams","routeMsg","filler","pathMatch","normalizeLocation","params$1","rawPath","parsedPath","basePath","_Vue","toTypes","eventTypes","Link","required","custom","exact","exactPath","exactActiveClass","ariaCurrentValue","$router","href","classes","globalActiveClass","linkActiveClass","globalExactActiveClass","linkExactActiveClass","activeClassFallback","exactActiveClassFallback","compareTarget","guardEvent","click","scopedSlot","navigate","isActive","isExactActive","findAnchor","aData","handler$1","event$1","aAttrs","metaKey","ctrlKey","shiftKey","defaultPrevented","button","preventDefault","installed","registerInstance","callVal","_router","history","_route","beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate","createRouteMap","routes","oldPathList","oldPathMap","oldNameMap","parentRoute","pathList","pathMap","nameMap","addRouteRecord","matchAs","pathToRegexpOptions","normalizedPath","normalizePath","caseSensitive","compileRouteRegex","alias","redirect","childMatchAs","aliases","aliasRoute","createMatcher","addRoutes","parentOrRoute","getRoutes","currentRoute","_createRoute","paramNames","record$1","matchRoute","originalRedirect","resolveRecordPath","resolvedPath","aliasedPath","aliasedMatch","aliasedRecord","Time","genStateKey","toFixed","getStateKey","setStateKey","positionStore","setupScroll","scrollRestoration","protocolAndPath","host","absolutePath","stateCopy","replaceState","handlePopState","handleScroll","isPop","app","behavior","scrollBehavior","getScrollPosition","shouldScroll","scrollToPosition","saveScrollPosition","pageXOffset","pageYOffset","getElementPosition","docEl","docRect","elRect","isValidPosition","isNumber","normalizePosition","normalizeOffset","hashStartsWithNumberRE","selector","scrollTo","supportsPushState","ua","pushState","runQueue","NavigationFailureType","redirected","aborted","duplicated","createNavigationRedirectedError","createRouterError","stringifyRoute","createNavigationDuplicatedError","createNavigationCancelledError","createNavigationAbortedError","_isRouter","propertiesToLog","isError","isNavigationFailure","errorType","resolveAsyncComponents","hasAsync","flatMapComponents","resolvedDef","isESModule","flatten","History","normalizeBase","ready","readyCbs","readyErrorCbs","errorCbs","baseEl","resolveQueue","activated","deactivated","extractGuards","records","guards","guard","extractGuard","extractLeaveGuards","bindGuard","extractUpdateHooks","extractEnterGuards","bindEnterGuard","listen","onReady","errorCb","transitionTo","onComplete","onAbort","prev","confirmTransition","updateRoute","ensureURL","afterHooks","abort","lastRouteIndex","lastCurrentIndex","beforeHooks","enterGuards","resolveHooks","setupListeners","cleanupListener","HTML5History","_startLocation","expectScroll","supportsScroll","handleRoutingEvent","go","fromRoute","getCurrentLocation","pathname","search","HashHistory","checkFallback","ensureSlash","getHash","replaceHash","eventType","pushHash","getUrl","AbstractHistory","targetIndex","VueRouter","apps","matcher","registerHook","createHref","handleInitialScroll","routeOrError","beforeEach","beforeResolve","afterEach","back","forward","getMatchedComponents","normalizedTo","START_LOCATION","getGlobal","fetch","Headers","Response","g","nameStartChar","nameChar","tagNamePattern","S_TAG","S_ATTR","S_ATTR_SPACE","S_EQ","S_ATTR_NOQUOT_VALUE","S_ATTR_END","S_TAG_SPACE","S_TAG_CLOSE","defaultNSMapCopy","fixedFromCharCode","surrogate1","surrogate2","fromCharCode","entityReplacer","appendText","xt","lineEnd","linePattern","lineStart","parseStack","currentNSMap","closeMap","tagStart","localNSMap","endMatch","endIgnoreCaseMach","parseInstruction","parseDCC","ElementAttributes","parseElementStartPart","closed","fixSelfClosed","locator2","copyLocator","parseHtmlSpecialContent","attrName","setTagName","nsp","_copy","elStartEnd","elEndStart","matchs","lastMatch","endDTD","_set_proto_","thiz","reg","getLocalName","normalizeArray","allowAboveRoot","up","basename","matchedSlash","xs","resolvedAbsolute","isAbsolute","trailingSlash","paths","fromParts","toParts","min","samePartsLength","outputParts","dirname","hasRoot","ext","extname","startDot","startPart","preDotState"],"mappings":"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","file":"js/chunk-vendors.27293f5f.js","sourcesContent":["/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n * @version   v4.2.8+1e68dce6\n */\n\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.ES6Promise = factory());\n}(this, (function () { 'use strict';\n\nfunction objectOrFunction(x) {\n  var type = typeof x;\n  return x !== null && (type === 'object' || type === 'function');\n}\n\nfunction isFunction(x) {\n  return typeof x === 'function';\n}\n\n\n\nvar _isArray = void 0;\nif (Array.isArray) {\n  _isArray = Array.isArray;\n} else {\n  _isArray = function (x) {\n    return Object.prototype.toString.call(x) === '[object Array]';\n  };\n}\n\nvar isArray = _isArray;\n\nvar len = 0;\nvar vertxNext = void 0;\nvar customSchedulerFn = void 0;\n\nvar asap = function asap(callback, arg) {\n  queue[len] = callback;\n  queue[len + 1] = arg;\n  len += 2;\n  if (len === 2) {\n    // If len is 2, that means that we need to schedule an async flush.\n    // If additional callbacks are queued before the queue is flushed, they\n    // will be processed by this flush that we are scheduling.\n    if (customSchedulerFn) {\n      customSchedulerFn(flush);\n    } else {\n      scheduleFlush();\n    }\n  }\n};\n\nfunction setScheduler(scheduleFn) {\n  customSchedulerFn = scheduleFn;\n}\n\nfunction setAsap(asapFn) {\n  asap = asapFn;\n}\n\nvar browserWindow = typeof window !== 'undefined' ? window : undefined;\nvar browserGlobal = browserWindow || {};\nvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\nvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';\n\n// test for web worker but not in IE10\nvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n// node\nfunction useNextTick() {\n  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n  // see https://github.com/cujojs/when/issues/410 for details\n  return function () {\n    return process.nextTick(flush);\n  };\n}\n\n// vertx\nfunction useVertxTimer() {\n  if (typeof vertxNext !== 'undefined') {\n    return function () {\n      vertxNext(flush);\n    };\n  }\n\n  return useSetTimeout();\n}\n\nfunction useMutationObserver() {\n  var iterations = 0;\n  var observer = new BrowserMutationObserver(flush);\n  var node = document.createTextNode('');\n  observer.observe(node, { characterData: true });\n\n  return function () {\n    node.data = iterations = ++iterations % 2;\n  };\n}\n\n// web worker\nfunction useMessageChannel() {\n  var channel = new MessageChannel();\n  channel.port1.onmessage = flush;\n  return function () {\n    return channel.port2.postMessage(0);\n  };\n}\n\nfunction useSetTimeout() {\n  // Store setTimeout reference so es6-promise will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var globalSetTimeout = setTimeout;\n  return function () {\n    return globalSetTimeout(flush, 1);\n  };\n}\n\nvar queue = new Array(1000);\nfunction flush() {\n  for (var i = 0; i < len; i += 2) {\n    var callback = queue[i];\n    var arg = queue[i + 1];\n\n    callback(arg);\n\n    queue[i] = undefined;\n    queue[i + 1] = undefined;\n  }\n\n  len = 0;\n}\n\nfunction attemptVertx() {\n  try {\n    var vertx = Function('return this')().require('vertx');\n    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n    return useVertxTimer();\n  } catch (e) {\n    return useSetTimeout();\n  }\n}\n\nvar scheduleFlush = void 0;\n// Decide what async method to use to triggering processing of queued callbacks:\nif (isNode) {\n  scheduleFlush = useNextTick();\n} else if (BrowserMutationObserver) {\n  scheduleFlush = useMutationObserver();\n} else if (isWorker) {\n  scheduleFlush = useMessageChannel();\n} else if (browserWindow === undefined && typeof require === 'function') {\n  scheduleFlush = attemptVertx();\n} else {\n  scheduleFlush = useSetTimeout();\n}\n\nfunction then(onFulfillment, onRejection) {\n  var parent = this;\n\n  var child = new this.constructor(noop);\n\n  if (child[PROMISE_ID] === undefined) {\n    makePromise(child);\n  }\n\n  var _state = parent._state;\n\n\n  if (_state) {\n    var callback = arguments[_state - 1];\n    asap(function () {\n      return invokeCallback(_state, child, callback, parent._result);\n    });\n  } else {\n    subscribe(parent, child, onFulfillment, onRejection);\n  }\n\n  return child;\n}\n\n/**\n  `Promise.resolve` returns a promise that will become resolved with the\n  passed `value`. It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    resolve(1);\n  });\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.resolve(1);\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  @method resolve\n  @static\n  @param {Any} value value that the returned promise will be resolved with\n  Useful for tooling.\n  @return {Promise} a promise that will become fulfilled with the given\n  `value`\n*/\nfunction resolve$1(object) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (object && typeof object === 'object' && object.constructor === Constructor) {\n    return object;\n  }\n\n  var promise = new Constructor(noop);\n  resolve(promise, object);\n  return promise;\n}\n\nvar PROMISE_ID = Math.random().toString(36).substring(2);\n\nfunction noop() {}\n\nvar PENDING = void 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\n\nfunction selfFulfillment() {\n  return new TypeError(\"You cannot resolve a promise with itself\");\n}\n\nfunction cannotReturnOwn() {\n  return new TypeError('A promises callback cannot return that same promise.');\n}\n\nfunction tryThen(then$$1, value, fulfillmentHandler, rejectionHandler) {\n  try {\n    then$$1.call(value, fulfillmentHandler, rejectionHandler);\n  } catch (e) {\n    return e;\n  }\n}\n\nfunction handleForeignThenable(promise, thenable, then$$1) {\n  asap(function (promise) {\n    var sealed = false;\n    var error = tryThen(then$$1, thenable, function (value) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n      if (thenable !== value) {\n        resolve(promise, value);\n      } else {\n        fulfill(promise, value);\n      }\n    }, function (reason) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n\n      reject(promise, reason);\n    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n    if (!sealed && error) {\n      sealed = true;\n      reject(promise, error);\n    }\n  }, promise);\n}\n\nfunction handleOwnThenable(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === REJECTED) {\n    reject(promise, thenable._result);\n  } else {\n    subscribe(thenable, undefined, function (value) {\n      return resolve(promise, value);\n    }, function (reason) {\n      return reject(promise, reason);\n    });\n  }\n}\n\nfunction handleMaybeThenable(promise, maybeThenable, then$$1) {\n  if (maybeThenable.constructor === promise.constructor && then$$1 === then && maybeThenable.constructor.resolve === resolve$1) {\n    handleOwnThenable(promise, maybeThenable);\n  } else {\n    if (then$$1 === undefined) {\n      fulfill(promise, maybeThenable);\n    } else if (isFunction(then$$1)) {\n      handleForeignThenable(promise, maybeThenable, then$$1);\n    } else {\n      fulfill(promise, maybeThenable);\n    }\n  }\n}\n\nfunction resolve(promise, value) {\n  if (promise === value) {\n    reject(promise, selfFulfillment());\n  } else if (objectOrFunction(value)) {\n    var then$$1 = void 0;\n    try {\n      then$$1 = value.then;\n    } catch (error) {\n      reject(promise, error);\n      return;\n    }\n    handleMaybeThenable(promise, value, then$$1);\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nfunction publishRejection(promise) {\n  if (promise._onerror) {\n    promise._onerror(promise._result);\n  }\n\n  publish(promise);\n}\n\nfunction fulfill(promise, value) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n\n  promise._result = value;\n  promise._state = FULFILLED;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nfunction reject(promise, reason) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n  promise._state = REJECTED;\n  promise._result = reason;\n\n  asap(publishRejection, promise);\n}\n\nfunction subscribe(parent, child, onFulfillment, onRejection) {\n  var _subscribers = parent._subscribers;\n  var length = _subscribers.length;\n\n\n  parent._onerror = null;\n\n  _subscribers[length] = child;\n  _subscribers[length + FULFILLED] = onFulfillment;\n  _subscribers[length + REJECTED] = onRejection;\n\n  if (length === 0 && parent._state) {\n    asap(publish, parent);\n  }\n}\n\nfunction publish(promise) {\n  var subscribers = promise._subscribers;\n  var settled = promise._state;\n\n  if (subscribers.length === 0) {\n    return;\n  }\n\n  var child = void 0,\n      callback = void 0,\n      detail = promise._result;\n\n  for (var i = 0; i < subscribers.length; i += 3) {\n    child = subscribers[i];\n    callback = subscribers[i + settled];\n\n    if (child) {\n      invokeCallback(settled, child, callback, detail);\n    } else {\n      callback(detail);\n    }\n  }\n\n  promise._subscribers.length = 0;\n}\n\nfunction invokeCallback(settled, promise, callback, detail) {\n  var hasCallback = isFunction(callback),\n      value = void 0,\n      error = void 0,\n      succeeded = true;\n\n  if (hasCallback) {\n    try {\n      value = callback(detail);\n    } catch (e) {\n      succeeded = false;\n      error = e;\n    }\n\n    if (promise === value) {\n      reject(promise, cannotReturnOwn());\n      return;\n    }\n  } else {\n    value = detail;\n  }\n\n  if (promise._state !== PENDING) {\n    // noop\n  } else if (hasCallback && succeeded) {\n    resolve(promise, value);\n  } else if (succeeded === false) {\n    reject(promise, error);\n  } else if (settled === FULFILLED) {\n    fulfill(promise, value);\n  } else if (settled === REJECTED) {\n    reject(promise, value);\n  }\n}\n\nfunction initializePromise(promise, resolver) {\n  try {\n    resolver(function resolvePromise(value) {\n      resolve(promise, value);\n    }, function rejectPromise(reason) {\n      reject(promise, reason);\n    });\n  } catch (e) {\n    reject(promise, e);\n  }\n}\n\nvar id = 0;\nfunction nextId() {\n  return id++;\n}\n\nfunction makePromise(promise) {\n  promise[PROMISE_ID] = id++;\n  promise._state = undefined;\n  promise._result = undefined;\n  promise._subscribers = [];\n}\n\nfunction validationError() {\n  return new Error('Array Methods must be provided an Array');\n}\n\nvar Enumerator = function () {\n  function Enumerator(Constructor, input) {\n    this._instanceConstructor = Constructor;\n    this.promise = new Constructor(noop);\n\n    if (!this.promise[PROMISE_ID]) {\n      makePromise(this.promise);\n    }\n\n    if (isArray(input)) {\n      this.length = input.length;\n      this._remaining = input.length;\n\n      this._result = new Array(this.length);\n\n      if (this.length === 0) {\n        fulfill(this.promise, this._result);\n      } else {\n        this.length = this.length || 0;\n        this._enumerate(input);\n        if (this._remaining === 0) {\n          fulfill(this.promise, this._result);\n        }\n      }\n    } else {\n      reject(this.promise, validationError());\n    }\n  }\n\n  Enumerator.prototype._enumerate = function _enumerate(input) {\n    for (var i = 0; this._state === PENDING && i < input.length; i++) {\n      this._eachEntry(input[i], i);\n    }\n  };\n\n  Enumerator.prototype._eachEntry = function _eachEntry(entry, i) {\n    var c = this._instanceConstructor;\n    var resolve$$1 = c.resolve;\n\n\n    if (resolve$$1 === resolve$1) {\n      var _then = void 0;\n      var error = void 0;\n      var didError = false;\n      try {\n        _then = entry.then;\n      } catch (e) {\n        didError = true;\n        error = e;\n      }\n\n      if (_then === then && entry._state !== PENDING) {\n        this._settledAt(entry._state, i, entry._result);\n      } else if (typeof _then !== 'function') {\n        this._remaining--;\n        this._result[i] = entry;\n      } else if (c === Promise$1) {\n        var promise = new c(noop);\n        if (didError) {\n          reject(promise, error);\n        } else {\n          handleMaybeThenable(promise, entry, _then);\n        }\n        this._willSettleAt(promise, i);\n      } else {\n        this._willSettleAt(new c(function (resolve$$1) {\n          return resolve$$1(entry);\n        }), i);\n      }\n    } else {\n      this._willSettleAt(resolve$$1(entry), i);\n    }\n  };\n\n  Enumerator.prototype._settledAt = function _settledAt(state, i, value) {\n    var promise = this.promise;\n\n\n    if (promise._state === PENDING) {\n      this._remaining--;\n\n      if (state === REJECTED) {\n        reject(promise, value);\n      } else {\n        this._result[i] = value;\n      }\n    }\n\n    if (this._remaining === 0) {\n      fulfill(promise, this._result);\n    }\n  };\n\n  Enumerator.prototype._willSettleAt = function _willSettleAt(promise, i) {\n    var enumerator = this;\n\n    subscribe(promise, undefined, function (value) {\n      return enumerator._settledAt(FULFILLED, i, value);\n    }, function (reason) {\n      return enumerator._settledAt(REJECTED, i, reason);\n    });\n  };\n\n  return Enumerator;\n}();\n\n/**\n  `Promise.all` accepts an array of promises, and returns a new promise which\n  is fulfilled with an array of fulfillment values for the passed promises, or\n  rejected with the reason of the first passed promise to be rejected. It casts all\n  elements of the passed iterable to promises as it runs this algorithm.\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = resolve(2);\n  let promise3 = resolve(3);\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // The array here would be [ 1, 2, 3 ];\n  });\n  ```\n\n  If any of the `promises` given to `all` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promises's\n  rejection handler. For example:\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = reject(new Error(\"2\"));\n  let promise3 = reject(new Error(\"3\"));\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(error) {\n    // error.message === \"2\"\n  });\n  ```\n\n  @method all\n  @static\n  @param {Array} entries array of promises\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when all `promises` have been\n  fulfilled, or rejected if any of them become rejected.\n  @static\n*/\nfunction all(entries) {\n  return new Enumerator(this, entries).promise;\n}\n\n/**\n  `Promise.race` returns a new promise which is settled in the same way as the\n  first passed promise to settle.\n\n  Example:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 2');\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // result === 'promise 2' because it was resolved before promise1\n    // was resolved.\n  });\n  ```\n\n  `Promise.race` is deterministic in that only the state of the first\n  settled promise matters. For example, even if other promises given to the\n  `promises` array argument are resolved, but the first settled promise has\n  become rejected before the other promises became fulfilled, the returned\n  promise will become rejected:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      reject(new Error('promise 2'));\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // Code here never runs\n  }, function(reason){\n    // reason.message === 'promise 2' because promise 2 became rejected before\n    // promise 1 became fulfilled\n  });\n  ```\n\n  An example real-world use case is implementing timeouts:\n\n  ```javascript\n  Promise.race([ajax('foo.json'), timeout(5000)])\n  ```\n\n  @method race\n  @static\n  @param {Array} promises array of promises to observe\n  Useful for tooling.\n  @return {Promise} a promise which settles in the same way as the first passed\n  promise to settle.\n*/\nfunction race(entries) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (!isArray(entries)) {\n    return new Constructor(function (_, reject) {\n      return reject(new TypeError('You must pass an array to race.'));\n    });\n  } else {\n    return new Constructor(function (resolve, reject) {\n      var length = entries.length;\n      for (var i = 0; i < length; i++) {\n        Constructor.resolve(entries[i]).then(resolve, reject);\n      }\n    });\n  }\n}\n\n/**\n  `Promise.reject` returns a promise rejected with the passed `reason`.\n  It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    reject(new Error('WHOOPS'));\n  });\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.reject(new Error('WHOOPS'));\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  @method reject\n  @static\n  @param {Any} reason value that the returned promise will be rejected with.\n  Useful for tooling.\n  @return {Promise} a promise rejected with the given `reason`.\n*/\nfunction reject$1(reason) {\n  /*jshint validthis:true */\n  var Constructor = this;\n  var promise = new Constructor(noop);\n  reject(promise, reason);\n  return promise;\n}\n\nfunction needsResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n}\n\nfunction needsNew() {\n  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n}\n\n/**\n  Promise objects represent the eventual result of an asynchronous operation. The\n  primary way of interacting with a promise is through its `then` method, which\n  registers callbacks to receive either a promise's eventual value or the reason\n  why the promise cannot be fulfilled.\n\n  Terminology\n  -----------\n\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n  - `thenable` is an object or function that defines a `then` method.\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n  - `exception` is a value that is thrown using the throw statement.\n  - `reason` is a value that indicates why a promise was rejected.\n  - `settled` the final resting state of a promise, fulfilled or rejected.\n\n  A promise can be in one of three states: pending, fulfilled, or rejected.\n\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n  state.  Promises that are rejected have a rejection reason and are in the\n  rejected state.  A fulfillment value is never a thenable.\n\n  Promises can also be said to *resolve* a value.  If this value is also a\n  promise, then the original promise's settled state will match the value's\n  settled state.  So a promise that *resolves* a promise that rejects will\n  itself reject, and a promise that *resolves* a promise that fulfills will\n  itself fulfill.\n\n\n  Basic Usage:\n  ------------\n\n  ```js\n  let promise = new Promise(function(resolve, reject) {\n    // on success\n    resolve(value);\n\n    // on failure\n    reject(reason);\n  });\n\n  promise.then(function(value) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Advanced Usage:\n  ---------------\n\n  Promises shine when abstracting away asynchronous interactions such as\n  `XMLHttpRequest`s.\n\n  ```js\n  function getJSON(url) {\n    return new Promise(function(resolve, reject){\n      let xhr = new XMLHttpRequest();\n\n      xhr.open('GET', url);\n      xhr.onreadystatechange = handler;\n      xhr.responseType = 'json';\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send();\n\n      function handler() {\n        if (this.readyState === this.DONE) {\n          if (this.status === 200) {\n            resolve(this.response);\n          } else {\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n          }\n        }\n      };\n    });\n  }\n\n  getJSON('/posts.json').then(function(json) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Unlike callbacks, promises are great composable primitives.\n\n  ```js\n  Promise.all([\n    getJSON('/posts'),\n    getJSON('/comments')\n  ]).then(function(values){\n    values[0] // => postsJSON\n    values[1] // => commentsJSON\n\n    return values;\n  });\n  ```\n\n  @class Promise\n  @param {Function} resolver\n  Useful for tooling.\n  @constructor\n*/\n\nvar Promise$1 = function () {\n  function Promise(resolver) {\n    this[PROMISE_ID] = nextId();\n    this._result = this._state = undefined;\n    this._subscribers = [];\n\n    if (noop !== resolver) {\n      typeof resolver !== 'function' && needsResolver();\n      this instanceof Promise ? initializePromise(this, resolver) : needsNew();\n    }\n  }\n\n  /**\n  The primary way of interacting with a promise is through its `then` method,\n  which registers callbacks to receive either a promise's eventual value or the\n  reason why the promise cannot be fulfilled.\n   ```js\n  findUser().then(function(user){\n    // user is available\n  }, function(reason){\n    // user is unavailable, and you are given the reason why\n  });\n  ```\n   Chaining\n  --------\n   The return value of `then` is itself a promise.  This second, 'downstream'\n  promise is resolved with the return value of the first promise's fulfillment\n  or rejection handler, or rejected if the handler throws an exception.\n   ```js\n  findUser().then(function (user) {\n    return user.name;\n  }, function (reason) {\n    return 'default name';\n  }).then(function (userName) {\n    // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n    // will be `'default name'`\n  });\n   findUser().then(function (user) {\n    throw new Error('Found user, but still unhappy');\n  }, function (reason) {\n    throw new Error('`findUser` rejected and we're unhappy');\n  }).then(function (value) {\n    // never reached\n  }, function (reason) {\n    // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n    // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n  });\n  ```\n  If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n   ```js\n  findUser().then(function (user) {\n    throw new PedagogicalException('Upstream error');\n  }).then(function (value) {\n    // never reached\n  }).then(function (value) {\n    // never reached\n  }, function (reason) {\n    // The `PedgagocialException` is propagated all the way down to here\n  });\n  ```\n   Assimilation\n  ------------\n   Sometimes the value you want to propagate to a downstream promise can only be\n  retrieved asynchronously. This can be achieved by returning a promise in the\n  fulfillment or rejection handler. The downstream promise will then be pending\n  until the returned promise is settled. This is called *assimilation*.\n   ```js\n  findUser().then(function (user) {\n    return findCommentsByAuthor(user);\n  }).then(function (comments) {\n    // The user's comments are now available\n  });\n  ```\n   If the assimliated promise rejects, then the downstream promise will also reject.\n   ```js\n  findUser().then(function (user) {\n    return findCommentsByAuthor(user);\n  }).then(function (comments) {\n    // If `findCommentsByAuthor` fulfills, we'll have the value here\n  }, function (reason) {\n    // If `findCommentsByAuthor` rejects, we'll have the reason here\n  });\n  ```\n   Simple Example\n  --------------\n   Synchronous Example\n   ```javascript\n  let result;\n   try {\n    result = findResult();\n    // success\n  } catch(reason) {\n    // failure\n  }\n  ```\n   Errback Example\n   ```js\n  findResult(function(result, err){\n    if (err) {\n      // failure\n    } else {\n      // success\n    }\n  });\n  ```\n   Promise Example;\n   ```javascript\n  findResult().then(function(result){\n    // success\n  }, function(reason){\n    // failure\n  });\n  ```\n   Advanced Example\n  --------------\n   Synchronous Example\n   ```javascript\n  let author, books;\n   try {\n    author = findAuthor();\n    books  = findBooksByAuthor(author);\n    // success\n  } catch(reason) {\n    // failure\n  }\n  ```\n   Errback Example\n   ```js\n   function foundBooks(books) {\n   }\n   function failure(reason) {\n   }\n   findAuthor(function(author, err){\n    if (err) {\n      failure(err);\n      // failure\n    } else {\n      try {\n        findBoooksByAuthor(author, function(books, err) {\n          if (err) {\n            failure(err);\n          } else {\n            try {\n              foundBooks(books);\n            } catch(reason) {\n              failure(reason);\n            }\n          }\n        });\n      } catch(error) {\n        failure(err);\n      }\n      // success\n    }\n  });\n  ```\n   Promise Example;\n   ```javascript\n  findAuthor().\n    then(findBooksByAuthor).\n    then(function(books){\n      // found books\n  }).catch(function(reason){\n    // something went wrong\n  });\n  ```\n   @method then\n  @param {Function} onFulfilled\n  @param {Function} onRejected\n  Useful for tooling.\n  @return {Promise}\n  */\n\n  /**\n  `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n  as the catch block of a try/catch statement.\n  ```js\n  function findAuthor(){\n  throw new Error('couldn't find that author');\n  }\n  // synchronous\n  try {\n  findAuthor();\n  } catch(reason) {\n  // something went wrong\n  }\n  // async with promises\n  findAuthor().catch(function(reason){\n  // something went wrong\n  });\n  ```\n  @method catch\n  @param {Function} onRejection\n  Useful for tooling.\n  @return {Promise}\n  */\n\n\n  Promise.prototype.catch = function _catch(onRejection) {\n    return this.then(null, onRejection);\n  };\n\n  /**\n    `finally` will be invoked regardless of the promise's fate just as native\n    try/catch/finally behaves\n  \n    Synchronous example:\n  \n    ```js\n    findAuthor() {\n      if (Math.random() > 0.5) {\n        throw new Error();\n      }\n      return new Author();\n    }\n  \n    try {\n      return findAuthor(); // succeed or fail\n    } catch(error) {\n      return findOtherAuther();\n    } finally {\n      // always runs\n      // doesn't affect the return value\n    }\n    ```\n  \n    Asynchronous example:\n  \n    ```js\n    findAuthor().catch(function(reason){\n      return findOtherAuther();\n    }).finally(function(){\n      // author was either found, or not\n    });\n    ```\n  \n    @method finally\n    @param {Function} callback\n    @return {Promise}\n  */\n\n\n  Promise.prototype.finally = function _finally(callback) {\n    var promise = this;\n    var constructor = promise.constructor;\n\n    if (isFunction(callback)) {\n      return promise.then(function (value) {\n        return constructor.resolve(callback()).then(function () {\n          return value;\n        });\n      }, function (reason) {\n        return constructor.resolve(callback()).then(function () {\n          throw reason;\n        });\n      });\n    }\n\n    return promise.then(callback, callback);\n  };\n\n  return Promise;\n}();\n\nPromise$1.prototype.then = then;\nPromise$1.all = all;\nPromise$1.race = race;\nPromise$1.resolve = resolve$1;\nPromise$1.reject = reject$1;\nPromise$1._setScheduler = setScheduler;\nPromise$1._setAsap = setAsap;\nPromise$1._asap = asap;\n\n/*global self*/\nfunction polyfill() {\n  var local = void 0;\n\n  if (typeof global !== 'undefined') {\n    local = global;\n  } else if (typeof self !== 'undefined') {\n    local = self;\n  } else {\n    try {\n      local = Function('return this')();\n    } catch (e) {\n      throw new Error('polyfill failed because global object is unavailable in this environment');\n    }\n  }\n\n  var P = local.Promise;\n\n  if (P) {\n    var promiseToString = null;\n    try {\n      promiseToString = Object.prototype.toString.call(P.resolve());\n    } catch (e) {\n      // silently ignored\n    }\n\n    if (promiseToString === '[object Promise]' && !P.cast) {\n      return;\n    }\n  }\n\n  local.Promise = Promise$1;\n}\n\n// Strange compat..\nPromise$1.polyfill = polyfill;\nPromise$1.Promise = Promise$1;\n\nreturn Promise$1;\n\n})));\n\n\n\n//# sourceMappingURL=es6-promise.map\n","/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file (except for modules).\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nexport default function normalizeComponent (\n  scriptExports,\n  render,\n  staticRenderFns,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier, /* server only */\n  shadowMode /* vue-cli only */\n) {\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (render) {\n    options.render = render\n    options.staticRenderFns = staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = 'data-v-' + scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = shadowMode\n      ? function () {\n        injectStyles.call(\n          this,\n          (options.functional ? this.parent : this).$root.$options.shadowRoot\n        )\n      }\n      : injectStyles\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functional component in vue file\n      var originalRender = options.render\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return originalRender(h, context)\n      }\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    }\n  }\n\n  return {\n    exports: scriptExports,\n    options: options\n  }\n}\n","function DOMParser(options){\r\n\tthis.options = options ||{locator:{}};\r\n\t\r\n}\r\nDOMParser.prototype.parseFromString = function(source,mimeType){\r\n\tvar options = this.options;\r\n\tvar sax =  new XMLReader();\r\n\tvar domBuilder = options.domBuilder || new DOMHandler();//contentHandler and LexicalHandler\r\n\tvar errorHandler = options.errorHandler;\r\n\tvar locator = options.locator;\r\n\tvar defaultNSMap = options.xmlns||{};\r\n\tvar entityMap = {'lt':'<','gt':'>','amp':'&','quot':'\"','apos':\"'\"}\r\n\tif(locator){\r\n\t\tdomBuilder.setDocumentLocator(locator)\r\n\t}\r\n\t\r\n\tsax.errorHandler = buildErrorHandler(errorHandler,domBuilder,locator);\r\n\tsax.domBuilder = options.domBuilder || domBuilder;\r\n\tif(/\\/x?html?$/.test(mimeType)){\r\n\t\tentityMap.nbsp = '\\xa0';\r\n\t\tentityMap.copy = '\\xa9';\r\n\t\tdefaultNSMap['']= 'http://www.w3.org/1999/xhtml';\r\n\t}\r\n\tdefaultNSMap.xml = defaultNSMap.xml || 'http://www.w3.org/XML/1998/namespace';\r\n\tif(source){\r\n\t\tsax.parse(source,defaultNSMap,entityMap);\r\n\t}else{\r\n\t\tsax.errorHandler.error(\"invalid doc source\");\r\n\t}\r\n\treturn domBuilder.doc;\r\n}\r\nfunction buildErrorHandler(errorImpl,domBuilder,locator){\r\n\tif(!errorImpl){\r\n\t\tif(domBuilder instanceof DOMHandler){\r\n\t\t\treturn domBuilder;\r\n\t\t}\r\n\t\terrorImpl = domBuilder ;\r\n\t}\r\n\tvar errorHandler = {}\r\n\tvar isCallback = errorImpl instanceof Function;\r\n\tlocator = locator||{}\r\n\tfunction build(key){\r\n\t\tvar fn = errorImpl[key];\r\n\t\tif(!fn && isCallback){\r\n\t\t\tfn = errorImpl.length == 2?function(msg){errorImpl(key,msg)}:errorImpl;\r\n\t\t}\r\n\t\terrorHandler[key] = fn && function(msg){\r\n\t\t\tfn('[xmldom '+key+']\\t'+msg+_locator(locator));\r\n\t\t}||function(){};\r\n\t}\r\n\tbuild('warning');\r\n\tbuild('error');\r\n\tbuild('fatalError');\r\n\treturn errorHandler;\r\n}\r\n\r\n//console.log('#\\n\\n\\n\\n\\n\\n\\n####')\r\n/**\r\n * +ContentHandler+ErrorHandler\r\n * +LexicalHandler+EntityResolver2\r\n * -DeclHandler-DTDHandler \r\n * \r\n * DefaultHandler:EntityResolver, DTDHandler, ContentHandler, ErrorHandler\r\n * DefaultHandler2:DefaultHandler,LexicalHandler, DeclHandler, EntityResolver2\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/helpers/DefaultHandler.html\r\n */\r\nfunction DOMHandler() {\r\n    this.cdata = false;\r\n}\r\nfunction position(locator,node){\r\n\tnode.lineNumber = locator.lineNumber;\r\n\tnode.columnNumber = locator.columnNumber;\r\n}\r\n/**\r\n * @see org.xml.sax.ContentHandler#startDocument\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html\r\n */ \r\nDOMHandler.prototype = {\r\n\tstartDocument : function() {\r\n    \tthis.doc = new DOMImplementation().createDocument(null, null, null);\r\n    \tif (this.locator) {\r\n        \tthis.doc.documentURI = this.locator.systemId;\r\n    \t}\r\n\t},\r\n\tstartElement:function(namespaceURI, localName, qName, attrs) {\r\n\t\tvar doc = this.doc;\r\n\t    var el = doc.createElementNS(namespaceURI, qName||localName);\r\n\t    var len = attrs.length;\r\n\t    appendElement(this, el);\r\n\t    this.currentElement = el;\r\n\t    \r\n\t\tthis.locator && position(this.locator,el)\r\n\t    for (var i = 0 ; i < len; i++) {\r\n\t        var namespaceURI = attrs.getURI(i);\r\n\t        var value = attrs.getValue(i);\r\n\t        var qName = attrs.getQName(i);\r\n\t\t\tvar attr = doc.createAttributeNS(namespaceURI, qName);\r\n\t\t\tthis.locator &&position(attrs.getLocator(i),attr);\r\n\t\t\tattr.value = attr.nodeValue = value;\r\n\t\t\tel.setAttributeNode(attr)\r\n\t    }\r\n\t},\r\n\tendElement:function(namespaceURI, localName, qName) {\r\n\t\tvar current = this.currentElement\r\n\t\tvar tagName = current.tagName;\r\n\t\tthis.currentElement = current.parentNode;\r\n\t},\r\n\tstartPrefixMapping:function(prefix, uri) {\r\n\t},\r\n\tendPrefixMapping:function(prefix) {\r\n\t},\r\n\tprocessingInstruction:function(target, data) {\r\n\t    var ins = this.doc.createProcessingInstruction(target, data);\r\n\t    this.locator && position(this.locator,ins)\r\n\t    appendElement(this, ins);\r\n\t},\r\n\tignorableWhitespace:function(ch, start, length) {\r\n\t},\r\n\tcharacters:function(chars, start, length) {\r\n\t\tchars = _toString.apply(this,arguments)\r\n\t\t//console.log(chars)\r\n\t\tif(chars){\r\n\t\t\tif (this.cdata) {\r\n\t\t\t\tvar charNode = this.doc.createCDATASection(chars);\r\n\t\t\t} else {\r\n\t\t\t\tvar charNode = this.doc.createTextNode(chars);\r\n\t\t\t}\r\n\t\t\tif(this.currentElement){\r\n\t\t\t\tthis.currentElement.appendChild(charNode);\r\n\t\t\t}else if(/^\\s*$/.test(chars)){\r\n\t\t\t\tthis.doc.appendChild(charNode);\r\n\t\t\t\t//process xml\r\n\t\t\t}\r\n\t\t\tthis.locator && position(this.locator,charNode)\r\n\t\t}\r\n\t},\r\n\tskippedEntity:function(name) {\r\n\t},\r\n\tendDocument:function() {\r\n\t\tthis.doc.normalize();\r\n\t},\r\n\tsetDocumentLocator:function (locator) {\r\n\t    if(this.locator = locator){// && !('lineNumber' in locator)){\r\n\t    \tlocator.lineNumber = 0;\r\n\t    }\r\n\t},\r\n\t//LexicalHandler\r\n\tcomment:function(chars, start, length) {\r\n\t\tchars = _toString.apply(this,arguments)\r\n\t    var comm = this.doc.createComment(chars);\r\n\t    this.locator && position(this.locator,comm)\r\n\t    appendElement(this, comm);\r\n\t},\r\n\t\r\n\tstartCDATA:function() {\r\n\t    //used in characters() methods\r\n\t    this.cdata = true;\r\n\t},\r\n\tendCDATA:function() {\r\n\t    this.cdata = false;\r\n\t},\r\n\t\r\n\tstartDTD:function(name, publicId, systemId) {\r\n\t\tvar impl = this.doc.implementation;\r\n\t    if (impl && impl.createDocumentType) {\r\n\t        var dt = impl.createDocumentType(name, publicId, systemId);\r\n\t        this.locator && position(this.locator,dt)\r\n\t        appendElement(this, dt);\r\n\t    }\r\n\t},\r\n\t/**\r\n\t * @see org.xml.sax.ErrorHandler\r\n\t * @link http://www.saxproject.org/apidoc/org/xml/sax/ErrorHandler.html\r\n\t */\r\n\twarning:function(error) {\r\n\t\tconsole.warn('[xmldom warning]\\t'+error,_locator(this.locator));\r\n\t},\r\n\terror:function(error) {\r\n\t\tconsole.error('[xmldom error]\\t'+error,_locator(this.locator));\r\n\t},\r\n\tfatalError:function(error) {\r\n\t\tconsole.error('[xmldom fatalError]\\t'+error,_locator(this.locator));\r\n\t    throw error;\r\n\t}\r\n}\r\nfunction _locator(l){\r\n\tif(l){\r\n\t\treturn '\\n@'+(l.systemId ||'')+'#[line:'+l.lineNumber+',col:'+l.columnNumber+']'\r\n\t}\r\n}\r\nfunction _toString(chars,start,length){\r\n\tif(typeof chars == 'string'){\r\n\t\treturn chars.substr(start,length)\r\n\t}else{//java sax connect width xmldom on rhino(what about: \"? && !(chars instanceof String)\")\r\n\t\tif(chars.length >= start+length || start){\r\n\t\t\treturn new java.lang.String(chars,start,length)+'';\r\n\t\t}\r\n\t\treturn chars;\r\n\t}\r\n}\r\n\r\n/*\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/LexicalHandler.html\r\n * used method of org.xml.sax.ext.LexicalHandler:\r\n *  #comment(chars, start, length)\r\n *  #startCDATA()\r\n *  #endCDATA()\r\n *  #startDTD(name, publicId, systemId)\r\n *\r\n *\r\n * IGNORED method of org.xml.sax.ext.LexicalHandler:\r\n *  #endDTD()\r\n *  #startEntity(name)\r\n *  #endEntity(name)\r\n *\r\n *\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/DeclHandler.html\r\n * IGNORED method of org.xml.sax.ext.DeclHandler\r\n * \t#attributeDecl(eName, aName, type, mode, value)\r\n *  #elementDecl(name, model)\r\n *  #externalEntityDecl(name, publicId, systemId)\r\n *  #internalEntityDecl(name, value)\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/EntityResolver2.html\r\n * IGNORED method of org.xml.sax.EntityResolver2\r\n *  #resolveEntity(String name,String publicId,String baseURI,String systemId)\r\n *  #resolveEntity(publicId, systemId)\r\n *  #getExternalSubset(name, baseURI)\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/DTDHandler.html\r\n * IGNORED method of org.xml.sax.DTDHandler\r\n *  #notationDecl(name, publicId, systemId) {};\r\n *  #unparsedEntityDecl(name, publicId, systemId, notationName) {};\r\n */\r\n\"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl\".replace(/\\w+/g,function(key){\r\n\tDOMHandler.prototype[key] = function(){return null}\r\n})\r\n\r\n/* Private static helpers treated below as private instance methods, so don't need to add these to the public API; we might use a Relator to also get rid of non-standard public properties */\r\nfunction appendElement (hander,node) {\r\n    if (!hander.currentElement) {\r\n        hander.doc.appendChild(node);\r\n    } else {\r\n        hander.currentElement.appendChild(node);\r\n    }\r\n}//appendChild and setAttributeNS are preformance key\r\n\r\n//if(typeof require == 'function'){\r\n\tvar XMLReader = require('./sax').XMLReader;\r\n\tvar DOMImplementation = exports.DOMImplementation = require('./dom').DOMImplementation;\r\n\texports.XMLSerializer = require('./dom').XMLSerializer ;\r\n\texports.DOMParser = DOMParser;\r\n//}\r\n","/*!\n * Vue.js v2.6.12\n * (c) 2014-2020 Evan You\n * Released under the MIT License.\n */\n/*  */\n\nvar emptyObject = Object.freeze({});\n\n// These helpers produce better VM code in JS engines due to their\n// explicitness and function inlining.\nfunction isUndef (v) {\n  return v === undefined || v === null\n}\n\nfunction isDef (v) {\n  return v !== undefined && v !== null\n}\n\nfunction isTrue (v) {\n  return v === true\n}\n\nfunction isFalse (v) {\n  return v === false\n}\n\n/**\n * Check if value is primitive.\n */\nfunction isPrimitive (value) {\n  return (\n    typeof value === 'string' ||\n    typeof value === 'number' ||\n    // $flow-disable-line\n    typeof value === 'symbol' ||\n    typeof value === 'boolean'\n  )\n}\n\n/**\n * Quick object check - this is primarily used to tell\n * Objects from primitive values when we know the value\n * is a JSON-compliant type.\n */\nfunction isObject (obj) {\n  return obj !== null && typeof obj === 'object'\n}\n\n/**\n * Get the raw type string of a value, e.g., [object Object].\n */\nvar _toString = Object.prototype.toString;\n\nfunction toRawType (value) {\n  return _toString.call(value).slice(8, -1)\n}\n\n/**\n * Strict object type check. Only returns true\n * for plain JavaScript objects.\n */\nfunction isPlainObject (obj) {\n  return _toString.call(obj) === '[object Object]'\n}\n\nfunction isRegExp (v) {\n  return _toString.call(v) === '[object RegExp]'\n}\n\n/**\n * Check if val is a valid array index.\n */\nfunction isValidArrayIndex (val) {\n  var n = parseFloat(String(val));\n  return n >= 0 && Math.floor(n) === n && isFinite(val)\n}\n\nfunction isPromise (val) {\n  return (\n    isDef(val) &&\n    typeof val.then === 'function' &&\n    typeof val.catch === 'function'\n  )\n}\n\n/**\n * Convert a value to a string that is actually rendered.\n */\nfunction toString (val) {\n  return val == null\n    ? ''\n    : Array.isArray(val) || (isPlainObject(val) && val.toString === _toString)\n      ? JSON.stringify(val, null, 2)\n      : String(val)\n}\n\n/**\n * Convert an input value to a number for persistence.\n * If the conversion fails, return original string.\n */\nfunction toNumber (val) {\n  var n = parseFloat(val);\n  return isNaN(n) ? val : n\n}\n\n/**\n * Make a map and return a function for checking if a key\n * is in that map.\n */\nfunction makeMap (\n  str,\n  expectsLowerCase\n) {\n  var map = Object.create(null);\n  var list = str.split(',');\n  for (var i = 0; i < list.length; i++) {\n    map[list[i]] = true;\n  }\n  return expectsLowerCase\n    ? function (val) { return map[val.toLowerCase()]; }\n    : function (val) { return map[val]; }\n}\n\n/**\n * Check if a tag is a built-in tag.\n */\nvar isBuiltInTag = makeMap('slot,component', true);\n\n/**\n * Check if an attribute is a reserved attribute.\n */\nvar isReservedAttribute = makeMap('key,ref,slot,slot-scope,is');\n\n/**\n * Remove an item from an array.\n */\nfunction remove (arr, item) {\n  if (arr.length) {\n    var index = arr.indexOf(item);\n    if (index > -1) {\n      return arr.splice(index, 1)\n    }\n  }\n}\n\n/**\n * Check whether an object has the property.\n */\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction hasOwn (obj, key) {\n  return hasOwnProperty.call(obj, key)\n}\n\n/**\n * Create a cached version of a pure function.\n */\nfunction cached (fn) {\n  var cache = Object.create(null);\n  return (function cachedFn (str) {\n    var hit = cache[str];\n    return hit || (cache[str] = fn(str))\n  })\n}\n\n/**\n * Camelize a hyphen-delimited string.\n */\nvar camelizeRE = /-(\\w)/g;\nvar camelize = cached(function (str) {\n  return str.replace(camelizeRE, function (_, c) { return c ? c.toUpperCase() : ''; })\n});\n\n/**\n * Capitalize a string.\n */\nvar capitalize = cached(function (str) {\n  return str.charAt(0).toUpperCase() + str.slice(1)\n});\n\n/**\n * Hyphenate a camelCase string.\n */\nvar hyphenateRE = /\\B([A-Z])/g;\nvar hyphenate = cached(function (str) {\n  return str.replace(hyphenateRE, '-$1').toLowerCase()\n});\n\n/**\n * Simple bind polyfill for environments that do not support it,\n * e.g., PhantomJS 1.x. Technically, we don't need this anymore\n * since native bind is now performant enough in most browsers.\n * But removing it would mean breaking code that was able to run in\n * PhantomJS 1.x, so this must be kept for backward compatibility.\n */\n\n/* istanbul ignore next */\nfunction polyfillBind (fn, ctx) {\n  function boundFn (a) {\n    var l = arguments.length;\n    return l\n      ? l > 1\n        ? fn.apply(ctx, arguments)\n        : fn.call(ctx, a)\n      : fn.call(ctx)\n  }\n\n  boundFn._length = fn.length;\n  return boundFn\n}\n\nfunction nativeBind (fn, ctx) {\n  return fn.bind(ctx)\n}\n\nvar bind = Function.prototype.bind\n  ? nativeBind\n  : polyfillBind;\n\n/**\n * Convert an Array-like object to a real Array.\n */\nfunction toArray (list, start) {\n  start = start || 0;\n  var i = list.length - start;\n  var ret = new Array(i);\n  while (i--) {\n    ret[i] = list[i + start];\n  }\n  return ret\n}\n\n/**\n * Mix properties into target object.\n */\nfunction extend (to, _from) {\n  for (var key in _from) {\n    to[key] = _from[key];\n  }\n  return to\n}\n\n/**\n * Merge an Array of Objects into a single Object.\n */\nfunction toObject (arr) {\n  var res = {};\n  for (var i = 0; i < arr.length; i++) {\n    if (arr[i]) {\n      extend(res, arr[i]);\n    }\n  }\n  return res\n}\n\n/* eslint-disable no-unused-vars */\n\n/**\n * Perform no operation.\n * Stubbing args to make Flow happy without leaving useless transpiled code\n * with ...rest (https://flow.org/blog/2017/05/07/Strict-Function-Call-Arity/).\n */\nfunction noop (a, b, c) {}\n\n/**\n * Always return false.\n */\nvar no = function (a, b, c) { return false; };\n\n/* eslint-enable no-unused-vars */\n\n/**\n * Return the same value.\n */\nvar identity = function (_) { return _; };\n\n/**\n * Check if two values are loosely equal - that is,\n * if they are plain objects, do they have the same shape?\n */\nfunction looseEqual (a, b) {\n  if (a === b) { return true }\n  var isObjectA = isObject(a);\n  var isObjectB = isObject(b);\n  if (isObjectA && isObjectB) {\n    try {\n      var isArrayA = Array.isArray(a);\n      var isArrayB = Array.isArray(b);\n      if (isArrayA && isArrayB) {\n        return a.length === b.length && a.every(function (e, i) {\n          return looseEqual(e, b[i])\n        })\n      } else if (a instanceof Date && b instanceof Date) {\n        return a.getTime() === b.getTime()\n      } else if (!isArrayA && !isArrayB) {\n        var keysA = Object.keys(a);\n        var keysB = Object.keys(b);\n        return keysA.length === keysB.length && keysA.every(function (key) {\n          return looseEqual(a[key], b[key])\n        })\n      } else {\n        /* istanbul ignore next */\n        return false\n      }\n    } catch (e) {\n      /* istanbul ignore next */\n      return false\n    }\n  } else if (!isObjectA && !isObjectB) {\n    return String(a) === String(b)\n  } else {\n    return false\n  }\n}\n\n/**\n * Return the first index at which a loosely equal value can be\n * found in the array (if value is a plain object, the array must\n * contain an object of the same shape), or -1 if it is not present.\n */\nfunction looseIndexOf (arr, val) {\n  for (var i = 0; i < arr.length; i++) {\n    if (looseEqual(arr[i], val)) { return i }\n  }\n  return -1\n}\n\n/**\n * Ensure a function is called only once.\n */\nfunction once (fn) {\n  var called = false;\n  return function () {\n    if (!called) {\n      called = true;\n      fn.apply(this, arguments);\n    }\n  }\n}\n\nvar SSR_ATTR = 'data-server-rendered';\n\nvar ASSET_TYPES = [\n  'component',\n  'directive',\n  'filter'\n];\n\nvar LIFECYCLE_HOOKS = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeDestroy',\n  'destroyed',\n  'activated',\n  'deactivated',\n  'errorCaptured',\n  'serverPrefetch'\n];\n\n/*  */\n\n\n\nvar config = ({\n  /**\n   * Option merge strategies (used in core/util/options)\n   */\n  // $flow-disable-line\n  optionMergeStrategies: Object.create(null),\n\n  /**\n   * Whether to suppress warnings.\n   */\n  silent: false,\n\n  /**\n   * Show production mode tip message on boot?\n   */\n  productionTip: process.env.NODE_ENV !== 'production',\n\n  /**\n   * Whether to enable devtools\n   */\n  devtools: process.env.NODE_ENV !== 'production',\n\n  /**\n   * Whether to record perf\n   */\n  performance: false,\n\n  /**\n   * Error handler for watcher errors\n   */\n  errorHandler: null,\n\n  /**\n   * Warn handler for watcher warns\n   */\n  warnHandler: null,\n\n  /**\n   * Ignore certain custom elements\n   */\n  ignoredElements: [],\n\n  /**\n   * Custom user key aliases for v-on\n   */\n  // $flow-disable-line\n  keyCodes: Object.create(null),\n\n  /**\n   * Check if a tag is reserved so that it cannot be registered as a\n   * component. This is platform-dependent and may be overwritten.\n   */\n  isReservedTag: no,\n\n  /**\n   * Check if an attribute is reserved so that it cannot be used as a component\n   * prop. This is platform-dependent and may be overwritten.\n   */\n  isReservedAttr: no,\n\n  /**\n   * Check if a tag is an unknown element.\n   * Platform-dependent.\n   */\n  isUnknownElement: no,\n\n  /**\n   * Get the namespace of an element\n   */\n  getTagNamespace: noop,\n\n  /**\n   * Parse the real tag name for the specific platform.\n   */\n  parsePlatformTagName: identity,\n\n  /**\n   * Check if an attribute must be bound using property, e.g. value\n   * Platform-dependent.\n   */\n  mustUseProp: no,\n\n  /**\n   * Perform updates asynchronously. Intended to be used by Vue Test Utils\n   * This will significantly reduce performance if set to false.\n   */\n  async: true,\n\n  /**\n   * Exposed for legacy reasons\n   */\n  _lifecycleHooks: LIFECYCLE_HOOKS\n});\n\n/*  */\n\n/**\n * unicode letters used for parsing html tags, component names and property paths.\n * using https://www.w3.org/TR/html53/semantics-scripting.html#potentialcustomelementname\n * skipping \\u10000-\\uEFFFF due to it freezing up PhantomJS\n */\nvar unicodeRegExp = /a-zA-Z\\u00B7\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u203F-\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD/;\n\n/**\n * Check if a string starts with $ or _\n */\nfunction isReserved (str) {\n  var c = (str + '').charCodeAt(0);\n  return c === 0x24 || c === 0x5F\n}\n\n/**\n * Define a property.\n */\nfunction def (obj, key, val, enumerable) {\n  Object.defineProperty(obj, key, {\n    value: val,\n    enumerable: !!enumerable,\n    writable: true,\n    configurable: true\n  });\n}\n\n/**\n * Parse simple path.\n */\nvar bailRE = new RegExp((\"[^\" + (unicodeRegExp.source) + \".$_\\\\d]\"));\nfunction parsePath (path) {\n  if (bailRE.test(path)) {\n    return\n  }\n  var segments = path.split('.');\n  return function (obj) {\n    for (var i = 0; i < segments.length; i++) {\n      if (!obj) { return }\n      obj = obj[segments[i]];\n    }\n    return obj\n  }\n}\n\n/*  */\n\n// can we use __proto__?\nvar hasProto = '__proto__' in {};\n\n// Browser environment sniffing\nvar inBrowser = typeof window !== 'undefined';\nvar inWeex = typeof WXEnvironment !== 'undefined' && !!WXEnvironment.platform;\nvar weexPlatform = inWeex && WXEnvironment.platform.toLowerCase();\nvar UA = inBrowser && window.navigator.userAgent.toLowerCase();\nvar isIE = UA && /msie|trident/.test(UA);\nvar isIE9 = UA && UA.indexOf('msie 9.0') > 0;\nvar isEdge = UA && UA.indexOf('edge/') > 0;\nvar isAndroid = (UA && UA.indexOf('android') > 0) || (weexPlatform === 'android');\nvar isIOS = (UA && /iphone|ipad|ipod|ios/.test(UA)) || (weexPlatform === 'ios');\nvar isChrome = UA && /chrome\\/\\d+/.test(UA) && !isEdge;\nvar isPhantomJS = UA && /phantomjs/.test(UA);\nvar isFF = UA && UA.match(/firefox\\/(\\d+)/);\n\n// Firefox has a \"watch\" function on Object.prototype...\nvar nativeWatch = ({}).watch;\n\nvar supportsPassive = false;\nif (inBrowser) {\n  try {\n    var opts = {};\n    Object.defineProperty(opts, 'passive', ({\n      get: function get () {\n        /* istanbul ignore next */\n        supportsPassive = true;\n      }\n    })); // https://github.com/facebook/flow/issues/285\n    window.addEventListener('test-passive', null, opts);\n  } catch (e) {}\n}\n\n// this needs to be lazy-evaled because vue may be required before\n// vue-server-renderer can set VUE_ENV\nvar _isServer;\nvar isServerRendering = function () {\n  if (_isServer === undefined) {\n    /* istanbul ignore if */\n    if (!inBrowser && !inWeex && typeof global !== 'undefined') {\n      // detect presence of vue-server-renderer and avoid\n      // Webpack shimming the process\n      _isServer = global['process'] && global['process'].env.VUE_ENV === 'server';\n    } else {\n      _isServer = false;\n    }\n  }\n  return _isServer\n};\n\n// detect devtools\nvar devtools = inBrowser && window.__VUE_DEVTOOLS_GLOBAL_HOOK__;\n\n/* istanbul ignore next */\nfunction isNative (Ctor) {\n  return typeof Ctor === 'function' && /native code/.test(Ctor.toString())\n}\n\nvar hasSymbol =\n  typeof Symbol !== 'undefined' && isNative(Symbol) &&\n  typeof Reflect !== 'undefined' && isNative(Reflect.ownKeys);\n\nvar _Set;\n/* istanbul ignore if */ // $flow-disable-line\nif (typeof Set !== 'undefined' && isNative(Set)) {\n  // use native Set when available.\n  _Set = Set;\n} else {\n  // a non-standard Set polyfill that only works with primitive keys.\n  _Set = /*@__PURE__*/(function () {\n    function Set () {\n      this.set = Object.create(null);\n    }\n    Set.prototype.has = function has (key) {\n      return this.set[key] === true\n    };\n    Set.prototype.add = function add (key) {\n      this.set[key] = true;\n    };\n    Set.prototype.clear = function clear () {\n      this.set = Object.create(null);\n    };\n\n    return Set;\n  }());\n}\n\n/*  */\n\nvar warn = noop;\nvar tip = noop;\nvar generateComponentTrace = (noop); // work around flow check\nvar formatComponentName = (noop);\n\nif (process.env.NODE_ENV !== 'production') {\n  var hasConsole = typeof console !== 'undefined';\n  var classifyRE = /(?:^|[-_])(\\w)/g;\n  var classify = function (str) { return str\n    .replace(classifyRE, function (c) { return c.toUpperCase(); })\n    .replace(/[-_]/g, ''); };\n\n  warn = function (msg, vm) {\n    var trace = vm ? generateComponentTrace(vm) : '';\n\n    if (config.warnHandler) {\n      config.warnHandler.call(null, msg, vm, trace);\n    } else if (hasConsole && (!config.silent)) {\n      console.error((\"[Vue warn]: \" + msg + trace));\n    }\n  };\n\n  tip = function (msg, vm) {\n    if (hasConsole && (!config.silent)) {\n      console.warn(\"[Vue tip]: \" + msg + (\n        vm ? generateComponentTrace(vm) : ''\n      ));\n    }\n  };\n\n  formatComponentName = function (vm, includeFile) {\n    if (vm.$root === vm) {\n      return '<Root>'\n    }\n    var options = typeof vm === 'function' && vm.cid != null\n      ? vm.options\n      : vm._isVue\n        ? vm.$options || vm.constructor.options\n        : vm;\n    var name = options.name || options._componentTag;\n    var file = options.__file;\n    if (!name && file) {\n      var match = file.match(/([^/\\\\]+)\\.vue$/);\n      name = match && match[1];\n    }\n\n    return (\n      (name ? (\"<\" + (classify(name)) + \">\") : \"<Anonymous>\") +\n      (file && includeFile !== false ? (\" at \" + file) : '')\n    )\n  };\n\n  var repeat = function (str, n) {\n    var res = '';\n    while (n) {\n      if (n % 2 === 1) { res += str; }\n      if (n > 1) { str += str; }\n      n >>= 1;\n    }\n    return res\n  };\n\n  generateComponentTrace = function (vm) {\n    if (vm._isVue && vm.$parent) {\n      var tree = [];\n      var currentRecursiveSequence = 0;\n      while (vm) {\n        if (tree.length > 0) {\n          var last = tree[tree.length - 1];\n          if (last.constructor === vm.constructor) {\n            currentRecursiveSequence++;\n            vm = vm.$parent;\n            continue\n          } else if (currentRecursiveSequence > 0) {\n            tree[tree.length - 1] = [last, currentRecursiveSequence];\n            currentRecursiveSequence = 0;\n          }\n        }\n        tree.push(vm);\n        vm = vm.$parent;\n      }\n      return '\\n\\nfound in\\n\\n' + tree\n        .map(function (vm, i) { return (\"\" + (i === 0 ? '---> ' : repeat(' ', 5 + i * 2)) + (Array.isArray(vm)\n            ? ((formatComponentName(vm[0])) + \"... (\" + (vm[1]) + \" recursive calls)\")\n            : formatComponentName(vm))); })\n        .join('\\n')\n    } else {\n      return (\"\\n\\n(found in \" + (formatComponentName(vm)) + \")\")\n    }\n  };\n}\n\n/*  */\n\nvar uid = 0;\n\n/**\n * A dep is an observable that can have multiple\n * directives subscribing to it.\n */\nvar Dep = function Dep () {\n  this.id = uid++;\n  this.subs = [];\n};\n\nDep.prototype.addSub = function addSub (sub) {\n  this.subs.push(sub);\n};\n\nDep.prototype.removeSub = function removeSub (sub) {\n  remove(this.subs, sub);\n};\n\nDep.prototype.depend = function depend () {\n  if (Dep.target) {\n    Dep.target.addDep(this);\n  }\n};\n\nDep.prototype.notify = function notify () {\n  // stabilize the subscriber list first\n  var subs = this.subs.slice();\n  if (process.env.NODE_ENV !== 'production' && !config.async) {\n    // subs aren't sorted in scheduler if not running async\n    // we need to sort them now to make sure they fire in correct\n    // order\n    subs.sort(function (a, b) { return a.id - b.id; });\n  }\n  for (var i = 0, l = subs.length; i < l; i++) {\n    subs[i].update();\n  }\n};\n\n// The current target watcher being evaluated.\n// This is globally unique because only one watcher\n// can be evaluated at a time.\nDep.target = null;\nvar targetStack = [];\n\nfunction pushTarget (target) {\n  targetStack.push(target);\n  Dep.target = target;\n}\n\nfunction popTarget () {\n  targetStack.pop();\n  Dep.target = targetStack[targetStack.length - 1];\n}\n\n/*  */\n\nvar VNode = function VNode (\n  tag,\n  data,\n  children,\n  text,\n  elm,\n  context,\n  componentOptions,\n  asyncFactory\n) {\n  this.tag = tag;\n  this.data = data;\n  this.children = children;\n  this.text = text;\n  this.elm = elm;\n  this.ns = undefined;\n  this.context = context;\n  this.fnContext = undefined;\n  this.fnOptions = undefined;\n  this.fnScopeId = undefined;\n  this.key = data && data.key;\n  this.componentOptions = componentOptions;\n  this.componentInstance = undefined;\n  this.parent = undefined;\n  this.raw = false;\n  this.isStatic = false;\n  this.isRootInsert = true;\n  this.isComment = false;\n  this.isCloned = false;\n  this.isOnce = false;\n  this.asyncFactory = asyncFactory;\n  this.asyncMeta = undefined;\n  this.isAsyncPlaceholder = false;\n};\n\nvar prototypeAccessors = { child: { configurable: true } };\n\n// DEPRECATED: alias for componentInstance for backwards compat.\n/* istanbul ignore next */\nprototypeAccessors.child.get = function () {\n  return this.componentInstance\n};\n\nObject.defineProperties( VNode.prototype, prototypeAccessors );\n\nvar createEmptyVNode = function (text) {\n  if ( text === void 0 ) text = '';\n\n  var node = new VNode();\n  node.text = text;\n  node.isComment = true;\n  return node\n};\n\nfunction createTextVNode (val) {\n  return new VNode(undefined, undefined, undefined, String(val))\n}\n\n// optimized shallow clone\n// used for static nodes and slot nodes because they may be reused across\n// multiple renders, cloning them avoids errors when DOM manipulations rely\n// on their elm reference.\nfunction cloneVNode (vnode) {\n  var cloned = new VNode(\n    vnode.tag,\n    vnode.data,\n    // #7975\n    // clone children array to avoid mutating original in case of cloning\n    // a child.\n    vnode.children && vnode.children.slice(),\n    vnode.text,\n    vnode.elm,\n    vnode.context,\n    vnode.componentOptions,\n    vnode.asyncFactory\n  );\n  cloned.ns = vnode.ns;\n  cloned.isStatic = vnode.isStatic;\n  cloned.key = vnode.key;\n  cloned.isComment = vnode.isComment;\n  cloned.fnContext = vnode.fnContext;\n  cloned.fnOptions = vnode.fnOptions;\n  cloned.fnScopeId = vnode.fnScopeId;\n  cloned.asyncMeta = vnode.asyncMeta;\n  cloned.isCloned = true;\n  return cloned\n}\n\n/*\n * not type checking this file because flow doesn't play well with\n * dynamically accessing methods on Array prototype\n */\n\nvar arrayProto = Array.prototype;\nvar arrayMethods = Object.create(arrayProto);\n\nvar methodsToPatch = [\n  'push',\n  'pop',\n  'shift',\n  'unshift',\n  'splice',\n  'sort',\n  'reverse'\n];\n\n/**\n * Intercept mutating methods and emit events\n */\nmethodsToPatch.forEach(function (method) {\n  // cache original method\n  var original = arrayProto[method];\n  def(arrayMethods, method, function mutator () {\n    var args = [], len = arguments.length;\n    while ( len-- ) args[ len ] = arguments[ len ];\n\n    var result = original.apply(this, args);\n    var ob = this.__ob__;\n    var inserted;\n    switch (method) {\n      case 'push':\n      case 'unshift':\n        inserted = args;\n        break\n      case 'splice':\n        inserted = args.slice(2);\n        break\n    }\n    if (inserted) { ob.observeArray(inserted); }\n    // notify change\n    ob.dep.notify();\n    return result\n  });\n});\n\n/*  */\n\nvar arrayKeys = Object.getOwnPropertyNames(arrayMethods);\n\n/**\n * In some cases we may want to disable observation inside a component's\n * update computation.\n */\nvar shouldObserve = true;\n\nfunction toggleObserving (value) {\n  shouldObserve = value;\n}\n\n/**\n * Observer class that is attached to each observed\n * object. Once attached, the observer converts the target\n * object's property keys into getter/setters that\n * collect dependencies and dispatch updates.\n */\nvar Observer = function Observer (value) {\n  this.value = value;\n  this.dep = new Dep();\n  this.vmCount = 0;\n  def(value, '__ob__', this);\n  if (Array.isArray(value)) {\n    if (hasProto) {\n      protoAugment(value, arrayMethods);\n    } else {\n      copyAugment(value, arrayMethods, arrayKeys);\n    }\n    this.observeArray(value);\n  } else {\n    this.walk(value);\n  }\n};\n\n/**\n * Walk through all properties and convert them into\n * getter/setters. This method should only be called when\n * value type is Object.\n */\nObserver.prototype.walk = function walk (obj) {\n  var keys = Object.keys(obj);\n  for (var i = 0; i < keys.length; i++) {\n    defineReactive$$1(obj, keys[i]);\n  }\n};\n\n/**\n * Observe a list of Array items.\n */\nObserver.prototype.observeArray = function observeArray (items) {\n  for (var i = 0, l = items.length; i < l; i++) {\n    observe(items[i]);\n  }\n};\n\n// helpers\n\n/**\n * Augment a target Object or Array by intercepting\n * the prototype chain using __proto__\n */\nfunction protoAugment (target, src) {\n  /* eslint-disable no-proto */\n  target.__proto__ = src;\n  /* eslint-enable no-proto */\n}\n\n/**\n * Augment a target Object or Array by defining\n * hidden properties.\n */\n/* istanbul ignore next */\nfunction copyAugment (target, src, keys) {\n  for (var i = 0, l = keys.length; i < l; i++) {\n    var key = keys[i];\n    def(target, key, src[key]);\n  }\n}\n\n/**\n * Attempt to create an observer instance for a value,\n * returns the new observer if successfully observed,\n * or the existing observer if the value already has one.\n */\nfunction observe (value, asRootData) {\n  if (!isObject(value) || value instanceof VNode) {\n    return\n  }\n  var ob;\n  if (hasOwn(value, '__ob__') && value.__ob__ instanceof Observer) {\n    ob = value.__ob__;\n  } else if (\n    shouldObserve &&\n    !isServerRendering() &&\n    (Array.isArray(value) || isPlainObject(value)) &&\n    Object.isExtensible(value) &&\n    !value._isVue\n  ) {\n    ob = new Observer(value);\n  }\n  if (asRootData && ob) {\n    ob.vmCount++;\n  }\n  return ob\n}\n\n/**\n * Define a reactive property on an Object.\n */\nfunction defineReactive$$1 (\n  obj,\n  key,\n  val,\n  customSetter,\n  shallow\n) {\n  var dep = new Dep();\n\n  var property = Object.getOwnPropertyDescriptor(obj, key);\n  if (property && property.configurable === false) {\n    return\n  }\n\n  // cater for pre-defined getter/setters\n  var getter = property && property.get;\n  var setter = property && property.set;\n  if ((!getter || setter) && arguments.length === 2) {\n    val = obj[key];\n  }\n\n  var childOb = !shallow && observe(val);\n  Object.defineProperty(obj, key, {\n    enumerable: true,\n    configurable: true,\n    get: function reactiveGetter () {\n      var value = getter ? getter.call(obj) : val;\n      if (Dep.target) {\n        dep.depend();\n        if (childOb) {\n          childOb.dep.depend();\n          if (Array.isArray(value)) {\n            dependArray(value);\n          }\n        }\n      }\n      return value\n    },\n    set: function reactiveSetter (newVal) {\n      var value = getter ? getter.call(obj) : val;\n      /* eslint-disable no-self-compare */\n      if (newVal === value || (newVal !== newVal && value !== value)) {\n        return\n      }\n      /* eslint-enable no-self-compare */\n      if (process.env.NODE_ENV !== 'production' && customSetter) {\n        customSetter();\n      }\n      // #7981: for accessor properties without setter\n      if (getter && !setter) { return }\n      if (setter) {\n        setter.call(obj, newVal);\n      } else {\n        val = newVal;\n      }\n      childOb = !shallow && observe(newVal);\n      dep.notify();\n    }\n  });\n}\n\n/**\n * Set a property on an object. Adds the new property and\n * triggers change notification if the property doesn't\n * already exist.\n */\nfunction set (target, key, val) {\n  if (process.env.NODE_ENV !== 'production' &&\n    (isUndef(target) || isPrimitive(target))\n  ) {\n    warn((\"Cannot set reactive property on undefined, null, or primitive value: \" + ((target))));\n  }\n  if (Array.isArray(target) && isValidArrayIndex(key)) {\n    target.length = Math.max(target.length, key);\n    target.splice(key, 1, val);\n    return val\n  }\n  if (key in target && !(key in Object.prototype)) {\n    target[key] = val;\n    return val\n  }\n  var ob = (target).__ob__;\n  if (target._isVue || (ob && ob.vmCount)) {\n    process.env.NODE_ENV !== 'production' && warn(\n      'Avoid adding reactive properties to a Vue instance or its root $data ' +\n      'at runtime - declare it upfront in the data option.'\n    );\n    return val\n  }\n  if (!ob) {\n    target[key] = val;\n    return val\n  }\n  defineReactive$$1(ob.value, key, val);\n  ob.dep.notify();\n  return val\n}\n\n/**\n * Delete a property and trigger change if necessary.\n */\nfunction del (target, key) {\n  if (process.env.NODE_ENV !== 'production' &&\n    (isUndef(target) || isPrimitive(target))\n  ) {\n    warn((\"Cannot delete reactive property on undefined, null, or primitive value: \" + ((target))));\n  }\n  if (Array.isArray(target) && isValidArrayIndex(key)) {\n    target.splice(key, 1);\n    return\n  }\n  var ob = (target).__ob__;\n  if (target._isVue || (ob && ob.vmCount)) {\n    process.env.NODE_ENV !== 'production' && warn(\n      'Avoid deleting properties on a Vue instance or its root $data ' +\n      '- just set it to null.'\n    );\n    return\n  }\n  if (!hasOwn(target, key)) {\n    return\n  }\n  delete target[key];\n  if (!ob) {\n    return\n  }\n  ob.dep.notify();\n}\n\n/**\n * Collect dependencies on array elements when the array is touched, since\n * we cannot intercept array element access like property getters.\n */\nfunction dependArray (value) {\n  for (var e = (void 0), i = 0, l = value.length; i < l; i++) {\n    e = value[i];\n    e && e.__ob__ && e.__ob__.dep.depend();\n    if (Array.isArray(e)) {\n      dependArray(e);\n    }\n  }\n}\n\n/*  */\n\n/**\n * Option overwriting strategies are functions that handle\n * how to merge a parent option value and a child option\n * value into the final value.\n */\nvar strats = config.optionMergeStrategies;\n\n/**\n * Options with restrictions\n */\nif (process.env.NODE_ENV !== 'production') {\n  strats.el = strats.propsData = function (parent, child, vm, key) {\n    if (!vm) {\n      warn(\n        \"option \\\"\" + key + \"\\\" can only be used during instance \" +\n        'creation with the `new` keyword.'\n      );\n    }\n    return defaultStrat(parent, child)\n  };\n}\n\n/**\n * Helper that recursively merges two data objects together.\n */\nfunction mergeData (to, from) {\n  if (!from) { return to }\n  var key, toVal, fromVal;\n\n  var keys = hasSymbol\n    ? Reflect.ownKeys(from)\n    : Object.keys(from);\n\n  for (var i = 0; i < keys.length; i++) {\n    key = keys[i];\n    // in case the object is already observed...\n    if (key === '__ob__') { continue }\n    toVal = to[key];\n    fromVal = from[key];\n    if (!hasOwn(to, key)) {\n      set(to, key, fromVal);\n    } else if (\n      toVal !== fromVal &&\n      isPlainObject(toVal) &&\n      isPlainObject(fromVal)\n    ) {\n      mergeData(toVal, fromVal);\n    }\n  }\n  return to\n}\n\n/**\n * Data\n */\nfunction mergeDataOrFn (\n  parentVal,\n  childVal,\n  vm\n) {\n  if (!vm) {\n    // in a Vue.extend merge, both should be functions\n    if (!childVal) {\n      return parentVal\n    }\n    if (!parentVal) {\n      return childVal\n    }\n    // when parentVal & childVal are both present,\n    // we need to return a function that returns the\n    // merged result of both functions... no need to\n    // check if parentVal is a function here because\n    // it has to be a function to pass previous merges.\n    return function mergedDataFn () {\n      return mergeData(\n        typeof childVal === 'function' ? childVal.call(this, this) : childVal,\n        typeof parentVal === 'function' ? parentVal.call(this, this) : parentVal\n      )\n    }\n  } else {\n    return function mergedInstanceDataFn () {\n      // instance merge\n      var instanceData = typeof childVal === 'function'\n        ? childVal.call(vm, vm)\n        : childVal;\n      var defaultData = typeof parentVal === 'function'\n        ? parentVal.call(vm, vm)\n        : parentVal;\n      if (instanceData) {\n        return mergeData(instanceData, defaultData)\n      } else {\n        return defaultData\n      }\n    }\n  }\n}\n\nstrats.data = function (\n  parentVal,\n  childVal,\n  vm\n) {\n  if (!vm) {\n    if (childVal && typeof childVal !== 'function') {\n      process.env.NODE_ENV !== 'production' && warn(\n        'The \"data\" option should be a function ' +\n        'that returns a per-instance value in component ' +\n        'definitions.',\n        vm\n      );\n\n      return parentVal\n    }\n    return mergeDataOrFn(parentVal, childVal)\n  }\n\n  return mergeDataOrFn(parentVal, childVal, vm)\n};\n\n/**\n * Hooks and props are merged as arrays.\n */\nfunction mergeHook (\n  parentVal,\n  childVal\n) {\n  var res = childVal\n    ? parentVal\n      ? parentVal.concat(childVal)\n      : Array.isArray(childVal)\n        ? childVal\n        : [childVal]\n    : parentVal;\n  return res\n    ? dedupeHooks(res)\n    : res\n}\n\nfunction dedupeHooks (hooks) {\n  var res = [];\n  for (var i = 0; i < hooks.length; i++) {\n    if (res.indexOf(hooks[i]) === -1) {\n      res.push(hooks[i]);\n    }\n  }\n  return res\n}\n\nLIFECYCLE_HOOKS.forEach(function (hook) {\n  strats[hook] = mergeHook;\n});\n\n/**\n * Assets\n *\n * When a vm is present (instance creation), we need to do\n * a three-way merge between constructor options, instance\n * options and parent options.\n */\nfunction mergeAssets (\n  parentVal,\n  childVal,\n  vm,\n  key\n) {\n  var res = Object.create(parentVal || null);\n  if (childVal) {\n    process.env.NODE_ENV !== 'production' && assertObjectType(key, childVal, vm);\n    return extend(res, childVal)\n  } else {\n    return res\n  }\n}\n\nASSET_TYPES.forEach(function (type) {\n  strats[type + 's'] = mergeAssets;\n});\n\n/**\n * Watchers.\n *\n * Watchers hashes should not overwrite one\n * another, so we merge them as arrays.\n */\nstrats.watch = function (\n  parentVal,\n  childVal,\n  vm,\n  key\n) {\n  // work around Firefox's Object.prototype.watch...\n  if (parentVal === nativeWatch) { parentVal = undefined; }\n  if (childVal === nativeWatch) { childVal = undefined; }\n  /* istanbul ignore if */\n  if (!childVal) { return Object.create(parentVal || null) }\n  if (process.env.NODE_ENV !== 'production') {\n    assertObjectType(key, childVal, vm);\n  }\n  if (!parentVal) { return childVal }\n  var ret = {};\n  extend(ret, parentVal);\n  for (var key$1 in childVal) {\n    var parent = ret[key$1];\n    var child = childVal[key$1];\n    if (parent && !Array.isArray(parent)) {\n      parent = [parent];\n    }\n    ret[key$1] = parent\n      ? parent.concat(child)\n      : Array.isArray(child) ? child : [child];\n  }\n  return ret\n};\n\n/**\n * Other object hashes.\n */\nstrats.props =\nstrats.methods =\nstrats.inject =\nstrats.computed = function (\n  parentVal,\n  childVal,\n  vm,\n  key\n) {\n  if (childVal && process.env.NODE_ENV !== 'production') {\n    assertObjectType(key, childVal, vm);\n  }\n  if (!parentVal) { return childVal }\n  var ret = Object.create(null);\n  extend(ret, parentVal);\n  if (childVal) { extend(ret, childVal); }\n  return ret\n};\nstrats.provide = mergeDataOrFn;\n\n/**\n * Default strategy.\n */\nvar defaultStrat = function (parentVal, childVal) {\n  return childVal === undefined\n    ? parentVal\n    : childVal\n};\n\n/**\n * Validate component names\n */\nfunction checkComponents (options) {\n  for (var key in options.components) {\n    validateComponentName(key);\n  }\n}\n\nfunction validateComponentName (name) {\n  if (!new RegExp((\"^[a-zA-Z][\\\\-\\\\.0-9_\" + (unicodeRegExp.source) + \"]*$\")).test(name)) {\n    warn(\n      'Invalid component name: \"' + name + '\". Component names ' +\n      'should conform to valid custom element name in html5 specification.'\n    );\n  }\n  if (isBuiltInTag(name) || config.isReservedTag(name)) {\n    warn(\n      'Do not use built-in or reserved HTML elements as component ' +\n      'id: ' + name\n    );\n  }\n}\n\n/**\n * Ensure all props option syntax are normalized into the\n * Object-based format.\n */\nfunction normalizeProps (options, vm) {\n  var props = options.props;\n  if (!props) { return }\n  var res = {};\n  var i, val, name;\n  if (Array.isArray(props)) {\n    i = props.length;\n    while (i--) {\n      val = props[i];\n      if (typeof val === 'string') {\n        name = camelize(val);\n        res[name] = { type: null };\n      } else if (process.env.NODE_ENV !== 'production') {\n        warn('props must be strings when using array syntax.');\n      }\n    }\n  } else if (isPlainObject(props)) {\n    for (var key in props) {\n      val = props[key];\n      name = camelize(key);\n      res[name] = isPlainObject(val)\n        ? val\n        : { type: val };\n    }\n  } else if (process.env.NODE_ENV !== 'production') {\n    warn(\n      \"Invalid value for option \\\"props\\\": expected an Array or an Object, \" +\n      \"but got \" + (toRawType(props)) + \".\",\n      vm\n    );\n  }\n  options.props = res;\n}\n\n/**\n * Normalize all injections into Object-based format\n */\nfunction normalizeInject (options, vm) {\n  var inject = options.inject;\n  if (!inject) { return }\n  var normalized = options.inject = {};\n  if (Array.isArray(inject)) {\n    for (var i = 0; i < inject.length; i++) {\n      normalized[inject[i]] = { from: inject[i] };\n    }\n  } else if (isPlainObject(inject)) {\n    for (var key in inject) {\n      var val = inject[key];\n      normalized[key] = isPlainObject(val)\n        ? extend({ from: key }, val)\n        : { from: val };\n    }\n  } else if (process.env.NODE_ENV !== 'production') {\n    warn(\n      \"Invalid value for option \\\"inject\\\": expected an Array or an Object, \" +\n      \"but got \" + (toRawType(inject)) + \".\",\n      vm\n    );\n  }\n}\n\n/**\n * Normalize raw function directives into object format.\n */\nfunction normalizeDirectives (options) {\n  var dirs = options.directives;\n  if (dirs) {\n    for (var key in dirs) {\n      var def$$1 = dirs[key];\n      if (typeof def$$1 === 'function') {\n        dirs[key] = { bind: def$$1, update: def$$1 };\n      }\n    }\n  }\n}\n\nfunction assertObjectType (name, value, vm) {\n  if (!isPlainObject(value)) {\n    warn(\n      \"Invalid value for option \\\"\" + name + \"\\\": expected an Object, \" +\n      \"but got \" + (toRawType(value)) + \".\",\n      vm\n    );\n  }\n}\n\n/**\n * Merge two option objects into a new one.\n * Core utility used in both instantiation and inheritance.\n */\nfunction mergeOptions (\n  parent,\n  child,\n  vm\n) {\n  if (process.env.NODE_ENV !== 'production') {\n    checkComponents(child);\n  }\n\n  if (typeof child === 'function') {\n    child = child.options;\n  }\n\n  normalizeProps(child, vm);\n  normalizeInject(child, vm);\n  normalizeDirectives(child);\n\n  // Apply extends and mixins on the child options,\n  // but only if it is a raw options object that isn't\n  // the result of another mergeOptions call.\n  // Only merged options has the _base property.\n  if (!child._base) {\n    if (child.extends) {\n      parent = mergeOptions(parent, child.extends, vm);\n    }\n    if (child.mixins) {\n      for (var i = 0, l = child.mixins.length; i < l; i++) {\n        parent = mergeOptions(parent, child.mixins[i], vm);\n      }\n    }\n  }\n\n  var options = {};\n  var key;\n  for (key in parent) {\n    mergeField(key);\n  }\n  for (key in child) {\n    if (!hasOwn(parent, key)) {\n      mergeField(key);\n    }\n  }\n  function mergeField (key) {\n    var strat = strats[key] || defaultStrat;\n    options[key] = strat(parent[key], child[key], vm, key);\n  }\n  return options\n}\n\n/**\n * Resolve an asset.\n * This function is used because child instances need access\n * to assets defined in its ancestor chain.\n */\nfunction resolveAsset (\n  options,\n  type,\n  id,\n  warnMissing\n) {\n  /* istanbul ignore if */\n  if (typeof id !== 'string') {\n    return\n  }\n  var assets = options[type];\n  // check local registration variations first\n  if (hasOwn(assets, id)) { return assets[id] }\n  var camelizedId = camelize(id);\n  if (hasOwn(assets, camelizedId)) { return assets[camelizedId] }\n  var PascalCaseId = capitalize(camelizedId);\n  if (hasOwn(assets, PascalCaseId)) { return assets[PascalCaseId] }\n  // fallback to prototype chain\n  var res = assets[id] || assets[camelizedId] || assets[PascalCaseId];\n  if (process.env.NODE_ENV !== 'production' && warnMissing && !res) {\n    warn(\n      'Failed to resolve ' + type.slice(0, -1) + ': ' + id,\n      options\n    );\n  }\n  return res\n}\n\n/*  */\n\n\n\nfunction validateProp (\n  key,\n  propOptions,\n  propsData,\n  vm\n) {\n  var prop = propOptions[key];\n  var absent = !hasOwn(propsData, key);\n  var value = propsData[key];\n  // boolean casting\n  var booleanIndex = getTypeIndex(Boolean, prop.type);\n  if (booleanIndex > -1) {\n    if (absent && !hasOwn(prop, 'default')) {\n      value = false;\n    } else if (value === '' || value === hyphenate(key)) {\n      // only cast empty string / same name to boolean if\n      // boolean has higher priority\n      var stringIndex = getTypeIndex(String, prop.type);\n      if (stringIndex < 0 || booleanIndex < stringIndex) {\n        value = true;\n      }\n    }\n  }\n  // check default value\n  if (value === undefined) {\n    value = getPropDefaultValue(vm, prop, key);\n    // since the default value is a fresh copy,\n    // make sure to observe it.\n    var prevShouldObserve = shouldObserve;\n    toggleObserving(true);\n    observe(value);\n    toggleObserving(prevShouldObserve);\n  }\n  if (\n    process.env.NODE_ENV !== 'production' &&\n    // skip validation for weex recycle-list child component props\n    !(false)\n  ) {\n    assertProp(prop, key, value, vm, absent);\n  }\n  return value\n}\n\n/**\n * Get the default value of a prop.\n */\nfunction getPropDefaultValue (vm, prop, key) {\n  // no default, return undefined\n  if (!hasOwn(prop, 'default')) {\n    return undefined\n  }\n  var def = prop.default;\n  // warn against non-factory defaults for Object & Array\n  if (process.env.NODE_ENV !== 'production' && isObject(def)) {\n    warn(\n      'Invalid default value for prop \"' + key + '\": ' +\n      'Props with type Object/Array must use a factory function ' +\n      'to return the default value.',\n      vm\n    );\n  }\n  // the raw prop value was also undefined from previous render,\n  // return previous default value to avoid unnecessary watcher trigger\n  if (vm && vm.$options.propsData &&\n    vm.$options.propsData[key] === undefined &&\n    vm._props[key] !== undefined\n  ) {\n    return vm._props[key]\n  }\n  // call factory function for non-Function types\n  // a value is Function if its prototype is function even across different execution context\n  return typeof def === 'function' && getType(prop.type) !== 'Function'\n    ? def.call(vm)\n    : def\n}\n\n/**\n * Assert whether a prop is valid.\n */\nfunction assertProp (\n  prop,\n  name,\n  value,\n  vm,\n  absent\n) {\n  if (prop.required && absent) {\n    warn(\n      'Missing required prop: \"' + name + '\"',\n      vm\n    );\n    return\n  }\n  if (value == null && !prop.required) {\n    return\n  }\n  var type = prop.type;\n  var valid = !type || type === true;\n  var expectedTypes = [];\n  if (type) {\n    if (!Array.isArray(type)) {\n      type = [type];\n    }\n    for (var i = 0; i < type.length && !valid; i++) {\n      var assertedType = assertType(value, type[i]);\n      expectedTypes.push(assertedType.expectedType || '');\n      valid = assertedType.valid;\n    }\n  }\n\n  if (!valid) {\n    warn(\n      getInvalidTypeMessage(name, value, expectedTypes),\n      vm\n    );\n    return\n  }\n  var validator = prop.validator;\n  if (validator) {\n    if (!validator(value)) {\n      warn(\n        'Invalid prop: custom validator check failed for prop \"' + name + '\".',\n        vm\n      );\n    }\n  }\n}\n\nvar simpleCheckRE = /^(String|Number|Boolean|Function|Symbol)$/;\n\nfunction assertType (value, type) {\n  var valid;\n  var expectedType = getType(type);\n  if (simpleCheckRE.test(expectedType)) {\n    var t = typeof value;\n    valid = t === expectedType.toLowerCase();\n    // for primitive wrapper objects\n    if (!valid && t === 'object') {\n      valid = value instanceof type;\n    }\n  } else if (expectedType === 'Object') {\n    valid = isPlainObject(value);\n  } else if (expectedType === 'Array') {\n    valid = Array.isArray(value);\n  } else {\n    valid = value instanceof type;\n  }\n  return {\n    valid: valid,\n    expectedType: expectedType\n  }\n}\n\n/**\n * Use function string name to check built-in types,\n * because a simple equality check will fail when running\n * across different vms / iframes.\n */\nfunction getType (fn) {\n  var match = fn && fn.toString().match(/^\\s*function (\\w+)/);\n  return match ? match[1] : ''\n}\n\nfunction isSameType (a, b) {\n  return getType(a) === getType(b)\n}\n\nfunction getTypeIndex (type, expectedTypes) {\n  if (!Array.isArray(expectedTypes)) {\n    return isSameType(expectedTypes, type) ? 0 : -1\n  }\n  for (var i = 0, len = expectedTypes.length; i < len; i++) {\n    if (isSameType(expectedTypes[i], type)) {\n      return i\n    }\n  }\n  return -1\n}\n\nfunction getInvalidTypeMessage (name, value, expectedTypes) {\n  var message = \"Invalid prop: type check failed for prop \\\"\" + name + \"\\\".\" +\n    \" Expected \" + (expectedTypes.map(capitalize).join(', '));\n  var expectedType = expectedTypes[0];\n  var receivedType = toRawType(value);\n  var expectedValue = styleValue(value, expectedType);\n  var receivedValue = styleValue(value, receivedType);\n  // check if we need to specify expected value\n  if (expectedTypes.length === 1 &&\n      isExplicable(expectedType) &&\n      !isBoolean(expectedType, receivedType)) {\n    message += \" with value \" + expectedValue;\n  }\n  message += \", got \" + receivedType + \" \";\n  // check if we need to specify received value\n  if (isExplicable(receivedType)) {\n    message += \"with value \" + receivedValue + \".\";\n  }\n  return message\n}\n\nfunction styleValue (value, type) {\n  if (type === 'String') {\n    return (\"\\\"\" + value + \"\\\"\")\n  } else if (type === 'Number') {\n    return (\"\" + (Number(value)))\n  } else {\n    return (\"\" + value)\n  }\n}\n\nfunction isExplicable (value) {\n  var explicitTypes = ['string', 'number', 'boolean'];\n  return explicitTypes.some(function (elem) { return value.toLowerCase() === elem; })\n}\n\nfunction isBoolean () {\n  var args = [], len = arguments.length;\n  while ( len-- ) args[ len ] = arguments[ len ];\n\n  return args.some(function (elem) { return elem.toLowerCase() === 'boolean'; })\n}\n\n/*  */\n\nfunction handleError (err, vm, info) {\n  // Deactivate deps tracking while processing error handler to avoid possible infinite rendering.\n  // See: https://github.com/vuejs/vuex/issues/1505\n  pushTarget();\n  try {\n    if (vm) {\n      var cur = vm;\n      while ((cur = cur.$parent)) {\n        var hooks = cur.$options.errorCaptured;\n        if (hooks) {\n          for (var i = 0; i < hooks.length; i++) {\n            try {\n              var capture = hooks[i].call(cur, err, vm, info) === false;\n              if (capture) { return }\n            } catch (e) {\n              globalHandleError(e, cur, 'errorCaptured hook');\n            }\n          }\n        }\n      }\n    }\n    globalHandleError(err, vm, info);\n  } finally {\n    popTarget();\n  }\n}\n\nfunction invokeWithErrorHandling (\n  handler,\n  context,\n  args,\n  vm,\n  info\n) {\n  var res;\n  try {\n    res = args ? handler.apply(context, args) : handler.call(context);\n    if (res && !res._isVue && isPromise(res) && !res._handled) {\n      res.catch(function (e) { return handleError(e, vm, info + \" (Promise/async)\"); });\n      // issue #9511\n      // avoid catch triggering multiple times when nested calls\n      res._handled = true;\n    }\n  } catch (e) {\n    handleError(e, vm, info);\n  }\n  return res\n}\n\nfunction globalHandleError (err, vm, info) {\n  if (config.errorHandler) {\n    try {\n      return config.errorHandler.call(null, err, vm, info)\n    } catch (e) {\n      // if the user intentionally throws the original error in the handler,\n      // do not log it twice\n      if (e !== err) {\n        logError(e, null, 'config.errorHandler');\n      }\n    }\n  }\n  logError(err, vm, info);\n}\n\nfunction logError (err, vm, info) {\n  if (process.env.NODE_ENV !== 'production') {\n    warn((\"Error in \" + info + \": \\\"\" + (err.toString()) + \"\\\"\"), vm);\n  }\n  /* istanbul ignore else */\n  if ((inBrowser || inWeex) && typeof console !== 'undefined') {\n    console.error(err);\n  } else {\n    throw err\n  }\n}\n\n/*  */\n\nvar isUsingMicroTask = false;\n\nvar callbacks = [];\nvar pending = false;\n\nfunction flushCallbacks () {\n  pending = false;\n  var copies = callbacks.slice(0);\n  callbacks.length = 0;\n  for (var i = 0; i < copies.length; i++) {\n    copies[i]();\n  }\n}\n\n// Here we have async deferring wrappers using microtasks.\n// In 2.5 we used (macro) tasks (in combination with microtasks).\n// However, it has subtle problems when state is changed right before repaint\n// (e.g. #6813, out-in transitions).\n// Also, using (macro) tasks in event handler would cause some weird behaviors\n// that cannot be circumvented (e.g. #7109, #7153, #7546, #7834, #8109).\n// So we now use microtasks everywhere, again.\n// A major drawback of this tradeoff is that there are some scenarios\n// where microtasks have too high a priority and fire in between supposedly\n// sequential events (e.g. #4521, #6690, which have workarounds)\n// or even between bubbling of the same event (#6566).\nvar timerFunc;\n\n// The nextTick behavior leverages the microtask queue, which can be accessed\n// via either native Promise.then or MutationObserver.\n// MutationObserver has wider support, however it is seriously bugged in\n// UIWebView in iOS >= 9.3.3 when triggered in touch event handlers. It\n// completely stops working after triggering a few times... so, if native\n// Promise is available, we will use it:\n/* istanbul ignore next, $flow-disable-line */\nif (typeof Promise !== 'undefined' && isNative(Promise)) {\n  var p = Promise.resolve();\n  timerFunc = function () {\n    p.then(flushCallbacks);\n    // In problematic UIWebViews, Promise.then doesn't completely break, but\n    // it can get stuck in a weird state where callbacks are pushed into the\n    // microtask queue but the queue isn't being flushed, until the browser\n    // needs to do some other work, e.g. handle a timer. Therefore we can\n    // \"force\" the microtask queue to be flushed by adding an empty timer.\n    if (isIOS) { setTimeout(noop); }\n  };\n  isUsingMicroTask = true;\n} else if (!isIE && typeof MutationObserver !== 'undefined' && (\n  isNative(MutationObserver) ||\n  // PhantomJS and iOS 7.x\n  MutationObserver.toString() === '[object MutationObserverConstructor]'\n)) {\n  // Use MutationObserver where native Promise is not available,\n  // e.g. PhantomJS, iOS7, Android 4.4\n  // (#6466 MutationObserver is unreliable in IE11)\n  var counter = 1;\n  var observer = new MutationObserver(flushCallbacks);\n  var textNode = document.createTextNode(String(counter));\n  observer.observe(textNode, {\n    characterData: true\n  });\n  timerFunc = function () {\n    counter = (counter + 1) % 2;\n    textNode.data = String(counter);\n  };\n  isUsingMicroTask = true;\n} else if (typeof setImmediate !== 'undefined' && isNative(setImmediate)) {\n  // Fallback to setImmediate.\n  // Technically it leverages the (macro) task queue,\n  // but it is still a better choice than setTimeout.\n  timerFunc = function () {\n    setImmediate(flushCallbacks);\n  };\n} else {\n  // Fallback to setTimeout.\n  timerFunc = function () {\n    setTimeout(flushCallbacks, 0);\n  };\n}\n\nfunction nextTick (cb, ctx) {\n  var _resolve;\n  callbacks.push(function () {\n    if (cb) {\n      try {\n        cb.call(ctx);\n      } catch (e) {\n        handleError(e, ctx, 'nextTick');\n      }\n    } else if (_resolve) {\n      _resolve(ctx);\n    }\n  });\n  if (!pending) {\n    pending = true;\n    timerFunc();\n  }\n  // $flow-disable-line\n  if (!cb && typeof Promise !== 'undefined') {\n    return new Promise(function (resolve) {\n      _resolve = resolve;\n    })\n  }\n}\n\n/*  */\n\n/* not type checking this file because flow doesn't play well with Proxy */\n\nvar initProxy;\n\nif (process.env.NODE_ENV !== 'production') {\n  var allowedGlobals = makeMap(\n    'Infinity,undefined,NaN,isFinite,isNaN,' +\n    'parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,' +\n    'Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,' +\n    'require' // for Webpack/Browserify\n  );\n\n  var warnNonPresent = function (target, key) {\n    warn(\n      \"Property or method \\\"\" + key + \"\\\" is not defined on the instance but \" +\n      'referenced during render. Make sure that this property is reactive, ' +\n      'either in the data option, or for class-based components, by ' +\n      'initializing the property. ' +\n      'See: https://vuejs.org/v2/guide/reactivity.html#Declaring-Reactive-Properties.',\n      target\n    );\n  };\n\n  var warnReservedPrefix = function (target, key) {\n    warn(\n      \"Property \\\"\" + key + \"\\\" must be accessed with \\\"$data.\" + key + \"\\\" because \" +\n      'properties starting with \"$\" or \"_\" are not proxied in the Vue instance to ' +\n      'prevent conflicts with Vue internals. ' +\n      'See: https://vuejs.org/v2/api/#data',\n      target\n    );\n  };\n\n  var hasProxy =\n    typeof Proxy !== 'undefined' && isNative(Proxy);\n\n  if (hasProxy) {\n    var isBuiltInModifier = makeMap('stop,prevent,self,ctrl,shift,alt,meta,exact');\n    config.keyCodes = new Proxy(config.keyCodes, {\n      set: function set (target, key, value) {\n        if (isBuiltInModifier(key)) {\n          warn((\"Avoid overwriting built-in modifier in config.keyCodes: .\" + key));\n          return false\n        } else {\n          target[key] = value;\n          return true\n        }\n      }\n    });\n  }\n\n  var hasHandler = {\n    has: function has (target, key) {\n      var has = key in target;\n      var isAllowed = allowedGlobals(key) ||\n        (typeof key === 'string' && key.charAt(0) === '_' && !(key in target.$data));\n      if (!has && !isAllowed) {\n        if (key in target.$data) { warnReservedPrefix(target, key); }\n        else { warnNonPresent(target, key); }\n      }\n      return has || !isAllowed\n    }\n  };\n\n  var getHandler = {\n    get: function get (target, key) {\n      if (typeof key === 'string' && !(key in target)) {\n        if (key in target.$data) { warnReservedPrefix(target, key); }\n        else { warnNonPresent(target, key); }\n      }\n      return target[key]\n    }\n  };\n\n  initProxy = function initProxy (vm) {\n    if (hasProxy) {\n      // determine which proxy handler to use\n      var options = vm.$options;\n      var handlers = options.render && options.render._withStripped\n        ? getHandler\n        : hasHandler;\n      vm._renderProxy = new Proxy(vm, handlers);\n    } else {\n      vm._renderProxy = vm;\n    }\n  };\n}\n\n/*  */\n\nvar seenObjects = new _Set();\n\n/**\n * Recursively traverse an object to evoke all converted\n * getters, so that every nested property inside the object\n * is collected as a \"deep\" dependency.\n */\nfunction traverse (val) {\n  _traverse(val, seenObjects);\n  seenObjects.clear();\n}\n\nfunction _traverse (val, seen) {\n  var i, keys;\n  var isA = Array.isArray(val);\n  if ((!isA && !isObject(val)) || Object.isFrozen(val) || val instanceof VNode) {\n    return\n  }\n  if (val.__ob__) {\n    var depId = val.__ob__.dep.id;\n    if (seen.has(depId)) {\n      return\n    }\n    seen.add(depId);\n  }\n  if (isA) {\n    i = val.length;\n    while (i--) { _traverse(val[i], seen); }\n  } else {\n    keys = Object.keys(val);\n    i = keys.length;\n    while (i--) { _traverse(val[keys[i]], seen); }\n  }\n}\n\nvar mark;\nvar measure;\n\nif (process.env.NODE_ENV !== 'production') {\n  var perf = inBrowser && window.performance;\n  /* istanbul ignore if */\n  if (\n    perf &&\n    perf.mark &&\n    perf.measure &&\n    perf.clearMarks &&\n    perf.clearMeasures\n  ) {\n    mark = function (tag) { return perf.mark(tag); };\n    measure = function (name, startTag, endTag) {\n      perf.measure(name, startTag, endTag);\n      perf.clearMarks(startTag);\n      perf.clearMarks(endTag);\n      // perf.clearMeasures(name)\n    };\n  }\n}\n\n/*  */\n\nvar normalizeEvent = cached(function (name) {\n  var passive = name.charAt(0) === '&';\n  name = passive ? name.slice(1) : name;\n  var once$$1 = name.charAt(0) === '~'; // Prefixed last, checked first\n  name = once$$1 ? name.slice(1) : name;\n  var capture = name.charAt(0) === '!';\n  name = capture ? name.slice(1) : name;\n  return {\n    name: name,\n    once: once$$1,\n    capture: capture,\n    passive: passive\n  }\n});\n\nfunction createFnInvoker (fns, vm) {\n  function invoker () {\n    var arguments$1 = arguments;\n\n    var fns = invoker.fns;\n    if (Array.isArray(fns)) {\n      var cloned = fns.slice();\n      for (var i = 0; i < cloned.length; i++) {\n        invokeWithErrorHandling(cloned[i], null, arguments$1, vm, \"v-on handler\");\n      }\n    } else {\n      // return handler return value for single handlers\n      return invokeWithErrorHandling(fns, null, arguments, vm, \"v-on handler\")\n    }\n  }\n  invoker.fns = fns;\n  return invoker\n}\n\nfunction updateListeners (\n  on,\n  oldOn,\n  add,\n  remove$$1,\n  createOnceHandler,\n  vm\n) {\n  var name, def$$1, cur, old, event;\n  for (name in on) {\n    def$$1 = cur = on[name];\n    old = oldOn[name];\n    event = normalizeEvent(name);\n    if (isUndef(cur)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        \"Invalid handler for event \\\"\" + (event.name) + \"\\\": got \" + String(cur),\n        vm\n      );\n    } else if (isUndef(old)) {\n      if (isUndef(cur.fns)) {\n        cur = on[name] = createFnInvoker(cur, vm);\n      }\n      if (isTrue(event.once)) {\n        cur = on[name] = createOnceHandler(event.name, cur, event.capture);\n      }\n      add(event.name, cur, event.capture, event.passive, event.params);\n    } else if (cur !== old) {\n      old.fns = cur;\n      on[name] = old;\n    }\n  }\n  for (name in oldOn) {\n    if (isUndef(on[name])) {\n      event = normalizeEvent(name);\n      remove$$1(event.name, oldOn[name], event.capture);\n    }\n  }\n}\n\n/*  */\n\nfunction mergeVNodeHook (def, hookKey, hook) {\n  if (def instanceof VNode) {\n    def = def.data.hook || (def.data.hook = {});\n  }\n  var invoker;\n  var oldHook = def[hookKey];\n\n  function wrappedHook () {\n    hook.apply(this, arguments);\n    // important: remove merged hook to ensure it's called only once\n    // and prevent memory leak\n    remove(invoker.fns, wrappedHook);\n  }\n\n  if (isUndef(oldHook)) {\n    // no existing hook\n    invoker = createFnInvoker([wrappedHook]);\n  } else {\n    /* istanbul ignore if */\n    if (isDef(oldHook.fns) && isTrue(oldHook.merged)) {\n      // already a merged invoker\n      invoker = oldHook;\n      invoker.fns.push(wrappedHook);\n    } else {\n      // existing plain hook\n      invoker = createFnInvoker([oldHook, wrappedHook]);\n    }\n  }\n\n  invoker.merged = true;\n  def[hookKey] = invoker;\n}\n\n/*  */\n\nfunction extractPropsFromVNodeData (\n  data,\n  Ctor,\n  tag\n) {\n  // we are only extracting raw values here.\n  // validation and default values are handled in the child\n  // component itself.\n  var propOptions = Ctor.options.props;\n  if (isUndef(propOptions)) {\n    return\n  }\n  var res = {};\n  var attrs = data.attrs;\n  var props = data.props;\n  if (isDef(attrs) || isDef(props)) {\n    for (var key in propOptions) {\n      var altKey = hyphenate(key);\n      if (process.env.NODE_ENV !== 'production') {\n        var keyInLowerCase = key.toLowerCase();\n        if (\n          key !== keyInLowerCase &&\n          attrs && hasOwn(attrs, keyInLowerCase)\n        ) {\n          tip(\n            \"Prop \\\"\" + keyInLowerCase + \"\\\" is passed to component \" +\n            (formatComponentName(tag || Ctor)) + \", but the declared prop name is\" +\n            \" \\\"\" + key + \"\\\". \" +\n            \"Note that HTML attributes are case-insensitive and camelCased \" +\n            \"props need to use their kebab-case equivalents when using in-DOM \" +\n            \"templates. You should probably use \\\"\" + altKey + \"\\\" instead of \\\"\" + key + \"\\\".\"\n          );\n        }\n      }\n      checkProp(res, props, key, altKey, true) ||\n      checkProp(res, attrs, key, altKey, false);\n    }\n  }\n  return res\n}\n\nfunction checkProp (\n  res,\n  hash,\n  key,\n  altKey,\n  preserve\n) {\n  if (isDef(hash)) {\n    if (hasOwn(hash, key)) {\n      res[key] = hash[key];\n      if (!preserve) {\n        delete hash[key];\n      }\n      return true\n    } else if (hasOwn(hash, altKey)) {\n      res[key] = hash[altKey];\n      if (!preserve) {\n        delete hash[altKey];\n      }\n      return true\n    }\n  }\n  return false\n}\n\n/*  */\n\n// The template compiler attempts to minimize the need for normalization by\n// statically analyzing the template at compile time.\n//\n// For plain HTML markup, normalization can be completely skipped because the\n// generated render function is guaranteed to return Array<VNode>. There are\n// two cases where extra normalization is needed:\n\n// 1. When the children contains components - because a functional component\n// may return an Array instead of a single root. In this case, just a simple\n// normalization is needed - if any child is an Array, we flatten the whole\n// thing with Array.prototype.concat. It is guaranteed to be only 1-level deep\n// because functional components already normalize their own children.\nfunction simpleNormalizeChildren (children) {\n  for (var i = 0; i < children.length; i++) {\n    if (Array.isArray(children[i])) {\n      return Array.prototype.concat.apply([], children)\n    }\n  }\n  return children\n}\n\n// 2. When the children contains constructs that always generated nested Arrays,\n// e.g. <template>, <slot>, v-for, or when the children is provided by user\n// with hand-written render functions / JSX. In such cases a full normalization\n// is needed to cater to all possible types of children values.\nfunction normalizeChildren (children) {\n  return isPrimitive(children)\n    ? [createTextVNode(children)]\n    : Array.isArray(children)\n      ? normalizeArrayChildren(children)\n      : undefined\n}\n\nfunction isTextNode (node) {\n  return isDef(node) && isDef(node.text) && isFalse(node.isComment)\n}\n\nfunction normalizeArrayChildren (children, nestedIndex) {\n  var res = [];\n  var i, c, lastIndex, last;\n  for (i = 0; i < children.length; i++) {\n    c = children[i];\n    if (isUndef(c) || typeof c === 'boolean') { continue }\n    lastIndex = res.length - 1;\n    last = res[lastIndex];\n    //  nested\n    if (Array.isArray(c)) {\n      if (c.length > 0) {\n        c = normalizeArrayChildren(c, ((nestedIndex || '') + \"_\" + i));\n        // merge adjacent text nodes\n        if (isTextNode(c[0]) && isTextNode(last)) {\n          res[lastIndex] = createTextVNode(last.text + (c[0]).text);\n          c.shift();\n        }\n        res.push.apply(res, c);\n      }\n    } else if (isPrimitive(c)) {\n      if (isTextNode(last)) {\n        // merge adjacent text nodes\n        // this is necessary for SSR hydration because text nodes are\n        // essentially merged when rendered to HTML strings\n        res[lastIndex] = createTextVNode(last.text + c);\n      } else if (c !== '') {\n        // convert primitive to vnode\n        res.push(createTextVNode(c));\n      }\n    } else {\n      if (isTextNode(c) && isTextNode(last)) {\n        // merge adjacent text nodes\n        res[lastIndex] = createTextVNode(last.text + c.text);\n      } else {\n        // default key for nested array children (likely generated by v-for)\n        if (isTrue(children._isVList) &&\n          isDef(c.tag) &&\n          isUndef(c.key) &&\n          isDef(nestedIndex)) {\n          c.key = \"__vlist\" + nestedIndex + \"_\" + i + \"__\";\n        }\n        res.push(c);\n      }\n    }\n  }\n  return res\n}\n\n/*  */\n\nfunction initProvide (vm) {\n  var provide = vm.$options.provide;\n  if (provide) {\n    vm._provided = typeof provide === 'function'\n      ? provide.call(vm)\n      : provide;\n  }\n}\n\nfunction initInjections (vm) {\n  var result = resolveInject(vm.$options.inject, vm);\n  if (result) {\n    toggleObserving(false);\n    Object.keys(result).forEach(function (key) {\n      /* istanbul ignore else */\n      if (process.env.NODE_ENV !== 'production') {\n        defineReactive$$1(vm, key, result[key], function () {\n          warn(\n            \"Avoid mutating an injected value directly since the changes will be \" +\n            \"overwritten whenever the provided component re-renders. \" +\n            \"injection being mutated: \\\"\" + key + \"\\\"\",\n            vm\n          );\n        });\n      } else {\n        defineReactive$$1(vm, key, result[key]);\n      }\n    });\n    toggleObserving(true);\n  }\n}\n\nfunction resolveInject (inject, vm) {\n  if (inject) {\n    // inject is :any because flow is not smart enough to figure out cached\n    var result = Object.create(null);\n    var keys = hasSymbol\n      ? Reflect.ownKeys(inject)\n      : Object.keys(inject);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n      // #6574 in case the inject object is observed...\n      if (key === '__ob__') { continue }\n      var provideKey = inject[key].from;\n      var source = vm;\n      while (source) {\n        if (source._provided && hasOwn(source._provided, provideKey)) {\n          result[key] = source._provided[provideKey];\n          break\n        }\n        source = source.$parent;\n      }\n      if (!source) {\n        if ('default' in inject[key]) {\n          var provideDefault = inject[key].default;\n          result[key] = typeof provideDefault === 'function'\n            ? provideDefault.call(vm)\n            : provideDefault;\n        } else if (process.env.NODE_ENV !== 'production') {\n          warn((\"Injection \\\"\" + key + \"\\\" not found\"), vm);\n        }\n      }\n    }\n    return result\n  }\n}\n\n/*  */\n\n\n\n/**\n * Runtime helper for resolving raw children VNodes into a slot object.\n */\nfunction resolveSlots (\n  children,\n  context\n) {\n  if (!children || !children.length) {\n    return {}\n  }\n  var slots = {};\n  for (var i = 0, l = children.length; i < l; i++) {\n    var child = children[i];\n    var data = child.data;\n    // remove slot attribute if the node is resolved as a Vue slot node\n    if (data && data.attrs && data.attrs.slot) {\n      delete data.attrs.slot;\n    }\n    // named slots should only be respected if the vnode was rendered in the\n    // same context.\n    if ((child.context === context || child.fnContext === context) &&\n      data && data.slot != null\n    ) {\n      var name = data.slot;\n      var slot = (slots[name] || (slots[name] = []));\n      if (child.tag === 'template') {\n        slot.push.apply(slot, child.children || []);\n      } else {\n        slot.push(child);\n      }\n    } else {\n      (slots.default || (slots.default = [])).push(child);\n    }\n  }\n  // ignore slots that contains only whitespace\n  for (var name$1 in slots) {\n    if (slots[name$1].every(isWhitespace)) {\n      delete slots[name$1];\n    }\n  }\n  return slots\n}\n\nfunction isWhitespace (node) {\n  return (node.isComment && !node.asyncFactory) || node.text === ' '\n}\n\n/*  */\n\nfunction normalizeScopedSlots (\n  slots,\n  normalSlots,\n  prevSlots\n) {\n  var res;\n  var hasNormalSlots = Object.keys(normalSlots).length > 0;\n  var isStable = slots ? !!slots.$stable : !hasNormalSlots;\n  var key = slots && slots.$key;\n  if (!slots) {\n    res = {};\n  } else if (slots._normalized) {\n    // fast path 1: child component re-render only, parent did not change\n    return slots._normalized\n  } else if (\n    isStable &&\n    prevSlots &&\n    prevSlots !== emptyObject &&\n    key === prevSlots.$key &&\n    !hasNormalSlots &&\n    !prevSlots.$hasNormal\n  ) {\n    // fast path 2: stable scoped slots w/ no normal slots to proxy,\n    // only need to normalize once\n    return prevSlots\n  } else {\n    res = {};\n    for (var key$1 in slots) {\n      if (slots[key$1] && key$1[0] !== '$') {\n        res[key$1] = normalizeScopedSlot(normalSlots, key$1, slots[key$1]);\n      }\n    }\n  }\n  // expose normal slots on scopedSlots\n  for (var key$2 in normalSlots) {\n    if (!(key$2 in res)) {\n      res[key$2] = proxyNormalSlot(normalSlots, key$2);\n    }\n  }\n  // avoriaz seems to mock a non-extensible $scopedSlots object\n  // and when that is passed down this would cause an error\n  if (slots && Object.isExtensible(slots)) {\n    (slots)._normalized = res;\n  }\n  def(res, '$stable', isStable);\n  def(res, '$key', key);\n  def(res, '$hasNormal', hasNormalSlots);\n  return res\n}\n\nfunction normalizeScopedSlot(normalSlots, key, fn) {\n  var normalized = function () {\n    var res = arguments.length ? fn.apply(null, arguments) : fn({});\n    res = res && typeof res === 'object' && !Array.isArray(res)\n      ? [res] // single vnode\n      : normalizeChildren(res);\n    return res && (\n      res.length === 0 ||\n      (res.length === 1 && res[0].isComment) // #9658\n    ) ? undefined\n      : res\n  };\n  // this is a slot using the new v-slot syntax without scope. although it is\n  // compiled as a scoped slot, render fn users would expect it to be present\n  // on this.$slots because the usage is semantically a normal slot.\n  if (fn.proxy) {\n    Object.defineProperty(normalSlots, key, {\n      get: normalized,\n      enumerable: true,\n      configurable: true\n    });\n  }\n  return normalized\n}\n\nfunction proxyNormalSlot(slots, key) {\n  return function () { return slots[key]; }\n}\n\n/*  */\n\n/**\n * Runtime helper for rendering v-for lists.\n */\nfunction renderList (\n  val,\n  render\n) {\n  var ret, i, l, keys, key;\n  if (Array.isArray(val) || typeof val === 'string') {\n    ret = new Array(val.length);\n    for (i = 0, l = val.length; i < l; i++) {\n      ret[i] = render(val[i], i);\n    }\n  } else if (typeof val === 'number') {\n    ret = new Array(val);\n    for (i = 0; i < val; i++) {\n      ret[i] = render(i + 1, i);\n    }\n  } else if (isObject(val)) {\n    if (hasSymbol && val[Symbol.iterator]) {\n      ret = [];\n      var iterator = val[Symbol.iterator]();\n      var result = iterator.next();\n      while (!result.done) {\n        ret.push(render(result.value, ret.length));\n        result = iterator.next();\n      }\n    } else {\n      keys = Object.keys(val);\n      ret = new Array(keys.length);\n      for (i = 0, l = keys.length; i < l; i++) {\n        key = keys[i];\n        ret[i] = render(val[key], key, i);\n      }\n    }\n  }\n  if (!isDef(ret)) {\n    ret = [];\n  }\n  (ret)._isVList = true;\n  return ret\n}\n\n/*  */\n\n/**\n * Runtime helper for rendering <slot>\n */\nfunction renderSlot (\n  name,\n  fallback,\n  props,\n  bindObject\n) {\n  var scopedSlotFn = this.$scopedSlots[name];\n  var nodes;\n  if (scopedSlotFn) { // scoped slot\n    props = props || {};\n    if (bindObject) {\n      if (process.env.NODE_ENV !== 'production' && !isObject(bindObject)) {\n        warn(\n          'slot v-bind without argument expects an Object',\n          this\n        );\n      }\n      props = extend(extend({}, bindObject), props);\n    }\n    nodes = scopedSlotFn(props) || fallback;\n  } else {\n    nodes = this.$slots[name] || fallback;\n  }\n\n  var target = props && props.slot;\n  if (target) {\n    return this.$createElement('template', { slot: target }, nodes)\n  } else {\n    return nodes\n  }\n}\n\n/*  */\n\n/**\n * Runtime helper for resolving filters\n */\nfunction resolveFilter (id) {\n  return resolveAsset(this.$options, 'filters', id, true) || identity\n}\n\n/*  */\n\nfunction isKeyNotMatch (expect, actual) {\n  if (Array.isArray(expect)) {\n    return expect.indexOf(actual) === -1\n  } else {\n    return expect !== actual\n  }\n}\n\n/**\n * Runtime helper for checking keyCodes from config.\n * exposed as Vue.prototype._k\n * passing in eventKeyName as last argument separately for backwards compat\n */\nfunction checkKeyCodes (\n  eventKeyCode,\n  key,\n  builtInKeyCode,\n  eventKeyName,\n  builtInKeyName\n) {\n  var mappedKeyCode = config.keyCodes[key] || builtInKeyCode;\n  if (builtInKeyName && eventKeyName && !config.keyCodes[key]) {\n    return isKeyNotMatch(builtInKeyName, eventKeyName)\n  } else if (mappedKeyCode) {\n    return isKeyNotMatch(mappedKeyCode, eventKeyCode)\n  } else if (eventKeyName) {\n    return hyphenate(eventKeyName) !== key\n  }\n}\n\n/*  */\n\n/**\n * Runtime helper for merging v-bind=\"object\" into a VNode's data.\n */\nfunction bindObjectProps (\n  data,\n  tag,\n  value,\n  asProp,\n  isSync\n) {\n  if (value) {\n    if (!isObject(value)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        'v-bind without argument expects an Object or Array value',\n        this\n      );\n    } else {\n      if (Array.isArray(value)) {\n        value = toObject(value);\n      }\n      var hash;\n      var loop = function ( key ) {\n        if (\n          key === 'class' ||\n          key === 'style' ||\n          isReservedAttribute(key)\n        ) {\n          hash = data;\n        } else {\n          var type = data.attrs && data.attrs.type;\n          hash = asProp || config.mustUseProp(tag, type, key)\n            ? data.domProps || (data.domProps = {})\n            : data.attrs || (data.attrs = {});\n        }\n        var camelizedKey = camelize(key);\n        var hyphenatedKey = hyphenate(key);\n        if (!(camelizedKey in hash) && !(hyphenatedKey in hash)) {\n          hash[key] = value[key];\n\n          if (isSync) {\n            var on = data.on || (data.on = {});\n            on[(\"update:\" + key)] = function ($event) {\n              value[key] = $event;\n            };\n          }\n        }\n      };\n\n      for (var key in value) loop( key );\n    }\n  }\n  return data\n}\n\n/*  */\n\n/**\n * Runtime helper for rendering static trees.\n */\nfunction renderStatic (\n  index,\n  isInFor\n) {\n  var cached = this._staticTrees || (this._staticTrees = []);\n  var tree = cached[index];\n  // if has already-rendered static tree and not inside v-for,\n  // we can reuse the same tree.\n  if (tree && !isInFor) {\n    return tree\n  }\n  // otherwise, render a fresh tree.\n  tree = cached[index] = this.$options.staticRenderFns[index].call(\n    this._renderProxy,\n    null,\n    this // for render fns generated for functional component templates\n  );\n  markStatic(tree, (\"__static__\" + index), false);\n  return tree\n}\n\n/**\n * Runtime helper for v-once.\n * Effectively it means marking the node as static with a unique key.\n */\nfunction markOnce (\n  tree,\n  index,\n  key\n) {\n  markStatic(tree, (\"__once__\" + index + (key ? (\"_\" + key) : \"\")), true);\n  return tree\n}\n\nfunction markStatic (\n  tree,\n  key,\n  isOnce\n) {\n  if (Array.isArray(tree)) {\n    for (var i = 0; i < tree.length; i++) {\n      if (tree[i] && typeof tree[i] !== 'string') {\n        markStaticNode(tree[i], (key + \"_\" + i), isOnce);\n      }\n    }\n  } else {\n    markStaticNode(tree, key, isOnce);\n  }\n}\n\nfunction markStaticNode (node, key, isOnce) {\n  node.isStatic = true;\n  node.key = key;\n  node.isOnce = isOnce;\n}\n\n/*  */\n\nfunction bindObjectListeners (data, value) {\n  if (value) {\n    if (!isPlainObject(value)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        'v-on without argument expects an Object value',\n        this\n      );\n    } else {\n      var on = data.on = data.on ? extend({}, data.on) : {};\n      for (var key in value) {\n        var existing = on[key];\n        var ours = value[key];\n        on[key] = existing ? [].concat(existing, ours) : ours;\n      }\n    }\n  }\n  return data\n}\n\n/*  */\n\nfunction resolveScopedSlots (\n  fns, // see flow/vnode\n  res,\n  // the following are added in 2.6\n  hasDynamicKeys,\n  contentHashKey\n) {\n  res = res || { $stable: !hasDynamicKeys };\n  for (var i = 0; i < fns.length; i++) {\n    var slot = fns[i];\n    if (Array.isArray(slot)) {\n      resolveScopedSlots(slot, res, hasDynamicKeys);\n    } else if (slot) {\n      // marker for reverse proxying v-slot without scope on this.$slots\n      if (slot.proxy) {\n        slot.fn.proxy = true;\n      }\n      res[slot.key] = slot.fn;\n    }\n  }\n  if (contentHashKey) {\n    (res).$key = contentHashKey;\n  }\n  return res\n}\n\n/*  */\n\nfunction bindDynamicKeys (baseObj, values) {\n  for (var i = 0; i < values.length; i += 2) {\n    var key = values[i];\n    if (typeof key === 'string' && key) {\n      baseObj[values[i]] = values[i + 1];\n    } else if (process.env.NODE_ENV !== 'production' && key !== '' && key !== null) {\n      // null is a special value for explicitly removing a binding\n      warn(\n        (\"Invalid value for dynamic directive argument (expected string or null): \" + key),\n        this\n      );\n    }\n  }\n  return baseObj\n}\n\n// helper to dynamically append modifier runtime markers to event names.\n// ensure only append when value is already string, otherwise it will be cast\n// to string and cause the type check to miss.\nfunction prependModifier (value, symbol) {\n  return typeof value === 'string' ? symbol + value : value\n}\n\n/*  */\n\nfunction installRenderHelpers (target) {\n  target._o = markOnce;\n  target._n = toNumber;\n  target._s = toString;\n  target._l = renderList;\n  target._t = renderSlot;\n  target._q = looseEqual;\n  target._i = looseIndexOf;\n  target._m = renderStatic;\n  target._f = resolveFilter;\n  target._k = checkKeyCodes;\n  target._b = bindObjectProps;\n  target._v = createTextVNode;\n  target._e = createEmptyVNode;\n  target._u = resolveScopedSlots;\n  target._g = bindObjectListeners;\n  target._d = bindDynamicKeys;\n  target._p = prependModifier;\n}\n\n/*  */\n\nfunction FunctionalRenderContext (\n  data,\n  props,\n  children,\n  parent,\n  Ctor\n) {\n  var this$1 = this;\n\n  var options = Ctor.options;\n  // ensure the createElement function in functional components\n  // gets a unique context - this is necessary for correct named slot check\n  var contextVm;\n  if (hasOwn(parent, '_uid')) {\n    contextVm = Object.create(parent);\n    // $flow-disable-line\n    contextVm._original = parent;\n  } else {\n    // the context vm passed in is a functional context as well.\n    // in this case we want to make sure we are able to get a hold to the\n    // real context instance.\n    contextVm = parent;\n    // $flow-disable-line\n    parent = parent._original;\n  }\n  var isCompiled = isTrue(options._compiled);\n  var needNormalization = !isCompiled;\n\n  this.data = data;\n  this.props = props;\n  this.children = children;\n  this.parent = parent;\n  this.listeners = data.on || emptyObject;\n  this.injections = resolveInject(options.inject, parent);\n  this.slots = function () {\n    if (!this$1.$slots) {\n      normalizeScopedSlots(\n        data.scopedSlots,\n        this$1.$slots = resolveSlots(children, parent)\n      );\n    }\n    return this$1.$slots\n  };\n\n  Object.defineProperty(this, 'scopedSlots', ({\n    enumerable: true,\n    get: function get () {\n      return normalizeScopedSlots(data.scopedSlots, this.slots())\n    }\n  }));\n\n  // support for compiled functional template\n  if (isCompiled) {\n    // exposing $options for renderStatic()\n    this.$options = options;\n    // pre-resolve slots for renderSlot()\n    this.$slots = this.slots();\n    this.$scopedSlots = normalizeScopedSlots(data.scopedSlots, this.$slots);\n  }\n\n  if (options._scopeId) {\n    this._c = function (a, b, c, d) {\n      var vnode = createElement(contextVm, a, b, c, d, needNormalization);\n      if (vnode && !Array.isArray(vnode)) {\n        vnode.fnScopeId = options._scopeId;\n        vnode.fnContext = parent;\n      }\n      return vnode\n    };\n  } else {\n    this._c = function (a, b, c, d) { return createElement(contextVm, a, b, c, d, needNormalization); };\n  }\n}\n\ninstallRenderHelpers(FunctionalRenderContext.prototype);\n\nfunction createFunctionalComponent (\n  Ctor,\n  propsData,\n  data,\n  contextVm,\n  children\n) {\n  var options = Ctor.options;\n  var props = {};\n  var propOptions = options.props;\n  if (isDef(propOptions)) {\n    for (var key in propOptions) {\n      props[key] = validateProp(key, propOptions, propsData || emptyObject);\n    }\n  } else {\n    if (isDef(data.attrs)) { mergeProps(props, data.attrs); }\n    if (isDef(data.props)) { mergeProps(props, data.props); }\n  }\n\n  var renderContext = new FunctionalRenderContext(\n    data,\n    props,\n    children,\n    contextVm,\n    Ctor\n  );\n\n  var vnode = options.render.call(null, renderContext._c, renderContext);\n\n  if (vnode instanceof VNode) {\n    return cloneAndMarkFunctionalResult(vnode, data, renderContext.parent, options, renderContext)\n  } else if (Array.isArray(vnode)) {\n    var vnodes = normalizeChildren(vnode) || [];\n    var res = new Array(vnodes.length);\n    for (var i = 0; i < vnodes.length; i++) {\n      res[i] = cloneAndMarkFunctionalResult(vnodes[i], data, renderContext.parent, options, renderContext);\n    }\n    return res\n  }\n}\n\nfunction cloneAndMarkFunctionalResult (vnode, data, contextVm, options, renderContext) {\n  // #7817 clone node before setting fnContext, otherwise if the node is reused\n  // (e.g. it was from a cached normal slot) the fnContext causes named slots\n  // that should not be matched to match.\n  var clone = cloneVNode(vnode);\n  clone.fnContext = contextVm;\n  clone.fnOptions = options;\n  if (process.env.NODE_ENV !== 'production') {\n    (clone.devtoolsMeta = clone.devtoolsMeta || {}).renderContext = renderContext;\n  }\n  if (data.slot) {\n    (clone.data || (clone.data = {})).slot = data.slot;\n  }\n  return clone\n}\n\nfunction mergeProps (to, from) {\n  for (var key in from) {\n    to[camelize(key)] = from[key];\n  }\n}\n\n/*  */\n\n/*  */\n\n/*  */\n\n/*  */\n\n// inline hooks to be invoked on component VNodes during patch\nvar componentVNodeHooks = {\n  init: function init (vnode, hydrating) {\n    if (\n      vnode.componentInstance &&\n      !vnode.componentInstance._isDestroyed &&\n      vnode.data.keepAlive\n    ) {\n      // kept-alive components, treat as a patch\n      var mountedNode = vnode; // work around flow\n      componentVNodeHooks.prepatch(mountedNode, mountedNode);\n    } else {\n      var child = vnode.componentInstance = createComponentInstanceForVnode(\n        vnode,\n        activeInstance\n      );\n      child.$mount(hydrating ? vnode.elm : undefined, hydrating);\n    }\n  },\n\n  prepatch: function prepatch (oldVnode, vnode) {\n    var options = vnode.componentOptions;\n    var child = vnode.componentInstance = oldVnode.componentInstance;\n    updateChildComponent(\n      child,\n      options.propsData, // updated props\n      options.listeners, // updated listeners\n      vnode, // new parent vnode\n      options.children // new children\n    );\n  },\n\n  insert: function insert (vnode) {\n    var context = vnode.context;\n    var componentInstance = vnode.componentInstance;\n    if (!componentInstance._isMounted) {\n      componentInstance._isMounted = true;\n      callHook(componentInstance, 'mounted');\n    }\n    if (vnode.data.keepAlive) {\n      if (context._isMounted) {\n        // vue-router#1212\n        // During updates, a kept-alive component's child components may\n        // change, so directly walking the tree here may call activated hooks\n        // on incorrect children. Instead we push them into a queue which will\n        // be processed after the whole patch process ended.\n        queueActivatedComponent(componentInstance);\n      } else {\n        activateChildComponent(componentInstance, true /* direct */);\n      }\n    }\n  },\n\n  destroy: function destroy (vnode) {\n    var componentInstance = vnode.componentInstance;\n    if (!componentInstance._isDestroyed) {\n      if (!vnode.data.keepAlive) {\n        componentInstance.$destroy();\n      } else {\n        deactivateChildComponent(componentInstance, true /* direct */);\n      }\n    }\n  }\n};\n\nvar hooksToMerge = Object.keys(componentVNodeHooks);\n\nfunction createComponent (\n  Ctor,\n  data,\n  context,\n  children,\n  tag\n) {\n  if (isUndef(Ctor)) {\n    return\n  }\n\n  var baseCtor = context.$options._base;\n\n  // plain options object: turn it into a constructor\n  if (isObject(Ctor)) {\n    Ctor = baseCtor.extend(Ctor);\n  }\n\n  // if at this stage it's not a constructor or an async component factory,\n  // reject.\n  if (typeof Ctor !== 'function') {\n    if (process.env.NODE_ENV !== 'production') {\n      warn((\"Invalid Component definition: \" + (String(Ctor))), context);\n    }\n    return\n  }\n\n  // async component\n  var asyncFactory;\n  if (isUndef(Ctor.cid)) {\n    asyncFactory = Ctor;\n    Ctor = resolveAsyncComponent(asyncFactory, baseCtor);\n    if (Ctor === undefined) {\n      // return a placeholder node for async component, which is rendered\n      // as a comment node but preserves all the raw information for the node.\n      // the information will be used for async server-rendering and hydration.\n      return createAsyncPlaceholder(\n        asyncFactory,\n        data,\n        context,\n        children,\n        tag\n      )\n    }\n  }\n\n  data = data || {};\n\n  // resolve constructor options in case global mixins are applied after\n  // component constructor creation\n  resolveConstructorOptions(Ctor);\n\n  // transform component v-model data into props & events\n  if (isDef(data.model)) {\n    transformModel(Ctor.options, data);\n  }\n\n  // extract props\n  var propsData = extractPropsFromVNodeData(data, Ctor, tag);\n\n  // functional component\n  if (isTrue(Ctor.options.functional)) {\n    return createFunctionalComponent(Ctor, propsData, data, context, children)\n  }\n\n  // extract listeners, since these needs to be treated as\n  // child component listeners instead of DOM listeners\n  var listeners = data.on;\n  // replace with listeners with .native modifier\n  // so it gets processed during parent component patch.\n  data.on = data.nativeOn;\n\n  if (isTrue(Ctor.options.abstract)) {\n    // abstract components do not keep anything\n    // other than props & listeners & slot\n\n    // work around flow\n    var slot = data.slot;\n    data = {};\n    if (slot) {\n      data.slot = slot;\n    }\n  }\n\n  // install component management hooks onto the placeholder node\n  installComponentHooks(data);\n\n  // return a placeholder vnode\n  var name = Ctor.options.name || tag;\n  var vnode = new VNode(\n    (\"vue-component-\" + (Ctor.cid) + (name ? (\"-\" + name) : '')),\n    data, undefined, undefined, undefined, context,\n    { Ctor: Ctor, propsData: propsData, listeners: listeners, tag: tag, children: children },\n    asyncFactory\n  );\n\n  return vnode\n}\n\nfunction createComponentInstanceForVnode (\n  vnode, // we know it's MountedComponentVNode but flow doesn't\n  parent // activeInstance in lifecycle state\n) {\n  var options = {\n    _isComponent: true,\n    _parentVnode: vnode,\n    parent: parent\n  };\n  // check inline-template render functions\n  var inlineTemplate = vnode.data.inlineTemplate;\n  if (isDef(inlineTemplate)) {\n    options.render = inlineTemplate.render;\n    options.staticRenderFns = inlineTemplate.staticRenderFns;\n  }\n  return new vnode.componentOptions.Ctor(options)\n}\n\nfunction installComponentHooks (data) {\n  var hooks = data.hook || (data.hook = {});\n  for (var i = 0; i < hooksToMerge.length; i++) {\n    var key = hooksToMerge[i];\n    var existing = hooks[key];\n    var toMerge = componentVNodeHooks[key];\n    if (existing !== toMerge && !(existing && existing._merged)) {\n      hooks[key] = existing ? mergeHook$1(toMerge, existing) : toMerge;\n    }\n  }\n}\n\nfunction mergeHook$1 (f1, f2) {\n  var merged = function (a, b) {\n    // flow complains about extra args which is why we use any\n    f1(a, b);\n    f2(a, b);\n  };\n  merged._merged = true;\n  return merged\n}\n\n// transform component v-model info (value and callback) into\n// prop and event handler respectively.\nfunction transformModel (options, data) {\n  var prop = (options.model && options.model.prop) || 'value';\n  var event = (options.model && options.model.event) || 'input'\n  ;(data.attrs || (data.attrs = {}))[prop] = data.model.value;\n  var on = data.on || (data.on = {});\n  var existing = on[event];\n  var callback = data.model.callback;\n  if (isDef(existing)) {\n    if (\n      Array.isArray(existing)\n        ? existing.indexOf(callback) === -1\n        : existing !== callback\n    ) {\n      on[event] = [callback].concat(existing);\n    }\n  } else {\n    on[event] = callback;\n  }\n}\n\n/*  */\n\nvar SIMPLE_NORMALIZE = 1;\nvar ALWAYS_NORMALIZE = 2;\n\n// wrapper function for providing a more flexible interface\n// without getting yelled at by flow\nfunction createElement (\n  context,\n  tag,\n  data,\n  children,\n  normalizationType,\n  alwaysNormalize\n) {\n  if (Array.isArray(data) || isPrimitive(data)) {\n    normalizationType = children;\n    children = data;\n    data = undefined;\n  }\n  if (isTrue(alwaysNormalize)) {\n    normalizationType = ALWAYS_NORMALIZE;\n  }\n  return _createElement(context, tag, data, children, normalizationType)\n}\n\nfunction _createElement (\n  context,\n  tag,\n  data,\n  children,\n  normalizationType\n) {\n  if (isDef(data) && isDef((data).__ob__)) {\n    process.env.NODE_ENV !== 'production' && warn(\n      \"Avoid using observed data object as vnode data: \" + (JSON.stringify(data)) + \"\\n\" +\n      'Always create fresh vnode data objects in each render!',\n      context\n    );\n    return createEmptyVNode()\n  }\n  // object syntax in v-bind\n  if (isDef(data) && isDef(data.is)) {\n    tag = data.is;\n  }\n  if (!tag) {\n    // in case of component :is set to falsy value\n    return createEmptyVNode()\n  }\n  // warn against non-primitive key\n  if (process.env.NODE_ENV !== 'production' &&\n    isDef(data) && isDef(data.key) && !isPrimitive(data.key)\n  ) {\n    {\n      warn(\n        'Avoid using non-primitive value as key, ' +\n        'use string/number value instead.',\n        context\n      );\n    }\n  }\n  // support single function children as default scoped slot\n  if (Array.isArray(children) &&\n    typeof children[0] === 'function'\n  ) {\n    data = data || {};\n    data.scopedSlots = { default: children[0] };\n    children.length = 0;\n  }\n  if (normalizationType === ALWAYS_NORMALIZE) {\n    children = normalizeChildren(children);\n  } else if (normalizationType === SIMPLE_NORMALIZE) {\n    children = simpleNormalizeChildren(children);\n  }\n  var vnode, ns;\n  if (typeof tag === 'string') {\n    var Ctor;\n    ns = (context.$vnode && context.$vnode.ns) || config.getTagNamespace(tag);\n    if (config.isReservedTag(tag)) {\n      // platform built-in elements\n      if (process.env.NODE_ENV !== 'production' && isDef(data) && isDef(data.nativeOn)) {\n        warn(\n          (\"The .native modifier for v-on is only valid on components but it was used on <\" + tag + \">.\"),\n          context\n        );\n      }\n      vnode = new VNode(\n        config.parsePlatformTagName(tag), data, children,\n        undefined, undefined, context\n      );\n    } else if ((!data || !data.pre) && isDef(Ctor = resolveAsset(context.$options, 'components', tag))) {\n      // component\n      vnode = createComponent(Ctor, data, context, children, tag);\n    } else {\n      // unknown or unlisted namespaced elements\n      // check at runtime because it may get assigned a namespace when its\n      // parent normalizes children\n      vnode = new VNode(\n        tag, data, children,\n        undefined, undefined, context\n      );\n    }\n  } else {\n    // direct component options / constructor\n    vnode = createComponent(tag, data, context, children);\n  }\n  if (Array.isArray(vnode)) {\n    return vnode\n  } else if (isDef(vnode)) {\n    if (isDef(ns)) { applyNS(vnode, ns); }\n    if (isDef(data)) { registerDeepBindings(data); }\n    return vnode\n  } else {\n    return createEmptyVNode()\n  }\n}\n\nfunction applyNS (vnode, ns, force) {\n  vnode.ns = ns;\n  if (vnode.tag === 'foreignObject') {\n    // use default namespace inside foreignObject\n    ns = undefined;\n    force = true;\n  }\n  if (isDef(vnode.children)) {\n    for (var i = 0, l = vnode.children.length; i < l; i++) {\n      var child = vnode.children[i];\n      if (isDef(child.tag) && (\n        isUndef(child.ns) || (isTrue(force) && child.tag !== 'svg'))) {\n        applyNS(child, ns, force);\n      }\n    }\n  }\n}\n\n// ref #5318\n// necessary to ensure parent re-render when deep bindings like :style and\n// :class are used on slot nodes\nfunction registerDeepBindings (data) {\n  if (isObject(data.style)) {\n    traverse(data.style);\n  }\n  if (isObject(data.class)) {\n    traverse(data.class);\n  }\n}\n\n/*  */\n\nfunction initRender (vm) {\n  vm._vnode = null; // the root of the child tree\n  vm._staticTrees = null; // v-once cached trees\n  var options = vm.$options;\n  var parentVnode = vm.$vnode = options._parentVnode; // the placeholder node in parent tree\n  var renderContext = parentVnode && parentVnode.context;\n  vm.$slots = resolveSlots(options._renderChildren, renderContext);\n  vm.$scopedSlots = emptyObject;\n  // bind the createElement fn to this instance\n  // so that we get proper render context inside it.\n  // args order: tag, data, children, normalizationType, alwaysNormalize\n  // internal version is used by render functions compiled from templates\n  vm._c = function (a, b, c, d) { return createElement(vm, a, b, c, d, false); };\n  // normalization is always applied for the public version, used in\n  // user-written render functions.\n  vm.$createElement = function (a, b, c, d) { return createElement(vm, a, b, c, d, true); };\n\n  // $attrs & $listeners are exposed for easier HOC creation.\n  // they need to be reactive so that HOCs using them are always updated\n  var parentData = parentVnode && parentVnode.data;\n\n  /* istanbul ignore else */\n  if (process.env.NODE_ENV !== 'production') {\n    defineReactive$$1(vm, '$attrs', parentData && parentData.attrs || emptyObject, function () {\n      !isUpdatingChildComponent && warn(\"$attrs is readonly.\", vm);\n    }, true);\n    defineReactive$$1(vm, '$listeners', options._parentListeners || emptyObject, function () {\n      !isUpdatingChildComponent && warn(\"$listeners is readonly.\", vm);\n    }, true);\n  } else {\n    defineReactive$$1(vm, '$attrs', parentData && parentData.attrs || emptyObject, null, true);\n    defineReactive$$1(vm, '$listeners', options._parentListeners || emptyObject, null, true);\n  }\n}\n\nvar currentRenderingInstance = null;\n\nfunction renderMixin (Vue) {\n  // install runtime convenience helpers\n  installRenderHelpers(Vue.prototype);\n\n  Vue.prototype.$nextTick = function (fn) {\n    return nextTick(fn, this)\n  };\n\n  Vue.prototype._render = function () {\n    var vm = this;\n    var ref = vm.$options;\n    var render = ref.render;\n    var _parentVnode = ref._parentVnode;\n\n    if (_parentVnode) {\n      vm.$scopedSlots = normalizeScopedSlots(\n        _parentVnode.data.scopedSlots,\n        vm.$slots,\n        vm.$scopedSlots\n      );\n    }\n\n    // set parent vnode. this allows render functions to have access\n    // to the data on the placeholder node.\n    vm.$vnode = _parentVnode;\n    // render self\n    var vnode;\n    try {\n      // There's no need to maintain a stack because all render fns are called\n      // separately from one another. Nested component's render fns are called\n      // when parent component is patched.\n      currentRenderingInstance = vm;\n      vnode = render.call(vm._renderProxy, vm.$createElement);\n    } catch (e) {\n      handleError(e, vm, \"render\");\n      // return error render result,\n      // or previous vnode to prevent render error causing blank component\n      /* istanbul ignore else */\n      if (process.env.NODE_ENV !== 'production' && vm.$options.renderError) {\n        try {\n          vnode = vm.$options.renderError.call(vm._renderProxy, vm.$createElement, e);\n        } catch (e) {\n          handleError(e, vm, \"renderError\");\n          vnode = vm._vnode;\n        }\n      } else {\n        vnode = vm._vnode;\n      }\n    } finally {\n      currentRenderingInstance = null;\n    }\n    // if the returned array contains only a single node, allow it\n    if (Array.isArray(vnode) && vnode.length === 1) {\n      vnode = vnode[0];\n    }\n    // return empty vnode in case the render function errored out\n    if (!(vnode instanceof VNode)) {\n      if (process.env.NODE_ENV !== 'production' && Array.isArray(vnode)) {\n        warn(\n          'Multiple root nodes returned from render function. Render function ' +\n          'should return a single root node.',\n          vm\n        );\n      }\n      vnode = createEmptyVNode();\n    }\n    // set parent\n    vnode.parent = _parentVnode;\n    return vnode\n  };\n}\n\n/*  */\n\nfunction ensureCtor (comp, base) {\n  if (\n    comp.__esModule ||\n    (hasSymbol && comp[Symbol.toStringTag] === 'Module')\n  ) {\n    comp = comp.default;\n  }\n  return isObject(comp)\n    ? base.extend(comp)\n    : comp\n}\n\nfunction createAsyncPlaceholder (\n  factory,\n  data,\n  context,\n  children,\n  tag\n) {\n  var node = createEmptyVNode();\n  node.asyncFactory = factory;\n  node.asyncMeta = { data: data, context: context, children: children, tag: tag };\n  return node\n}\n\nfunction resolveAsyncComponent (\n  factory,\n  baseCtor\n) {\n  if (isTrue(factory.error) && isDef(factory.errorComp)) {\n    return factory.errorComp\n  }\n\n  if (isDef(factory.resolved)) {\n    return factory.resolved\n  }\n\n  var owner = currentRenderingInstance;\n  if (owner && isDef(factory.owners) && factory.owners.indexOf(owner) === -1) {\n    // already pending\n    factory.owners.push(owner);\n  }\n\n  if (isTrue(factory.loading) && isDef(factory.loadingComp)) {\n    return factory.loadingComp\n  }\n\n  if (owner && !isDef(factory.owners)) {\n    var owners = factory.owners = [owner];\n    var sync = true;\n    var timerLoading = null;\n    var timerTimeout = null\n\n    ;(owner).$on('hook:destroyed', function () { return remove(owners, owner); });\n\n    var forceRender = function (renderCompleted) {\n      for (var i = 0, l = owners.length; i < l; i++) {\n        (owners[i]).$forceUpdate();\n      }\n\n      if (renderCompleted) {\n        owners.length = 0;\n        if (timerLoading !== null) {\n          clearTimeout(timerLoading);\n          timerLoading = null;\n        }\n        if (timerTimeout !== null) {\n          clearTimeout(timerTimeout);\n          timerTimeout = null;\n        }\n      }\n    };\n\n    var resolve = once(function (res) {\n      // cache resolved\n      factory.resolved = ensureCtor(res, baseCtor);\n      // invoke callbacks only if this is not a synchronous resolve\n      // (async resolves are shimmed as synchronous during SSR)\n      if (!sync) {\n        forceRender(true);\n      } else {\n        owners.length = 0;\n      }\n    });\n\n    var reject = once(function (reason) {\n      process.env.NODE_ENV !== 'production' && warn(\n        \"Failed to resolve async component: \" + (String(factory)) +\n        (reason ? (\"\\nReason: \" + reason) : '')\n      );\n      if (isDef(factory.errorComp)) {\n        factory.error = true;\n        forceRender(true);\n      }\n    });\n\n    var res = factory(resolve, reject);\n\n    if (isObject(res)) {\n      if (isPromise(res)) {\n        // () => Promise\n        if (isUndef(factory.resolved)) {\n          res.then(resolve, reject);\n        }\n      } else if (isPromise(res.component)) {\n        res.component.then(resolve, reject);\n\n        if (isDef(res.error)) {\n          factory.errorComp = ensureCtor(res.error, baseCtor);\n        }\n\n        if (isDef(res.loading)) {\n          factory.loadingComp = ensureCtor(res.loading, baseCtor);\n          if (res.delay === 0) {\n            factory.loading = true;\n          } else {\n            timerLoading = setTimeout(function () {\n              timerLoading = null;\n              if (isUndef(factory.resolved) && isUndef(factory.error)) {\n                factory.loading = true;\n                forceRender(false);\n              }\n            }, res.delay || 200);\n          }\n        }\n\n        if (isDef(res.timeout)) {\n          timerTimeout = setTimeout(function () {\n            timerTimeout = null;\n            if (isUndef(factory.resolved)) {\n              reject(\n                process.env.NODE_ENV !== 'production'\n                  ? (\"timeout (\" + (res.timeout) + \"ms)\")\n                  : null\n              );\n            }\n          }, res.timeout);\n        }\n      }\n    }\n\n    sync = false;\n    // return in case resolved synchronously\n    return factory.loading\n      ? factory.loadingComp\n      : factory.resolved\n  }\n}\n\n/*  */\n\nfunction isAsyncPlaceholder (node) {\n  return node.isComment && node.asyncFactory\n}\n\n/*  */\n\nfunction getFirstComponentChild (children) {\n  if (Array.isArray(children)) {\n    for (var i = 0; i < children.length; i++) {\n      var c = children[i];\n      if (isDef(c) && (isDef(c.componentOptions) || isAsyncPlaceholder(c))) {\n        return c\n      }\n    }\n  }\n}\n\n/*  */\n\n/*  */\n\nfunction initEvents (vm) {\n  vm._events = Object.create(null);\n  vm._hasHookEvent = false;\n  // init parent attached events\n  var listeners = vm.$options._parentListeners;\n  if (listeners) {\n    updateComponentListeners(vm, listeners);\n  }\n}\n\nvar target;\n\nfunction add (event, fn) {\n  target.$on(event, fn);\n}\n\nfunction remove$1 (event, fn) {\n  target.$off(event, fn);\n}\n\nfunction createOnceHandler (event, fn) {\n  var _target = target;\n  return function onceHandler () {\n    var res = fn.apply(null, arguments);\n    if (res !== null) {\n      _target.$off(event, onceHandler);\n    }\n  }\n}\n\nfunction updateComponentListeners (\n  vm,\n  listeners,\n  oldListeners\n) {\n  target = vm;\n  updateListeners(listeners, oldListeners || {}, add, remove$1, createOnceHandler, vm);\n  target = undefined;\n}\n\nfunction eventsMixin (Vue) {\n  var hookRE = /^hook:/;\n  Vue.prototype.$on = function (event, fn) {\n    var vm = this;\n    if (Array.isArray(event)) {\n      for (var i = 0, l = event.length; i < l; i++) {\n        vm.$on(event[i], fn);\n      }\n    } else {\n      (vm._events[event] || (vm._events[event] = [])).push(fn);\n      // optimize hook:event cost by using a boolean flag marked at registration\n      // instead of a hash lookup\n      if (hookRE.test(event)) {\n        vm._hasHookEvent = true;\n      }\n    }\n    return vm\n  };\n\n  Vue.prototype.$once = function (event, fn) {\n    var vm = this;\n    function on () {\n      vm.$off(event, on);\n      fn.apply(vm, arguments);\n    }\n    on.fn = fn;\n    vm.$on(event, on);\n    return vm\n  };\n\n  Vue.prototype.$off = function (event, fn) {\n    var vm = this;\n    // all\n    if (!arguments.length) {\n      vm._events = Object.create(null);\n      return vm\n    }\n    // array of events\n    if (Array.isArray(event)) {\n      for (var i$1 = 0, l = event.length; i$1 < l; i$1++) {\n        vm.$off(event[i$1], fn);\n      }\n      return vm\n    }\n    // specific event\n    var cbs = vm._events[event];\n    if (!cbs) {\n      return vm\n    }\n    if (!fn) {\n      vm._events[event] = null;\n      return vm\n    }\n    // specific handler\n    var cb;\n    var i = cbs.length;\n    while (i--) {\n      cb = cbs[i];\n      if (cb === fn || cb.fn === fn) {\n        cbs.splice(i, 1);\n        break\n      }\n    }\n    return vm\n  };\n\n  Vue.prototype.$emit = function (event) {\n    var vm = this;\n    if (process.env.NODE_ENV !== 'production') {\n      var lowerCaseEvent = event.toLowerCase();\n      if (lowerCaseEvent !== event && vm._events[lowerCaseEvent]) {\n        tip(\n          \"Event \\\"\" + lowerCaseEvent + \"\\\" is emitted in component \" +\n          (formatComponentName(vm)) + \" but the handler is registered for \\\"\" + event + \"\\\". \" +\n          \"Note that HTML attributes are case-insensitive and you cannot use \" +\n          \"v-on to listen to camelCase events when using in-DOM templates. \" +\n          \"You should probably use \\\"\" + (hyphenate(event)) + \"\\\" instead of \\\"\" + event + \"\\\".\"\n        );\n      }\n    }\n    var cbs = vm._events[event];\n    if (cbs) {\n      cbs = cbs.length > 1 ? toArray(cbs) : cbs;\n      var args = toArray(arguments, 1);\n      var info = \"event handler for \\\"\" + event + \"\\\"\";\n      for (var i = 0, l = cbs.length; i < l; i++) {\n        invokeWithErrorHandling(cbs[i], vm, args, vm, info);\n      }\n    }\n    return vm\n  };\n}\n\n/*  */\n\nvar activeInstance = null;\nvar isUpdatingChildComponent = false;\n\nfunction setActiveInstance(vm) {\n  var prevActiveInstance = activeInstance;\n  activeInstance = vm;\n  return function () {\n    activeInstance = prevActiveInstance;\n  }\n}\n\nfunction initLifecycle (vm) {\n  var options = vm.$options;\n\n  // locate first non-abstract parent\n  var parent = options.parent;\n  if (parent && !options.abstract) {\n    while (parent.$options.abstract && parent.$parent) {\n      parent = parent.$parent;\n    }\n    parent.$children.push(vm);\n  }\n\n  vm.$parent = parent;\n  vm.$root = parent ? parent.$root : vm;\n\n  vm.$children = [];\n  vm.$refs = {};\n\n  vm._watcher = null;\n  vm._inactive = null;\n  vm._directInactive = false;\n  vm._isMounted = false;\n  vm._isDestroyed = false;\n  vm._isBeingDestroyed = false;\n}\n\nfunction lifecycleMixin (Vue) {\n  Vue.prototype._update = function (vnode, hydrating) {\n    var vm = this;\n    var prevEl = vm.$el;\n    var prevVnode = vm._vnode;\n    var restoreActiveInstance = setActiveInstance(vm);\n    vm._vnode = vnode;\n    // Vue.prototype.__patch__ is injected in entry points\n    // based on the rendering backend used.\n    if (!prevVnode) {\n      // initial render\n      vm.$el = vm.__patch__(vm.$el, vnode, hydrating, false /* removeOnly */);\n    } else {\n      // updates\n      vm.$el = vm.__patch__(prevVnode, vnode);\n    }\n    restoreActiveInstance();\n    // update __vue__ reference\n    if (prevEl) {\n      prevEl.__vue__ = null;\n    }\n    if (vm.$el) {\n      vm.$el.__vue__ = vm;\n    }\n    // if parent is an HOC, update its $el as well\n    if (vm.$vnode && vm.$parent && vm.$vnode === vm.$parent._vnode) {\n      vm.$parent.$el = vm.$el;\n    }\n    // updated hook is called by the scheduler to ensure that children are\n    // updated in a parent's updated hook.\n  };\n\n  Vue.prototype.$forceUpdate = function () {\n    var vm = this;\n    if (vm._watcher) {\n      vm._watcher.update();\n    }\n  };\n\n  Vue.prototype.$destroy = function () {\n    var vm = this;\n    if (vm._isBeingDestroyed) {\n      return\n    }\n    callHook(vm, 'beforeDestroy');\n    vm._isBeingDestroyed = true;\n    // remove self from parent\n    var parent = vm.$parent;\n    if (parent && !parent._isBeingDestroyed && !vm.$options.abstract) {\n      remove(parent.$children, vm);\n    }\n    // teardown watchers\n    if (vm._watcher) {\n      vm._watcher.teardown();\n    }\n    var i = vm._watchers.length;\n    while (i--) {\n      vm._watchers[i].teardown();\n    }\n    // remove reference from data ob\n    // frozen object may not have observer.\n    if (vm._data.__ob__) {\n      vm._data.__ob__.vmCount--;\n    }\n    // call the last hook...\n    vm._isDestroyed = true;\n    // invoke destroy hooks on current rendered tree\n    vm.__patch__(vm._vnode, null);\n    // fire destroyed hook\n    callHook(vm, 'destroyed');\n    // turn off all instance listeners.\n    vm.$off();\n    // remove __vue__ reference\n    if (vm.$el) {\n      vm.$el.__vue__ = null;\n    }\n    // release circular reference (#6759)\n    if (vm.$vnode) {\n      vm.$vnode.parent = null;\n    }\n  };\n}\n\nfunction mountComponent (\n  vm,\n  el,\n  hydrating\n) {\n  vm.$el = el;\n  if (!vm.$options.render) {\n    vm.$options.render = createEmptyVNode;\n    if (process.env.NODE_ENV !== 'production') {\n      /* istanbul ignore if */\n      if ((vm.$options.template && vm.$options.template.charAt(0) !== '#') ||\n        vm.$options.el || el) {\n        warn(\n          'You are using the runtime-only build of Vue where the template ' +\n          'compiler is not available. Either pre-compile the templates into ' +\n          'render functions, or use the compiler-included build.',\n          vm\n        );\n      } else {\n        warn(\n          'Failed to mount component: template or render function not defined.',\n          vm\n        );\n      }\n    }\n  }\n  callHook(vm, 'beforeMount');\n\n  var updateComponent;\n  /* istanbul ignore if */\n  if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n    updateComponent = function () {\n      var name = vm._name;\n      var id = vm._uid;\n      var startTag = \"vue-perf-start:\" + id;\n      var endTag = \"vue-perf-end:\" + id;\n\n      mark(startTag);\n      var vnode = vm._render();\n      mark(endTag);\n      measure((\"vue \" + name + \" render\"), startTag, endTag);\n\n      mark(startTag);\n      vm._update(vnode, hydrating);\n      mark(endTag);\n      measure((\"vue \" + name + \" patch\"), startTag, endTag);\n    };\n  } else {\n    updateComponent = function () {\n      vm._update(vm._render(), hydrating);\n    };\n  }\n\n  // we set this to vm._watcher inside the watcher's constructor\n  // since the watcher's initial patch may call $forceUpdate (e.g. inside child\n  // component's mounted hook), which relies on vm._watcher being already defined\n  new Watcher(vm, updateComponent, noop, {\n    before: function before () {\n      if (vm._isMounted && !vm._isDestroyed) {\n        callHook(vm, 'beforeUpdate');\n      }\n    }\n  }, true /* isRenderWatcher */);\n  hydrating = false;\n\n  // manually mounted instance, call mounted on self\n  // mounted is called for render-created child components in its inserted hook\n  if (vm.$vnode == null) {\n    vm._isMounted = true;\n    callHook(vm, 'mounted');\n  }\n  return vm\n}\n\nfunction updateChildComponent (\n  vm,\n  propsData,\n  listeners,\n  parentVnode,\n  renderChildren\n) {\n  if (process.env.NODE_ENV !== 'production') {\n    isUpdatingChildComponent = true;\n  }\n\n  // determine whether component has slot children\n  // we need to do this before overwriting $options._renderChildren.\n\n  // check if there are dynamic scopedSlots (hand-written or compiled but with\n  // dynamic slot names). Static scoped slots compiled from template has the\n  // \"$stable\" marker.\n  var newScopedSlots = parentVnode.data.scopedSlots;\n  var oldScopedSlots = vm.$scopedSlots;\n  var hasDynamicScopedSlot = !!(\n    (newScopedSlots && !newScopedSlots.$stable) ||\n    (oldScopedSlots !== emptyObject && !oldScopedSlots.$stable) ||\n    (newScopedSlots && vm.$scopedSlots.$key !== newScopedSlots.$key)\n  );\n\n  // Any static slot children from the parent may have changed during parent's\n  // update. Dynamic scoped slots may also have changed. In such cases, a forced\n  // update is necessary to ensure correctness.\n  var needsForceUpdate = !!(\n    renderChildren ||               // has new static slots\n    vm.$options._renderChildren ||  // has old static slots\n    hasDynamicScopedSlot\n  );\n\n  vm.$options._parentVnode = parentVnode;\n  vm.$vnode = parentVnode; // update vm's placeholder node without re-render\n\n  if (vm._vnode) { // update child tree's parent\n    vm._vnode.parent = parentVnode;\n  }\n  vm.$options._renderChildren = renderChildren;\n\n  // update $attrs and $listeners hash\n  // these are also reactive so they may trigger child update if the child\n  // used them during render\n  vm.$attrs = parentVnode.data.attrs || emptyObject;\n  vm.$listeners = listeners || emptyObject;\n\n  // update props\n  if (propsData && vm.$options.props) {\n    toggleObserving(false);\n    var props = vm._props;\n    var propKeys = vm.$options._propKeys || [];\n    for (var i = 0; i < propKeys.length; i++) {\n      var key = propKeys[i];\n      var propOptions = vm.$options.props; // wtf flow?\n      props[key] = validateProp(key, propOptions, propsData, vm);\n    }\n    toggleObserving(true);\n    // keep a copy of raw propsData\n    vm.$options.propsData = propsData;\n  }\n\n  // update listeners\n  listeners = listeners || emptyObject;\n  var oldListeners = vm.$options._parentListeners;\n  vm.$options._parentListeners = listeners;\n  updateComponentListeners(vm, listeners, oldListeners);\n\n  // resolve slots + force update if has children\n  if (needsForceUpdate) {\n    vm.$slots = resolveSlots(renderChildren, parentVnode.context);\n    vm.$forceUpdate();\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    isUpdatingChildComponent = false;\n  }\n}\n\nfunction isInInactiveTree (vm) {\n  while (vm && (vm = vm.$parent)) {\n    if (vm._inactive) { return true }\n  }\n  return false\n}\n\nfunction activateChildComponent (vm, direct) {\n  if (direct) {\n    vm._directInactive = false;\n    if (isInInactiveTree(vm)) {\n      return\n    }\n  } else if (vm._directInactive) {\n    return\n  }\n  if (vm._inactive || vm._inactive === null) {\n    vm._inactive = false;\n    for (var i = 0; i < vm.$children.length; i++) {\n      activateChildComponent(vm.$children[i]);\n    }\n    callHook(vm, 'activated');\n  }\n}\n\nfunction deactivateChildComponent (vm, direct) {\n  if (direct) {\n    vm._directInactive = true;\n    if (isInInactiveTree(vm)) {\n      return\n    }\n  }\n  if (!vm._inactive) {\n    vm._inactive = true;\n    for (var i = 0; i < vm.$children.length; i++) {\n      deactivateChildComponent(vm.$children[i]);\n    }\n    callHook(vm, 'deactivated');\n  }\n}\n\nfunction callHook (vm, hook) {\n  // #7573 disable dep collection when invoking lifecycle hooks\n  pushTarget();\n  var handlers = vm.$options[hook];\n  var info = hook + \" hook\";\n  if (handlers) {\n    for (var i = 0, j = handlers.length; i < j; i++) {\n      invokeWithErrorHandling(handlers[i], vm, null, vm, info);\n    }\n  }\n  if (vm._hasHookEvent) {\n    vm.$emit('hook:' + hook);\n  }\n  popTarget();\n}\n\n/*  */\n\nvar MAX_UPDATE_COUNT = 100;\n\nvar queue = [];\nvar activatedChildren = [];\nvar has = {};\nvar circular = {};\nvar waiting = false;\nvar flushing = false;\nvar index = 0;\n\n/**\n * Reset the scheduler's state.\n */\nfunction resetSchedulerState () {\n  index = queue.length = activatedChildren.length = 0;\n  has = {};\n  if (process.env.NODE_ENV !== 'production') {\n    circular = {};\n  }\n  waiting = flushing = false;\n}\n\n// Async edge case #6566 requires saving the timestamp when event listeners are\n// attached. However, calling performance.now() has a perf overhead especially\n// if the page has thousands of event listeners. Instead, we take a timestamp\n// every time the scheduler flushes and use that for all event listeners\n// attached during that flush.\nvar currentFlushTimestamp = 0;\n\n// Async edge case fix requires storing an event listener's attach timestamp.\nvar getNow = Date.now;\n\n// Determine what event timestamp the browser is using. Annoyingly, the\n// timestamp can either be hi-res (relative to page load) or low-res\n// (relative to UNIX epoch), so in order to compare time we have to use the\n// same timestamp type when saving the flush timestamp.\n// All IE versions use low-res event timestamps, and have problematic clock\n// implementations (#9632)\nif (inBrowser && !isIE) {\n  var performance = window.performance;\n  if (\n    performance &&\n    typeof performance.now === 'function' &&\n    getNow() > document.createEvent('Event').timeStamp\n  ) {\n    // if the event timestamp, although evaluated AFTER the Date.now(), is\n    // smaller than it, it means the event is using a hi-res timestamp,\n    // and we need to use the hi-res version for event listener timestamps as\n    // well.\n    getNow = function () { return performance.now(); };\n  }\n}\n\n/**\n * Flush both queues and run the watchers.\n */\nfunction flushSchedulerQueue () {\n  currentFlushTimestamp = getNow();\n  flushing = true;\n  var watcher, id;\n\n  // Sort queue before flush.\n  // This ensures that:\n  // 1. Components are updated from parent to child. (because parent is always\n  //    created before the child)\n  // 2. A component's user watchers are run before its render watcher (because\n  //    user watchers are created before the render watcher)\n  // 3. If a component is destroyed during a parent component's watcher run,\n  //    its watchers can be skipped.\n  queue.sort(function (a, b) { return a.id - b.id; });\n\n  // do not cache length because more watchers might be pushed\n  // as we run existing watchers\n  for (index = 0; index < queue.length; index++) {\n    watcher = queue[index];\n    if (watcher.before) {\n      watcher.before();\n    }\n    id = watcher.id;\n    has[id] = null;\n    watcher.run();\n    // in dev build, check and stop circular updates.\n    if (process.env.NODE_ENV !== 'production' && has[id] != null) {\n      circular[id] = (circular[id] || 0) + 1;\n      if (circular[id] > MAX_UPDATE_COUNT) {\n        warn(\n          'You may have an infinite update loop ' + (\n            watcher.user\n              ? (\"in watcher with expression \\\"\" + (watcher.expression) + \"\\\"\")\n              : \"in a component render function.\"\n          ),\n          watcher.vm\n        );\n        break\n      }\n    }\n  }\n\n  // keep copies of post queues before resetting state\n  var activatedQueue = activatedChildren.slice();\n  var updatedQueue = queue.slice();\n\n  resetSchedulerState();\n\n  // call component updated and activated hooks\n  callActivatedHooks(activatedQueue);\n  callUpdatedHooks(updatedQueue);\n\n  // devtool hook\n  /* istanbul ignore if */\n  if (devtools && config.devtools) {\n    devtools.emit('flush');\n  }\n}\n\nfunction callUpdatedHooks (queue) {\n  var i = queue.length;\n  while (i--) {\n    var watcher = queue[i];\n    var vm = watcher.vm;\n    if (vm._watcher === watcher && vm._isMounted && !vm._isDestroyed) {\n      callHook(vm, 'updated');\n    }\n  }\n}\n\n/**\n * Queue a kept-alive component that was activated during patch.\n * The queue will be processed after the entire tree has been patched.\n */\nfunction queueActivatedComponent (vm) {\n  // setting _inactive to false here so that a render function can\n  // rely on checking whether it's in an inactive tree (e.g. router-view)\n  vm._inactive = false;\n  activatedChildren.push(vm);\n}\n\nfunction callActivatedHooks (queue) {\n  for (var i = 0; i < queue.length; i++) {\n    queue[i]._inactive = true;\n    activateChildComponent(queue[i], true /* true */);\n  }\n}\n\n/**\n * Push a watcher into the watcher queue.\n * Jobs with duplicate IDs will be skipped unless it's\n * pushed when the queue is being flushed.\n */\nfunction queueWatcher (watcher) {\n  var id = watcher.id;\n  if (has[id] == null) {\n    has[id] = true;\n    if (!flushing) {\n      queue.push(watcher);\n    } else {\n      // if already flushing, splice the watcher based on its id\n      // if already past its id, it will be run next immediately.\n      var i = queue.length - 1;\n      while (i > index && queue[i].id > watcher.id) {\n        i--;\n      }\n      queue.splice(i + 1, 0, watcher);\n    }\n    // queue the flush\n    if (!waiting) {\n      waiting = true;\n\n      if (process.env.NODE_ENV !== 'production' && !config.async) {\n        flushSchedulerQueue();\n        return\n      }\n      nextTick(flushSchedulerQueue);\n    }\n  }\n}\n\n/*  */\n\n\n\nvar uid$2 = 0;\n\n/**\n * A watcher parses an expression, collects dependencies,\n * and fires callback when the expression value changes.\n * This is used for both the $watch() api and directives.\n */\nvar Watcher = function Watcher (\n  vm,\n  expOrFn,\n  cb,\n  options,\n  isRenderWatcher\n) {\n  this.vm = vm;\n  if (isRenderWatcher) {\n    vm._watcher = this;\n  }\n  vm._watchers.push(this);\n  // options\n  if (options) {\n    this.deep = !!options.deep;\n    this.user = !!options.user;\n    this.lazy = !!options.lazy;\n    this.sync = !!options.sync;\n    this.before = options.before;\n  } else {\n    this.deep = this.user = this.lazy = this.sync = false;\n  }\n  this.cb = cb;\n  this.id = ++uid$2; // uid for batching\n  this.active = true;\n  this.dirty = this.lazy; // for lazy watchers\n  this.deps = [];\n  this.newDeps = [];\n  this.depIds = new _Set();\n  this.newDepIds = new _Set();\n  this.expression = process.env.NODE_ENV !== 'production'\n    ? expOrFn.toString()\n    : '';\n  // parse expression for getter\n  if (typeof expOrFn === 'function') {\n    this.getter = expOrFn;\n  } else {\n    this.getter = parsePath(expOrFn);\n    if (!this.getter) {\n      this.getter = noop;\n      process.env.NODE_ENV !== 'production' && warn(\n        \"Failed watching path: \\\"\" + expOrFn + \"\\\" \" +\n        'Watcher only accepts simple dot-delimited paths. ' +\n        'For full control, use a function instead.',\n        vm\n      );\n    }\n  }\n  this.value = this.lazy\n    ? undefined\n    : this.get();\n};\n\n/**\n * Evaluate the getter, and re-collect dependencies.\n */\nWatcher.prototype.get = function get () {\n  pushTarget(this);\n  var value;\n  var vm = this.vm;\n  try {\n    value = this.getter.call(vm, vm);\n  } catch (e) {\n    if (this.user) {\n      handleError(e, vm, (\"getter for watcher \\\"\" + (this.expression) + \"\\\"\"));\n    } else {\n      throw e\n    }\n  } finally {\n    // \"touch\" every property so they are all tracked as\n    // dependencies for deep watching\n    if (this.deep) {\n      traverse(value);\n    }\n    popTarget();\n    this.cleanupDeps();\n  }\n  return value\n};\n\n/**\n * Add a dependency to this directive.\n */\nWatcher.prototype.addDep = function addDep (dep) {\n  var id = dep.id;\n  if (!this.newDepIds.has(id)) {\n    this.newDepIds.add(id);\n    this.newDeps.push(dep);\n    if (!this.depIds.has(id)) {\n      dep.addSub(this);\n    }\n  }\n};\n\n/**\n * Clean up for dependency collection.\n */\nWatcher.prototype.cleanupDeps = function cleanupDeps () {\n  var i = this.deps.length;\n  while (i--) {\n    var dep = this.deps[i];\n    if (!this.newDepIds.has(dep.id)) {\n      dep.removeSub(this);\n    }\n  }\n  var tmp = this.depIds;\n  this.depIds = this.newDepIds;\n  this.newDepIds = tmp;\n  this.newDepIds.clear();\n  tmp = this.deps;\n  this.deps = this.newDeps;\n  this.newDeps = tmp;\n  this.newDeps.length = 0;\n};\n\n/**\n * Subscriber interface.\n * Will be called when a dependency changes.\n */\nWatcher.prototype.update = function update () {\n  /* istanbul ignore else */\n  if (this.lazy) {\n    this.dirty = true;\n  } else if (this.sync) {\n    this.run();\n  } else {\n    queueWatcher(this);\n  }\n};\n\n/**\n * Scheduler job interface.\n * Will be called by the scheduler.\n */\nWatcher.prototype.run = function run () {\n  if (this.active) {\n    var value = this.get();\n    if (\n      value !== this.value ||\n      // Deep watchers and watchers on Object/Arrays should fire even\n      // when the value is the same, because the value may\n      // have mutated.\n      isObject(value) ||\n      this.deep\n    ) {\n      // set new value\n      var oldValue = this.value;\n      this.value = value;\n      if (this.user) {\n        try {\n          this.cb.call(this.vm, value, oldValue);\n        } catch (e) {\n          handleError(e, this.vm, (\"callback for watcher \\\"\" + (this.expression) + \"\\\"\"));\n        }\n      } else {\n        this.cb.call(this.vm, value, oldValue);\n      }\n    }\n  }\n};\n\n/**\n * Evaluate the value of the watcher.\n * This only gets called for lazy watchers.\n */\nWatcher.prototype.evaluate = function evaluate () {\n  this.value = this.get();\n  this.dirty = false;\n};\n\n/**\n * Depend on all deps collected by this watcher.\n */\nWatcher.prototype.depend = function depend () {\n  var i = this.deps.length;\n  while (i--) {\n    this.deps[i].depend();\n  }\n};\n\n/**\n * Remove self from all dependencies' subscriber list.\n */\nWatcher.prototype.teardown = function teardown () {\n  if (this.active) {\n    // remove self from vm's watcher list\n    // this is a somewhat expensive operation so we skip it\n    // if the vm is being destroyed.\n    if (!this.vm._isBeingDestroyed) {\n      remove(this.vm._watchers, this);\n    }\n    var i = this.deps.length;\n    while (i--) {\n      this.deps[i].removeSub(this);\n    }\n    this.active = false;\n  }\n};\n\n/*  */\n\nvar sharedPropertyDefinition = {\n  enumerable: true,\n  configurable: true,\n  get: noop,\n  set: noop\n};\n\nfunction proxy (target, sourceKey, key) {\n  sharedPropertyDefinition.get = function proxyGetter () {\n    return this[sourceKey][key]\n  };\n  sharedPropertyDefinition.set = function proxySetter (val) {\n    this[sourceKey][key] = val;\n  };\n  Object.defineProperty(target, key, sharedPropertyDefinition);\n}\n\nfunction initState (vm) {\n  vm._watchers = [];\n  var opts = vm.$options;\n  if (opts.props) { initProps(vm, opts.props); }\n  if (opts.methods) { initMethods(vm, opts.methods); }\n  if (opts.data) {\n    initData(vm);\n  } else {\n    observe(vm._data = {}, true /* asRootData */);\n  }\n  if (opts.computed) { initComputed(vm, opts.computed); }\n  if (opts.watch && opts.watch !== nativeWatch) {\n    initWatch(vm, opts.watch);\n  }\n}\n\nfunction initProps (vm, propsOptions) {\n  var propsData = vm.$options.propsData || {};\n  var props = vm._props = {};\n  // cache prop keys so that future props updates can iterate using Array\n  // instead of dynamic object key enumeration.\n  var keys = vm.$options._propKeys = [];\n  var isRoot = !vm.$parent;\n  // root instance props should be converted\n  if (!isRoot) {\n    toggleObserving(false);\n  }\n  var loop = function ( key ) {\n    keys.push(key);\n    var value = validateProp(key, propsOptions, propsData, vm);\n    /* istanbul ignore else */\n    if (process.env.NODE_ENV !== 'production') {\n      var hyphenatedKey = hyphenate(key);\n      if (isReservedAttribute(hyphenatedKey) ||\n          config.isReservedAttr(hyphenatedKey)) {\n        warn(\n          (\"\\\"\" + hyphenatedKey + \"\\\" is a reserved attribute and cannot be used as component prop.\"),\n          vm\n        );\n      }\n      defineReactive$$1(props, key, value, function () {\n        if (!isRoot && !isUpdatingChildComponent) {\n          warn(\n            \"Avoid mutating a prop directly since the value will be \" +\n            \"overwritten whenever the parent component re-renders. \" +\n            \"Instead, use a data or computed property based on the prop's \" +\n            \"value. Prop being mutated: \\\"\" + key + \"\\\"\",\n            vm\n          );\n        }\n      });\n    } else {\n      defineReactive$$1(props, key, value);\n    }\n    // static props are already proxied on the component's prototype\n    // during Vue.extend(). We only need to proxy props defined at\n    // instantiation here.\n    if (!(key in vm)) {\n      proxy(vm, \"_props\", key);\n    }\n  };\n\n  for (var key in propsOptions) loop( key );\n  toggleObserving(true);\n}\n\nfunction initData (vm) {\n  var data = vm.$options.data;\n  data = vm._data = typeof data === 'function'\n    ? getData(data, vm)\n    : data || {};\n  if (!isPlainObject(data)) {\n    data = {};\n    process.env.NODE_ENV !== 'production' && warn(\n      'data functions should return an object:\\n' +\n      'https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function',\n      vm\n    );\n  }\n  // proxy data on instance\n  var keys = Object.keys(data);\n  var props = vm.$options.props;\n  var methods = vm.$options.methods;\n  var i = keys.length;\n  while (i--) {\n    var key = keys[i];\n    if (process.env.NODE_ENV !== 'production') {\n      if (methods && hasOwn(methods, key)) {\n        warn(\n          (\"Method \\\"\" + key + \"\\\" has already been defined as a data property.\"),\n          vm\n        );\n      }\n    }\n    if (props && hasOwn(props, key)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        \"The data property \\\"\" + key + \"\\\" is already declared as a prop. \" +\n        \"Use prop default value instead.\",\n        vm\n      );\n    } else if (!isReserved(key)) {\n      proxy(vm, \"_data\", key);\n    }\n  }\n  // observe data\n  observe(data, true /* asRootData */);\n}\n\nfunction getData (data, vm) {\n  // #7573 disable dep collection when invoking data getters\n  pushTarget();\n  try {\n    return data.call(vm, vm)\n  } catch (e) {\n    handleError(e, vm, \"data()\");\n    return {}\n  } finally {\n    popTarget();\n  }\n}\n\nvar computedWatcherOptions = { lazy: true };\n\nfunction initComputed (vm, computed) {\n  // $flow-disable-line\n  var watchers = vm._computedWatchers = Object.create(null);\n  // computed properties are just getters during SSR\n  var isSSR = isServerRendering();\n\n  for (var key in computed) {\n    var userDef = computed[key];\n    var getter = typeof userDef === 'function' ? userDef : userDef.get;\n    if (process.env.NODE_ENV !== 'production' && getter == null) {\n      warn(\n        (\"Getter is missing for computed property \\\"\" + key + \"\\\".\"),\n        vm\n      );\n    }\n\n    if (!isSSR) {\n      // create internal watcher for the computed property.\n      watchers[key] = new Watcher(\n        vm,\n        getter || noop,\n        noop,\n        computedWatcherOptions\n      );\n    }\n\n    // component-defined computed properties are already defined on the\n    // component prototype. We only need to define computed properties defined\n    // at instantiation here.\n    if (!(key in vm)) {\n      defineComputed(vm, key, userDef);\n    } else if (process.env.NODE_ENV !== 'production') {\n      if (key in vm.$data) {\n        warn((\"The computed property \\\"\" + key + \"\\\" is already defined in data.\"), vm);\n      } else if (vm.$options.props && key in vm.$options.props) {\n        warn((\"The computed property \\\"\" + key + \"\\\" is already defined as a prop.\"), vm);\n      }\n    }\n  }\n}\n\nfunction defineComputed (\n  target,\n  key,\n  userDef\n) {\n  var shouldCache = !isServerRendering();\n  if (typeof userDef === 'function') {\n    sharedPropertyDefinition.get = shouldCache\n      ? createComputedGetter(key)\n      : createGetterInvoker(userDef);\n    sharedPropertyDefinition.set = noop;\n  } else {\n    sharedPropertyDefinition.get = userDef.get\n      ? shouldCache && userDef.cache !== false\n        ? createComputedGetter(key)\n        : createGetterInvoker(userDef.get)\n      : noop;\n    sharedPropertyDefinition.set = userDef.set || noop;\n  }\n  if (process.env.NODE_ENV !== 'production' &&\n      sharedPropertyDefinition.set === noop) {\n    sharedPropertyDefinition.set = function () {\n      warn(\n        (\"Computed property \\\"\" + key + \"\\\" was assigned to but it has no setter.\"),\n        this\n      );\n    };\n  }\n  Object.defineProperty(target, key, sharedPropertyDefinition);\n}\n\nfunction createComputedGetter (key) {\n  return function computedGetter () {\n    var watcher = this._computedWatchers && this._computedWatchers[key];\n    if (watcher) {\n      if (watcher.dirty) {\n        watcher.evaluate();\n      }\n      if (Dep.target) {\n        watcher.depend();\n      }\n      return watcher.value\n    }\n  }\n}\n\nfunction createGetterInvoker(fn) {\n  return function computedGetter () {\n    return fn.call(this, this)\n  }\n}\n\nfunction initMethods (vm, methods) {\n  var props = vm.$options.props;\n  for (var key in methods) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof methods[key] !== 'function') {\n        warn(\n          \"Method \\\"\" + key + \"\\\" has type \\\"\" + (typeof methods[key]) + \"\\\" in the component definition. \" +\n          \"Did you reference the function correctly?\",\n          vm\n        );\n      }\n      if (props && hasOwn(props, key)) {\n        warn(\n          (\"Method \\\"\" + key + \"\\\" has already been defined as a prop.\"),\n          vm\n        );\n      }\n      if ((key in vm) && isReserved(key)) {\n        warn(\n          \"Method \\\"\" + key + \"\\\" conflicts with an existing Vue instance method. \" +\n          \"Avoid defining component methods that start with _ or $.\"\n        );\n      }\n    }\n    vm[key] = typeof methods[key] !== 'function' ? noop : bind(methods[key], vm);\n  }\n}\n\nfunction initWatch (vm, watch) {\n  for (var key in watch) {\n    var handler = watch[key];\n    if (Array.isArray(handler)) {\n      for (var i = 0; i < handler.length; i++) {\n        createWatcher(vm, key, handler[i]);\n      }\n    } else {\n      createWatcher(vm, key, handler);\n    }\n  }\n}\n\nfunction createWatcher (\n  vm,\n  expOrFn,\n  handler,\n  options\n) {\n  if (isPlainObject(handler)) {\n    options = handler;\n    handler = handler.handler;\n  }\n  if (typeof handler === 'string') {\n    handler = vm[handler];\n  }\n  return vm.$watch(expOrFn, handler, options)\n}\n\nfunction stateMixin (Vue) {\n  // flow somehow has problems with directly declared definition object\n  // when using Object.defineProperty, so we have to procedurally build up\n  // the object here.\n  var dataDef = {};\n  dataDef.get = function () { return this._data };\n  var propsDef = {};\n  propsDef.get = function () { return this._props };\n  if (process.env.NODE_ENV !== 'production') {\n    dataDef.set = function () {\n      warn(\n        'Avoid replacing instance root $data. ' +\n        'Use nested data properties instead.',\n        this\n      );\n    };\n    propsDef.set = function () {\n      warn(\"$props is readonly.\", this);\n    };\n  }\n  Object.defineProperty(Vue.prototype, '$data', dataDef);\n  Object.defineProperty(Vue.prototype, '$props', propsDef);\n\n  Vue.prototype.$set = set;\n  Vue.prototype.$delete = del;\n\n  Vue.prototype.$watch = function (\n    expOrFn,\n    cb,\n    options\n  ) {\n    var vm = this;\n    if (isPlainObject(cb)) {\n      return createWatcher(vm, expOrFn, cb, options)\n    }\n    options = options || {};\n    options.user = true;\n    var watcher = new Watcher(vm, expOrFn, cb, options);\n    if (options.immediate) {\n      try {\n        cb.call(vm, watcher.value);\n      } catch (error) {\n        handleError(error, vm, (\"callback for immediate watcher \\\"\" + (watcher.expression) + \"\\\"\"));\n      }\n    }\n    return function unwatchFn () {\n      watcher.teardown();\n    }\n  };\n}\n\n/*  */\n\nvar uid$3 = 0;\n\nfunction initMixin (Vue) {\n  Vue.prototype._init = function (options) {\n    var vm = this;\n    // a uid\n    vm._uid = uid$3++;\n\n    var startTag, endTag;\n    /* istanbul ignore if */\n    if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n      startTag = \"vue-perf-start:\" + (vm._uid);\n      endTag = \"vue-perf-end:\" + (vm._uid);\n      mark(startTag);\n    }\n\n    // a flag to avoid this being observed\n    vm._isVue = true;\n    // merge options\n    if (options && options._isComponent) {\n      // optimize internal component instantiation\n      // since dynamic options merging is pretty slow, and none of the\n      // internal component options needs special treatment.\n      initInternalComponent(vm, options);\n    } else {\n      vm.$options = mergeOptions(\n        resolveConstructorOptions(vm.constructor),\n        options || {},\n        vm\n      );\n    }\n    /* istanbul ignore else */\n    if (process.env.NODE_ENV !== 'production') {\n      initProxy(vm);\n    } else {\n      vm._renderProxy = vm;\n    }\n    // expose real self\n    vm._self = vm;\n    initLifecycle(vm);\n    initEvents(vm);\n    initRender(vm);\n    callHook(vm, 'beforeCreate');\n    initInjections(vm); // resolve injections before data/props\n    initState(vm);\n    initProvide(vm); // resolve provide after data/props\n    callHook(vm, 'created');\n\n    /* istanbul ignore if */\n    if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n      vm._name = formatComponentName(vm, false);\n      mark(endTag);\n      measure((\"vue \" + (vm._name) + \" init\"), startTag, endTag);\n    }\n\n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el);\n    }\n  };\n}\n\nfunction initInternalComponent (vm, options) {\n  var opts = vm.$options = Object.create(vm.constructor.options);\n  // doing this because it's faster than dynamic enumeration.\n  var parentVnode = options._parentVnode;\n  opts.parent = options.parent;\n  opts._parentVnode = parentVnode;\n\n  var vnodeComponentOptions = parentVnode.componentOptions;\n  opts.propsData = vnodeComponentOptions.propsData;\n  opts._parentListeners = vnodeComponentOptions.listeners;\n  opts._renderChildren = vnodeComponentOptions.children;\n  opts._componentTag = vnodeComponentOptions.tag;\n\n  if (options.render) {\n    opts.render = options.render;\n    opts.staticRenderFns = options.staticRenderFns;\n  }\n}\n\nfunction resolveConstructorOptions (Ctor) {\n  var options = Ctor.options;\n  if (Ctor.super) {\n    var superOptions = resolveConstructorOptions(Ctor.super);\n    var cachedSuperOptions = Ctor.superOptions;\n    if (superOptions !== cachedSuperOptions) {\n      // super option changed,\n      // need to resolve new options.\n      Ctor.superOptions = superOptions;\n      // check if there are any late-modified/attached options (#4976)\n      var modifiedOptions = resolveModifiedOptions(Ctor);\n      // update base extend options\n      if (modifiedOptions) {\n        extend(Ctor.extendOptions, modifiedOptions);\n      }\n      options = Ctor.options = mergeOptions(superOptions, Ctor.extendOptions);\n      if (options.name) {\n        options.components[options.name] = Ctor;\n      }\n    }\n  }\n  return options\n}\n\nfunction resolveModifiedOptions (Ctor) {\n  var modified;\n  var latest = Ctor.options;\n  var sealed = Ctor.sealedOptions;\n  for (var key in latest) {\n    if (latest[key] !== sealed[key]) {\n      if (!modified) { modified = {}; }\n      modified[key] = latest[key];\n    }\n  }\n  return modified\n}\n\nfunction Vue (options) {\n  if (process.env.NODE_ENV !== 'production' &&\n    !(this instanceof Vue)\n  ) {\n    warn('Vue is a constructor and should be called with the `new` keyword');\n  }\n  this._init(options);\n}\n\ninitMixin(Vue);\nstateMixin(Vue);\neventsMixin(Vue);\nlifecycleMixin(Vue);\nrenderMixin(Vue);\n\n/*  */\n\nfunction initUse (Vue) {\n  Vue.use = function (plugin) {\n    var installedPlugins = (this._installedPlugins || (this._installedPlugins = []));\n    if (installedPlugins.indexOf(plugin) > -1) {\n      return this\n    }\n\n    // additional parameters\n    var args = toArray(arguments, 1);\n    args.unshift(this);\n    if (typeof plugin.install === 'function') {\n      plugin.install.apply(plugin, args);\n    } else if (typeof plugin === 'function') {\n      plugin.apply(null, args);\n    }\n    installedPlugins.push(plugin);\n    return this\n  };\n}\n\n/*  */\n\nfunction initMixin$1 (Vue) {\n  Vue.mixin = function (mixin) {\n    this.options = mergeOptions(this.options, mixin);\n    return this\n  };\n}\n\n/*  */\n\nfunction initExtend (Vue) {\n  /**\n   * Each instance constructor, including Vue, has a unique\n   * cid. This enables us to create wrapped \"child\n   * constructors\" for prototypal inheritance and cache them.\n   */\n  Vue.cid = 0;\n  var cid = 1;\n\n  /**\n   * Class inheritance\n   */\n  Vue.extend = function (extendOptions) {\n    extendOptions = extendOptions || {};\n    var Super = this;\n    var SuperId = Super.cid;\n    var cachedCtors = extendOptions._Ctor || (extendOptions._Ctor = {});\n    if (cachedCtors[SuperId]) {\n      return cachedCtors[SuperId]\n    }\n\n    var name = extendOptions.name || Super.options.name;\n    if (process.env.NODE_ENV !== 'production' && name) {\n      validateComponentName(name);\n    }\n\n    var Sub = function VueComponent (options) {\n      this._init(options);\n    };\n    Sub.prototype = Object.create(Super.prototype);\n    Sub.prototype.constructor = Sub;\n    Sub.cid = cid++;\n    Sub.options = mergeOptions(\n      Super.options,\n      extendOptions\n    );\n    Sub['super'] = Super;\n\n    // For props and computed properties, we define the proxy getters on\n    // the Vue instances at extension time, on the extended prototype. This\n    // avoids Object.defineProperty calls for each instance created.\n    if (Sub.options.props) {\n      initProps$1(Sub);\n    }\n    if (Sub.options.computed) {\n      initComputed$1(Sub);\n    }\n\n    // allow further extension/mixin/plugin usage\n    Sub.extend = Super.extend;\n    Sub.mixin = Super.mixin;\n    Sub.use = Super.use;\n\n    // create asset registers, so extended classes\n    // can have their private assets too.\n    ASSET_TYPES.forEach(function (type) {\n      Sub[type] = Super[type];\n    });\n    // enable recursive self-lookup\n    if (name) {\n      Sub.options.components[name] = Sub;\n    }\n\n    // keep a reference to the super options at extension time.\n    // later at instantiation we can check if Super's options have\n    // been updated.\n    Sub.superOptions = Super.options;\n    Sub.extendOptions = extendOptions;\n    Sub.sealedOptions = extend({}, Sub.options);\n\n    // cache constructor\n    cachedCtors[SuperId] = Sub;\n    return Sub\n  };\n}\n\nfunction initProps$1 (Comp) {\n  var props = Comp.options.props;\n  for (var key in props) {\n    proxy(Comp.prototype, \"_props\", key);\n  }\n}\n\nfunction initComputed$1 (Comp) {\n  var computed = Comp.options.computed;\n  for (var key in computed) {\n    defineComputed(Comp.prototype, key, computed[key]);\n  }\n}\n\n/*  */\n\nfunction initAssetRegisters (Vue) {\n  /**\n   * Create asset registration methods.\n   */\n  ASSET_TYPES.forEach(function (type) {\n    Vue[type] = function (\n      id,\n      definition\n    ) {\n      if (!definition) {\n        return this.options[type + 's'][id]\n      } else {\n        /* istanbul ignore if */\n        if (process.env.NODE_ENV !== 'production' && type === 'component') {\n          validateComponentName(id);\n        }\n        if (type === 'component' && isPlainObject(definition)) {\n          definition.name = definition.name || id;\n          definition = this.options._base.extend(definition);\n        }\n        if (type === 'directive' && typeof definition === 'function') {\n          definition = { bind: definition, update: definition };\n        }\n        this.options[type + 's'][id] = definition;\n        return definition\n      }\n    };\n  });\n}\n\n/*  */\n\n\n\nfunction getComponentName (opts) {\n  return opts && (opts.Ctor.options.name || opts.tag)\n}\n\nfunction matches (pattern, name) {\n  if (Array.isArray(pattern)) {\n    return pattern.indexOf(name) > -1\n  } else if (typeof pattern === 'string') {\n    return pattern.split(',').indexOf(name) > -1\n  } else if (isRegExp(pattern)) {\n    return pattern.test(name)\n  }\n  /* istanbul ignore next */\n  return false\n}\n\nfunction pruneCache (keepAliveInstance, filter) {\n  var cache = keepAliveInstance.cache;\n  var keys = keepAliveInstance.keys;\n  var _vnode = keepAliveInstance._vnode;\n  for (var key in cache) {\n    var cachedNode = cache[key];\n    if (cachedNode) {\n      var name = getComponentName(cachedNode.componentOptions);\n      if (name && !filter(name)) {\n        pruneCacheEntry(cache, key, keys, _vnode);\n      }\n    }\n  }\n}\n\nfunction pruneCacheEntry (\n  cache,\n  key,\n  keys,\n  current\n) {\n  var cached$$1 = cache[key];\n  if (cached$$1 && (!current || cached$$1.tag !== current.tag)) {\n    cached$$1.componentInstance.$destroy();\n  }\n  cache[key] = null;\n  remove(keys, key);\n}\n\nvar patternTypes = [String, RegExp, Array];\n\nvar KeepAlive = {\n  name: 'keep-alive',\n  abstract: true,\n\n  props: {\n    include: patternTypes,\n    exclude: patternTypes,\n    max: [String, Number]\n  },\n\n  created: function created () {\n    this.cache = Object.create(null);\n    this.keys = [];\n  },\n\n  destroyed: function destroyed () {\n    for (var key in this.cache) {\n      pruneCacheEntry(this.cache, key, this.keys);\n    }\n  },\n\n  mounted: function mounted () {\n    var this$1 = this;\n\n    this.$watch('include', function (val) {\n      pruneCache(this$1, function (name) { return matches(val, name); });\n    });\n    this.$watch('exclude', function (val) {\n      pruneCache(this$1, function (name) { return !matches(val, name); });\n    });\n  },\n\n  render: function render () {\n    var slot = this.$slots.default;\n    var vnode = getFirstComponentChild(slot);\n    var componentOptions = vnode && vnode.componentOptions;\n    if (componentOptions) {\n      // check pattern\n      var name = getComponentName(componentOptions);\n      var ref = this;\n      var include = ref.include;\n      var exclude = ref.exclude;\n      if (\n        // not included\n        (include && (!name || !matches(include, name))) ||\n        // excluded\n        (exclude && name && matches(exclude, name))\n      ) {\n        return vnode\n      }\n\n      var ref$1 = this;\n      var cache = ref$1.cache;\n      var keys = ref$1.keys;\n      var key = vnode.key == null\n        // same constructor may get registered as different local components\n        // so cid alone is not enough (#3269)\n        ? componentOptions.Ctor.cid + (componentOptions.tag ? (\"::\" + (componentOptions.tag)) : '')\n        : vnode.key;\n      if (cache[key]) {\n        vnode.componentInstance = cache[key].componentInstance;\n        // make current key freshest\n        remove(keys, key);\n        keys.push(key);\n      } else {\n        cache[key] = vnode;\n        keys.push(key);\n        // prune oldest entry\n        if (this.max && keys.length > parseInt(this.max)) {\n          pruneCacheEntry(cache, keys[0], keys, this._vnode);\n        }\n      }\n\n      vnode.data.keepAlive = true;\n    }\n    return vnode || (slot && slot[0])\n  }\n};\n\nvar builtInComponents = {\n  KeepAlive: KeepAlive\n};\n\n/*  */\n\nfunction initGlobalAPI (Vue) {\n  // config\n  var configDef = {};\n  configDef.get = function () { return config; };\n  if (process.env.NODE_ENV !== 'production') {\n    configDef.set = function () {\n      warn(\n        'Do not replace the Vue.config object, set individual fields instead.'\n      );\n    };\n  }\n  Object.defineProperty(Vue, 'config', configDef);\n\n  // exposed util methods.\n  // NOTE: these are not considered part of the public API - avoid relying on\n  // them unless you are aware of the risk.\n  Vue.util = {\n    warn: warn,\n    extend: extend,\n    mergeOptions: mergeOptions,\n    defineReactive: defineReactive$$1\n  };\n\n  Vue.set = set;\n  Vue.delete = del;\n  Vue.nextTick = nextTick;\n\n  // 2.6 explicit observable API\n  Vue.observable = function (obj) {\n    observe(obj);\n    return obj\n  };\n\n  Vue.options = Object.create(null);\n  ASSET_TYPES.forEach(function (type) {\n    Vue.options[type + 's'] = Object.create(null);\n  });\n\n  // this is used to identify the \"base\" constructor to extend all plain-object\n  // components with in Weex's multi-instance scenarios.\n  Vue.options._base = Vue;\n\n  extend(Vue.options.components, builtInComponents);\n\n  initUse(Vue);\n  initMixin$1(Vue);\n  initExtend(Vue);\n  initAssetRegisters(Vue);\n}\n\ninitGlobalAPI(Vue);\n\nObject.defineProperty(Vue.prototype, '$isServer', {\n  get: isServerRendering\n});\n\nObject.defineProperty(Vue.prototype, '$ssrContext', {\n  get: function get () {\n    /* istanbul ignore next */\n    return this.$vnode && this.$vnode.ssrContext\n  }\n});\n\n// expose FunctionalRenderContext for ssr runtime helper installation\nObject.defineProperty(Vue, 'FunctionalRenderContext', {\n  value: FunctionalRenderContext\n});\n\nVue.version = '2.6.12';\n\n/*  */\n\n// these are reserved for web because they are directly compiled away\n// during template compilation\nvar isReservedAttr = makeMap('style,class');\n\n// attributes that should be using props for binding\nvar acceptValue = makeMap('input,textarea,option,select,progress');\nvar mustUseProp = function (tag, type, attr) {\n  return (\n    (attr === 'value' && acceptValue(tag)) && type !== 'button' ||\n    (attr === 'selected' && tag === 'option') ||\n    (attr === 'checked' && tag === 'input') ||\n    (attr === 'muted' && tag === 'video')\n  )\n};\n\nvar isEnumeratedAttr = makeMap('contenteditable,draggable,spellcheck');\n\nvar isValidContentEditableValue = makeMap('events,caret,typing,plaintext-only');\n\nvar convertEnumeratedValue = function (key, value) {\n  return isFalsyAttrValue(value) || value === 'false'\n    ? 'false'\n    // allow arbitrary string value for contenteditable\n    : key === 'contenteditable' && isValidContentEditableValue(value)\n      ? value\n      : 'true'\n};\n\nvar isBooleanAttr = makeMap(\n  'allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,' +\n  'default,defaultchecked,defaultmuted,defaultselected,defer,disabled,' +\n  'enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,' +\n  'muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,' +\n  'required,reversed,scoped,seamless,selected,sortable,translate,' +\n  'truespeed,typemustmatch,visible'\n);\n\nvar xlinkNS = 'http://www.w3.org/1999/xlink';\n\nvar isXlink = function (name) {\n  return name.charAt(5) === ':' && name.slice(0, 5) === 'xlink'\n};\n\nvar getXlinkProp = function (name) {\n  return isXlink(name) ? name.slice(6, name.length) : ''\n};\n\nvar isFalsyAttrValue = function (val) {\n  return val == null || val === false\n};\n\n/*  */\n\nfunction genClassForVnode (vnode) {\n  var data = vnode.data;\n  var parentNode = vnode;\n  var childNode = vnode;\n  while (isDef(childNode.componentInstance)) {\n    childNode = childNode.componentInstance._vnode;\n    if (childNode && childNode.data) {\n      data = mergeClassData(childNode.data, data);\n    }\n  }\n  while (isDef(parentNode = parentNode.parent)) {\n    if (parentNode && parentNode.data) {\n      data = mergeClassData(data, parentNode.data);\n    }\n  }\n  return renderClass(data.staticClass, data.class)\n}\n\nfunction mergeClassData (child, parent) {\n  return {\n    staticClass: concat(child.staticClass, parent.staticClass),\n    class: isDef(child.class)\n      ? [child.class, parent.class]\n      : parent.class\n  }\n}\n\nfunction renderClass (\n  staticClass,\n  dynamicClass\n) {\n  if (isDef(staticClass) || isDef(dynamicClass)) {\n    return concat(staticClass, stringifyClass(dynamicClass))\n  }\n  /* istanbul ignore next */\n  return ''\n}\n\nfunction concat (a, b) {\n  return a ? b ? (a + ' ' + b) : a : (b || '')\n}\n\nfunction stringifyClass (value) {\n  if (Array.isArray(value)) {\n    return stringifyArray(value)\n  }\n  if (isObject(value)) {\n    return stringifyObject(value)\n  }\n  if (typeof value === 'string') {\n    return value\n  }\n  /* istanbul ignore next */\n  return ''\n}\n\nfunction stringifyArray (value) {\n  var res = '';\n  var stringified;\n  for (var i = 0, l = value.length; i < l; i++) {\n    if (isDef(stringified = stringifyClass(value[i])) && stringified !== '') {\n      if (res) { res += ' '; }\n      res += stringified;\n    }\n  }\n  return res\n}\n\nfunction stringifyObject (value) {\n  var res = '';\n  for (var key in value) {\n    if (value[key]) {\n      if (res) { res += ' '; }\n      res += key;\n    }\n  }\n  return res\n}\n\n/*  */\n\nvar namespaceMap = {\n  svg: 'http://www.w3.org/2000/svg',\n  math: 'http://www.w3.org/1998/Math/MathML'\n};\n\nvar isHTMLTag = makeMap(\n  'html,body,base,head,link,meta,style,title,' +\n  'address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,' +\n  'div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,' +\n  'a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,' +\n  's,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,' +\n  'embed,object,param,source,canvas,script,noscript,del,ins,' +\n  'caption,col,colgroup,table,thead,tbody,td,th,tr,' +\n  'button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,' +\n  'output,progress,select,textarea,' +\n  'details,dialog,menu,menuitem,summary,' +\n  'content,element,shadow,template,blockquote,iframe,tfoot'\n);\n\n// this map is intentionally selective, only covering SVG elements that may\n// contain child elements.\nvar isSVG = makeMap(\n  'svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,' +\n  'foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,' +\n  'polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view',\n  true\n);\n\nvar isReservedTag = function (tag) {\n  return isHTMLTag(tag) || isSVG(tag)\n};\n\nfunction getTagNamespace (tag) {\n  if (isSVG(tag)) {\n    return 'svg'\n  }\n  // basic support for MathML\n  // note it doesn't support other MathML elements being component roots\n  if (tag === 'math') {\n    return 'math'\n  }\n}\n\nvar unknownElementCache = Object.create(null);\nfunction isUnknownElement (tag) {\n  /* istanbul ignore if */\n  if (!inBrowser) {\n    return true\n  }\n  if (isReservedTag(tag)) {\n    return false\n  }\n  tag = tag.toLowerCase();\n  /* istanbul ignore if */\n  if (unknownElementCache[tag] != null) {\n    return unknownElementCache[tag]\n  }\n  var el = document.createElement(tag);\n  if (tag.indexOf('-') > -1) {\n    // http://stackoverflow.com/a/28210364/1070244\n    return (unknownElementCache[tag] = (\n      el.constructor === window.HTMLUnknownElement ||\n      el.constructor === window.HTMLElement\n    ))\n  } else {\n    return (unknownElementCache[tag] = /HTMLUnknownElement/.test(el.toString()))\n  }\n}\n\nvar isTextInputType = makeMap('text,number,password,search,email,tel,url');\n\n/*  */\n\n/**\n * Query an element selector if it's not an element already.\n */\nfunction query (el) {\n  if (typeof el === 'string') {\n    var selected = document.querySelector(el);\n    if (!selected) {\n      process.env.NODE_ENV !== 'production' && warn(\n        'Cannot find element: ' + el\n      );\n      return document.createElement('div')\n    }\n    return selected\n  } else {\n    return el\n  }\n}\n\n/*  */\n\nfunction createElement$1 (tagName, vnode) {\n  var elm = document.createElement(tagName);\n  if (tagName !== 'select') {\n    return elm\n  }\n  // false or null will remove the attribute but undefined will not\n  if (vnode.data && vnode.data.attrs && vnode.data.attrs.multiple !== undefined) {\n    elm.setAttribute('multiple', 'multiple');\n  }\n  return elm\n}\n\nfunction createElementNS (namespace, tagName) {\n  return document.createElementNS(namespaceMap[namespace], tagName)\n}\n\nfunction createTextNode (text) {\n  return document.createTextNode(text)\n}\n\nfunction createComment (text) {\n  return document.createComment(text)\n}\n\nfunction insertBefore (parentNode, newNode, referenceNode) {\n  parentNode.insertBefore(newNode, referenceNode);\n}\n\nfunction removeChild (node, child) {\n  node.removeChild(child);\n}\n\nfunction appendChild (node, child) {\n  node.appendChild(child);\n}\n\nfunction parentNode (node) {\n  return node.parentNode\n}\n\nfunction nextSibling (node) {\n  return node.nextSibling\n}\n\nfunction tagName (node) {\n  return node.tagName\n}\n\nfunction setTextContent (node, text) {\n  node.textContent = text;\n}\n\nfunction setStyleScope (node, scopeId) {\n  node.setAttribute(scopeId, '');\n}\n\nvar nodeOps = /*#__PURE__*/Object.freeze({\n  createElement: createElement$1,\n  createElementNS: createElementNS,\n  createTextNode: createTextNode,\n  createComment: createComment,\n  insertBefore: insertBefore,\n  removeChild: removeChild,\n  appendChild: appendChild,\n  parentNode: parentNode,\n  nextSibling: nextSibling,\n  tagName: tagName,\n  setTextContent: setTextContent,\n  setStyleScope: setStyleScope\n});\n\n/*  */\n\nvar ref = {\n  create: function create (_, vnode) {\n    registerRef(vnode);\n  },\n  update: function update (oldVnode, vnode) {\n    if (oldVnode.data.ref !== vnode.data.ref) {\n      registerRef(oldVnode, true);\n      registerRef(vnode);\n    }\n  },\n  destroy: function destroy (vnode) {\n    registerRef(vnode, true);\n  }\n};\n\nfunction registerRef (vnode, isRemoval) {\n  var key = vnode.data.ref;\n  if (!isDef(key)) { return }\n\n  var vm = vnode.context;\n  var ref = vnode.componentInstance || vnode.elm;\n  var refs = vm.$refs;\n  if (isRemoval) {\n    if (Array.isArray(refs[key])) {\n      remove(refs[key], ref);\n    } else if (refs[key] === ref) {\n      refs[key] = undefined;\n    }\n  } else {\n    if (vnode.data.refInFor) {\n      if (!Array.isArray(refs[key])) {\n        refs[key] = [ref];\n      } else if (refs[key].indexOf(ref) < 0) {\n        // $flow-disable-line\n        refs[key].push(ref);\n      }\n    } else {\n      refs[key] = ref;\n    }\n  }\n}\n\n/**\n * Virtual DOM patching algorithm based on Snabbdom by\n * Simon Friis Vindum (@paldepind)\n * Licensed under the MIT License\n * https://github.com/paldepind/snabbdom/blob/master/LICENSE\n *\n * modified by Evan You (@yyx990803)\n *\n * Not type-checking this because this file is perf-critical and the cost\n * of making flow understand it is not worth it.\n */\n\nvar emptyNode = new VNode('', {}, []);\n\nvar hooks = ['create', 'activate', 'update', 'remove', 'destroy'];\n\nfunction sameVnode (a, b) {\n  return (\n    a.key === b.key && (\n      (\n        a.tag === b.tag &&\n        a.isComment === b.isComment &&\n        isDef(a.data) === isDef(b.data) &&\n        sameInputType(a, b)\n      ) || (\n        isTrue(a.isAsyncPlaceholder) &&\n        a.asyncFactory === b.asyncFactory &&\n        isUndef(b.asyncFactory.error)\n      )\n    )\n  )\n}\n\nfunction sameInputType (a, b) {\n  if (a.tag !== 'input') { return true }\n  var i;\n  var typeA = isDef(i = a.data) && isDef(i = i.attrs) && i.type;\n  var typeB = isDef(i = b.data) && isDef(i = i.attrs) && i.type;\n  return typeA === typeB || isTextInputType(typeA) && isTextInputType(typeB)\n}\n\nfunction createKeyToOldIdx (children, beginIdx, endIdx) {\n  var i, key;\n  var map = {};\n  for (i = beginIdx; i <= endIdx; ++i) {\n    key = children[i].key;\n    if (isDef(key)) { map[key] = i; }\n  }\n  return map\n}\n\nfunction createPatchFunction (backend) {\n  var i, j;\n  var cbs = {};\n\n  var modules = backend.modules;\n  var nodeOps = backend.nodeOps;\n\n  for (i = 0; i < hooks.length; ++i) {\n    cbs[hooks[i]] = [];\n    for (j = 0; j < modules.length; ++j) {\n      if (isDef(modules[j][hooks[i]])) {\n        cbs[hooks[i]].push(modules[j][hooks[i]]);\n      }\n    }\n  }\n\n  function emptyNodeAt (elm) {\n    return new VNode(nodeOps.tagName(elm).toLowerCase(), {}, [], undefined, elm)\n  }\n\n  function createRmCb (childElm, listeners) {\n    function remove$$1 () {\n      if (--remove$$1.listeners === 0) {\n        removeNode(childElm);\n      }\n    }\n    remove$$1.listeners = listeners;\n    return remove$$1\n  }\n\n  function removeNode (el) {\n    var parent = nodeOps.parentNode(el);\n    // element may have already been removed due to v-html / v-text\n    if (isDef(parent)) {\n      nodeOps.removeChild(parent, el);\n    }\n  }\n\n  function isUnknownElement$$1 (vnode, inVPre) {\n    return (\n      !inVPre &&\n      !vnode.ns &&\n      !(\n        config.ignoredElements.length &&\n        config.ignoredElements.some(function (ignore) {\n          return isRegExp(ignore)\n            ? ignore.test(vnode.tag)\n            : ignore === vnode.tag\n        })\n      ) &&\n      config.isUnknownElement(vnode.tag)\n    )\n  }\n\n  var creatingElmInVPre = 0;\n\n  function createElm (\n    vnode,\n    insertedVnodeQueue,\n    parentElm,\n    refElm,\n    nested,\n    ownerArray,\n    index\n  ) {\n    if (isDef(vnode.elm) && isDef(ownerArray)) {\n      // This vnode was used in a previous render!\n      // now it's used as a new node, overwriting its elm would cause\n      // potential patch errors down the road when it's used as an insertion\n      // reference node. Instead, we clone the node on-demand before creating\n      // associated DOM element for it.\n      vnode = ownerArray[index] = cloneVNode(vnode);\n    }\n\n    vnode.isRootInsert = !nested; // for transition enter check\n    if (createComponent(vnode, insertedVnodeQueue, parentElm, refElm)) {\n      return\n    }\n\n    var data = vnode.data;\n    var children = vnode.children;\n    var tag = vnode.tag;\n    if (isDef(tag)) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (data && data.pre) {\n          creatingElmInVPre++;\n        }\n        if (isUnknownElement$$1(vnode, creatingElmInVPre)) {\n          warn(\n            'Unknown custom element: <' + tag + '> - did you ' +\n            'register the component correctly? For recursive components, ' +\n            'make sure to provide the \"name\" option.',\n            vnode.context\n          );\n        }\n      }\n\n      vnode.elm = vnode.ns\n        ? nodeOps.createElementNS(vnode.ns, tag)\n        : nodeOps.createElement(tag, vnode);\n      setScope(vnode);\n\n      /* istanbul ignore if */\n      {\n        createChildren(vnode, children, insertedVnodeQueue);\n        if (isDef(data)) {\n          invokeCreateHooks(vnode, insertedVnodeQueue);\n        }\n        insert(parentElm, vnode.elm, refElm);\n      }\n\n      if (process.env.NODE_ENV !== 'production' && data && data.pre) {\n        creatingElmInVPre--;\n      }\n    } else if (isTrue(vnode.isComment)) {\n      vnode.elm = nodeOps.createComment(vnode.text);\n      insert(parentElm, vnode.elm, refElm);\n    } else {\n      vnode.elm = nodeOps.createTextNode(vnode.text);\n      insert(parentElm, vnode.elm, refElm);\n    }\n  }\n\n  function createComponent (vnode, insertedVnodeQueue, parentElm, refElm) {\n    var i = vnode.data;\n    if (isDef(i)) {\n      var isReactivated = isDef(vnode.componentInstance) && i.keepAlive;\n      if (isDef(i = i.hook) && isDef(i = i.init)) {\n        i(vnode, false /* hydrating */);\n      }\n      // after calling the init hook, if the vnode is a child component\n      // it should've created a child instance and mounted it. the child\n      // component also has set the placeholder vnode's elm.\n      // in that case we can just return the element and be done.\n      if (isDef(vnode.componentInstance)) {\n        initComponent(vnode, insertedVnodeQueue);\n        insert(parentElm, vnode.elm, refElm);\n        if (isTrue(isReactivated)) {\n          reactivateComponent(vnode, insertedVnodeQueue, parentElm, refElm);\n        }\n        return true\n      }\n    }\n  }\n\n  function initComponent (vnode, insertedVnodeQueue) {\n    if (isDef(vnode.data.pendingInsert)) {\n      insertedVnodeQueue.push.apply(insertedVnodeQueue, vnode.data.pendingInsert);\n      vnode.data.pendingInsert = null;\n    }\n    vnode.elm = vnode.componentInstance.$el;\n    if (isPatchable(vnode)) {\n      invokeCreateHooks(vnode, insertedVnodeQueue);\n      setScope(vnode);\n    } else {\n      // empty component root.\n      // skip all element-related modules except for ref (#3455)\n      registerRef(vnode);\n      // make sure to invoke the insert hook\n      insertedVnodeQueue.push(vnode);\n    }\n  }\n\n  function reactivateComponent (vnode, insertedVnodeQueue, parentElm, refElm) {\n    var i;\n    // hack for #4339: a reactivated component with inner transition\n    // does not trigger because the inner node's created hooks are not called\n    // again. It's not ideal to involve module-specific logic in here but\n    // there doesn't seem to be a better way to do it.\n    var innerNode = vnode;\n    while (innerNode.componentInstance) {\n      innerNode = innerNode.componentInstance._vnode;\n      if (isDef(i = innerNode.data) && isDef(i = i.transition)) {\n        for (i = 0; i < cbs.activate.length; ++i) {\n          cbs.activate[i](emptyNode, innerNode);\n        }\n        insertedVnodeQueue.push(innerNode);\n        break\n      }\n    }\n    // unlike a newly created component,\n    // a reactivated keep-alive component doesn't insert itself\n    insert(parentElm, vnode.elm, refElm);\n  }\n\n  function insert (parent, elm, ref$$1) {\n    if (isDef(parent)) {\n      if (isDef(ref$$1)) {\n        if (nodeOps.parentNode(ref$$1) === parent) {\n          nodeOps.insertBefore(parent, elm, ref$$1);\n        }\n      } else {\n        nodeOps.appendChild(parent, elm);\n      }\n    }\n  }\n\n  function createChildren (vnode, children, insertedVnodeQueue) {\n    if (Array.isArray(children)) {\n      if (process.env.NODE_ENV !== 'production') {\n        checkDuplicateKeys(children);\n      }\n      for (var i = 0; i < children.length; ++i) {\n        createElm(children[i], insertedVnodeQueue, vnode.elm, null, true, children, i);\n      }\n    } else if (isPrimitive(vnode.text)) {\n      nodeOps.appendChild(vnode.elm, nodeOps.createTextNode(String(vnode.text)));\n    }\n  }\n\n  function isPatchable (vnode) {\n    while (vnode.componentInstance) {\n      vnode = vnode.componentInstance._vnode;\n    }\n    return isDef(vnode.tag)\n  }\n\n  function invokeCreateHooks (vnode, insertedVnodeQueue) {\n    for (var i$1 = 0; i$1 < cbs.create.length; ++i$1) {\n      cbs.create[i$1](emptyNode, vnode);\n    }\n    i = vnode.data.hook; // Reuse variable\n    if (isDef(i)) {\n      if (isDef(i.create)) { i.create(emptyNode, vnode); }\n      if (isDef(i.insert)) { insertedVnodeQueue.push(vnode); }\n    }\n  }\n\n  // set scope id attribute for scoped CSS.\n  // this is implemented as a special case to avoid the overhead\n  // of going through the normal attribute patching process.\n  function setScope (vnode) {\n    var i;\n    if (isDef(i = vnode.fnScopeId)) {\n      nodeOps.setStyleScope(vnode.elm, i);\n    } else {\n      var ancestor = vnode;\n      while (ancestor) {\n        if (isDef(i = ancestor.context) && isDef(i = i.$options._scopeId)) {\n          nodeOps.setStyleScope(vnode.elm, i);\n        }\n        ancestor = ancestor.parent;\n      }\n    }\n    // for slot content they should also get the scopeId from the host instance.\n    if (isDef(i = activeInstance) &&\n      i !== vnode.context &&\n      i !== vnode.fnContext &&\n      isDef(i = i.$options._scopeId)\n    ) {\n      nodeOps.setStyleScope(vnode.elm, i);\n    }\n  }\n\n  function addVnodes (parentElm, refElm, vnodes, startIdx, endIdx, insertedVnodeQueue) {\n    for (; startIdx <= endIdx; ++startIdx) {\n      createElm(vnodes[startIdx], insertedVnodeQueue, parentElm, refElm, false, vnodes, startIdx);\n    }\n  }\n\n  function invokeDestroyHook (vnode) {\n    var i, j;\n    var data = vnode.data;\n    if (isDef(data)) {\n      if (isDef(i = data.hook) && isDef(i = i.destroy)) { i(vnode); }\n      for (i = 0; i < cbs.destroy.length; ++i) { cbs.destroy[i](vnode); }\n    }\n    if (isDef(i = vnode.children)) {\n      for (j = 0; j < vnode.children.length; ++j) {\n        invokeDestroyHook(vnode.children[j]);\n      }\n    }\n  }\n\n  function removeVnodes (vnodes, startIdx, endIdx) {\n    for (; startIdx <= endIdx; ++startIdx) {\n      var ch = vnodes[startIdx];\n      if (isDef(ch)) {\n        if (isDef(ch.tag)) {\n          removeAndInvokeRemoveHook(ch);\n          invokeDestroyHook(ch);\n        } else { // Text node\n          removeNode(ch.elm);\n        }\n      }\n    }\n  }\n\n  function removeAndInvokeRemoveHook (vnode, rm) {\n    if (isDef(rm) || isDef(vnode.data)) {\n      var i;\n      var listeners = cbs.remove.length + 1;\n      if (isDef(rm)) {\n        // we have a recursively passed down rm callback\n        // increase the listeners count\n        rm.listeners += listeners;\n      } else {\n        // directly removing\n        rm = createRmCb(vnode.elm, listeners);\n      }\n      // recursively invoke hooks on child component root node\n      if (isDef(i = vnode.componentInstance) && isDef(i = i._vnode) && isDef(i.data)) {\n        removeAndInvokeRemoveHook(i, rm);\n      }\n      for (i = 0; i < cbs.remove.length; ++i) {\n        cbs.remove[i](vnode, rm);\n      }\n      if (isDef(i = vnode.data.hook) && isDef(i = i.remove)) {\n        i(vnode, rm);\n      } else {\n        rm();\n      }\n    } else {\n      removeNode(vnode.elm);\n    }\n  }\n\n  function updateChildren (parentElm, oldCh, newCh, insertedVnodeQueue, removeOnly) {\n    var oldStartIdx = 0;\n    var newStartIdx = 0;\n    var oldEndIdx = oldCh.length - 1;\n    var oldStartVnode = oldCh[0];\n    var oldEndVnode = oldCh[oldEndIdx];\n    var newEndIdx = newCh.length - 1;\n    var newStartVnode = newCh[0];\n    var newEndVnode = newCh[newEndIdx];\n    var oldKeyToIdx, idxInOld, vnodeToMove, refElm;\n\n    // removeOnly is a special flag used only by <transition-group>\n    // to ensure removed elements stay in correct relative positions\n    // during leaving transitions\n    var canMove = !removeOnly;\n\n    if (process.env.NODE_ENV !== 'production') {\n      checkDuplicateKeys(newCh);\n    }\n\n    while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n      if (isUndef(oldStartVnode)) {\n        oldStartVnode = oldCh[++oldStartIdx]; // Vnode has been moved left\n      } else if (isUndef(oldEndVnode)) {\n        oldEndVnode = oldCh[--oldEndIdx];\n      } else if (sameVnode(oldStartVnode, newStartVnode)) {\n        patchVnode(oldStartVnode, newStartVnode, insertedVnodeQueue, newCh, newStartIdx);\n        oldStartVnode = oldCh[++oldStartIdx];\n        newStartVnode = newCh[++newStartIdx];\n      } else if (sameVnode(oldEndVnode, newEndVnode)) {\n        patchVnode(oldEndVnode, newEndVnode, insertedVnodeQueue, newCh, newEndIdx);\n        oldEndVnode = oldCh[--oldEndIdx];\n        newEndVnode = newCh[--newEndIdx];\n      } else if (sameVnode(oldStartVnode, newEndVnode)) { // Vnode moved right\n        patchVnode(oldStartVnode, newEndVnode, insertedVnodeQueue, newCh, newEndIdx);\n        canMove && nodeOps.insertBefore(parentElm, oldStartVnode.elm, nodeOps.nextSibling(oldEndVnode.elm));\n        oldStartVnode = oldCh[++oldStartIdx];\n        newEndVnode = newCh[--newEndIdx];\n      } else if (sameVnode(oldEndVnode, newStartVnode)) { // Vnode moved left\n        patchVnode(oldEndVnode, newStartVnode, insertedVnodeQueue, newCh, newStartIdx);\n        canMove && nodeOps.insertBefore(parentElm, oldEndVnode.elm, oldStartVnode.elm);\n        oldEndVnode = oldCh[--oldEndIdx];\n        newStartVnode = newCh[++newStartIdx];\n      } else {\n        if (isUndef(oldKeyToIdx)) { oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx); }\n        idxInOld = isDef(newStartVnode.key)\n          ? oldKeyToIdx[newStartVnode.key]\n          : findIdxInOld(newStartVnode, oldCh, oldStartIdx, oldEndIdx);\n        if (isUndef(idxInOld)) { // New element\n          createElm(newStartVnode, insertedVnodeQueue, parentElm, oldStartVnode.elm, false, newCh, newStartIdx);\n        } else {\n          vnodeToMove = oldCh[idxInOld];\n          if (sameVnode(vnodeToMove, newStartVnode)) {\n            patchVnode(vnodeToMove, newStartVnode, insertedVnodeQueue, newCh, newStartIdx);\n            oldCh[idxInOld] = undefined;\n            canMove && nodeOps.insertBefore(parentElm, vnodeToMove.elm, oldStartVnode.elm);\n          } else {\n            // same key but different element. treat as new element\n            createElm(newStartVnode, insertedVnodeQueue, parentElm, oldStartVnode.elm, false, newCh, newStartIdx);\n          }\n        }\n        newStartVnode = newCh[++newStartIdx];\n      }\n    }\n    if (oldStartIdx > oldEndIdx) {\n      refElm = isUndef(newCh[newEndIdx + 1]) ? null : newCh[newEndIdx + 1].elm;\n      addVnodes(parentElm, refElm, newCh, newStartIdx, newEndIdx, insertedVnodeQueue);\n    } else if (newStartIdx > newEndIdx) {\n      removeVnodes(oldCh, oldStartIdx, oldEndIdx);\n    }\n  }\n\n  function checkDuplicateKeys (children) {\n    var seenKeys = {};\n    for (var i = 0; i < children.length; i++) {\n      var vnode = children[i];\n      var key = vnode.key;\n      if (isDef(key)) {\n        if (seenKeys[key]) {\n          warn(\n            (\"Duplicate keys detected: '\" + key + \"'. This may cause an update error.\"),\n            vnode.context\n          );\n        } else {\n          seenKeys[key] = true;\n        }\n      }\n    }\n  }\n\n  function findIdxInOld (node, oldCh, start, end) {\n    for (var i = start; i < end; i++) {\n      var c = oldCh[i];\n      if (isDef(c) && sameVnode(node, c)) { return i }\n    }\n  }\n\n  function patchVnode (\n    oldVnode,\n    vnode,\n    insertedVnodeQueue,\n    ownerArray,\n    index,\n    removeOnly\n  ) {\n    if (oldVnode === vnode) {\n      return\n    }\n\n    if (isDef(vnode.elm) && isDef(ownerArray)) {\n      // clone reused vnode\n      vnode = ownerArray[index] = cloneVNode(vnode);\n    }\n\n    var elm = vnode.elm = oldVnode.elm;\n\n    if (isTrue(oldVnode.isAsyncPlaceholder)) {\n      if (isDef(vnode.asyncFactory.resolved)) {\n        hydrate(oldVnode.elm, vnode, insertedVnodeQueue);\n      } else {\n        vnode.isAsyncPlaceholder = true;\n      }\n      return\n    }\n\n    // reuse element for static trees.\n    // note we only do this if the vnode is cloned -\n    // if the new node is not cloned it means the render functions have been\n    // reset by the hot-reload-api and we need to do a proper re-render.\n    if (isTrue(vnode.isStatic) &&\n      isTrue(oldVnode.isStatic) &&\n      vnode.key === oldVnode.key &&\n      (isTrue(vnode.isCloned) || isTrue(vnode.isOnce))\n    ) {\n      vnode.componentInstance = oldVnode.componentInstance;\n      return\n    }\n\n    var i;\n    var data = vnode.data;\n    if (isDef(data) && isDef(i = data.hook) && isDef(i = i.prepatch)) {\n      i(oldVnode, vnode);\n    }\n\n    var oldCh = oldVnode.children;\n    var ch = vnode.children;\n    if (isDef(data) && isPatchable(vnode)) {\n      for (i = 0; i < cbs.update.length; ++i) { cbs.update[i](oldVnode, vnode); }\n      if (isDef(i = data.hook) && isDef(i = i.update)) { i(oldVnode, vnode); }\n    }\n    if (isUndef(vnode.text)) {\n      if (isDef(oldCh) && isDef(ch)) {\n        if (oldCh !== ch) { updateChildren(elm, oldCh, ch, insertedVnodeQueue, removeOnly); }\n      } else if (isDef(ch)) {\n        if (process.env.NODE_ENV !== 'production') {\n          checkDuplicateKeys(ch);\n        }\n        if (isDef(oldVnode.text)) { nodeOps.setTextContent(elm, ''); }\n        addVnodes(elm, null, ch, 0, ch.length - 1, insertedVnodeQueue);\n      } else if (isDef(oldCh)) {\n        removeVnodes(oldCh, 0, oldCh.length - 1);\n      } else if (isDef(oldVnode.text)) {\n        nodeOps.setTextContent(elm, '');\n      }\n    } else if (oldVnode.text !== vnode.text) {\n      nodeOps.setTextContent(elm, vnode.text);\n    }\n    if (isDef(data)) {\n      if (isDef(i = data.hook) && isDef(i = i.postpatch)) { i(oldVnode, vnode); }\n    }\n  }\n\n  function invokeInsertHook (vnode, queue, initial) {\n    // delay insert hooks for component root nodes, invoke them after the\n    // element is really inserted\n    if (isTrue(initial) && isDef(vnode.parent)) {\n      vnode.parent.data.pendingInsert = queue;\n    } else {\n      for (var i = 0; i < queue.length; ++i) {\n        queue[i].data.hook.insert(queue[i]);\n      }\n    }\n  }\n\n  var hydrationBailed = false;\n  // list of modules that can skip create hook during hydration because they\n  // are already rendered on the client or has no need for initialization\n  // Note: style is excluded because it relies on initial clone for future\n  // deep updates (#7063).\n  var isRenderedModule = makeMap('attrs,class,staticClass,staticStyle,key');\n\n  // Note: this is a browser-only function so we can assume elms are DOM nodes.\n  function hydrate (elm, vnode, insertedVnodeQueue, inVPre) {\n    var i;\n    var tag = vnode.tag;\n    var data = vnode.data;\n    var children = vnode.children;\n    inVPre = inVPre || (data && data.pre);\n    vnode.elm = elm;\n\n    if (isTrue(vnode.isComment) && isDef(vnode.asyncFactory)) {\n      vnode.isAsyncPlaceholder = true;\n      return true\n    }\n    // assert node match\n    if (process.env.NODE_ENV !== 'production') {\n      if (!assertNodeMatch(elm, vnode, inVPre)) {\n        return false\n      }\n    }\n    if (isDef(data)) {\n      if (isDef(i = data.hook) && isDef(i = i.init)) { i(vnode, true /* hydrating */); }\n      if (isDef(i = vnode.componentInstance)) {\n        // child component. it should have hydrated its own tree.\n        initComponent(vnode, insertedVnodeQueue);\n        return true\n      }\n    }\n    if (isDef(tag)) {\n      if (isDef(children)) {\n        // empty element, allow client to pick up and populate children\n        if (!elm.hasChildNodes()) {\n          createChildren(vnode, children, insertedVnodeQueue);\n        } else {\n          // v-html and domProps: innerHTML\n          if (isDef(i = data) && isDef(i = i.domProps) && isDef(i = i.innerHTML)) {\n            if (i !== elm.innerHTML) {\n              /* istanbul ignore if */\n              if (process.env.NODE_ENV !== 'production' &&\n                typeof console !== 'undefined' &&\n                !hydrationBailed\n              ) {\n                hydrationBailed = true;\n                console.warn('Parent: ', elm);\n                console.warn('server innerHTML: ', i);\n                console.warn('client innerHTML: ', elm.innerHTML);\n              }\n              return false\n            }\n          } else {\n            // iterate and compare children lists\n            var childrenMatch = true;\n            var childNode = elm.firstChild;\n            for (var i$1 = 0; i$1 < children.length; i$1++) {\n              if (!childNode || !hydrate(childNode, children[i$1], insertedVnodeQueue, inVPre)) {\n                childrenMatch = false;\n                break\n              }\n              childNode = childNode.nextSibling;\n            }\n            // if childNode is not null, it means the actual childNodes list is\n            // longer than the virtual children list.\n            if (!childrenMatch || childNode) {\n              /* istanbul ignore if */\n              if (process.env.NODE_ENV !== 'production' &&\n                typeof console !== 'undefined' &&\n                !hydrationBailed\n              ) {\n                hydrationBailed = true;\n                console.warn('Parent: ', elm);\n                console.warn('Mismatching childNodes vs. VNodes: ', elm.childNodes, children);\n              }\n              return false\n            }\n          }\n        }\n      }\n      if (isDef(data)) {\n        var fullInvoke = false;\n        for (var key in data) {\n          if (!isRenderedModule(key)) {\n            fullInvoke = true;\n            invokeCreateHooks(vnode, insertedVnodeQueue);\n            break\n          }\n        }\n        if (!fullInvoke && data['class']) {\n          // ensure collecting deps for deep class bindings for future updates\n          traverse(data['class']);\n        }\n      }\n    } else if (elm.data !== vnode.text) {\n      elm.data = vnode.text;\n    }\n    return true\n  }\n\n  function assertNodeMatch (node, vnode, inVPre) {\n    if (isDef(vnode.tag)) {\n      return vnode.tag.indexOf('vue-component') === 0 || (\n        !isUnknownElement$$1(vnode, inVPre) &&\n        vnode.tag.toLowerCase() === (node.tagName && node.tagName.toLowerCase())\n      )\n    } else {\n      return node.nodeType === (vnode.isComment ? 8 : 3)\n    }\n  }\n\n  return function patch (oldVnode, vnode, hydrating, removeOnly) {\n    if (isUndef(vnode)) {\n      if (isDef(oldVnode)) { invokeDestroyHook(oldVnode); }\n      return\n    }\n\n    var isInitialPatch = false;\n    var insertedVnodeQueue = [];\n\n    if (isUndef(oldVnode)) {\n      // empty mount (likely as component), create new root element\n      isInitialPatch = true;\n      createElm(vnode, insertedVnodeQueue);\n    } else {\n      var isRealElement = isDef(oldVnode.nodeType);\n      if (!isRealElement && sameVnode(oldVnode, vnode)) {\n        // patch existing root node\n        patchVnode(oldVnode, vnode, insertedVnodeQueue, null, null, removeOnly);\n      } else {\n        if (isRealElement) {\n          // mounting to a real element\n          // check if this is server-rendered content and if we can perform\n          // a successful hydration.\n          if (oldVnode.nodeType === 1 && oldVnode.hasAttribute(SSR_ATTR)) {\n            oldVnode.removeAttribute(SSR_ATTR);\n            hydrating = true;\n          }\n          if (isTrue(hydrating)) {\n            if (hydrate(oldVnode, vnode, insertedVnodeQueue)) {\n              invokeInsertHook(vnode, insertedVnodeQueue, true);\n              return oldVnode\n            } else if (process.env.NODE_ENV !== 'production') {\n              warn(\n                'The client-side rendered virtual DOM tree is not matching ' +\n                'server-rendered content. This is likely caused by incorrect ' +\n                'HTML markup, for example nesting block-level elements inside ' +\n                '<p>, or missing <tbody>. Bailing hydration and performing ' +\n                'full client-side render.'\n              );\n            }\n          }\n          // either not server-rendered, or hydration failed.\n          // create an empty node and replace it\n          oldVnode = emptyNodeAt(oldVnode);\n        }\n\n        // replacing existing element\n        var oldElm = oldVnode.elm;\n        var parentElm = nodeOps.parentNode(oldElm);\n\n        // create new node\n        createElm(\n          vnode,\n          insertedVnodeQueue,\n          // extremely rare edge case: do not insert if old element is in a\n          // leaving transition. Only happens when combining transition +\n          // keep-alive + HOCs. (#4590)\n          oldElm._leaveCb ? null : parentElm,\n          nodeOps.nextSibling(oldElm)\n        );\n\n        // update parent placeholder node element, recursively\n        if (isDef(vnode.parent)) {\n          var ancestor = vnode.parent;\n          var patchable = isPatchable(vnode);\n          while (ancestor) {\n            for (var i = 0; i < cbs.destroy.length; ++i) {\n              cbs.destroy[i](ancestor);\n            }\n            ancestor.elm = vnode.elm;\n            if (patchable) {\n              for (var i$1 = 0; i$1 < cbs.create.length; ++i$1) {\n                cbs.create[i$1](emptyNode, ancestor);\n              }\n              // #6513\n              // invoke insert hooks that may have been merged by create hooks.\n              // e.g. for directives that uses the \"inserted\" hook.\n              var insert = ancestor.data.hook.insert;\n              if (insert.merged) {\n                // start at index 1 to avoid re-invoking component mounted hook\n                for (var i$2 = 1; i$2 < insert.fns.length; i$2++) {\n                  insert.fns[i$2]();\n                }\n              }\n            } else {\n              registerRef(ancestor);\n            }\n            ancestor = ancestor.parent;\n          }\n        }\n\n        // destroy old node\n        if (isDef(parentElm)) {\n          removeVnodes([oldVnode], 0, 0);\n        } else if (isDef(oldVnode.tag)) {\n          invokeDestroyHook(oldVnode);\n        }\n      }\n    }\n\n    invokeInsertHook(vnode, insertedVnodeQueue, isInitialPatch);\n    return vnode.elm\n  }\n}\n\n/*  */\n\nvar directives = {\n  create: updateDirectives,\n  update: updateDirectives,\n  destroy: function unbindDirectives (vnode) {\n    updateDirectives(vnode, emptyNode);\n  }\n};\n\nfunction updateDirectives (oldVnode, vnode) {\n  if (oldVnode.data.directives || vnode.data.directives) {\n    _update(oldVnode, vnode);\n  }\n}\n\nfunction _update (oldVnode, vnode) {\n  var isCreate = oldVnode === emptyNode;\n  var isDestroy = vnode === emptyNode;\n  var oldDirs = normalizeDirectives$1(oldVnode.data.directives, oldVnode.context);\n  var newDirs = normalizeDirectives$1(vnode.data.directives, vnode.context);\n\n  var dirsWithInsert = [];\n  var dirsWithPostpatch = [];\n\n  var key, oldDir, dir;\n  for (key in newDirs) {\n    oldDir = oldDirs[key];\n    dir = newDirs[key];\n    if (!oldDir) {\n      // new directive, bind\n      callHook$1(dir, 'bind', vnode, oldVnode);\n      if (dir.def && dir.def.inserted) {\n        dirsWithInsert.push(dir);\n      }\n    } else {\n      // existing directive, update\n      dir.oldValue = oldDir.value;\n      dir.oldArg = oldDir.arg;\n      callHook$1(dir, 'update', vnode, oldVnode);\n      if (dir.def && dir.def.componentUpdated) {\n        dirsWithPostpatch.push(dir);\n      }\n    }\n  }\n\n  if (dirsWithInsert.length) {\n    var callInsert = function () {\n      for (var i = 0; i < dirsWithInsert.length; i++) {\n        callHook$1(dirsWithInsert[i], 'inserted', vnode, oldVnode);\n      }\n    };\n    if (isCreate) {\n      mergeVNodeHook(vnode, 'insert', callInsert);\n    } else {\n      callInsert();\n    }\n  }\n\n  if (dirsWithPostpatch.length) {\n    mergeVNodeHook(vnode, 'postpatch', function () {\n      for (var i = 0; i < dirsWithPostpatch.length; i++) {\n        callHook$1(dirsWithPostpatch[i], 'componentUpdated', vnode, oldVnode);\n      }\n    });\n  }\n\n  if (!isCreate) {\n    for (key in oldDirs) {\n      if (!newDirs[key]) {\n        // no longer present, unbind\n        callHook$1(oldDirs[key], 'unbind', oldVnode, oldVnode, isDestroy);\n      }\n    }\n  }\n}\n\nvar emptyModifiers = Object.create(null);\n\nfunction normalizeDirectives$1 (\n  dirs,\n  vm\n) {\n  var res = Object.create(null);\n  if (!dirs) {\n    // $flow-disable-line\n    return res\n  }\n  var i, dir;\n  for (i = 0; i < dirs.length; i++) {\n    dir = dirs[i];\n    if (!dir.modifiers) {\n      // $flow-disable-line\n      dir.modifiers = emptyModifiers;\n    }\n    res[getRawDirName(dir)] = dir;\n    dir.def = resolveAsset(vm.$options, 'directives', dir.name, true);\n  }\n  // $flow-disable-line\n  return res\n}\n\nfunction getRawDirName (dir) {\n  return dir.rawName || ((dir.name) + \".\" + (Object.keys(dir.modifiers || {}).join('.')))\n}\n\nfunction callHook$1 (dir, hook, vnode, oldVnode, isDestroy) {\n  var fn = dir.def && dir.def[hook];\n  if (fn) {\n    try {\n      fn(vnode.elm, dir, vnode, oldVnode, isDestroy);\n    } catch (e) {\n      handleError(e, vnode.context, (\"directive \" + (dir.name) + \" \" + hook + \" hook\"));\n    }\n  }\n}\n\nvar baseModules = [\n  ref,\n  directives\n];\n\n/*  */\n\nfunction updateAttrs (oldVnode, vnode) {\n  var opts = vnode.componentOptions;\n  if (isDef(opts) && opts.Ctor.options.inheritAttrs === false) {\n    return\n  }\n  if (isUndef(oldVnode.data.attrs) && isUndef(vnode.data.attrs)) {\n    return\n  }\n  var key, cur, old;\n  var elm = vnode.elm;\n  var oldAttrs = oldVnode.data.attrs || {};\n  var attrs = vnode.data.attrs || {};\n  // clone observed objects, as the user probably wants to mutate it\n  if (isDef(attrs.__ob__)) {\n    attrs = vnode.data.attrs = extend({}, attrs);\n  }\n\n  for (key in attrs) {\n    cur = attrs[key];\n    old = oldAttrs[key];\n    if (old !== cur) {\n      setAttr(elm, key, cur);\n    }\n  }\n  // #4391: in IE9, setting type can reset value for input[type=radio]\n  // #6666: IE/Edge forces progress value down to 1 before setting a max\n  /* istanbul ignore if */\n  if ((isIE || isEdge) && attrs.value !== oldAttrs.value) {\n    setAttr(elm, 'value', attrs.value);\n  }\n  for (key in oldAttrs) {\n    if (isUndef(attrs[key])) {\n      if (isXlink(key)) {\n        elm.removeAttributeNS(xlinkNS, getXlinkProp(key));\n      } else if (!isEnumeratedAttr(key)) {\n        elm.removeAttribute(key);\n      }\n    }\n  }\n}\n\nfunction setAttr (el, key, value) {\n  if (el.tagName.indexOf('-') > -1) {\n    baseSetAttr(el, key, value);\n  } else if (isBooleanAttr(key)) {\n    // set attribute for blank value\n    // e.g. <option disabled>Select one</option>\n    if (isFalsyAttrValue(value)) {\n      el.removeAttribute(key);\n    } else {\n      // technically allowfullscreen is a boolean attribute for <iframe>,\n      // but Flash expects a value of \"true\" when used on <embed> tag\n      value = key === 'allowfullscreen' && el.tagName === 'EMBED'\n        ? 'true'\n        : key;\n      el.setAttribute(key, value);\n    }\n  } else if (isEnumeratedAttr(key)) {\n    el.setAttribute(key, convertEnumeratedValue(key, value));\n  } else if (isXlink(key)) {\n    if (isFalsyAttrValue(value)) {\n      el.removeAttributeNS(xlinkNS, getXlinkProp(key));\n    } else {\n      el.setAttributeNS(xlinkNS, key, value);\n    }\n  } else {\n    baseSetAttr(el, key, value);\n  }\n}\n\nfunction baseSetAttr (el, key, value) {\n  if (isFalsyAttrValue(value)) {\n    el.removeAttribute(key);\n  } else {\n    // #7138: IE10 & 11 fires input event when setting placeholder on\n    // <textarea>... block the first input event and remove the blocker\n    // immediately.\n    /* istanbul ignore if */\n    if (\n      isIE && !isIE9 &&\n      el.tagName === 'TEXTAREA' &&\n      key === 'placeholder' && value !== '' && !el.__ieph\n    ) {\n      var blocker = function (e) {\n        e.stopImmediatePropagation();\n        el.removeEventListener('input', blocker);\n      };\n      el.addEventListener('input', blocker);\n      // $flow-disable-line\n      el.__ieph = true; /* IE placeholder patched */\n    }\n    el.setAttribute(key, value);\n  }\n}\n\nvar attrs = {\n  create: updateAttrs,\n  update: updateAttrs\n};\n\n/*  */\n\nfunction updateClass (oldVnode, vnode) {\n  var el = vnode.elm;\n  var data = vnode.data;\n  var oldData = oldVnode.data;\n  if (\n    isUndef(data.staticClass) &&\n    isUndef(data.class) && (\n      isUndef(oldData) || (\n        isUndef(oldData.staticClass) &&\n        isUndef(oldData.class)\n      )\n    )\n  ) {\n    return\n  }\n\n  var cls = genClassForVnode(vnode);\n\n  // handle transition classes\n  var transitionClass = el._transitionClasses;\n  if (isDef(transitionClass)) {\n    cls = concat(cls, stringifyClass(transitionClass));\n  }\n\n  // set the class\n  if (cls !== el._prevClass) {\n    el.setAttribute('class', cls);\n    el._prevClass = cls;\n  }\n}\n\nvar klass = {\n  create: updateClass,\n  update: updateClass\n};\n\n/*  */\n\n/*  */\n\n/*  */\n\n/*  */\n\n// in some cases, the event used has to be determined at runtime\n// so we used some reserved tokens during compile.\nvar RANGE_TOKEN = '__r';\nvar CHECKBOX_RADIO_TOKEN = '__c';\n\n/*  */\n\n// normalize v-model event tokens that can only be determined at runtime.\n// it's important to place the event as the first in the array because\n// the whole point is ensuring the v-model callback gets called before\n// user-attached handlers.\nfunction normalizeEvents (on) {\n  /* istanbul ignore if */\n  if (isDef(on[RANGE_TOKEN])) {\n    // IE input[type=range] only supports `change` event\n    var event = isIE ? 'change' : 'input';\n    on[event] = [].concat(on[RANGE_TOKEN], on[event] || []);\n    delete on[RANGE_TOKEN];\n  }\n  // This was originally intended to fix #4521 but no longer necessary\n  // after 2.5. Keeping it for backwards compat with generated code from < 2.4\n  /* istanbul ignore if */\n  if (isDef(on[CHECKBOX_RADIO_TOKEN])) {\n    on.change = [].concat(on[CHECKBOX_RADIO_TOKEN], on.change || []);\n    delete on[CHECKBOX_RADIO_TOKEN];\n  }\n}\n\nvar target$1;\n\nfunction createOnceHandler$1 (event, handler, capture) {\n  var _target = target$1; // save current target element in closure\n  return function onceHandler () {\n    var res = handler.apply(null, arguments);\n    if (res !== null) {\n      remove$2(event, onceHandler, capture, _target);\n    }\n  }\n}\n\n// #9446: Firefox <= 53 (in particular, ESR 52) has incorrect Event.timeStamp\n// implementation and does not fire microtasks in between event propagation, so\n// safe to exclude.\nvar useMicrotaskFix = isUsingMicroTask && !(isFF && Number(isFF[1]) <= 53);\n\nfunction add$1 (\n  name,\n  handler,\n  capture,\n  passive\n) {\n  // async edge case #6566: inner click event triggers patch, event handler\n  // attached to outer element during patch, and triggered again. This\n  // happens because browsers fire microtask ticks between event propagation.\n  // the solution is simple: we save the timestamp when a handler is attached,\n  // and the handler would only fire if the event passed to it was fired\n  // AFTER it was attached.\n  if (useMicrotaskFix) {\n    var attachedTimestamp = currentFlushTimestamp;\n    var original = handler;\n    handler = original._wrapper = function (e) {\n      if (\n        // no bubbling, should always fire.\n        // this is just a safety net in case event.timeStamp is unreliable in\n        // certain weird environments...\n        e.target === e.currentTarget ||\n        // event is fired after handler attachment\n        e.timeStamp >= attachedTimestamp ||\n        // bail for environments that have buggy event.timeStamp implementations\n        // #9462 iOS 9 bug: event.timeStamp is 0 after history.pushState\n        // #9681 QtWebEngine event.timeStamp is negative value\n        e.timeStamp <= 0 ||\n        // #9448 bail if event is fired in another document in a multi-page\n        // electron/nw.js app, since event.timeStamp will be using a different\n        // starting reference\n        e.target.ownerDocument !== document\n      ) {\n        return original.apply(this, arguments)\n      }\n    };\n  }\n  target$1.addEventListener(\n    name,\n    handler,\n    supportsPassive\n      ? { capture: capture, passive: passive }\n      : capture\n  );\n}\n\nfunction remove$2 (\n  name,\n  handler,\n  capture,\n  _target\n) {\n  (_target || target$1).removeEventListener(\n    name,\n    handler._wrapper || handler,\n    capture\n  );\n}\n\nfunction updateDOMListeners (oldVnode, vnode) {\n  if (isUndef(oldVnode.data.on) && isUndef(vnode.data.on)) {\n    return\n  }\n  var on = vnode.data.on || {};\n  var oldOn = oldVnode.data.on || {};\n  target$1 = vnode.elm;\n  normalizeEvents(on);\n  updateListeners(on, oldOn, add$1, remove$2, createOnceHandler$1, vnode.context);\n  target$1 = undefined;\n}\n\nvar events = {\n  create: updateDOMListeners,\n  update: updateDOMListeners\n};\n\n/*  */\n\nvar svgContainer;\n\nfunction updateDOMProps (oldVnode, vnode) {\n  if (isUndef(oldVnode.data.domProps) && isUndef(vnode.data.domProps)) {\n    return\n  }\n  var key, cur;\n  var elm = vnode.elm;\n  var oldProps = oldVnode.data.domProps || {};\n  var props = vnode.data.domProps || {};\n  // clone observed objects, as the user probably wants to mutate it\n  if (isDef(props.__ob__)) {\n    props = vnode.data.domProps = extend({}, props);\n  }\n\n  for (key in oldProps) {\n    if (!(key in props)) {\n      elm[key] = '';\n    }\n  }\n\n  for (key in props) {\n    cur = props[key];\n    // ignore children if the node has textContent or innerHTML,\n    // as these will throw away existing DOM nodes and cause removal errors\n    // on subsequent patches (#3360)\n    if (key === 'textContent' || key === 'innerHTML') {\n      if (vnode.children) { vnode.children.length = 0; }\n      if (cur === oldProps[key]) { continue }\n      // #6601 work around Chrome version <= 55 bug where single textNode\n      // replaced by innerHTML/textContent retains its parentNode property\n      if (elm.childNodes.length === 1) {\n        elm.removeChild(elm.childNodes[0]);\n      }\n    }\n\n    if (key === 'value' && elm.tagName !== 'PROGRESS') {\n      // store value as _value as well since\n      // non-string values will be stringified\n      elm._value = cur;\n      // avoid resetting cursor position when value is the same\n      var strCur = isUndef(cur) ? '' : String(cur);\n      if (shouldUpdateValue(elm, strCur)) {\n        elm.value = strCur;\n      }\n    } else if (key === 'innerHTML' && isSVG(elm.tagName) && isUndef(elm.innerHTML)) {\n      // IE doesn't support innerHTML for SVG elements\n      svgContainer = svgContainer || document.createElement('div');\n      svgContainer.innerHTML = \"<svg>\" + cur + \"</svg>\";\n      var svg = svgContainer.firstChild;\n      while (elm.firstChild) {\n        elm.removeChild(elm.firstChild);\n      }\n      while (svg.firstChild) {\n        elm.appendChild(svg.firstChild);\n      }\n    } else if (\n      // skip the update if old and new VDOM state is the same.\n      // `value` is handled separately because the DOM value may be temporarily\n      // out of sync with VDOM state due to focus, composition and modifiers.\n      // This  #4521 by skipping the unnecessary `checked` update.\n      cur !== oldProps[key]\n    ) {\n      // some property updates can throw\n      // e.g. `value` on <progress> w/ non-finite value\n      try {\n        elm[key] = cur;\n      } catch (e) {}\n    }\n  }\n}\n\n// check platforms/web/util/attrs.js acceptValue\n\n\nfunction shouldUpdateValue (elm, checkVal) {\n  return (!elm.composing && (\n    elm.tagName === 'OPTION' ||\n    isNotInFocusAndDirty(elm, checkVal) ||\n    isDirtyWithModifiers(elm, checkVal)\n  ))\n}\n\nfunction isNotInFocusAndDirty (elm, checkVal) {\n  // return true when textbox (.number and .trim) loses focus and its value is\n  // not equal to the updated value\n  var notInFocus = true;\n  // #6157\n  // work around IE bug when accessing document.activeElement in an iframe\n  try { notInFocus = document.activeElement !== elm; } catch (e) {}\n  return notInFocus && elm.value !== checkVal\n}\n\nfunction isDirtyWithModifiers (elm, newVal) {\n  var value = elm.value;\n  var modifiers = elm._vModifiers; // injected by v-model runtime\n  if (isDef(modifiers)) {\n    if (modifiers.number) {\n      return toNumber(value) !== toNumber(newVal)\n    }\n    if (modifiers.trim) {\n      return value.trim() !== newVal.trim()\n    }\n  }\n  return value !== newVal\n}\n\nvar domProps = {\n  create: updateDOMProps,\n  update: updateDOMProps\n};\n\n/*  */\n\nvar parseStyleText = cached(function (cssText) {\n  var res = {};\n  var listDelimiter = /;(?![^(]*\\))/g;\n  var propertyDelimiter = /:(.+)/;\n  cssText.split(listDelimiter).forEach(function (item) {\n    if (item) {\n      var tmp = item.split(propertyDelimiter);\n      tmp.length > 1 && (res[tmp[0].trim()] = tmp[1].trim());\n    }\n  });\n  return res\n});\n\n// merge static and dynamic style data on the same vnode\nfunction normalizeStyleData (data) {\n  var style = normalizeStyleBinding(data.style);\n  // static style is pre-processed into an object during compilation\n  // and is always a fresh object, so it's safe to merge into it\n  return data.staticStyle\n    ? extend(data.staticStyle, style)\n    : style\n}\n\n// normalize possible array / string values into Object\nfunction normalizeStyleBinding (bindingStyle) {\n  if (Array.isArray(bindingStyle)) {\n    return toObject(bindingStyle)\n  }\n  if (typeof bindingStyle === 'string') {\n    return parseStyleText(bindingStyle)\n  }\n  return bindingStyle\n}\n\n/**\n * parent component style should be after child's\n * so that parent component's style could override it\n */\nfunction getStyle (vnode, checkChild) {\n  var res = {};\n  var styleData;\n\n  if (checkChild) {\n    var childNode = vnode;\n    while (childNode.componentInstance) {\n      childNode = childNode.componentInstance._vnode;\n      if (\n        childNode && childNode.data &&\n        (styleData = normalizeStyleData(childNode.data))\n      ) {\n        extend(res, styleData);\n      }\n    }\n  }\n\n  if ((styleData = normalizeStyleData(vnode.data))) {\n    extend(res, styleData);\n  }\n\n  var parentNode = vnode;\n  while ((parentNode = parentNode.parent)) {\n    if (parentNode.data && (styleData = normalizeStyleData(parentNode.data))) {\n      extend(res, styleData);\n    }\n  }\n  return res\n}\n\n/*  */\n\nvar cssVarRE = /^--/;\nvar importantRE = /\\s*!important$/;\nvar setProp = function (el, name, val) {\n  /* istanbul ignore if */\n  if (cssVarRE.test(name)) {\n    el.style.setProperty(name, val);\n  } else if (importantRE.test(val)) {\n    el.style.setProperty(hyphenate(name), val.replace(importantRE, ''), 'important');\n  } else {\n    var normalizedName = normalize(name);\n    if (Array.isArray(val)) {\n      // Support values array created by autoprefixer, e.g.\n      // {display: [\"-webkit-box\", \"-ms-flexbox\", \"flex\"]}\n      // Set them one by one, and the browser will only set those it can recognize\n      for (var i = 0, len = val.length; i < len; i++) {\n        el.style[normalizedName] = val[i];\n      }\n    } else {\n      el.style[normalizedName] = val;\n    }\n  }\n};\n\nvar vendorNames = ['Webkit', 'Moz', 'ms'];\n\nvar emptyStyle;\nvar normalize = cached(function (prop) {\n  emptyStyle = emptyStyle || document.createElement('div').style;\n  prop = camelize(prop);\n  if (prop !== 'filter' && (prop in emptyStyle)) {\n    return prop\n  }\n  var capName = prop.charAt(0).toUpperCase() + prop.slice(1);\n  for (var i = 0; i < vendorNames.length; i++) {\n    var name = vendorNames[i] + capName;\n    if (name in emptyStyle) {\n      return name\n    }\n  }\n});\n\nfunction updateStyle (oldVnode, vnode) {\n  var data = vnode.data;\n  var oldData = oldVnode.data;\n\n  if (isUndef(data.staticStyle) && isUndef(data.style) &&\n    isUndef(oldData.staticStyle) && isUndef(oldData.style)\n  ) {\n    return\n  }\n\n  var cur, name;\n  var el = vnode.elm;\n  var oldStaticStyle = oldData.staticStyle;\n  var oldStyleBinding = oldData.normalizedStyle || oldData.style || {};\n\n  // if static style exists, stylebinding already merged into it when doing normalizeStyleData\n  var oldStyle = oldStaticStyle || oldStyleBinding;\n\n  var style = normalizeStyleBinding(vnode.data.style) || {};\n\n  // store normalized style under a different key for next diff\n  // make sure to clone it if it's reactive, since the user likely wants\n  // to mutate it.\n  vnode.data.normalizedStyle = isDef(style.__ob__)\n    ? extend({}, style)\n    : style;\n\n  var newStyle = getStyle(vnode, true);\n\n  for (name in oldStyle) {\n    if (isUndef(newStyle[name])) {\n      setProp(el, name, '');\n    }\n  }\n  for (name in newStyle) {\n    cur = newStyle[name];\n    if (cur !== oldStyle[name]) {\n      // ie9 setting to null has no effect, must use empty string\n      setProp(el, name, cur == null ? '' : cur);\n    }\n  }\n}\n\nvar style = {\n  create: updateStyle,\n  update: updateStyle\n};\n\n/*  */\n\nvar whitespaceRE = /\\s+/;\n\n/**\n * Add class with compatibility for SVG since classList is not supported on\n * SVG elements in IE\n */\nfunction addClass (el, cls) {\n  /* istanbul ignore if */\n  if (!cls || !(cls = cls.trim())) {\n    return\n  }\n\n  /* istanbul ignore else */\n  if (el.classList) {\n    if (cls.indexOf(' ') > -1) {\n      cls.split(whitespaceRE).forEach(function (c) { return el.classList.add(c); });\n    } else {\n      el.classList.add(cls);\n    }\n  } else {\n    var cur = \" \" + (el.getAttribute('class') || '') + \" \";\n    if (cur.indexOf(' ' + cls + ' ') < 0) {\n      el.setAttribute('class', (cur + cls).trim());\n    }\n  }\n}\n\n/**\n * Remove class with compatibility for SVG since classList is not supported on\n * SVG elements in IE\n */\nfunction removeClass (el, cls) {\n  /* istanbul ignore if */\n  if (!cls || !(cls = cls.trim())) {\n    return\n  }\n\n  /* istanbul ignore else */\n  if (el.classList) {\n    if (cls.indexOf(' ') > -1) {\n      cls.split(whitespaceRE).forEach(function (c) { return el.classList.remove(c); });\n    } else {\n      el.classList.remove(cls);\n    }\n    if (!el.classList.length) {\n      el.removeAttribute('class');\n    }\n  } else {\n    var cur = \" \" + (el.getAttribute('class') || '') + \" \";\n    var tar = ' ' + cls + ' ';\n    while (cur.indexOf(tar) >= 0) {\n      cur = cur.replace(tar, ' ');\n    }\n    cur = cur.trim();\n    if (cur) {\n      el.setAttribute('class', cur);\n    } else {\n      el.removeAttribute('class');\n    }\n  }\n}\n\n/*  */\n\nfunction resolveTransition (def$$1) {\n  if (!def$$1) {\n    return\n  }\n  /* istanbul ignore else */\n  if (typeof def$$1 === 'object') {\n    var res = {};\n    if (def$$1.css !== false) {\n      extend(res, autoCssTransition(def$$1.name || 'v'));\n    }\n    extend(res, def$$1);\n    return res\n  } else if (typeof def$$1 === 'string') {\n    return autoCssTransition(def$$1)\n  }\n}\n\nvar autoCssTransition = cached(function (name) {\n  return {\n    enterClass: (name + \"-enter\"),\n    enterToClass: (name + \"-enter-to\"),\n    enterActiveClass: (name + \"-enter-active\"),\n    leaveClass: (name + \"-leave\"),\n    leaveToClass: (name + \"-leave-to\"),\n    leaveActiveClass: (name + \"-leave-active\")\n  }\n});\n\nvar hasTransition = inBrowser && !isIE9;\nvar TRANSITION = 'transition';\nvar ANIMATION = 'animation';\n\n// Transition property/event sniffing\nvar transitionProp = 'transition';\nvar transitionEndEvent = 'transitionend';\nvar animationProp = 'animation';\nvar animationEndEvent = 'animationend';\nif (hasTransition) {\n  /* istanbul ignore if */\n  if (window.ontransitionend === undefined &&\n    window.onwebkittransitionend !== undefined\n  ) {\n    transitionProp = 'WebkitTransition';\n    transitionEndEvent = 'webkitTransitionEnd';\n  }\n  if (window.onanimationend === undefined &&\n    window.onwebkitanimationend !== undefined\n  ) {\n    animationProp = 'WebkitAnimation';\n    animationEndEvent = 'webkitAnimationEnd';\n  }\n}\n\n// binding to window is necessary to make hot reload work in IE in strict mode\nvar raf = inBrowser\n  ? window.requestAnimationFrame\n    ? window.requestAnimationFrame.bind(window)\n    : setTimeout\n  : /* istanbul ignore next */ function (fn) { return fn(); };\n\nfunction nextFrame (fn) {\n  raf(function () {\n    raf(fn);\n  });\n}\n\nfunction addTransitionClass (el, cls) {\n  var transitionClasses = el._transitionClasses || (el._transitionClasses = []);\n  if (transitionClasses.indexOf(cls) < 0) {\n    transitionClasses.push(cls);\n    addClass(el, cls);\n  }\n}\n\nfunction removeTransitionClass (el, cls) {\n  if (el._transitionClasses) {\n    remove(el._transitionClasses, cls);\n  }\n  removeClass(el, cls);\n}\n\nfunction whenTransitionEnds (\n  el,\n  expectedType,\n  cb\n) {\n  var ref = getTransitionInfo(el, expectedType);\n  var type = ref.type;\n  var timeout = ref.timeout;\n  var propCount = ref.propCount;\n  if (!type) { return cb() }\n  var event = type === TRANSITION ? transitionEndEvent : animationEndEvent;\n  var ended = 0;\n  var end = function () {\n    el.removeEventListener(event, onEnd);\n    cb();\n  };\n  var onEnd = function (e) {\n    if (e.target === el) {\n      if (++ended >= propCount) {\n        end();\n      }\n    }\n  };\n  setTimeout(function () {\n    if (ended < propCount) {\n      end();\n    }\n  }, timeout + 1);\n  el.addEventListener(event, onEnd);\n}\n\nvar transformRE = /\\b(transform|all)(,|$)/;\n\nfunction getTransitionInfo (el, expectedType) {\n  var styles = window.getComputedStyle(el);\n  // JSDOM may return undefined for transition properties\n  var transitionDelays = (styles[transitionProp + 'Delay'] || '').split(', ');\n  var transitionDurations = (styles[transitionProp + 'Duration'] || '').split(', ');\n  var transitionTimeout = getTimeout(transitionDelays, transitionDurations);\n  var animationDelays = (styles[animationProp + 'Delay'] || '').split(', ');\n  var animationDurations = (styles[animationProp + 'Duration'] || '').split(', ');\n  var animationTimeout = getTimeout(animationDelays, animationDurations);\n\n  var type;\n  var timeout = 0;\n  var propCount = 0;\n  /* istanbul ignore if */\n  if (expectedType === TRANSITION) {\n    if (transitionTimeout > 0) {\n      type = TRANSITION;\n      timeout = transitionTimeout;\n      propCount = transitionDurations.length;\n    }\n  } else if (expectedType === ANIMATION) {\n    if (animationTimeout > 0) {\n      type = ANIMATION;\n      timeout = animationTimeout;\n      propCount = animationDurations.length;\n    }\n  } else {\n    timeout = Math.max(transitionTimeout, animationTimeout);\n    type = timeout > 0\n      ? transitionTimeout > animationTimeout\n        ? TRANSITION\n        : ANIMATION\n      : null;\n    propCount = type\n      ? type === TRANSITION\n        ? transitionDurations.length\n        : animationDurations.length\n      : 0;\n  }\n  var hasTransform =\n    type === TRANSITION &&\n    transformRE.test(styles[transitionProp + 'Property']);\n  return {\n    type: type,\n    timeout: timeout,\n    propCount: propCount,\n    hasTransform: hasTransform\n  }\n}\n\nfunction getTimeout (delays, durations) {\n  /* istanbul ignore next */\n  while (delays.length < durations.length) {\n    delays = delays.concat(delays);\n  }\n\n  return Math.max.apply(null, durations.map(function (d, i) {\n    return toMs(d) + toMs(delays[i])\n  }))\n}\n\n// Old versions of Chromium (below 61.0.3163.100) formats floating pointer numbers\n// in a locale-dependent way, using a comma instead of a dot.\n// If comma is not replaced with a dot, the input will be rounded down (i.e. acting\n// as a floor function) causing unexpected behaviors\nfunction toMs (s) {\n  return Number(s.slice(0, -1).replace(',', '.')) * 1000\n}\n\n/*  */\n\nfunction enter (vnode, toggleDisplay) {\n  var el = vnode.elm;\n\n  // call leave callback now\n  if (isDef(el._leaveCb)) {\n    el._leaveCb.cancelled = true;\n    el._leaveCb();\n  }\n\n  var data = resolveTransition(vnode.data.transition);\n  if (isUndef(data)) {\n    return\n  }\n\n  /* istanbul ignore if */\n  if (isDef(el._enterCb) || el.nodeType !== 1) {\n    return\n  }\n\n  var css = data.css;\n  var type = data.type;\n  var enterClass = data.enterClass;\n  var enterToClass = data.enterToClass;\n  var enterActiveClass = data.enterActiveClass;\n  var appearClass = data.appearClass;\n  var appearToClass = data.appearToClass;\n  var appearActiveClass = data.appearActiveClass;\n  var beforeEnter = data.beforeEnter;\n  var enter = data.enter;\n  var afterEnter = data.afterEnter;\n  var enterCancelled = data.enterCancelled;\n  var beforeAppear = data.beforeAppear;\n  var appear = data.appear;\n  var afterAppear = data.afterAppear;\n  var appearCancelled = data.appearCancelled;\n  var duration = data.duration;\n\n  // activeInstance will always be the <transition> component managing this\n  // transition. One edge case to check is when the <transition> is placed\n  // as the root node of a child component. In that case we need to check\n  // <transition>'s parent for appear check.\n  var context = activeInstance;\n  var transitionNode = activeInstance.$vnode;\n  while (transitionNode && transitionNode.parent) {\n    context = transitionNode.context;\n    transitionNode = transitionNode.parent;\n  }\n\n  var isAppear = !context._isMounted || !vnode.isRootInsert;\n\n  if (isAppear && !appear && appear !== '') {\n    return\n  }\n\n  var startClass = isAppear && appearClass\n    ? appearClass\n    : enterClass;\n  var activeClass = isAppear && appearActiveClass\n    ? appearActiveClass\n    : enterActiveClass;\n  var toClass = isAppear && appearToClass\n    ? appearToClass\n    : enterToClass;\n\n  var beforeEnterHook = isAppear\n    ? (beforeAppear || beforeEnter)\n    : beforeEnter;\n  var enterHook = isAppear\n    ? (typeof appear === 'function' ? appear : enter)\n    : enter;\n  var afterEnterHook = isAppear\n    ? (afterAppear || afterEnter)\n    : afterEnter;\n  var enterCancelledHook = isAppear\n    ? (appearCancelled || enterCancelled)\n    : enterCancelled;\n\n  var explicitEnterDuration = toNumber(\n    isObject(duration)\n      ? duration.enter\n      : duration\n  );\n\n  if (process.env.NODE_ENV !== 'production' && explicitEnterDuration != null) {\n    checkDuration(explicitEnterDuration, 'enter', vnode);\n  }\n\n  var expectsCSS = css !== false && !isIE9;\n  var userWantsControl = getHookArgumentsLength(enterHook);\n\n  var cb = el._enterCb = once(function () {\n    if (expectsCSS) {\n      removeTransitionClass(el, toClass);\n      removeTransitionClass(el, activeClass);\n    }\n    if (cb.cancelled) {\n      if (expectsCSS) {\n        removeTransitionClass(el, startClass);\n      }\n      enterCancelledHook && enterCancelledHook(el);\n    } else {\n      afterEnterHook && afterEnterHook(el);\n    }\n    el._enterCb = null;\n  });\n\n  if (!vnode.data.show) {\n    // remove pending leave element on enter by injecting an insert hook\n    mergeVNodeHook(vnode, 'insert', function () {\n      var parent = el.parentNode;\n      var pendingNode = parent && parent._pending && parent._pending[vnode.key];\n      if (pendingNode &&\n        pendingNode.tag === vnode.tag &&\n        pendingNode.elm._leaveCb\n      ) {\n        pendingNode.elm._leaveCb();\n      }\n      enterHook && enterHook(el, cb);\n    });\n  }\n\n  // start enter transition\n  beforeEnterHook && beforeEnterHook(el);\n  if (expectsCSS) {\n    addTransitionClass(el, startClass);\n    addTransitionClass(el, activeClass);\n    nextFrame(function () {\n      removeTransitionClass(el, startClass);\n      if (!cb.cancelled) {\n        addTransitionClass(el, toClass);\n        if (!userWantsControl) {\n          if (isValidDuration(explicitEnterDuration)) {\n            setTimeout(cb, explicitEnterDuration);\n          } else {\n            whenTransitionEnds(el, type, cb);\n          }\n        }\n      }\n    });\n  }\n\n  if (vnode.data.show) {\n    toggleDisplay && toggleDisplay();\n    enterHook && enterHook(el, cb);\n  }\n\n  if (!expectsCSS && !userWantsControl) {\n    cb();\n  }\n}\n\nfunction leave (vnode, rm) {\n  var el = vnode.elm;\n\n  // call enter callback now\n  if (isDef(el._enterCb)) {\n    el._enterCb.cancelled = true;\n    el._enterCb();\n  }\n\n  var data = resolveTransition(vnode.data.transition);\n  if (isUndef(data) || el.nodeType !== 1) {\n    return rm()\n  }\n\n  /* istanbul ignore if */\n  if (isDef(el._leaveCb)) {\n    return\n  }\n\n  var css = data.css;\n  var type = data.type;\n  var leaveClass = data.leaveClass;\n  var leaveToClass = data.leaveToClass;\n  var leaveActiveClass = data.leaveActiveClass;\n  var beforeLeave = data.beforeLeave;\n  var leave = data.leave;\n  var afterLeave = data.afterLeave;\n  var leaveCancelled = data.leaveCancelled;\n  var delayLeave = data.delayLeave;\n  var duration = data.duration;\n\n  var expectsCSS = css !== false && !isIE9;\n  var userWantsControl = getHookArgumentsLength(leave);\n\n  var explicitLeaveDuration = toNumber(\n    isObject(duration)\n      ? duration.leave\n      : duration\n  );\n\n  if (process.env.NODE_ENV !== 'production' && isDef(explicitLeaveDuration)) {\n    checkDuration(explicitLeaveDuration, 'leave', vnode);\n  }\n\n  var cb = el._leaveCb = once(function () {\n    if (el.parentNode && el.parentNode._pending) {\n      el.parentNode._pending[vnode.key] = null;\n    }\n    if (expectsCSS) {\n      removeTransitionClass(el, leaveToClass);\n      removeTransitionClass(el, leaveActiveClass);\n    }\n    if (cb.cancelled) {\n      if (expectsCSS) {\n        removeTransitionClass(el, leaveClass);\n      }\n      leaveCancelled && leaveCancelled(el);\n    } else {\n      rm();\n      afterLeave && afterLeave(el);\n    }\n    el._leaveCb = null;\n  });\n\n  if (delayLeave) {\n    delayLeave(performLeave);\n  } else {\n    performLeave();\n  }\n\n  function performLeave () {\n    // the delayed leave may have already been cancelled\n    if (cb.cancelled) {\n      return\n    }\n    // record leaving element\n    if (!vnode.data.show && el.parentNode) {\n      (el.parentNode._pending || (el.parentNode._pending = {}))[(vnode.key)] = vnode;\n    }\n    beforeLeave && beforeLeave(el);\n    if (expectsCSS) {\n      addTransitionClass(el, leaveClass);\n      addTransitionClass(el, leaveActiveClass);\n      nextFrame(function () {\n        removeTransitionClass(el, leaveClass);\n        if (!cb.cancelled) {\n          addTransitionClass(el, leaveToClass);\n          if (!userWantsControl) {\n            if (isValidDuration(explicitLeaveDuration)) {\n              setTimeout(cb, explicitLeaveDuration);\n            } else {\n              whenTransitionEnds(el, type, cb);\n            }\n          }\n        }\n      });\n    }\n    leave && leave(el, cb);\n    if (!expectsCSS && !userWantsControl) {\n      cb();\n    }\n  }\n}\n\n// only used in dev mode\nfunction checkDuration (val, name, vnode) {\n  if (typeof val !== 'number') {\n    warn(\n      \"<transition> explicit \" + name + \" duration is not a valid number - \" +\n      \"got \" + (JSON.stringify(val)) + \".\",\n      vnode.context\n    );\n  } else if (isNaN(val)) {\n    warn(\n      \"<transition> explicit \" + name + \" duration is NaN - \" +\n      'the duration expression might be incorrect.',\n      vnode.context\n    );\n  }\n}\n\nfunction isValidDuration (val) {\n  return typeof val === 'number' && !isNaN(val)\n}\n\n/**\n * Normalize a transition hook's argument length. The hook may be:\n * - a merged hook (invoker) with the original in .fns\n * - a wrapped component method (check ._length)\n * - a plain function (.length)\n */\nfunction getHookArgumentsLength (fn) {\n  if (isUndef(fn)) {\n    return false\n  }\n  var invokerFns = fn.fns;\n  if (isDef(invokerFns)) {\n    // invoker\n    return getHookArgumentsLength(\n      Array.isArray(invokerFns)\n        ? invokerFns[0]\n        : invokerFns\n    )\n  } else {\n    return (fn._length || fn.length) > 1\n  }\n}\n\nfunction _enter (_, vnode) {\n  if (vnode.data.show !== true) {\n    enter(vnode);\n  }\n}\n\nvar transition = inBrowser ? {\n  create: _enter,\n  activate: _enter,\n  remove: function remove$$1 (vnode, rm) {\n    /* istanbul ignore else */\n    if (vnode.data.show !== true) {\n      leave(vnode, rm);\n    } else {\n      rm();\n    }\n  }\n} : {};\n\nvar platformModules = [\n  attrs,\n  klass,\n  events,\n  domProps,\n  style,\n  transition\n];\n\n/*  */\n\n// the directive module should be applied last, after all\n// built-in modules have been applied.\nvar modules = platformModules.concat(baseModules);\n\nvar patch = createPatchFunction({ nodeOps: nodeOps, modules: modules });\n\n/**\n * Not type checking this file because flow doesn't like attaching\n * properties to Elements.\n */\n\n/* istanbul ignore if */\nif (isIE9) {\n  // http://www.matts411.com/post/internet-explorer-9-oninput/\n  document.addEventListener('selectionchange', function () {\n    var el = document.activeElement;\n    if (el && el.vmodel) {\n      trigger(el, 'input');\n    }\n  });\n}\n\nvar directive = {\n  inserted: function inserted (el, binding, vnode, oldVnode) {\n    if (vnode.tag === 'select') {\n      // #6903\n      if (oldVnode.elm && !oldVnode.elm._vOptions) {\n        mergeVNodeHook(vnode, 'postpatch', function () {\n          directive.componentUpdated(el, binding, vnode);\n        });\n      } else {\n        setSelected(el, binding, vnode.context);\n      }\n      el._vOptions = [].map.call(el.options, getValue);\n    } else if (vnode.tag === 'textarea' || isTextInputType(el.type)) {\n      el._vModifiers = binding.modifiers;\n      if (!binding.modifiers.lazy) {\n        el.addEventListener('compositionstart', onCompositionStart);\n        el.addEventListener('compositionend', onCompositionEnd);\n        // Safari < 10.2 & UIWebView doesn't fire compositionend when\n        // switching focus before confirming composition choice\n        // this also fixes the issue where some browsers e.g. iOS Chrome\n        // fires \"change\" instead of \"input\" on autocomplete.\n        el.addEventListener('change', onCompositionEnd);\n        /* istanbul ignore if */\n        if (isIE9) {\n          el.vmodel = true;\n        }\n      }\n    }\n  },\n\n  componentUpdated: function componentUpdated (el, binding, vnode) {\n    if (vnode.tag === 'select') {\n      setSelected(el, binding, vnode.context);\n      // in case the options rendered by v-for have changed,\n      // it's possible that the value is out-of-sync with the rendered options.\n      // detect such cases and filter out values that no longer has a matching\n      // option in the DOM.\n      var prevOptions = el._vOptions;\n      var curOptions = el._vOptions = [].map.call(el.options, getValue);\n      if (curOptions.some(function (o, i) { return !looseEqual(o, prevOptions[i]); })) {\n        // trigger change event if\n        // no matching option found for at least one value\n        var needReset = el.multiple\n          ? binding.value.some(function (v) { return hasNoMatchingOption(v, curOptions); })\n          : binding.value !== binding.oldValue && hasNoMatchingOption(binding.value, curOptions);\n        if (needReset) {\n          trigger(el, 'change');\n        }\n      }\n    }\n  }\n};\n\nfunction setSelected (el, binding, vm) {\n  actuallySetSelected(el, binding, vm);\n  /* istanbul ignore if */\n  if (isIE || isEdge) {\n    setTimeout(function () {\n      actuallySetSelected(el, binding, vm);\n    }, 0);\n  }\n}\n\nfunction actuallySetSelected (el, binding, vm) {\n  var value = binding.value;\n  var isMultiple = el.multiple;\n  if (isMultiple && !Array.isArray(value)) {\n    process.env.NODE_ENV !== 'production' && warn(\n      \"<select multiple v-model=\\\"\" + (binding.expression) + \"\\\"> \" +\n      \"expects an Array value for its binding, but got \" + (Object.prototype.toString.call(value).slice(8, -1)),\n      vm\n    );\n    return\n  }\n  var selected, option;\n  for (var i = 0, l = el.options.length; i < l; i++) {\n    option = el.options[i];\n    if (isMultiple) {\n      selected = looseIndexOf(value, getValue(option)) > -1;\n      if (option.selected !== selected) {\n        option.selected = selected;\n      }\n    } else {\n      if (looseEqual(getValue(option), value)) {\n        if (el.selectedIndex !== i) {\n          el.selectedIndex = i;\n        }\n        return\n      }\n    }\n  }\n  if (!isMultiple) {\n    el.selectedIndex = -1;\n  }\n}\n\nfunction hasNoMatchingOption (value, options) {\n  return options.every(function (o) { return !looseEqual(o, value); })\n}\n\nfunction getValue (option) {\n  return '_value' in option\n    ? option._value\n    : option.value\n}\n\nfunction onCompositionStart (e) {\n  e.target.composing = true;\n}\n\nfunction onCompositionEnd (e) {\n  // prevent triggering an input event for no reason\n  if (!e.target.composing) { return }\n  e.target.composing = false;\n  trigger(e.target, 'input');\n}\n\nfunction trigger (el, type) {\n  var e = document.createEvent('HTMLEvents');\n  e.initEvent(type, true, true);\n  el.dispatchEvent(e);\n}\n\n/*  */\n\n// recursively search for possible transition defined inside the component root\nfunction locateNode (vnode) {\n  return vnode.componentInstance && (!vnode.data || !vnode.data.transition)\n    ? locateNode(vnode.componentInstance._vnode)\n    : vnode\n}\n\nvar show = {\n  bind: function bind (el, ref, vnode) {\n    var value = ref.value;\n\n    vnode = locateNode(vnode);\n    var transition$$1 = vnode.data && vnode.data.transition;\n    var originalDisplay = el.__vOriginalDisplay =\n      el.style.display === 'none' ? '' : el.style.display;\n    if (value && transition$$1) {\n      vnode.data.show = true;\n      enter(vnode, function () {\n        el.style.display = originalDisplay;\n      });\n    } else {\n      el.style.display = value ? originalDisplay : 'none';\n    }\n  },\n\n  update: function update (el, ref, vnode) {\n    var value = ref.value;\n    var oldValue = ref.oldValue;\n\n    /* istanbul ignore if */\n    if (!value === !oldValue) { return }\n    vnode = locateNode(vnode);\n    var transition$$1 = vnode.data && vnode.data.transition;\n    if (transition$$1) {\n      vnode.data.show = true;\n      if (value) {\n        enter(vnode, function () {\n          el.style.display = el.__vOriginalDisplay;\n        });\n      } else {\n        leave(vnode, function () {\n          el.style.display = 'none';\n        });\n      }\n    } else {\n      el.style.display = value ? el.__vOriginalDisplay : 'none';\n    }\n  },\n\n  unbind: function unbind (\n    el,\n    binding,\n    vnode,\n    oldVnode,\n    isDestroy\n  ) {\n    if (!isDestroy) {\n      el.style.display = el.__vOriginalDisplay;\n    }\n  }\n};\n\nvar platformDirectives = {\n  model: directive,\n  show: show\n};\n\n/*  */\n\nvar transitionProps = {\n  name: String,\n  appear: Boolean,\n  css: Boolean,\n  mode: String,\n  type: String,\n  enterClass: String,\n  leaveClass: String,\n  enterToClass: String,\n  leaveToClass: String,\n  enterActiveClass: String,\n  leaveActiveClass: String,\n  appearClass: String,\n  appearActiveClass: String,\n  appearToClass: String,\n  duration: [Number, String, Object]\n};\n\n// in case the child is also an abstract component, e.g. <keep-alive>\n// we want to recursively retrieve the real component to be rendered\nfunction getRealChild (vnode) {\n  var compOptions = vnode && vnode.componentOptions;\n  if (compOptions && compOptions.Ctor.options.abstract) {\n    return getRealChild(getFirstComponentChild(compOptions.children))\n  } else {\n    return vnode\n  }\n}\n\nfunction extractTransitionData (comp) {\n  var data = {};\n  var options = comp.$options;\n  // props\n  for (var key in options.propsData) {\n    data[key] = comp[key];\n  }\n  // events.\n  // extract listeners and pass them directly to the transition methods\n  var listeners = options._parentListeners;\n  for (var key$1 in listeners) {\n    data[camelize(key$1)] = listeners[key$1];\n  }\n  return data\n}\n\nfunction placeholder (h, rawChild) {\n  if (/\\d-keep-alive$/.test(rawChild.tag)) {\n    return h('keep-alive', {\n      props: rawChild.componentOptions.propsData\n    })\n  }\n}\n\nfunction hasParentTransition (vnode) {\n  while ((vnode = vnode.parent)) {\n    if (vnode.data.transition) {\n      return true\n    }\n  }\n}\n\nfunction isSameChild (child, oldChild) {\n  return oldChild.key === child.key && oldChild.tag === child.tag\n}\n\nvar isNotTextNode = function (c) { return c.tag || isAsyncPlaceholder(c); };\n\nvar isVShowDirective = function (d) { return d.name === 'show'; };\n\nvar Transition = {\n  name: 'transition',\n  props: transitionProps,\n  abstract: true,\n\n  render: function render (h) {\n    var this$1 = this;\n\n    var children = this.$slots.default;\n    if (!children) {\n      return\n    }\n\n    // filter out text nodes (possible whitespaces)\n    children = children.filter(isNotTextNode);\n    /* istanbul ignore if */\n    if (!children.length) {\n      return\n    }\n\n    // warn multiple elements\n    if (process.env.NODE_ENV !== 'production' && children.length > 1) {\n      warn(\n        '<transition> can only be used on a single element. Use ' +\n        '<transition-group> for lists.',\n        this.$parent\n      );\n    }\n\n    var mode = this.mode;\n\n    // warn invalid mode\n    if (process.env.NODE_ENV !== 'production' &&\n      mode && mode !== 'in-out' && mode !== 'out-in'\n    ) {\n      warn(\n        'invalid <transition> mode: ' + mode,\n        this.$parent\n      );\n    }\n\n    var rawChild = children[0];\n\n    // if this is a component root node and the component's\n    // parent container node also has transition, skip.\n    if (hasParentTransition(this.$vnode)) {\n      return rawChild\n    }\n\n    // apply transition data to child\n    // use getRealChild() to ignore abstract components e.g. keep-alive\n    var child = getRealChild(rawChild);\n    /* istanbul ignore if */\n    if (!child) {\n      return rawChild\n    }\n\n    if (this._leaving) {\n      return placeholder(h, rawChild)\n    }\n\n    // ensure a key that is unique to the vnode type and to this transition\n    // component instance. This key will be used to remove pending leaving nodes\n    // during entering.\n    var id = \"__transition-\" + (this._uid) + \"-\";\n    child.key = child.key == null\n      ? child.isComment\n        ? id + 'comment'\n        : id + child.tag\n      : isPrimitive(child.key)\n        ? (String(child.key).indexOf(id) === 0 ? child.key : id + child.key)\n        : child.key;\n\n    var data = (child.data || (child.data = {})).transition = extractTransitionData(this);\n    var oldRawChild = this._vnode;\n    var oldChild = getRealChild(oldRawChild);\n\n    // mark v-show\n    // so that the transition module can hand over the control to the directive\n    if (child.data.directives && child.data.directives.some(isVShowDirective)) {\n      child.data.show = true;\n    }\n\n    if (\n      oldChild &&\n      oldChild.data &&\n      !isSameChild(child, oldChild) &&\n      !isAsyncPlaceholder(oldChild) &&\n      // #6687 component root is a comment node\n      !(oldChild.componentInstance && oldChild.componentInstance._vnode.isComment)\n    ) {\n      // replace old child transition data with fresh one\n      // important for dynamic transitions!\n      var oldData = oldChild.data.transition = extend({}, data);\n      // handle transition mode\n      if (mode === 'out-in') {\n        // return placeholder node and queue update when leave finishes\n        this._leaving = true;\n        mergeVNodeHook(oldData, 'afterLeave', function () {\n          this$1._leaving = false;\n          this$1.$forceUpdate();\n        });\n        return placeholder(h, rawChild)\n      } else if (mode === 'in-out') {\n        if (isAsyncPlaceholder(child)) {\n          return oldRawChild\n        }\n        var delayedLeave;\n        var performLeave = function () { delayedLeave(); };\n        mergeVNodeHook(data, 'afterEnter', performLeave);\n        mergeVNodeHook(data, 'enterCancelled', performLeave);\n        mergeVNodeHook(oldData, 'delayLeave', function (leave) { delayedLeave = leave; });\n      }\n    }\n\n    return rawChild\n  }\n};\n\n/*  */\n\nvar props = extend({\n  tag: String,\n  moveClass: String\n}, transitionProps);\n\ndelete props.mode;\n\nvar TransitionGroup = {\n  props: props,\n\n  beforeMount: function beforeMount () {\n    var this$1 = this;\n\n    var update = this._update;\n    this._update = function (vnode, hydrating) {\n      var restoreActiveInstance = setActiveInstance(this$1);\n      // force removing pass\n      this$1.__patch__(\n        this$1._vnode,\n        this$1.kept,\n        false, // hydrating\n        true // removeOnly (!important, avoids unnecessary moves)\n      );\n      this$1._vnode = this$1.kept;\n      restoreActiveInstance();\n      update.call(this$1, vnode, hydrating);\n    };\n  },\n\n  render: function render (h) {\n    var tag = this.tag || this.$vnode.data.tag || 'span';\n    var map = Object.create(null);\n    var prevChildren = this.prevChildren = this.children;\n    var rawChildren = this.$slots.default || [];\n    var children = this.children = [];\n    var transitionData = extractTransitionData(this);\n\n    for (var i = 0; i < rawChildren.length; i++) {\n      var c = rawChildren[i];\n      if (c.tag) {\n        if (c.key != null && String(c.key).indexOf('__vlist') !== 0) {\n          children.push(c);\n          map[c.key] = c\n          ;(c.data || (c.data = {})).transition = transitionData;\n        } else if (process.env.NODE_ENV !== 'production') {\n          var opts = c.componentOptions;\n          var name = opts ? (opts.Ctor.options.name || opts.tag || '') : c.tag;\n          warn((\"<transition-group> children must be keyed: <\" + name + \">\"));\n        }\n      }\n    }\n\n    if (prevChildren) {\n      var kept = [];\n      var removed = [];\n      for (var i$1 = 0; i$1 < prevChildren.length; i$1++) {\n        var c$1 = prevChildren[i$1];\n        c$1.data.transition = transitionData;\n        c$1.data.pos = c$1.elm.getBoundingClientRect();\n        if (map[c$1.key]) {\n          kept.push(c$1);\n        } else {\n          removed.push(c$1);\n        }\n      }\n      this.kept = h(tag, null, kept);\n      this.removed = removed;\n    }\n\n    return h(tag, null, children)\n  },\n\n  updated: function updated () {\n    var children = this.prevChildren;\n    var moveClass = this.moveClass || ((this.name || 'v') + '-move');\n    if (!children.length || !this.hasMove(children[0].elm, moveClass)) {\n      return\n    }\n\n    // we divide the work into three loops to avoid mixing DOM reads and writes\n    // in each iteration - which helps prevent layout thrashing.\n    children.forEach(callPendingCbs);\n    children.forEach(recordPosition);\n    children.forEach(applyTranslation);\n\n    // force reflow to put everything in position\n    // assign to this to avoid being removed in tree-shaking\n    // $flow-disable-line\n    this._reflow = document.body.offsetHeight;\n\n    children.forEach(function (c) {\n      if (c.data.moved) {\n        var el = c.elm;\n        var s = el.style;\n        addTransitionClass(el, moveClass);\n        s.transform = s.WebkitTransform = s.transitionDuration = '';\n        el.addEventListener(transitionEndEvent, el._moveCb = function cb (e) {\n          if (e && e.target !== el) {\n            return\n          }\n          if (!e || /transform$/.test(e.propertyName)) {\n            el.removeEventListener(transitionEndEvent, cb);\n            el._moveCb = null;\n            removeTransitionClass(el, moveClass);\n          }\n        });\n      }\n    });\n  },\n\n  methods: {\n    hasMove: function hasMove (el, moveClass) {\n      /* istanbul ignore if */\n      if (!hasTransition) {\n        return false\n      }\n      /* istanbul ignore if */\n      if (this._hasMove) {\n        return this._hasMove\n      }\n      // Detect whether an element with the move class applied has\n      // CSS transitions. Since the element may be inside an entering\n      // transition at this very moment, we make a clone of it and remove\n      // all other transition classes applied to ensure only the move class\n      // is applied.\n      var clone = el.cloneNode();\n      if (el._transitionClasses) {\n        el._transitionClasses.forEach(function (cls) { removeClass(clone, cls); });\n      }\n      addClass(clone, moveClass);\n      clone.style.display = 'none';\n      this.$el.appendChild(clone);\n      var info = getTransitionInfo(clone);\n      this.$el.removeChild(clone);\n      return (this._hasMove = info.hasTransform)\n    }\n  }\n};\n\nfunction callPendingCbs (c) {\n  /* istanbul ignore if */\n  if (c.elm._moveCb) {\n    c.elm._moveCb();\n  }\n  /* istanbul ignore if */\n  if (c.elm._enterCb) {\n    c.elm._enterCb();\n  }\n}\n\nfunction recordPosition (c) {\n  c.data.newPos = c.elm.getBoundingClientRect();\n}\n\nfunction applyTranslation (c) {\n  var oldPos = c.data.pos;\n  var newPos = c.data.newPos;\n  var dx = oldPos.left - newPos.left;\n  var dy = oldPos.top - newPos.top;\n  if (dx || dy) {\n    c.data.moved = true;\n    var s = c.elm.style;\n    s.transform = s.WebkitTransform = \"translate(\" + dx + \"px,\" + dy + \"px)\";\n    s.transitionDuration = '0s';\n  }\n}\n\nvar platformComponents = {\n  Transition: Transition,\n  TransitionGroup: TransitionGroup\n};\n\n/*  */\n\n// install platform specific utils\nVue.config.mustUseProp = mustUseProp;\nVue.config.isReservedTag = isReservedTag;\nVue.config.isReservedAttr = isReservedAttr;\nVue.config.getTagNamespace = getTagNamespace;\nVue.config.isUnknownElement = isUnknownElement;\n\n// install platform runtime directives & components\nextend(Vue.options.directives, platformDirectives);\nextend(Vue.options.components, platformComponents);\n\n// install platform patch function\nVue.prototype.__patch__ = inBrowser ? patch : noop;\n\n// public mount method\nVue.prototype.$mount = function (\n  el,\n  hydrating\n) {\n  el = el && inBrowser ? query(el) : undefined;\n  return mountComponent(this, el, hydrating)\n};\n\n// devtools global hook\n/* istanbul ignore next */\nif (inBrowser) {\n  setTimeout(function () {\n    if (config.devtools) {\n      if (devtools) {\n        devtools.emit('init', Vue);\n      } else if (\n        process.env.NODE_ENV !== 'production' &&\n        process.env.NODE_ENV !== 'test'\n      ) {\n        console[console.info ? 'info' : 'log'](\n          'Download the Vue Devtools extension for a better development experience:\\n' +\n          'https://github.com/vuejs/vue-devtools'\n        );\n      }\n    }\n    if (process.env.NODE_ENV !== 'production' &&\n      process.env.NODE_ENV !== 'test' &&\n      config.productionTip !== false &&\n      typeof console !== 'undefined'\n    ) {\n      console[console.info ? 'info' : 'log'](\n        \"You are running Vue in development mode.\\n\" +\n        \"Make sure to turn on production mode when deploying for production.\\n\" +\n        \"See more tips at https://vuejs.org/guide/deployment.html\"\n      );\n    }\n  }, 0);\n}\n\n/*  */\n\nexport default Vue;\n","exports.nextTick = function nextTick(fn) {\n    var args = Array.prototype.slice.call(arguments);\n    args.shift();\n    setTimeout(function () {\n        fn.apply(null, args);\n    }, 0);\n};\n\nexports.platform = exports.arch = \nexports.execPath = exports.title = 'browser';\nexports.pid = 1;\nexports.browser = true;\nexports.env = {};\nexports.argv = [];\n\nexports.binding = function (name) {\n\tthrow new Error('No such module. (Possibly not yet loaded)')\n};\n\n(function () {\n    var cwd = '/';\n    var path;\n    exports.cwd = function () { return cwd };\n    exports.chdir = function (dir) {\n        if (!path) path = require('path');\n        cwd = path.resolve(dir, cwd);\n    };\n})();\n\nexports.exit = exports.kill = \nexports.umask = exports.dlopen = \nexports.uptime = exports.memoryUsage = \nexports.uvCounters = function() {};\nexports.features = {};\n","/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n    \"use strict\";\n    if (typeof define === 'function' && define.amd) {\n        define(definition);\n    } else if (typeof module === 'object' && module.exports) {\n        module.exports = definition();\n    } else {\n        root.log = definition();\n    }\n}(this, function () {\n    \"use strict\";\n\n    // Slightly dubious tricks to cut down minimized file size\n    var noop = function() {};\n    var undefinedType = \"undefined\";\n    var isIE = (typeof window !== undefinedType) && (typeof window.navigator !== undefinedType) && (\n        /Trident\\/|MSIE /.test(window.navigator.userAgent)\n    );\n\n    var logMethods = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ];\n\n    // Cross-browser bind equivalent that works at least back to IE6\n    function bindMethod(obj, methodName) {\n        var method = obj[methodName];\n        if (typeof method.bind === 'function') {\n            return method.bind(obj);\n        } else {\n            try {\n                return Function.prototype.bind.call(method, obj);\n            } catch (e) {\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n                return function() {\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\n                };\n            }\n        }\n    }\n\n    // Trace() doesn't print the message in IE, so for that case we need to wrap it\n    function traceForIE() {\n        if (console.log) {\n            if (console.log.apply) {\n                console.log.apply(console, arguments);\n            } else {\n                // In old IE, native console methods themselves don't have apply().\n                Function.prototype.apply.apply(console.log, [console, arguments]);\n            }\n        }\n        if (console.trace) console.trace();\n    }\n\n    // Build the best logging method possible for this env\n    // Wherever possible we want to bind, not wrap, to preserve stack traces\n    function realMethod(methodName) {\n        if (methodName === 'debug') {\n            methodName = 'log';\n        }\n\n        if (typeof console === undefinedType) {\n            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives\n        } else if (methodName === 'trace' && isIE) {\n            return traceForIE;\n        } else if (console[methodName] !== undefined) {\n            return bindMethod(console, methodName);\n        } else if (console.log !== undefined) {\n            return bindMethod(console, 'log');\n        } else {\n            return noop;\n        }\n    }\n\n    // These private functions always need `this` to be set properly\n\n    function replaceLoggingMethods(level, loggerName) {\n        /*jshint validthis:true */\n        for (var i = 0; i < logMethods.length; i++) {\n            var methodName = logMethods[i];\n            this[methodName] = (i < level) ?\n                noop :\n                this.methodFactory(methodName, level, loggerName);\n        }\n\n        // Define log.log as an alias for log.debug\n        this.log = this.debug;\n    }\n\n    // In old IE versions, the console isn't present until you first open it.\n    // We build realMethod() replacements here that regenerate logging methods\n    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\n        return function () {\n            if (typeof console !== undefinedType) {\n                replaceLoggingMethods.call(this, level, loggerName);\n                this[methodName].apply(this, arguments);\n            }\n        };\n    }\n\n    // By default, we use closely bound real methods wherever possible, and\n    // otherwise we wait for a console to appear, and then try again.\n    function defaultMethodFactory(methodName, level, loggerName) {\n        /*jshint validthis:true */\n        return realMethod(methodName) ||\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\n    }\n\n    function Logger(name, defaultLevel, factory) {\n      var self = this;\n      var currentLevel;\n\n      var storageKey = \"loglevel\";\n      if (typeof name === \"string\") {\n        storageKey += \":\" + name;\n      } else if (typeof name === \"symbol\") {\n        storageKey = undefined;\n      }\n\n      function persistLevelIfPossible(levelNum) {\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage[storageKey] = levelName;\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n          } catch (ignore) {}\n      }\n\n      function getPersistedLevel() {\n          var storedLevel;\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          try {\n              storedLevel = window.localStorage[storageKey];\n          } catch (ignore) {}\n\n          // Fallback to cookies if local storage gives us nothing\n          if (typeof storedLevel === undefinedType) {\n              try {\n                  var cookie = window.document.cookie;\n                  var location = cookie.indexOf(\n                      encodeURIComponent(storageKey) + \"=\");\n                  if (location !== -1) {\n                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\n                  }\n              } catch (ignore) {}\n          }\n\n          // If the stored level is not valid, treat it as if nothing was stored.\n          if (self.levels[storedLevel] === undefined) {\n              storedLevel = undefined;\n          }\n\n          return storedLevel;\n      }\n\n      /*\n       *\n       * Public logger API - see https://github.com/pimterry/loglevel for details\n       *\n       */\n\n      self.name = name;\n\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n          \"ERROR\": 4, \"SILENT\": 5};\n\n      self.methodFactory = factory || defaultMethodFactory;\n\n      self.getLevel = function () {\n          return currentLevel;\n      };\n\n      self.setLevel = function (level, persist) {\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n              level = self.levels[level.toUpperCase()];\n          }\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n              currentLevel = level;\n              if (persist !== false) {  // defaults to true\n                  persistLevelIfPossible(level);\n              }\n              replaceLoggingMethods.call(self, level, name);\n              if (typeof console === undefinedType && level < self.levels.SILENT) {\n                  return \"No console available for logging\";\n              }\n          } else {\n              throw \"log.setLevel() called with invalid level: \" + level;\n          }\n      };\n\n      self.setDefaultLevel = function (level) {\n          if (!getPersistedLevel()) {\n              self.setLevel(level, false);\n          }\n      };\n\n      self.enableAll = function(persist) {\n          self.setLevel(self.levels.TRACE, persist);\n      };\n\n      self.disableAll = function(persist) {\n          self.setLevel(self.levels.SILENT, persist);\n      };\n\n      // Initialize with the right level\n      var initialLevel = getPersistedLevel();\n      if (initialLevel == null) {\n          initialLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\n      }\n      self.setLevel(initialLevel, false);\n    }\n\n    /*\n     *\n     * Top-level API\n     *\n     */\n\n    var defaultLogger = new Logger();\n\n    var _loggersByName = {};\n    defaultLogger.getLogger = function getLogger(name) {\n        if ((typeof name !== \"symbol\" && typeof name !== \"string\") || name === \"\") {\n          throw new TypeError(\"You must supply a name when creating a logger.\");\n        }\n\n        var logger = _loggersByName[name];\n        if (!logger) {\n          logger = _loggersByName[name] = new Logger(\n            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\n        }\n        return logger;\n    };\n\n    // Grab the current global log variable in case of overwrite\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\n    defaultLogger.noConflict = function() {\n        if (typeof window !== undefinedType &&\n               window.log === defaultLogger) {\n            window.log = _log;\n        }\n\n        return defaultLogger;\n    };\n\n    defaultLogger.getLoggers = function getLoggers() {\n        return _loggersByName;\n    };\n\n    // ES6 default export, for compatibility\n    defaultLogger['default'] = defaultLogger;\n\n    return defaultLogger;\n}));\n","import * as Log from \"loglevel\";\n\nvar LoggerByDefault = {\n    /**\n     * logger statique\n     *\n     * @static\n     * @param {String} name - nom du logger\n     * @returns {Object} retourne un logger\n     */\n    getLogger : function (name) {\n        // Substitute global constants configured at compile time\n        // cf. webpack.config.js\n        // FIXME howtodo !? DefineWebpackPlugin ? EnvironmentWebpackPlugin ?\n        (\"__PRODUCTION__\".match(/true/)) ? Log.disableAll() : Log.enableAll();\n        var logname = name || \"default\";\n        return Log.getLogger(logname);\n    }\n};\n\nexport default LoggerByDefault;\n","/**\n * Classe de gestion des erreurs qui permer d'associer un message d'erreur à l'exception lancée.\n *\n * @example\n * MessagesResources.getMessage(\"ERROR_PARAM_MISSING\", \"x\", \"y\", \"z\")));\n * // --> output : Parameter(s) 'x - y - z' missing\n *\n * @module MessagesResources\n * @alias Gp.Utils.MessagesResources\n * @private\n */\nvar MessagesResources = {\n\n    // Paramètres\n    PARAM_MISSING : \"Parameter(s) '%var%' missing\",\n    PARAM_EMPTY : \"Parameter(s) '%var%' empty\",\n    PARAM_TYPE : \"Wrong type(s) for parameter(s) '%var%'\",\n    PARAM_FORMAT : \"Parameter(s) '%var%' not correctly formatted\",\n    PARAM_NOT_SUPPORT : \"Value(s) for parameter(s) '%var%' not supported\",\n    PARAM_NOT_SUPPORT_NODEJS : \"Value(s) for parameter(s) '%var%' not supported to NodeJS\",\n    PARAM_UNKNOWN : \"Value(s) for parameter(s) '%var%' unknown\",\n\n    // Services\n    // Requête\n    SERVICE_REQUEST_BUILD : \"An error occurred during the request building of the service\",\n    SERVICE_REQUEST_EMPTY : \"The request sent to the service is empty\",\n\n    // Réponse\n    SERVICE_RESPONSE_EXCEPTION : \"The service returned an exception : '%var%'\",\n    SERVICE_RESPONSE_EXCEPTION_2 : \"The service returned an exception\",\n    SERVICE_RESPONSE_ANALYSE : \"An error occurred while parsing the response '%var%' of the service\",\n    SERVICE_RESPONSE_ANALYSE_2 : \"An unknown error occurred while parsing the response\",\n    SERVICE_RESPONSE_EMPTY : \"The response of the service is empty\",\n    SERVICE_RESPONSE_EMPTY_2 : \"The response from the service could not be analyzed or is empty\",\n    SERVICE_RESPONSE_FORMAT : \"The format of the service response is not supported (handled format(s) : '%var%')\",\n    SERVICE_RESPONSE_FORMAT_2 : \"The format of the service response is not supported\",\n    SERVICE_RESPONSE_FORMAT_3 : \"No suggestion matching the search\",\n\n    // Classes\n    CLASS_CONSTRUCTOR : \"'%var%' constructor cannot be called as a function.\",\n\n    /**\n     * Fonction qui va retourner le message d'erreur associé à la clé donnée\n     *\n     * @method getMessage\n     * @param {String} clef - Clef de l'erreur (ex : ERROR_PARAM)\n     * @param {String[]} parametres - Paramètres/variables concernés par le message d'erreur associé à la clef donnée\n     * @return {String} message - String contenant le message de l'exception\n     */\n    getMessage : function (clef, parametres) {\n        // param de la fonction uniquement pour la documentation...\n\n        if (Object.keys(arguments).length === 0) {\n            return \"Message indefined !\";\n        }\n\n        var params = Array.prototype.slice.call(arguments);\n        var key = params.shift();\n        var args = params;\n\n        var message = this[key];\n\n        try {\n            if (Array.isArray(args) && args.length > 0) {\n                message = message.replace(\"%var%\", args.join(\" - \"));\n            } else {\n                message = message.replace(\"%var%\", \"%var% (not specified)\");\n            }\n        } catch (e) {\n            // error de string.replace()\n\n        }\n\n        return message;\n    }\n};\n\nexport default MessagesResources;\n","/**\n * Errors raised by API for one among three reasons : wrong API usage, underlying service error or unknown reason.\n *\n * @property {String} message - Error message\n * @property {Number} status - Error status : when {@link Gp.Error.TYPE_SRVERR}, gives the [HTTP status of the underlying web service response]{@link https://en.wikipedia.org/wiki/List_of_HTTP_status_codes} ; -1 otherwise.\n * @property {String} type - Error type ({@link Gp.Error.TYPE_SRVERR}, {@link Gp.Error.TYPE_USEERR} or {@link Gp.Error.TYPE_UNKERR}).\n *\n * @namespace\n * @alias Gp.Error\n * @param {Object|String} error - Options for creating error object. Can be a String (message) or an Object.\n * @param {String} error.message - Error message to return to user.\n * @param {enum} [error.type=TYPE_UNKERR] - Error type\n * @param {status} [error.status=-1] - Error status : when {@link Gp.Error.TYPE_SRVERR}, gives the [HTTP status of the underlying web service response]{@link https://en.wikipedia.org/wiki/List_of_HTTP_status_codes}.\n *\n */\nfunction ErrorService (error) {\n    if (!(this instanceof ErrorService)) {\n        throw new TypeError(\"ErrorService constructor cannot be called as a function.\");\n    }\n\n    var e = error;\n    if (typeof error === \"string\" || error instanceof String) {\n        this.message = error;\n        this.status = -1;\n        this.type = ErrorService.TYPE_UNKERR;\n    } else {\n        this.message = e.message || \"undefined!?\";\n        this.type = e.type;\n        this.status = e.status || -1;\n    }\n\n    this.name = \"ErrorService\";\n    this.stack = (new Error()).stack;\n}\n\n/**\n * Error raised when underlying geoportal service answers on error.\n *\n * @type {String}\n * @constant\n * @static\n */\nErrorService.TYPE_SRVERR = \"SERVICE_ERROR\";\n/**\n * Error raised when funcion use is inappropriate\n *\n * @type {String}\n * @constant\n * @static\n */\nErrorService.TYPE_USEERR = \"USAGE_ERROR\";\n/**\n * Error raised when API can't perform the job for a reason other than the two other ones.\n *\n * @type {String}\n * @constant\n * @static\n */\nErrorService.TYPE_UNKERR = \"UNKNOWN_ERROR\";\n\n/**\n * @lends module:ErrorService\n */\nErrorService.prototype = Object.create(Error.prototype, {\n    constructor : {\n        value : ErrorService,\n        writable : true,\n        configurable : true\n    }\n});\n\nexport default ErrorService;\n","/**\n * Classe utilitaire\n *\n * @module Helper\n * @alias Gp.Helper\n */\nvar Helper = {\n\n    /**\n     * concatenation des parametres key/value dans les urls\n     *\n     * @method normalyzeParameters\n     * @static\n     * @param {Object} params - tableau de clef/valeur\n     *\n     * @example\n     *  Gp.Utils.Helper.normalyzeParameters ({\n     *         key1:value1,\n     *         key2:value2,\n     *         key3:value3\n     *  });\n     *  // out : \"key1=value1&key2=value2&key3=value3\"\n     *\n     * @returns {String} retourne les paramètres concaténés\n     */\n    normalyzeParameters : function (params) {\n        var myParams = null;\n\n        if (params) {\n            var tabParams = [];\n            for (var key in params) {\n                if (params.hasOwnProperty(key)) {\n                    var value = params[key];\n                    if (!value) {\n                        value = \"\";\n                    }\n                    tabParams.push(key + \"=\" + value);\n                }\n            }\n\n            myParams = tabParams.join(\"&\");\n        }\n\n        return myParams;\n    },\n\n    /**\n     * Concaténation et encodage des urls.\n     *\n     * @method normalyzeUrl\n     * @static\n     * @param {String} url - url\n     * @param {Object|String} params - tableau de clef/valeur ou string\n     * @param {Boolean} encode - true|false, false par defaut\n     *\n     * @example\n     *  Gp.Utils.Helper.normalyzeUrl (url, {\n     *         key1:value1,\n     *         key2=:value2,\n     *         key3:value3\n     *  });\n     *  // out : \"url?key1=value1&key2=value2&key3=value3\"\n     *\n     * @returns {String} retourne une url normalisée\n     */\n    normalyzeUrl : function (url, params, encode) {\n        var myUrl = url;\n\n        if (url) {\n            var k = url.indexOf(\"?\");\n            if (k === -1) { // pas de ? et KVP\n                myUrl += \"?\";\n            }\n\n            if (k !== -1 && k !== url.length - 1) { // KVP\n                myUrl += \"&\";\n            }\n        }\n\n        if (params) {\n            if (typeof params === \"string\") {\n                myUrl += params;\n            } else {\n                myUrl += this.normalyzeParameters(params);\n            }\n        }\n\n        if (encode) {\n            // FIXME bonne idée ?\n            myUrl = encodeURIComponent(myUrl);\n        }\n\n        return myUrl;\n    },\n\n    /**\n     * Indentation d'une chaine\n     *\n     * @method indent\n     * @static\n     * @param {Number} n - nombre de tabulation\n     * @param {String} msg - chaine\n     *\n     * @example\n     * Gp.Utils.Helper.indent (2, \"message à indenter\")\n     * // out\n     * // ........message à indenter\n     *\n     * @returns {String} retourne une chaine indentée\n     */\n    indent : function (n, msg) {\n        var num = n || 0;\n        return new Array(num + 1).join(\"\\t\") + msg;\n    }\n};\n\nexport default Helper;\n","/* global Promise, require, XDomainRequest */\n\nimport Logger from \"../Utils/LoggerByDefault\";\nimport Helper from \"../Utils/Helper\";\nimport ES6Promise from \"es6-promise\";\n// import __request from \"request\";\n// import __xmldom from \"xmldom\";\n\n/**\n * Ajax Request (use of Promises)\n *\n * @module XHR\n * @alias Gp.Protocols.XHR\n * @see dependance 'es6-promise'\n */\n\n// cf. https://xhr.spec.whatwg.org/\n// cf. https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest\n\nvar XHR = {\n\n    /**\n     * Interface unique d'envoi d'une requête.\n     *\n     * @method call\n     * @static\n     * @param {Object} settings - options generales\n     * @param {String} settings.url    - url du service\n     * @param {String} settings.method - GET, POST, PUT, DELETE\n     * @param {String} settings.format - format de la reponse du service : json, xml ou null (brute)\n     * @param {String} settings.data   - content (post) ou param (get)\n     * @param {String} settings.proxy  - proxy url\n     * @param {Object|String} settings.headers - (post) ex. referer\n     * @param {Object|String} settings.content - (post) ex. 'application/json'\n     * @param {String} settings.timeOut - timeout = 0 par defaut\n     * @param {String} settings.scope - this\n     * @param {Function} settings.onResponse - callback\n     * @param {Function} settings.onFailure  - callback\n     */\n    call : function (settings) {\n        // logger\n        var logger = Logger.getLogger(\"XHR\");\n        logger.trace(\"[XHR::call()]\");\n\n        // FIXME\n        // To polyfill the global environment\n        ES6Promise.polyfill();\n\n        // test sur les settings obligatoires\n        if (!settings.url) {\n            throw new Error(\"missing parameter : url is not defined !\");\n        }\n\n        if (!settings.method) {\n            throw new Error(\"missing parameter : method is not defined !\");\n        }\n\n        if (!settings.format) {\n            settings.format = \"text\"; // reponse brute !\n        }\n\n        var options = {};\n        options.url = settings.url;\n        options.data = settings.data ? settings.data : null;\n        options.method = settings.method;\n        options.timeOut = settings.timeOut || 0;\n        options.scope = settings.scope || this;\n        options.proxy = settings.proxy || null;\n        options.content = settings.content || null;\n        options.headers = settings.headers || {\n            referer : \"http://localhost\"\n        };\n\n        // test sur les valeurs de 'settings.method'\n        switch (settings.method) {\n            case \"DELETE\":\n            case \"GET\":\n                break;\n            case \"PUT\":\n            case \"POST\":\n                // on force sur ces params spécifiques au mode POST\n                options.content = settings.content ? settings.content : \"application/x-www-form-urlencoded\"; // FIXME en attente des services : bascule en \"application/xml\" ou \"application/json\"\n                options.headers = settings.headers ? settings.headers : { referer : \"http://localhost\" }; // FIXME parametrable...\n                break;\n            case \"HEAD\":\n            case \"OPTIONS\":\n                throw new Error(\"HTTP method not yet supported !\");\n            default:\n                throw new Error(\"HTTP method unknown !\");\n        }\n\n        // test sur les valeurs de 'settings.format'\n        switch (settings.format) {\n            case \"text\":\n                this.__call(options)\n                    .then(function (response) {\n                        logger.trace(response);\n                        settings.onResponse.call(this, response);\n                    })\n                    .catch(function (error) {\n                        settings.onFailure.call(this, error);\n                    });\n                break;\n            case \"json\":\n                this.__callJSON(options)\n                    .then(function (response) {\n                        logger.trace(response);\n                        settings.onResponse.call(this, response);\n                    })\n                    .catch(function (error) {\n                        settings.onFailure.call(this, error);\n                    });\n                break;\n            case \"xml\":\n                this.__callXML(options)\n                    .then(function (response) {\n                        logger.trace(response);\n                        settings.onResponse.call(this, response);\n                    })\n                    .catch(function (error) {\n                        settings.onFailure.call(this, error);\n                    });\n                break;\n            default:\n                throw new Error(\"This output Format is not yet supported !\");\n        }\n    },\n\n    /**\n     * Requete\n     *\n     * @method __call\n     * @private\n     * @param  {Object} options - options\n     * @return {Object} promise\n     */\n    __call : function (options) {\n        var logger = Logger.getLogger(\"XHR\");\n        logger.trace(\"[XHR::__call()]\");\n\n        var promise = new Promise(\n            function (resolve, reject) {\n                // traitement du corps de la requête\n                var corps = (options.method === \"POST\" || options.method === \"PUT\") ? 1 : 0;\n\n                // seulement si options.data n'est pas vide (peut être un objet ou une chaine de caractères)\n                if (options.data && ((typeof options.data === \"object\" && Object.keys(options.data).length) || (typeof options.data === \"string\" && options.data.length)) && !corps) {\n                    options.url = Helper.normalyzeUrl(options.url, options.data);\n                }\n\n                logger.trace(\"URL = \", options.url);\n\n                var hXHR = null;\n\n                // test on env. nodejs or browser\n                if (typeof window === \"undefined\") {\n                    var nodefetch = require(\"node-fetch\");\n\n                    var opts = {\n                        headers : {\n                            Referer : \"https://localhost\"\n                        }\n                    };\n\n                    if (options.data && typeof options.data === \"string\" && corps) {\n                        opts = {\n                            method : options.method,\n                            body : options.data,\n                            headers : {\n                                \"Content-Type\" : options.content,\n                                Referer : \"https://localhost\"\n                            }\n                        };\n                    }\n\n                    return nodefetch(options.url, opts)\n                        .then(function (response) {\n                            if (response.ok) { // res.status >= 200 && res.status < 300\n                                resolve(response.text());\n                            } else {\n                                var message = \"Errors Occured on Http Request (status : '\" + response.statusText + \"' | url : '\" + response.url + \"')\";\n                                var status = response.status;\n                                reject({\n                                    message : message,\n                                    status : status\n                                });\n                            }\n                        })\n                        .catch(function (e) {\n                            reject({\n                                message : e,\n                                status : -1\n                            });\n                        });\n                } else {\n                    if (window.XMLHttpRequest) {\n                        logger.trace(\"XMLHttpRequest\");\n\n                        hXHR = new XMLHttpRequest();\n                        hXHR.open(options.method, options.url, true); // async\n                        hXHR.overrideMimeType = options.content;\n\n                        // gestion du timeout\n                        var onTimeOutTrigger = null;\n                        if (options.timeOut > 0) {\n                            // FIXME le timeout interne ne me permet pas de declencher le bon message...\n                            // hXHR.timeout = options.timeOut;\n                            logger.trace(\"XHR - TimeOut actif !\");\n                            /**\n                             * Description\n                             *\n                             * @method onTimeOutTrigger\n                             * @private\n                             */\n                            onTimeOutTrigger = window.setTimeout(\n                                function () {\n                                    var message = \"TimeOut Occured on Http Request with XMLHttpRequest !\";\n                                    reject({\n                                        message : message,\n                                        status : -1\n                                    });\n                                }, options.timeOut);\n                        }\n\n                        if (corps) {\n                            // headers, data, content of data\n                            // cf. https://dvcs.w3.org/hg/xhr/raw-file/tip/Overview.html#dom-xmlhttprequest-setrequestheader\n                            logger.trace(\"data = \", options.data);\n                            hXHR.setRequestHeader(\"Content-type\", options.content);\n                            // FIXME refused to set unsafe header content-length javascript\n                            // hXHR.setRequestHeader (\"Content-length\", options.data.length);\n                            // hXHR.setRequestHeader (\"Referer\", options.headers.referer);\n                        }\n\n                        /**\n                         * On Error\n                         * FIXME ne se declenche pas !?\n                         *\n                         * @param {Object} e - Event\n                         * @method onerror\n                         * @private\n                         */\n                        hXHR.onerror = function (e) {\n                            console.log(e);\n                            reject(new Error(\"Errors Occured on Http Request with XMLHttpRequest !\"));\n                        };\n\n                        /**\n                         * On Timeout\n                         * FIXME ne se declenche pas !?\n                         *\n                         * @param {Object} e - Event\n                         * @method ontimeout\n                         * @private\n                         */\n                        hXHR.ontimeout = function (e) {\n                            console.log(e);\n                            reject(new Error(\"TimeOut Occured on Http Request with XMLHttpRequest !\"));\n                        };\n\n                        /**\n                         * Description\n                         *\n                         * @method onreadystatechange\n                         * @private\n                         */\n                        hXHR.onreadystatechange = function (e) {\n                            if (hXHR.readyState === 4) { // DONE\n                                if (hXHR.status === 200) {\n                                    window.clearTimeout(onTimeOutTrigger);\n                                    resolve(hXHR.response);\n                                } else {\n                                    var message = \"Errors Occured on Http Request (status : '\" + e.target.statusText + \"' | url : '\" + e.target.responseURL + \"')\";\n                                    var status = e.target.status;\n                                    reject({\n                                        message : message,\n                                        status : status\n                                    });\n                                }\n                            }\n                        };\n\n                        // gestion du content data\n                        var data4xhr = (options.data && corps) ? options.data : null;\n\n                        hXHR.send(data4xhr);\n                    } else if (window.XDomainRequest) {\n                        // worked in Internet Explorer 8–10 only !\n                        logger.trace(\"XDomainRequest\");\n\n                        hXHR = new XDomainRequest();\n                        hXHR.open(options.method, options.url);\n\n                        hXHR.overrideMimeType = options.content;\n\n                        if (options.timeOut > 0) {\n                            hXHR.timeout = options.timeout;\n                            logger.trace(\"XHR - TimeOut actif !\");\n                        }\n\n                        if (corps) {\n                            // headers, data, content of data\n                            // cf. https://dvcs.w3.org/hg/xhr/raw-file/tip/Overview.html#dom-xmlhttprequest-setrequestheader\n                            hXHR.setRequestHeader(\"Content-type\", options.content);\n                            // FIXME refused to set unsafe header content-length javascript\n                            // hXHR.setRequestHeader (\"Content-length\", options.data.length);\n                            // hXHR.setRequestHeader (\"Referer\", options.headers.referer);\n                        }\n\n                        /**\n                         * Description\n                         *\n                         * @method onerror\n                         * @private\n                         */\n                        hXHR.onerror = function () {\n                            reject(new Error(\"Errors Occured on Http Request with XMLHttpRequest !\"));\n                        };\n\n                        /**\n                         * Description\n                         *\n                         * @method ontimeout\n                         * @private\n                         */\n                        hXHR.ontimeout = function () {\n                            reject(new Error(\"TimeOut Occured on Http Request with XMLHttpRequest !\"));\n                        };\n\n                        /**\n                         * On Load\n                         *\n                         * @method onload\n                         * @private\n                         */\n                        hXHR.onload = function (e) {\n                            if (hXHR.status === 200) {\n                                resolve(hXHR.responseText);\n                            } else {\n                                var message = \"Errors Occured on Http Request (status : '\" + e.target.statusText + \"' | url : '\" + e.target.responseURL + \"')\";\n                                var status = e.target.status;\n                                reject({\n                                    message : message,\n                                    status : status\n                                });\n                            }\n                        };\n\n                        var data4xdr = (options.data && corps) ? options.data : null;\n\n                        hXHR.send(data4xdr);\n                    } else {\n                        throw new Error(\"CORS not supported\");\n                    }\n                }\n            }\n        );\n\n        return promise;\n    },\n\n    /**\n     * Requete avec parser JSON\n     *\n     * @method __callJSON\n     * @private\n     * @param  {Object} options - options\n     * @return {Object} promise\n     */\n    __callJSON : function (options) {\n        return this.__call(options)\n            .then(JSON.parse)\n            .catch(function (error) {\n                console.log(\"_callJSON failed on : \", options.url, error);\n                // FIXME pas d'exception, laissons le fil se derouler...\n                // throw error;\n            });\n    },\n\n    /**\n     * Requete avec parser XML\n     *\n     * @method __callXML\n     * @private\n     * @param  {Object} options - options\n     * @return {Object} promise\n     */\n    __callXML : function (options) {\n        return this.__call(options)\n            .then(function (response) {\n                var xmlDoc;\n\n                // test on env. nodejs or browser\n                if (typeof window === \"undefined\") {\n                    var DOMParser = require(\"xmldom\").DOMParser; // __xmldom.DOMParser\n                    xmlDoc = new DOMParser().parseFromString(response, \"text/xml\");\n                } else {\n                    if (window.DOMParser) {\n                        var parser = new window.DOMParser();\n                        xmlDoc = parser.parseFromString(response, \"text/xml\");\n                    } else { // IE\n                        xmlDoc = new window.ActiveXObject(\"Microsoft.XMLDOM\");\n                        xmlDoc.async = false;\n                        xmlDoc.loadXML(response);\n                    }\n                }\n\n                return xmlDoc;\n            })\n            .catch(function (error) {\n                console.log(\"__callXML failed on : \", options.url, error);\n                // FIXME pas d'exception, laissons le fil se derouler...\n                // throw error;\n            });\n    }\n\n};\n\nexport default XHR;\n","/**\n * JSONP : Implémentation du protocole JSONP de la plateforme Géoportail\n *\n * @module JSONP\n * @private\n * @alias Gp.Protocols.JSONP\n */\nimport Logger from \"../Utils/LoggerByDefault\";\n\n// cf. https://github.com/sobstel/jsonp.js\nvar JSONP = {\n\n    /**\n     * Construction d'un identifiant statique basé sur le timestamp,\n     * et qui s'incremente de +1 à chaque appel\n     */\n    uuid : (function () {\n        var id = Math.floor(Date.now());\n        return function () {\n            return id++;\n        };\n    })(),\n\n    /**\n     * Cette fonction réalise l'appel du service fourni via le paramètre \"options.url\"\n     * en mettant en œuvre le protocole JSONP.\n     *\n     * @method call\n     * @static\n     * @param {Object} options - parametres d'invocation du service en JSONP\n     * @param {String} options.url - URL du service à invoquer (indépendamment du protocole JSONP).\n     *  Cette URL contient déjà les paramètres du service.\n     *  Si le paramètre dédié à la mise en oeuvre du protocole JSONP (callback=xxx) n'est pas présent, il est rajouté par la fonction ;\n     *  sa valeur est déterminée en fonction du paramètre callbackName.\n     * @param {Number} [options.timeOut = 0] - Nombre de ms au bout duquel on considère que le service n'a pas répondu.\n     *  Une valeur de 0 pour ce paramètre permet de désactiver la gestion du timeOut.\n     * @param {String} [options.callbackSuffix = null] - Suffixe de la fonction de callback à rajouter sur l'URL.\n     *  Si aucun suffixe n'est spécifié (cas par défaut), on utilisera l'identifiant this.uuid () comme suffixe. Ex: \"callback1458574396582 ()\"\n     * @param {String} [options.callbackName = gp.protocol.jsonp] - Valeur du paramètre callback à rajouter sur l'URL.\n     *  Si l'URL fournie contient déjà le paramètre callback, le paramètre callbackName ne sera pas pris en compte.\n     *  La fonction de callback est créée dynamiquement par la fonction JSONP ;\n     *  elle a deux fonctions :\n     *    elle annule la condition de timeOut\n     *    puis appelle la fonction fournie par l'utilisateur via le paramètre onResponse.\n     * @param {Function} options.onResponse - Nom de la fonction qui sera appelée lors de la réception des résultats du service.\n     *  Ce paramètre sera ignoré si l'URL contient déjà le paramètre callback.\n     *  La fonction de rappel appelée sera alors celle ayant pour nom la valeur de ce paramètre.\n     * @param {Function} [options.onTimeOut] - Nom de la fonction qui sera appelée en cas de non réponse du service.\n     *  Le temps au bout duquel on considère que le service n'a pas répondu est déterminé par le paramètre timeOut.\n     *  @example\n     *  var options = {\n     *      url : 'http://localhost/some/test.json&callback=myResults',\n     *      timeOut : 100,\n     *      callbackName : 'myResults',\n     *      callbackSuffix : \"\",\n     *      onResponse : function (response) {\n     *          console.log('results : ', response);\n     *      },\n     *\n     *   };\n     *   JSONP.call(options);\n     */\n    call : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"JSONP\");\n        logger.trace(\"[JSONP::call ()]\");\n\n        // analyse parametres\n\n        if (!options) {\n            logger.error(\"missing parameter : options !\");\n            throw new Error(\"missing parameter : options !\");\n        }\n\n        if (!options.url) {\n            logger.error(\"missing parameter : options.url !\");\n            throw new Error(\"missing parameter : options.url !\");\n        }\n\n        if (!options.timeOut) {\n            logger.info(\"setting 'options.timeOut' default value\");\n            options.timeOut = 0;\n        }\n\n        // FIXME si un callback coté client a été mis en place,\n        // cette condition sur cette methode n'a pas de sens !?\n        if (!options.onResponse) {\n            logger.error(\"missing parameter : options.onResponse !\");\n            throw new Error(\"missing parameter : options.onResponse !\");\n            // FIXME doit on definir un callback interne par defaut !?\n            // options.onResponse = function (data) {\n            //    console.log(\"response callback (inner) : \", data);\n            // };\n        }\n\n        // ID du callback à utiliser : null ou string.\n        // si l'utilisateur a spécifié un suffixe pour le callback, on le récupère comme un ID (ex: options.callbackSuffix = \"\")\n        // sinon, on utilise un timestamp : this.uuid ()\n        var callbackId = (typeof options.callbackSuffix === \"string\") ? options.callbackSuffix : this.uuid();\n\n        // on recherche le parametre callback et son nom de fonction dans l'url\n        var urlHasCallbackKey = false;\n        var urlHasCallbackName = false;\n\n        var idx = options.url.indexOf(\"callback=\");\n\n        if (idx !== -1) {\n            urlHasCallbackKey = true;\n            // extraction callbackName de l'url : entre \"callback=\" et \"&\" ou fin de ligne\n            var j = options.url.indexOf(\"&\", idx);\n            if (j === -1) {\n                j = options.url.length;\n            }\n\n            // on ecrase le parametre options.callbackName s'il avait été défini\n            var callbackName = options.url.substring(idx + 9, j);\n\n            if (callbackName) {\n                urlHasCallbackName = true;\n                options.callbackName = callbackName;\n                logger.info(\"setting 'options.callbackName' value (\" + options.callbackName + \") from 'options.url' parameter\");\n            }\n        }\n\n        // on ajoute le parametre callback dans l'URL s'il n'existe pas\n        if (!urlHasCallbackKey) {\n            // gestion des autres param. et \"?\"\n            var k = options.url.indexOf(\"?\");\n            if (k === -1) {\n                // aucun param., ni de '?'\n                options.url = options.url + \"?\" + \"callback=\";\n            } else if (k === options.url.length) {\n                // uniquement le '?'\n                options.url = options.url + \"callback=\";\n            } else {\n                // le '?' et les param. existent\n                options.url = options.url + \"&\" + \"callback=\";\n            }\n            logger.info(\"setting callback default key in 'options.url' : \" + options.url);\n        }\n\n        // utilisation de la fonction callback coté client ?\n        var HasCallbackName = options.callbackName ? true : urlHasCallbackName;\n\n        // on ajoute le nom de la fonction callback dans l'URL si elle n'existe pas\n        if (!urlHasCallbackName) {\n            // fonction callback par defaut\n            if (!options.callbackName) {\n                logger.info(\"setting 'options.callbackName' default value\");\n                options.callbackName = \"callback\"; // ou \"gp.protocol.jsonp\" ?\n                // info : si on ne veut pas gerer d'ID dans le callback,\n                // options.callbackSuffix = \"\"\n                if (callbackId || callbackId === \"\") {\n                    options.callbackName += callbackId;\n                }\n            }\n            options.url = options.url.replace(\"callback=\", \"callback=\" + options.callbackName);\n            logger.info(\"setting callback function name in 'options.url' : \" + options.url);\n        }\n\n        // timeOut par defaut\n        if (!options.onTimeOut) {\n            logger.info(\"setting 'options.onTimeOut' default value\");\n            /** callback timeout par defaut */\n            options.onTimeOut = function (/* error */) {\n                console.log(\"TimeOut while invoking url : \" + options.url);\n            };\n        }\n\n        if (!HasCallbackName) {\n            var self = this;\n\n            // event du timeout\n            var onTimeOutTrigger = null;\n\n            // declenche le timeout si > à 0 !\n            if (options.timeOut > 0) {\n                onTimeOutTrigger = window.setTimeout(\n                    function () {\n                        /** fonction de reponse du service */\n                        window[options.callbackName] = function () {};\n                        options.onTimeOut();\n                        self._deleteScript(callbackId);\n                    }, options.timeOut);\n            }\n\n            // FIXME le nom de la fonction n'accepte pas de namespace !\n            // ex. Gp.Function.callback\n            /**\n            * fonction de reponse du service\n            * @param {Object} data - data\n            * @private\n            */\n            window[options.callbackName] = function (data) {\n                window.clearTimeout(onTimeOutTrigger);\n                options.onResponse(data);\n                self._deleteScript(callbackId);\n            };\n        }\n\n        this._createScript(callbackId, options.url);\n    },\n\n    /**\n    * create Script\n    * @param {String} callbackId - callback Id\n    * @param {String} url - url\n    * @private\n    */\n    _createScript : function (callbackId, url) {\n        var scriptu;\n        var scripto = document.getElementById(\"results\" + callbackId);\n\n        scriptu = document.createElement(\"script\");\n        scriptu.setAttribute(\"type\", \"text/javascript\");\n        scriptu.setAttribute(\"src\", url);\n        scriptu.setAttribute(\"charset\", \"UTF-8\");\n        scriptu.setAttribute(\"id\", \"results\" + callbackId);\n        scriptu.setAttribute(\"async\", \"true\"); // FIXME async ?\n        // head ou body ou autres ?\n        var node = document.documentElement || document.getElementsByTagName(\"head\")[0];\n        if (scripto === null) {\n            node.appendChild(scriptu);\n        } else {\n            // s'il existe déjà, on le remplace !\n            node.replaceChild(scriptu, scripto);\n        }\n    },\n\n    /**\n    * delete Script\n    * @param {String} callbackId - callback Id\n    * @private\n    */\n    _deleteScript : function (callbackId) {\n        var script = document.getElementById(\"results\" + callbackId);\n        if (script) {\n            var node = script.parentNode || document.documentElement;\n            if (!node) {\n                return;\n            }\n            node.removeChild(script);\n        }\n    }\n};\n\nexport default JSONP;\n","/**\n * Interface de dialogue avec les webservices\n *\n * @module Protocols\n * @private\n * @alias Gp.Protocols\n */\nimport Helper from \"../Utils/Helper\";\nimport XHR from \"./XHR\";\nimport JSONP from \"./JSONP\";\n\nvar Protocol = {\n\n    /**\n     * Interface unique d\"envoi d\"une requête.\n     *\n     * @method send\n     * @static\n     * @param {Object} options - options generales\n     * @param {String} options.url      - url du service\n     * @param {String} options.method   - GET, POST, PUT, DELETE\n     * @param {String} options.protocol - XHR | JSONP\n     * @param {String} options.format   - format de la reponse du service : json, xml ou null (brute)...\n     * @param {String} options.wrap     - encapsuler la reponse du service dans du JSON : true|false (true par defaut sur le protocole JSONP)\n     * @param {String} options.callbackSuffix - suffixe de la fonction de callback (JSONP uniquement) (ex: si callbackSuffix=\"\", la fonction s'appellera \"callback\")\n     * @param {String} options.timeOut  - 0 ms\n     * @param {Boolean} options.nocache  - true|false\n     * @param {Object|String} options.data        - content (post) ou param (get)\n     * @param {Object|String} options.headers     - (post) ex. referer\n     * @param {Object|String} options.content - (post) ex. \"application/json\"\n     * @param {String} options.scope       - this (TODO)\n     * @param {Function} options.onResponse - callback\n     * @param {Function} options.onFailure - callback\n     * @param {Function} options.onTimeOut - callback\n     * @param {String} options.proxyUrl -  (TODO)\n     */\n    send : function (options) {\n        // INFO\n        // \"output\" - param est interne à la classe \"Protocol\" (parametrable via \"wrap\"), et à ajouter à l\"url\n        //      ce param est independant du service car il est géré par le filtre LUA :\n        //          ex. json|xml (json par defaut).\n        //          Ce param. permet d\"encapsuler du XML dans du JSON :\n        //              {http : {status:200, error:null},xml :\"réponse du service\"}\n        //          Utile pour les services qui ne repondent que du XML (ex. Geocodage)\n        //\n        // |-------------------------------------------------|\n        // |      \\service |      |     |                    |\n        // | output\\ format| json | xml |     remarques      |\n        // |--------\\------|------|-----|--------------------|\n        // |    json       | json | json| json/xml encapsulé |\n        // |    xml        | json | xml | param inactif      |\n        // |-------------------------------------------------|\n        // ex. le service demande une reponse native au \"format\" json et avec un \"output\" json.\n        // on a donc une reponse json encapsulé dans un json : ce qu'on ne souhaite pas !\n        // dans ce cas on ne renseigne pas output=json\n\n        // INFO\n        // \"wrap\" - choix d\"encapsuler ou non les reponses dans du JSON.\n        //      Par defaut, on encapsule uniquement les reponses sur le protocole JSONP (et qui sont en xml) !\n\n        // INFO\n        // \"callback\" - param est interne à la classe \"Protocol\" (non parametrable), et à ajouter à l\"url\n        //      ce param est independant du service car il est géré aussi par le filtre LUA :\n        //          ex. callback|null\n        //          Ce param. permet de renvoyer une reponse javascript :\n        //              callback ({http : {status:200, error:null},xml :\"réponse du service\"})\n        //          Ce param. est non renseigné par defaut car pour du JSONP, on utilise le\n        //          le protocol JSONP, et ce dernier implemente déjà le callback !\n\n        // settings par defaut\n        var settings = options || {\n            method : \"GET\",\n            // protocol : \"JSONP\",\n            protocol : \"XHR\",\n            timeOut : 0,\n            format : null,\n            wrap : true,\n            nocache : true,\n            output : \"json\",\n            callback : null,\n            callbackSuffix : null\n        };\n\n        // on determine l'environnement d'execution : browser ou non ?\n        // et on stoppe pour nodeJS... sur un protocole JSONP !\n        if (typeof window === \"undefined\" && options.protocol === \"JSONP\") {\n            console.log(\"Value (s) for parameter (s) 'protocol=JSONP (instead use XHR)' not supported to NodeJS\");\n            return;\n        }\n\n        if (options.protocol === \"XHR\" || options.format === \"json\") {\n            settings.wrap = false;\n        } else if (options.protocol === \"JSONP\" && options.format === \"xml\") {\n            settings.wrap = true;\n        }\n\n        settings.callback = null; // FIXME non géré !?\n        settings.output = settings.wrap ? \"json\" : null;\n\n        // on encapsule les reponses dans un objet JSON\n        if (settings.wrap) {\n            var params = {};\n            params.output = settings.output;\n            params.callback = settings.callback;\n            delete params.callback; // FIXME non géré !?\n            settings.url = Helper.normalyzeUrl(options.url, params);\n        }\n\n        // choix de l\"implementation :\n        // XHR ou JSONP\n        switch (settings.protocol) {\n            case \"XHR\":\n                // on normalise l'url (gestion du cache)\n                if (options.method === \"GET\" && options.nocache) {\n                    settings.url = Helper.normalyzeUrl(settings.url, {\n                        t : new Date().getTime()\n                    });\n                }\n                // appel du service en XHR\n                XHR.call(settings);\n                break;\n            case \"JSONP\":\n\n                // on normalise l'url si les params. sont renseignés dans la string|object \"data\"\n                if (settings.data) {\n                    settings.url = Helper.normalyzeUrl(settings.url, settings.data);\n                }\n\n                // appel du service en JSONP\n                JSONP.call(settings);\n                break;\n            default:\n                throw new Error(\"protocol not supported (XHR|JSONP) !\");\n        }\n    }\n\n};\n\nexport default Protocol;\n","// cette classe contient les URLs par defaut des services.\n//  DefaultUrlService.Alti.url(key)[elevation-json]\n//  DefaultUrlService.Alti.url(key)[elevation-xml]\n//  DefaultUrlService.Alti.url(key)[profil-json]\n//  DefaultUrlService.Alti.url(key)[profil-xml]\n//  DefaultUrlService.Alti.url(key)[wps]\n//  DefaultUrlService.ProcessIsoCurve.url(key)\n//  DefaultUrlService.AutoComplete.url(key)\n//  DefaultUrlService.ReverseGeocode.url(key)\n//  DefaultUrlService.AutoConf.url(key)[apiKey]\n//  DefaultUrlService.AutoConf.url(key)[apiKeys]\n//  DefaultUrlService.AutoConf.url(key)[aggregate]\n//  DefaultUrlService.Geocode.url(key)\n//  DefaultUrlService.Route.url(key)\n\n// Example :\n//\n// DefaultUrlService.Alti.url('efe4r54tj4uy5i78o7545eaz7e87a')[elevation-json]\n//  output {String} -> http://wxs.ign.fr/efe4r54tj4uy5i78o7545eaz7e87a/alti/rest/elevation.json\n//\n// DefaultUrlService.Alti.url('efe4r54tj4uy5i78o7545eaz7e87a')\n// output {Object|String}\n// -> http://wxs.ign.fr/efe4r54tj4uy5i78o7545eaz7e87a/alti/rest/elevation.json\n// -> http://wxs.ign.fr/efe4r54tj4uy5i78o7545eaz7e87a/alti/rest/elevation.xml\n// -> http://wxs.ign.fr/efe4r54tj4uy5i78o7545eaz7e87a/alti/rest/elevationLine.json\n// -> http://wxs.ign.fr/efe4r54tj4uy5i78o7545eaz7e87a/alti/rest/elevationLine.xml\n// -> http://wxs.ign.fr/efe4r54tj4uy5i78o7545eaz7e87a/alti/wps\n//\n// ssl by default.\n//\n// Force to not do ssl :\n// DefaultUrlService.ssl = false;\n//\n// DefaultUrlService.AutoComplete.url('efe4r54tj4uy5i78o7545eaz7e87a')\n// output {Object|String}\n// -> https://wxs.ign.fr/efe4r54tj4uy5i78o7545eaz7e87a/ols/apis/completion\n\n// constantes internes\nvar HOSTNAME = \"wxs.ign.fr\";\n\n/**\n * Default Geoportal web services URLs access.\n *\n * @namespace\n * @alias Gp.Services.DefaultUrl\n */\nvar DefaultUrlService = {\n\n    /** if set true, require the use of https protocol */\n    ssl : true,\n\n    /**\n    * base url of services (ssl protocol management)\n    * @param {String} key - key\n    * @param {String} path - path\n    * @returns {String} url\n    */\n    url : function (key, path) {\n        // comportement par défaut => https\n        // sinon, il est fixé par l'option 'ssl' (false => http)\n        var _protocol;\n        if (DefaultUrlService.ssl === false) {\n            _protocol = \"http://\";\n        } else {\n            _protocol = \"https://\";\n        }\n\n        return _protocol + HOSTNAME.concat(\"/\", key, path);\n    },\n\n    /**\n     * Elevation web service access\n     *\n     * @member {Object}\n     * @property {Function} url (key) - Returns elevation service default urls with or without geoportal access key given as a parameter. The result is a javascript object with different urls given used protocols (\"elevation-json\", \"elevation-xml\", \"profil-json\" or \"profil-xml\").\n     */\n    Alti : {\n        _key : {\n            // rest\n            \"elevation-json\" : \"/alti/rest/elevation.json\",\n            \"elevation-xml\" : \"/alti/rest/elevation.xml\",\n            \"profil-json\" : \"/alti/rest/elevationLine.json\",\n            \"profil-xml\" : \"/alti/rest/elevationLine.xml\",\n            // other\n            wps : \"/alti/wps\"\n        },\n        /**\n        * url\n        * @param {String} key - key\n        * @returns {String} url\n        */\n        url : function (key) {\n            return {\n                // rest\n                \"elevation-json\" : DefaultUrlService.url(key, this._key[\"elevation-json\"]),\n                \"elevation-xml\" : DefaultUrlService.url(key, this._key[\"elevation-xml\"]),\n                \"profil-json\" : DefaultUrlService.url(key, this._key[\"profil-json\"]),\n                \"profil-xml\" : DefaultUrlService.url(key, this._key[\"profil-xml\"]),\n                // other\n                wps : DefaultUrlService.url(key, this._key[\"wps\"])\n            };\n        }\n    },\n    /**\n     * IsoCurve web service access\n     *\n     * @member {Object}\n     * @property {Function} url (key) - Returns isocurve service default urls with or without geoportal access key given as a parameter. The result is a javascript object with different urls given used protocols (\"iso-json\" or \"iso-xml\").\n     */\n    ProcessIsoCurve : {\n        _key : {\n            \"iso-json\" : \"/isochrone/isochrone.json\", // rest (geoconcept)\n            \"iso-xml\" : \"/isochrone/isochrone.xml\" // rest (geoconcept)\n        },\n        /**\n        * url\n        * @param {String} key - key\n        * @returns {String} url\n        */\n        url : function (key) {\n            return {\n                \"iso-json\" : DefaultUrlService.url(key, this._key[\"iso-json\"]),\n                \"iso-xml\" : DefaultUrlService.url(key, this._key[\"iso-xml\"])\n            };\n        }\n    },\n    /**\n     * Autocompletion web service access\n     *\n     * @member {Object}\n     * @property {Function} url (key) - Returns autocomplete service default urls with or without geoportal access key given as a parameter. The result is a String.\n     */\n    AutoComplete : {\n        _key : \"/ols/apis/completion\",\n        /**\n        * url\n        * @param {String} key - key\n        * @returns {String} url\n        */\n        url : function (key) {\n            return DefaultUrlService.url(key, this._key);\n        }\n    },\n    /**\n     * Reverse geocoding web service access\n     *\n     * @member {Object}\n     * @property {Function} url (key) - Returns reverse geocoding service default urls with or without geoportal access key given as a parameter. The result is a String.\n     */\n    ReverseGeocode : {\n        _key : \"/geoportail/ols\",\n        /**\n        * url\n        * @param {String} key - key\n        * @returns {String} url\n        */\n        url : function (key) {\n            return DefaultUrlService.url(key, this._key);\n        }\n    },\n    /**\n     * Autoconfiguration web service access\n     *\n     * @member {Object}\n     * @property {Function} url ([key1,...]) - Returns autoconfiguration service default urls with geoportal access key (s) given as a String array parameter. The result is a javascript object with different urls given the access mode (\"apiKey\", \"apiKeys\" or \"aggregate\").\n     */\n    AutoConf : {\n        _key : {\n            apiKey : \"/autoconf\",\n            apiKeys : \"/autoconf?keys=%KEYS%\",\n            aggregate : \"/autoconf/id/\"\n        },\n        /**\n        * url\n        * @param {String} key - key\n        * @returns {String} url\n        */\n        url : function (key) {\n            var keys = \"\";\n            if (Array.isArray(key) && key.length > 0) {\n                keys = key[0];\n                for (var i = 1; i < key.length; i++) {\n                    keys += \",\" + key[i];\n                }\n            }\n            return {\n                apiKey : DefaultUrlService.url(key, this._key[\"apiKey\"]), // une seule clé\n                apiKeys : DefaultUrlService.url(key[0], this._key[\"apiKeys\"]).replace(\"%KEYS%\", keys), // autoconf de plusieurs clés\n                aggregate : DefaultUrlService.url(key, this._key[\"aggregate\"])\n            };\n        }\n    },\n    /**\n     * Geocoding web service access\n     *\n     * @member {Object}\n     * @property {Function} url (key) - Returns geocoding service default urls with or without geoportal access key given as a parameter. The result is a String.\n     */\n    Geocode : {\n        _key : \"/geoportail/ols\",\n        /**\n        * url\n        * @param {String} key - key\n        * @returns {String} url\n        */\n        url : function (key) {\n            return DefaultUrlService.url(key, this._key);\n        }\n    },\n    /**\n     * Routing web service access\n     *\n     * @member {Object}\n     * @property {Function} url (key) - Returns routing service default urls with or without geoportal access key given as a parameter. The result is a javascript object with different urls given used protocols (\"route-json\" or \"route-xml\").\n     */\n    Route : {\n        _key : {\n            ols : \"/itineraire/ols\", // openLS\n            \"route-json\" : \"/itineraire/rest/route.json\", // rest (geoconcept)\n            \"route-xml\" : \"/itineraire/rest/route.xml\" // rest (geoconcept)\n        },\n        /**\n        * url\n        * @param {String} key - key\n        * @returns {String} url\n        */\n        url : function (key) {\n            return {\n                ols : DefaultUrlService.url(key, this._key[\"ols\"]),\n                \"route-json\" : DefaultUrlService.url(key, this._key[\"route-json\"]),\n                \"route-xml\" : DefaultUrlService.url(key, this._key[\"route-xml\"])\n            };\n        }\n    }\n};\n\nexport default DefaultUrlService;\n","import Logger from \"../Utils/LoggerByDefault\";\nimport Helper from \"../Utils/Helper\";\nimport _ from \"../Utils/MessagesResources\";\nimport Protocol from \"../Protocols/Protocol\";\nimport ErrorService from \"../Exceptions/ErrorService\";\nimport DefaultUrlService from \"./DefaultUrlService\";\n// package.json (extract version)\nimport Pkg from \"../../package.json\";\n\n/**\n * @classdesc\n * Composant Service\n *\n * @constructor\n * @alias Gp.Services.CommonService\n * @param {Object} options - options communes à tous les services\n *\n * @param {String} options.apiKey - Clef d'accès à la plateforme Géoportail,\n *      nécessaire pour franchir la couche de contrôle des accès pour avoir une réponse du service invoqué.\n *      Plusieurs clefs peuvent être passées dans le cas de l'invocation du service d'autoconfiguration.\n *      Si ce paramètre n'est pas renseigné, alors le paramètre serverUrl doit être renseigné (comprenant alors, si nécessaire la clef API).\n *\n * @param {String} options.serverUrl - URL d'accès au service.\n *      Permet de forcer l'utilisation d'un service équivalent déployé derrière une éventuelle autre URL d'accès.\n *      Si ce paramètre est renseigné alors, le paramètre apiKey est ignoré.\n *\n * @param {String} [options.protocol] - Le protocole à utiliser pour récupérer les informations du service :\n *      peut valoir 'JSONP' ou 'XHR'.\n *      Par défaut, c'est le protocole XHR qui sera utilisé.\n *      Attention, le protocole JSONP n'est pas valide dans un environnement NodeJS (Utilisation du mode XHR).\n *\n * @param {Boolean} [options.ssl] - Indique si l'on souhaite intérroger les services en https.\n *      Ce paramètre ne fonctionne que pour une utilisation hors navigateur (ex. NodeJS).\n *      Sur un navigateur, le protocole est automatiquement extrait de l'url du site...\n *      Par défaut, on utilise le protocole http (ssl=false).\n *\n * @param {String} [options.proxyURL] - Le proxy à utiliser pour pallier au problème de cross-domain dans le cas d'une requête XHR.\n *      Utile si le paramètre 'protocol' vaut 'XHR', il ne sera pas pris en compte si protocol vaut JSONP.\n *\n * @param {String} [options.callbackSuffix] - Suffixe de la fonction de callback à utiliser, dans le cas du protocole JSONP.\n *      Par défaut, la fonction de callback portera un nom du type \"callback\"+ID, où ID est soit un identifiant unique généré à chaque requête,\n *      soit le paramètre callbackSuffix s'il est spécifié. Par exemple, si callbackSuffix=\"_2\", la fonction sera \"callback_2 ()\".\n *      Utile pour utiliser une réponse déjà encapsulée dans une fonction de callback, dont le nom est connu (ex : chargement de l'autoconfiguration en local)\n *      Utile seulement si le paramètre 'protocol' vaut 'JSONP', il ne sera pas pris en compte si protocol vaut 'XHR'.\n *\n * @param {String} [options.httpMethod] - La méthode HTTP\n *      à utiliser dans le cas d'une requête XHR : peut valoir 'GET' ou 'POST'.\n *      Non pris en compte si 'protocol' vaut JSONP qui fonctionne obligatoirement en GET.\n *      Par défaut, c'est la méthode GET qui est utilisée.\n *\n * @param {String} [options.contentType] - Content-Type de la requete\n *      à utiliser dans le cas d'une requête XHR en mode POST.\n *      Non pris en compte si 'protocol' vaut JSONP et/ou la méthode HTTP vaut GET.\n *      Par défaut, c'est la méthode GET qui est utilisée donc on n'utilise pas de Content-Type.\n *\n * @param {Number} [options.timeOut] - Délai d'attente maximal (en ms) de la réponse du service (à partir de l'envoi de la requête).\n *      Par défaut, aucun timeOut n'est pris en compte (timeoutDelay= 0).\n *\n * @param {Boolean} [options.rawResponse] - Indique si l'on souhaite que la réponse du service ne soit pas parsée par l'API avant d'être restituée.\n *      (Cf. paramètre « onSuccess » pour plus de détails).\n *\n * @param {Function} [options.onSuccess] - Fonction appelée lorsque le service répond correctement à la requête\n *      (code HTTP 200, sans message d'erreur).\n *      Cette fonction prend en paramètre la réponse du service,\n *      soit sous la forme d'un Object Javascript formaté par le parseur dédié à la syntaxe du service (comportement par défaut) ;\n *      soit brute au format String non prétraité si le paramètre « rawResponse » a été précisé avec la valeur « true ».\n *\n * @param {Function} [options.onFailure] - Fonction appelée lorsque le service ne répond pas correctement\n *      (code HTTP de retour différent de 200 ou pas de réponse).\n *\n * @param {Function} [options.onBeforeParse] - Fonction appelée avant le parsing de la réponse\n *      Permet de modifier la réponse avant parsing et la fonction doit retourner une String.\n *      Cette fonction prend en paramètre la réponse telle que renvoyée par le service\n *      (cad au format json ou xml).\n *      Pour le JSONP, si le paramètre \"rawResponse\" a été précisé avec la valeur \"true\",\n *      la fonction prend en paramètre un Object JavaScript contenant la réponse XML.\n *\n * @example\n *   var options = {\n *      apiKey : null,\n *      serverUrl : 'http://localhost/service/',\n *      protocol : 'JSONP', // JSONP|XHR\n *      ssl : false,\n *      proxyURL : null,\n *      callbackName : null,\n *      httpMethod : 'GET', // GET|POST\n *      timeOut : 10000, // ms\n *      rawResponse : false, // true|false\n *      scope : null, // this\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *      onBeforeParse : function (rawResponse) {}\n *   };\n * @private\n */\nfunction CommonService (options) {\n    if (!(this instanceof CommonService)) {\n        throw new TypeError(_.getMessage(\"CLASS_CONSTRUCTOR\"));\n    }\n\n    this.logger = Logger.getLogger(\"CommonService\");\n    this.logger.trace(\"[Constructeur CommonService (options)]\");\n\n    // #####################\n    // récupération des options par défaut pour les paramètres optionnels\n    // #####################\n\n    /**\n     * Options du service\n     * @type {Object}\n     */\n    this.options = {\n        // protocol : \"JSONP\",\n        protocol : \"XHR\",\n        ssl : true,\n        proxyURL : \"\",\n        // callbackName : \"\",\n        callbackSuffix : null,\n        httpMethod : \"GET\",\n        timeOut : 0,\n        rawResponse : false,\n        scope : this,\n        /**\n        * callback par defaut pour la reponse\n        * @param {Object} response - response\n        * @private\n        */\n        onSuccess : function (response) {\n            console.log(\"onSuccess - la reponse est la suivante : \", response);\n        },\n        /**\n        * callback par defaut pour les erreurs\n        * @param {Object} error - error\n        * @private\n        */\n        onFailure : function (error) {\n            if (error.status === 200 || !error.status) {\n                console.log(\"onFailure : \", error.message);\n            } else {\n                console.log(\"onFailure - Erreur (\", error.status, \") : \", error.message);\n            }\n        }\n    };\n\n    // et on ajoute les options en paramètre aux options par défaut\n    for (var opt in options) {\n        if (options.hasOwnProperty(opt)) {\n            this.options[opt] = options[opt];\n        }\n    }\n\n    // #####################\n    // analyse des options\n    // #####################\n\n    // gestion des clefs API\n    if (!this.options.apiKey && !this.options.serverUrl) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"apiKey\", \"serverUrl\"));\n    }\n\n    // modification de la fonction de callback onSuccess dans le cas où la réponse brute est demandée\n    if (this.options.rawResponse && !this.options.onSuccess) {\n        /**\n        * callback par defaut pour la reponse\n        * @param {Object} response - response\n        * @private\n        */\n        this.options.onSuccess = function (response) {\n            console.log(\"onSuccess - la réponse brute du service est la suivante : \", response);\n        };\n    }\n\n    // gestion du callback onSuccess\n    var bOnSuccess = !!(this.options.onSuccess !== null && typeof this.options.onSuccess === \"function\");\n    if (!bOnSuccess) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"onSuccess()\"));\n    }\n\n    // gestion de l'url du service par defaut\n    if (!this.options.serverUrl) {\n        // INFO\n        // gestion de l'url du service par defaut pour les services qui ne possèdent qu'une seul url par defaut\n        // les cas particuliers des services avec plusieurs urls (ex. Alti) devront être traité dans la classe du composant\n        // donc si l'url n'est pas renseignée, il faut utiliser les urls par defaut\n        DefaultUrlService.ssl = this.options.ssl;\n        var urlByDefault = DefaultUrlService[this.CLASSNAME].url(this.options.apiKey);\n        if (typeof urlByDefault === \"string\") {\n            this.options.serverUrl = urlByDefault;\n        } else {\n            this.logger.trace(\"URL par defaut à determiner au niveau du composant...\");\n        }\n    }\n\n    // FIXME nettoyage des KVP dans l'url du service\n    // if (this.options.serverUrl) {\n    //     // INFO\n    //     // si l'url est renseignée, il faut la nettoyer de tous ses KVP\n    //     // ex. on ne veut pas de params. 'callback' ou 'output' car ceci declencherait\n    //     // des opérations d'encapsulations des reponses légèrement farfelues ...\n    //     var urlsource = this.options.serverUrl;\n    //     var urlparts = urlsource.split(\"?\");\n    //     this.options.serverUrl = urlparts[0];\n    // }\n\n    // gestion de la methode HTTP\n    this.options.httpMethod = (typeof options.httpMethod === \"string\") ? options.httpMethod.toUpperCase() : \"GET\";\n\n    switch (this.options.httpMethod) {\n        case \"POST\":\n        case \"GET\":\n            break;\n        case \"PUT\":\n        case \"DELETE\":\n        case \"HEAD\":\n        case \"OPTIONS\":\n            throw new Error(_.getMessage(\"PARAM_NOT_SUPPORT\", \"httpMethod\"));\n        default:\n            throw new Error(_.getMessage(\"PARAM_UNKNOWN\", \"httpMethod\"));\n    }\n\n    // gestion du protocole\n    // this.options.protocol = (typeof options.protocol === \"string\" ) ? options.protocol.toUpperCase() : \"JSONP\";\n    this.options.protocol = (typeof options.protocol === \"string\") ? options.protocol.toUpperCase() : \"XHR\";\n\n    switch (this.options.protocol) {\n        case \"JSONP\":\n        case \"XHR\":\n            break;\n        default:\n            throw new Error(_.getMessage(\"PARAM_UNKNOWN\", \"protocol\"));\n    }\n\n    // on determine l'environnement d'execution : browser ou non ?\n    // et on lance une exception sur l'utilisation du protocole JSONP pour nodeJS...\n    if (typeof window === \"undefined\" && this.options.protocol === \"JSONP\") {\n        throw new Error(_.getMessage(\"PARAM_NOT_SUPPORT_NODEJS\", \"protocol=JSONP (instead use XHR)\"));\n    }\n\n    // le protocole JSONP ne fonctionne qu'en GET.\n    if (this.options.protocol === \"JSONP\") {\n        this.options.httpMethod = \"GET\";\n    }\n\n    // gestion du cache\n    this.options.nocache = options.nocache || false;\n\n    // #####################\n    // attributs d'instances\n    // #####################\n\n    /**\n     * Format de réponse du service\n     */\n    this.options.outputFormat = null;\n    /**\n     * Requête envoyée au service\n     */\n    this.request = null;\n    /**\n     * Reponse du service\n     */\n    this.response = null;\n}\n\n/**\n * @lends module:CommonService\n */\nCommonService.prototype = {\n\n    /*\n     * Constructeur (alias)\n     */\n    constructor : CommonService,\n\n    /**\n     * Appel du service Géoportail\n     */\n    call : function () {\n        /* jshint validthis : true */\n        this.logger.trace(\"CommonService::call ()\");\n\n        var context = this;\n        /** fonction d'execution */\n        function run () {\n            this.logger.trace(\"CommonService::run ()\");\n            this.buildRequest.call(context, onError, onBuildRequest);\n        }\n\n        run.call(context);\n\n        // callback de fin de construction de la requête\n        function onBuildRequest (result) {\n            this.logger.trace(\"CommonService::onBuildRequest : \", result);\n            this.callService.call(context, onError, onCallService);\n        }\n\n        // callback de fin d'appel au service\n        function onCallService (result) {\n            this.logger.trace(\"CommonService::onCallService : \", result);\n            this.analyzeResponse.call(context, onError, onAnalyzeResponse);\n        }\n\n        // callback de fin de lecture de la reponse\n        function onAnalyzeResponse (result) {\n            this.logger.trace(\"CommonService::onAnalyzeResponse : \", result);\n            if (result) {\n                this.options.onSuccess.call(this, result);\n            } else {\n                return onError.call(this, new ErrorService(\"Analyse de la reponse en échec !?\"));\n            }\n        }\n\n        // callback de gestion des erreurs : renvoit un objet de type ErrorService\n        function onError (error) {\n            this.logger.trace(\"CommonService::onError()\");\n            // error : l'objet est du type ErrorService ou Error\n            var e = error;\n            if (!(e instanceof ErrorService)) {\n                e = new ErrorService(error.message);\n            }\n            this.options.onFailure.call(this, e);\n        }\n    },\n\n    /**\n     * Création de la requête\n     * @param {Function} error - callback\n     * @param {Function} success - callback\n     */\n    buildRequest : function (error, success) {\n        // INFO\n        this.logger.error(\"overwritten method !\");\n        // retourne l'objet 'this.request'\n        if (error) {\n            error.call(this, \"This method must be overwritten !\");\n        }\n        success.call(this, \"This method must be overwritten !\");\n    },\n\n    /**\n     * Appel du service\n     * @param {Function} error - callback\n     * @param {Function} success - callback\n     */\n    callService : function (error, success) {\n        // INFO\n        // retourne l'objet 'this.response'\n\n        // NOTES\n        //  Pour le mode XHR, on recupère une reponse sous forme d'un json ou xml (#document).\n        //  Pour le mode JSONP, on a toujours un objet JSON mais sous 2 formes :\n        //      - natif\n        //      - XML encapsulé :\n        //          {http : {status:200, error:null},xml :'réponse du service'}\n        //          {http : {status:400, error:'reponse du service'},xml :null}\n        //  En XHR, la reponse est directement sauvegardée dans 'this.response'.\n        //  Par contre, en JSONP, on doit analyser la reponse (status ou non vide),\n        //  et ne renvoyer que le contenu (xml ou l'objet)\n\n        // gestion de la proxification du service\n        var strUrlProxified = null;\n        var strData = this.request;\n\n        // a t on mis en place un proxy ?\n        // la proxyfication est valable uniquement en mode XHR !\n        var bUrlProxified = !!(this.options.proxyURL && this.options.protocol === \"XHR\");\n\n        // rajout de l'option gpbibaccess\n        // INFO : acces au numero de version de package.conf aprés compilation !\n        this.options.serverUrl = Helper.normalyzeUrl(this.options.serverUrl, {\n            \"gp-access-lib\" : Pkg.version\n        }, false);\n\n        // si le proxy est renseigné, on proxifie l'url du service\n        if (bUrlProxified) {\n            if (this.options.httpMethod === \"GET\") {\n                strUrlProxified = this.options.proxyURL + Helper.normalyzeUrl(this.options.serverUrl, this.request, true);\n                strData = null;\n            }\n\n            if (this.options.httpMethod === \"POST\") {\n                strUrlProxified = this.options.proxyURL + Helper.normalyzeUrl(this.options.serverUrl, null, true);\n                strData = this.request;\n            }\n        }\n\n        // contexte du composant spécifique !\n        var self = this;\n\n        var options = {\n            url : strUrlProxified || this.options.serverUrl,\n            method : this.options.httpMethod,\n            protocol : this.options.protocol,\n            timeOut : this.options.timeOut || 0,\n            format : this.options.outputFormat, // ceci declenche le parsing de la reponse du service, mais on souhaite toujours une reponse brute (string) !\n            nocache : this.options.nocache || false, // ceci permet d'ajouter un timestamp dans la requête\n            wrap : this.options.protocol !== \"XHR\", // ceci declenche l'encapsulation de la reponse XML du service dans du JSON, mais pas en mode XHR !\n            callbackSuffix : this.options.callbackSuffix,\n            // callbackName : this.options.callbackName || null,\n            data : strData,\n            headers : null, // TODO...\n            content : this.options.contentType || \"application/xml\",\n            scope : this.options.scope || this,\n            // callback de reponse\n            onResponse : function (response) {\n                self.logger.trace(\"callService::onResponse()\");\n\n                // le contenu de la reponse à renvoyer !\n                var content = null;\n\n                // XHR : on renvoie toujours la reponse brute du service (json ou xml)\n                // au parser du composant...\n                if (self.options.protocol === \"XHR\") {\n                    self.logger.trace(\"Response XHR\", response);\n                    content = response; // par defaut, la reponse du service  !\n                }\n\n                // JSONP : on pre-analyse la reponse brute du service (encapsuler ou pas)\n                // avant de l'envoyer au parser du composant...\n                if (self.options.protocol === \"JSONP\") {\n                    self.logger.trace(\"Response JSON\", response);\n                    if (response) {\n                        if (response.http) {\n                            // reponse encapsulée :\n                            // ex. reponse du service en xml\n                            // > {http : {status:200, error:null},xml :'réponse du service'}\n                            if (response.http.status !== 200) {\n                                error.call(self, new ErrorService({\n                                    status : response.http.status,\n                                    message : response.http.error,\n                                    type : ErrorService.TYPE_SRVERR\n                                }));\n                                return;\n                            } else {\n                                content = response.xml; // par defaut !\n                                if (self.options.rawResponse) {\n                                    content = response;\n                                }\n                            }\n                        } else {\n                            // reponse non encapsulée :\n                            // ex. reponse du service en json ou xml\n                            content = response;\n                        }\n                    } else {\n                        error.call(self, new ErrorService(\"Le contenu de la reponse est vide !?\"));\n                        return;\n                    }\n                }\n\n                // si on souhaite parser la reponse du service\n                if (typeof self.options.onBeforeParse === \"function\") {\n                    var newResponse = self.options.onBeforeParse(content);\n                    if (typeof newResponse === \"string\") {\n                        // la reponse parsée par l'utilisateur est retournée sous\n                        // forme de string !\n                        content = newResponse;\n                    }\n                }\n                // sauvegarde de la reponse dans l'objet parent (CommonService)\n                self.response = content;\n                // on renvoie la reponse...\n                success.call(self, content);\n            },\n            // callback des erreurs\n            onFailure : function (e) {\n                self.logger.trace(\"callService::onFailure()\");\n                // on est forcement sur une erreur levée par un service !\n                e.type = ErrorService.TYPE_SRVERR;\n                error.call(self, new ErrorService(e));\n            },\n            // callback de timeOut\n            onTimeOut : function () {\n                self.logger.trace(\"callService::onTimeOut()\");\n                error.call(self, new ErrorService(\"TimeOut!\"));\n            }\n        };\n\n        Protocol.send(options);\n    },\n\n    /**\n     * Analyse de la réponse\n     * @param {Function} error - callback\n     * @param {Function} success - callback\n     */\n    analyzeResponse : function (error, success) {\n        // INFO\n        this.logger.error(\"overwritten method !\");\n        // retourne l'objet spécifique au type de composant (json)\n        if (error) {\n            error.call(this, \"This method must be overwritten !\");\n        }\n        success.call(this, \"This method must be overwritten !\");\n    }\n\n};\n\nexport default CommonService;\n","\nimport Logger from \"../../../../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n * Classe de gestion des param. des requêtes du service altimetrique.\n *\n * @constructor\n * @alias Gp.Services.Alti.Request.AltiRequest\n * @param {Object} options - options\n * @param {Object}   options.positions - tableau de coordonnées lon/lat\n * @param {String}   options.delimiter - \"|\"\n * @param {Boolean}  options.indent - false|true\n * @param {String}   options.crs - \"CRS:84\"\n * @param {String}   options.format - \"JSON|XML\"\n *\n * @private\n */\nfunction AltiRequest (options) {\n    if (!(this instanceof AltiRequest)) {\n        throw new TypeError(\"AltiRequest constructor cannot be called as a function.\");\n    }\n\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur AltiRequest ()]\");\n\n    /**\n     * Options en paramêtres du constructeur.\n     */\n    this.options = options || {};\n\n    /**\n     * Liste des coordonnées.\n     * @example\n     * var c = [{lon : \"\", lat : \"\"}, {lon : \"\", lat : \"\"}];\n     */\n    this.positions = this.options.positions || [];\n\n    /**\n     * Caractère de séparation.\n     * Par defaut, \"|\".\n     */\n    this.delimiter = this.options.delimiter || \"|\";\n\n    /**\n     * Indentation.\n     * true|false\n     */\n    this.indent = this.options.indent || false;\n\n    /**\n     * Projection.\n     * Par defaut, CRS:84.\n     */\n    this.crs = this.options.crs || \"CRS:84\";\n\n    /**\n     * format de sortie.\n     * Par defaut, \"json\".\n     */\n    this.format = this.options.format || \"json\";\n}\n\n/**\n * CLASSNAME\n */\nAltiRequest.CLASSNAME = \"AltiRequest\";\n\nAltiRequest.prototype = {\n\n    /**\n     * @lends module:AltiRequest#\n     */\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : AltiRequest,\n\n    /**\n     * Ajout d\"une liste de coordonnées.\n     *\n     * @param {Object[]} lstPosition - liste de positions\n     * @example\n     * obj.setPositions ([{lon : \"0.15\", lat : \"0.15\"}, {lon : \"1.15\", lat : \"1.15\"}]);\n     */\n    setPositions : function (lstPosition) {\n        var positions = [];\n        for (var i = 0; i < lstPosition.length; i++) {\n            var o = lstPosition[i];\n            if (o.lon && o.lat) {\n                positions.push(o);\n            }\n        }\n\n        this.positions = positions;\n    },\n\n    /**\n     * Liste des coordonnées.\n     *\n     * @param {Int} pos - position\n     * @returns {positions}\n     * @example\n     * obj.getPositions ();  // [{lon : \"\", lat : \"\"}, {lon : \"\", lat : \"\"}]\n     * obj.getPositions (0); // [{lon : \"\", lat : \"\"}]\n     */\n    getPositions : function (pos) {\n        // FIXME test if not a number !?\n        if (!pos) {\n            return this.positions;\n        }\n\n        var index = this.positions.length - 1;\n        if (pos > index || pos < index) {\n            this.logger.warn(\"index out of range !\");\n            return this.positions;\n        }\n\n        return this.positions[pos];\n    },\n\n    /**\n     * Ajout d\"une liste de coordonnées.\n     *\n     * @param {Object[]} lstPosition - liste de positions\n     * @example\n     * obj.addPositions ([{lon : \"0.15\", lat : \"0.15\"}, {lon : \"1.15\", lat : \"1.15\"}]);\n     */\n    addPositions : function (lstPosition) {\n        for (var i = 0; i < lstPosition.length; i++) {\n            var o = lstPosition[i];\n            if (o.lon && o.lat) {\n                this.positions.push(lstPosition[i]);\n            }\n        }\n    },\n\n    /**\n     * Retourne la liste des longitudes avec un caractère de séparation.\n     *\n     * @returns {String} - une liste de longitudes\n     * @example\n     * // out : 0.2367|2.1570|43.789|...\n     */\n    getLon : function () {\n        var lstLon = [];\n        for (var i = 0; i < this.positions.length; i++) {\n            lstLon.push(this.positions[i].lon);\n        }\n        this.logger.trace(lstLon);\n        return lstLon.join(this.delimiter);\n    },\n\n    /**\n     * Retourne la liste des lattitudes avec un caractère de séparation.\n     *\n     * @returns {String} - une liste de lattitudes\n     * @example\n     * // out : 0.2367|2.1570|43.789|...\n     */\n    getLat : function () {\n        var lstLat = [];\n        for (var i = 0; i < this.positions.length; i++) {\n            lstLat.push(this.positions[i].lat);\n        }\n        this.logger.trace(lstLat);\n        return lstLat.join(this.delimiter);\n    }\n\n};\n\n/**\n * Tableau de clefs/valeurs pour param.\n *\n * @returns {Object[]}\n */\nAltiRequest.prototype.getData = function () {\n    var map = [];\n\n    map.push({\n        k : \"lon\",\n        v : this.getLon()\n    });\n    map.push({\n        k : \"lat\",\n        v : this.getLat()\n    });\n    map.push({\n        k : \"delimiter\",\n        v : this.delimiter\n    });\n    map.push({\n        k : \"indent\",\n        v : this.indent\n    });\n    map.push({\n        k : \"crs\",\n        v : this.crs\n    });\n    map.push({\n        k : \"format\",\n        v : this.format\n    });\n\n    return map;\n};\n\nexport default AltiRequest;\n","\nimport Logger from \"../../../../Utils/LoggerByDefault\";\nimport AltiRequest from \"./AltiRequest\";\n\n/**\n * @classdesc\n *\n * Classe de gestion des param. des requêtes de type POINT du service altimetrique.\n *\n * @constructor\n * @alias Gp.Services.Alti.Request.AltiElevationRequest\n * @param {Object} options - options\n * @param {Boolean}  options.zonly - false|true\n *\n * @private\n */\nfunction AltiElevationRequest (options) {\n    if (!(this instanceof AltiElevationRequest)) {\n        throw new TypeError(\"AltiElevationRequest constructor cannot be called as a function.\");\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     */\n    this.CLASSNAME = \"AltiElevationRequest\";\n\n    // appel du constructeur par heritage\n    AltiRequest.apply(this, arguments);\n\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur AltiElevationRequest ()]\");\n\n    /**\n     * Z uniquement.\n     * true|false\n     */\n    this.zonly = this.options.zonly || false; // test des options héritées !\n}\n\n/**\n * @lends module:AltiElevationRequest#\n */\n\nAltiElevationRequest.prototype = Object.create(AltiRequest.prototype, {\n\n    /**\n     * Setter/getter pour \"zonly\"\n     */\n    zonly : {\n        /** getter */\n        get : function () {\n            return this._zonly;\n        },\n        /** setter */\n        set : function (z) {\n            this._zonly = z;\n        }\n    }\n\n});\n\n/**\n * Constructeur (alias)\n */\nAltiElevationRequest.prototype.constructor = AltiElevationRequest;\n\n/**\n * Tableau de clefs/valeurs pour param.\n *\n * @returns {Array}\n */\nAltiElevationRequest.prototype.getData = function () {\n    // par glop..., appel de AltiRequest::getData () !\n    var map = [];\n    map.push({\n        k : \"lon\",\n        v : this.getLon()\n    });\n    map.push({\n        k : \"lat\",\n        v : this.getLat()\n    });\n    // map.push({k : \"delimiter\", v : this.delimiter}); // FIXME on retire le param \"delimiter\"\n    map.push({\n        k : \"indent\",\n        v : this.indent\n    });\n    map.push({\n        k : \"crs\",\n        v : this.crs\n    });\n    map.push({\n        k : \"zonly\",\n        v : this.zonly\n    });\n    map.push({\n        k : \"format\",\n        v : this.format\n    });\n\n    return map;\n};\n\nexport default AltiElevationRequest;\n","\nimport Logger from \"../../../../Utils/LoggerByDefault\";\nimport AltiRequest from \"./AltiRequest\";\n\n/**\n * @classdesc\n * Classe de gestion des param. des requêtes de type PROFIL du service altimetrique.\n *\n * @constructor\n * @alias Gp.Services.Alti.Request.AltiProfilRequest\n * @param {Object}   options - options\n * @param {String}   options.sampling - 3\n *\n * @private\n */\nfunction AltiProfilRequest (options) {\n    if (!(this instanceof AltiProfilRequest)) {\n        throw new TypeError(\"AltiProfilRequest constructor cannot be called as a function.\");\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     */\n    this.CLASSNAME = \"AltiProfilRequest\";\n\n    // appel du constructeur par heritage\n    AltiRequest.apply(this, arguments);\n\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur AltiProfilRequest ()]\");\n\n    /**\n     * Sampling\n     * Par defaut, 3\n     */\n    this.sampling = this.options.sampling || 3; // test des options héritées !\n}\n\n/**\n * @lends module:AltiProfilRequest#\n */\n\nAltiProfilRequest.prototype = Object.create(AltiRequest.prototype, {\n\n    /**\n     * Setter/getter pour \"sampling\"\n     */\n    sampling : {\n        /** getter */\n        get : function () {\n            return this._sampling;\n        },\n        /** setter */\n        set : function (value) {\n            this._sampling = value;\n        }\n    }\n});\n\n/**\n * Constructeur (alias)\n */\nAltiProfilRequest.prototype.constructor = AltiProfilRequest;\n\n/**\n * Tableau de clefs/valeurs pour param.\n *\n * @returns {Object[]}\n */\nAltiProfilRequest.prototype.getData = function () {\n    // par glop..., appel de AltiRequest::getData () !\n    var map = [];\n    map.push({\n        k : \"lon\",\n        v : this.getLon()\n    });\n    map.push({\n        k : \"lat\",\n        v : this.getLat()\n    });\n    // map.push({k : \"delimiter\", v : this.delimiter}); // FIXME on retire le param \"delimiter\"\n    map.push({\n        k : \"indent\",\n        v : this.indent\n    });\n    map.push({\n        k : \"crs\",\n        v : this.crs\n    });\n    map.push({\n        k : \"sampling\",\n        v : this.sampling\n    });\n    map.push({\n        k : \"format\",\n        v : this.format\n    });\n\n    return map;\n};\n\nexport default AltiProfilRequest;\n","/* jshint multistr : true */\n\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport _ from \"../../../Utils/MessagesResources\";\nimport AltiElevationRequest from \"./model/AltiElevationRequest\";\nimport AltiProfilRequest from \"./model/AltiProfilRequest\";\n\n/**\n * @classdesc\n * Classe de gestion des requêtes de type REST sur le service altimetrique.\n *\n * @todo Le service Alti n'implemente pas le POST !?\n * @constructor\n * @alias Gp.Services.Alti.Request.AltiRequestREST\n * @param {Object} options - options\n * @param {Object}   options.param.positions - tableau de coordonnées lon/lat\n * @param {String}   options.param.delimiter - '|'\n * @param {Boolean}  options.param.indent - false|true\n * @param {String}   options.param.crs - 'CRS:84'\n * @param {String}   options.param.sampling - 3\n * @param {Boolean}  options.param.zonly - false|true\n * @param {String}   options.param.format - \"JSON|XML\"\n * @param {String}   options.type - \"Profil|Elevation\"\n * @param {String}   options.method - GET|POST\n *\n * @example\n *      var options = {\n *           type : 'Profil', // Elevation\n *           method : 'GET',  // par defaut\n *           param : {\n *               positions : [\n *                   {lon:'1.11', lat:'1.11'},\n *                   {lon:'1.10', lat:'1.10'},\n *                   {lon:'1.12', lat:'1.12'}\n *               ],\n *               delimiter : \";\",         // par defaut\n *               indent    : true,        // par defaut\n *               crs       : 'EPSG:4326', // par defaut\n *               format    : 'json',      // par defaut (only to POST)\n *               sampling  : 3 ,          // par defaut (only use by Profil)\n *               zonly     : false        // par defaut (only use by Elevation)\n *           }\n *      };\n *\n *      var result;\n *      try {\n *          var obj = new AltiRequestREST (options);\n *          if (! obj.processRequestString ()) {\n *              throw new Error(\"Request empty !?\")\n *          }\n *          result = obj.requestString;\n *      } catch (e) {\n *          // exceptions...\n *      }\n * @private\n */\nfunction AltiRequestREST (options) {\n    this.logger = Logger.getLogger(\"AltiRequestREST\");\n    this.logger.trace(\"[Constructeur AltiRequestREST ()]\");\n\n    if (!(this instanceof AltiRequestREST)) {\n        throw new TypeError(\"AltiRequestREST constructor cannot be called as a function.\");\n    }\n\n    this.options = options || {};\n\n    // existance des options\n    if (!this.options) {\n        throw new Error(_.getMessage(\"PARAM_EMPTY\", \"options\"));\n    }\n\n    // type de requete : Altitude ou Profil\n    // (param. à determiner en fonction des parametres d'entrée)\n    if (!this.options.type) {\n        throw new Error(_.getMessage(\"PARAM_EMPTY\", \"type (Elevation or Profil)\"));\n    }\n\n    // construction du modele de requête\n    // (test du type d'objet candidat)\n    this.DataObject = null;\n    switch (this.options.type) {\n        case \"Elevation\":\n            this.DataObject = new AltiElevationRequest(this.options.param);\n            break;\n        case \"Profil\":\n            this.DataObject = new AltiProfilRequest(this.options.param);\n            break;\n        default:\n            throw new Error(_.getMessage(\"PARAM_TYPE\", \"type (Elevation or Profil)\"));\n    }\n\n    /**\n     * methode.\n     * Par defaut, \"GET\".\n     */\n    this.method = this.options.method || \"GET\";\n}\n\nAltiRequestREST.prototype = {\n\n    /**\n     * request\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : AltiRequestREST,\n\n    /**\n     * Template de la requête.\n     */\n    template : {\n        get : {\n            // FIXME on retire le param 'delimiter' : &delimiter='__DELIMITER__'\n            value : \"lon=__LON__&lat=__LAT__&indent=__INDENT__&crs='__CRS__'\",\n            input : {\n                point : \"&zonly=__ZONLY__\",\n                profil : \"&sampling=__SAMPLING__\"\n            }\n        },\n        post : {\n            // FIXME on retire le param 'delimiter' : delimiter='__DELIMITER__'\\n\\\n            value : \"lon=__LON__\\n\" +\n                \"lat=__LAT__\\n\" +\n                \"indent=__INDENT__\\n\" +\n                \"crs='__CRS__'\\n\",\n            input : {\n                point : \"zonly=__ZONLY__\",\n                profil : \"sampling=__SAMPLING__\"\n            }\n        }\n    },\n\n    /**\n     * Construction de la requête.\n     *\n     * @example\n     * // GET  out : lon=0.2367,2.1570&lat=48.0551,46.6077&delimiter=,&indent=true&zonly=true&crs='CRS:84'\n     * // POST out : Not yet supported method POST !\n     * @returns {String}\n     */\n    processRequestString : function () {\n        this.logger.trace(\"AltiRequestREST::processRequestString ()\");\n\n        var template = \"\";\n        if (this.method === \"POST\") {\n            template = this.template.post.value;\n        } else if (this.method === \"GET\") {\n            template = this.template.get.value;\n        }\n\n        template = template.replace(/__LON__/g, this.DataObject.getLon());\n        template = template.replace(/__LAT__/g, this.DataObject.getLat());\n        // FIXME on retire le param 'delimiter'\n        // template = template.replace(/__DELIMITER__/g, this.DataObject.delimiter);\n        template = template.replace(/__INDENT__/g, this.DataObject.indent);\n        template = template.replace(/__CRS__/g, this.DataObject.crs);\n\n        // ajout +\n        template = template + this.__addDataInputs();\n        this.logger.trace(\"traduction tmpl\", template);\n\n        // sauvegarde\n        this.requestString = template;\n\n        return this.requestString;\n    },\n\n    /**\n     * Ajout de parametres spécifiques (ex. zonly)\n     *\n     * @returns {String}\n     */\n    __addDataInputs : function () {\n        this.logger.trace(\"AltiRequestREST::addDataInput ()\");\n\n        var myTemplate;\n        if (this.method === \"POST\") {\n            myTemplate = this.template.post;\n        } else if (this.method === \"GET\") {\n            myTemplate = this.template.get;\n        } else {\n            throw new Error(\"No other HTTP method supported by the service !\");\n        }\n\n        var tmpl = null;\n        if (this.DataObject.CLASSNAME === \"AltiElevationRequest\") {\n            tmpl = myTemplate.input.point;\n            return tmpl.replace(/__ZONLY__/g, this.DataObject.zonly);\n        } else if (this.DataObject.CLASSNAME === \"AltiProfilRequest\") {\n            tmpl = myTemplate.input.profil;\n            return tmpl.replace(/__SAMPLING__/g, this.DataObject.sampling);\n        } else {\n            throw new Error(\"No other object supported than elevation or profil !?\");\n        }\n    }\n};\n\nexport default AltiRequestREST;\n","import Logger from \"../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n * Standard WPS\n *\n * @constructor\n * @alias Gp.Formats.WPS\n * @param {Object} options - options\n * @param {Object}   options.data - objet\n * @param {String}   options.method - POST|GET\n * @param {String}   options.param.service - \"WPS\"\n * @param {String}   options.param.version - \"1.0.0\"\n * @param {String}   options.param.identifier - \"gs:WPSElevation|gs:WPSLineElevation\"\n * @param {String}   options.param.rawdataoutput - \"result\"\n * @param {String}   options.param.request - \"Execute\"\n * @param {Function} options.onsuccess - function callback success (TODO)\n * @param {Function} options.onerror   - function callback error   (TODO)\n * @private\n */\nfunction WPS (options) {\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur WPS()]\");\n\n    if (!(this instanceof WPS)) {\n        throw new TypeError(\"WPS constructor cannot be called as a function.\");\n    }\n\n    this.options = options || {};\n\n    /**\n     * Objet DATA\n     */\n    this.DataObject = this.options.data;\n\n    if (!this.DataObject) {\n        throw new TypeError(\"This data object is not defined !\");\n    }\n\n    /**\n     * param service.\n     * Par defaut, \"WPS\".\n     */\n    this.paramservice = this.options.param.service || \"WPS\";\n\n    /**\n     * param version.\n     * Par defaut, \"1.0.0\".\n     */\n    this.paramversion = this.options.param.version || \"1.0.0\";\n\n    /**\n     * param identifier\n     * Par defaut, \"gs:WPS\"\n     */\n    this.paramidentifier = this.options.param.identifier || \"gs:WPS\";\n\n    /**\n     * param rawdataoutput\n     * Par defaut, \"result\".\n     */\n    this.paramrawdataoutput = this.options.param.rawdataoutput || \"result\";\n\n    /**\n     * param request\n     * Par defaut, \"Execute\".\n     */\n    this.paramrequest = this.options.param.request || \"Execute\";\n\n    /**\n     * methode.\n     * Par defaut, \"GET\".\n     */\n    this.method = this.options.method || \"GET\";\n}\n\nWPS.prototype = {\n\n    /**\n     * @lends module:WPS#\n     */\n\n    /**\n     * request\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : WPS,\n\n    /**\n     * Template de la requête.\n     */\n    template : {\n        get : {\n            value : \"service=__SERVICE__\" +\n                \"&version=__VERSION__\" +\n                \"&rawdataoutput=__RAWDATAOUTPUT__\" +\n                \"&identifier=__IDENTIFIER__\" +\n                \"&request=__REQUEST__\" +\n                \"&datainputs=<!-- __DATAINPUTS__ -->\",\n\n            input : \"__KEY__=__DATA__\"\n\n        },\n        post : {\n\n            value : \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\" +\n                \"<wps:__REQUEST__ version=\\\"__VERSION__\\\" service=\\\"__SERVICE__\\\" \" +\n                \"__NAMESPACE__ __SCHEMALOCATION__>\" +\n                \"<ows:Identifier>__IDENTIFIER__</ows:Identifier>\" +\n                \"<wps:DataInputs>\" +\n                \"<!-- __DATAINPUTS__ -->\" +\n                \"</wps:DataInputs>\" +\n                \"<wps:ResponseForm>\" +\n                \"<wps:RawDataOutput>\" +\n                \"<ows:Identifier>__RAWDATAOUTPUT__</ows:Identifier>\" +\n                \"</wps:RawDataOutput>\" +\n                \"</wps:ResponseForm>\" +\n                \"</wps:__REQUEST__>\",\n\n            input : \"<wps:Input>\" +\n                \"<ows:Identifier>__KEY__</ows:Identifier>\" +\n                \"<wps:Data>\" +\n                \"<wps:LiteralData>__DATA__</wps:LiteralData>\" +\n                \"</wps:Data>\" +\n                \"</wps:Input>\"\n        }\n    },\n\n    /**\n     * Namespace par defaut de la requete POST.\n     *\n     * @returns {String} namespace\n     */\n    namespaceByDefault : function () {\n        var ns = [\n            \"xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\"\",\n            \"xmlns=\\\"http://www.opengis.net/wps/1.0.0\\\"\",\n            \"xmlns:wfs=\\\"http://www.opengis.net/wfs\\\"\",\n            \"xmlns:wps=\\\"http://www.opengis.net/wps/1.0.0\\\"\",\n            \"xmlns:ows=\\\"http://www.opengis.net/ows/1.1\\\"\",\n            \"xmlns:gml=\\\"http://www.opengis.net/gml\\\"\",\n            \"xmlns:ogc=\\\"http://www.opengis.net/ogc\\\"\",\n            \"xmlns:wcs=\\\"http://www.opengis.net/wcs/1.1.1\\\"\",\n            \"xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\"\n        ];\n\n        return ns.join(\" \");\n    },\n\n    /**\n     * Schemalocation par defaut.\n     *\n     * @returns {String} schemaLocation\n     */\n    schemaLocationByDefault : function () {\n        return \"xsi:schemaLocation=\\\"http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd\\\"\";\n    },\n\n    /**\n     * Construction de la requête.\n     *\n     * @example\n     * // GET  out :\n     * //  service=__SERVICE__\n     * //  &version=__VERSION__\n     * //  &rawdataoutput=__RAWDATAOUTPUT__\n     * //  &identifier=__IDENTIFIER__\n     * //  &request=__REQUEST__\n     * //  &datainputs=\"__DATAINPUTS__\"\n     * //  avec __DATAINPUTS__ = __KEY__=__DATA__;...\n     *\n     * // POST out :\n     * //      <?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\n     * //      <wps:__REQUEST__ version=\\\"__VERSION__\\\" service=\\\"__SERVICE__\\\"\n     * //         __NAMESPACE__ __SCHEMALOCATION__>\n     * //          <ows:Identifier>__IDENTIFIER__</ows:Identifier>\n     * //          <wps:DataInputs>\n     * //              <!-- __DATAINPUTS__ -->\n     * //          </wps:DataInputs>\n     * //          <wps:ResponseForm>\n     * //              <wps:RawDataOutput>\n     * //              <ows:Identifier>__RAWDATAOUTPUT__</ows:Identifier>\n     * //              </wps:RawDataOutput>\n     * //          </wps:ResponseForm>\n     * //      </wps:__REQUEST__>\",\n     * //      avec __DATAINPUTS__\n     * //             <wps:Input>\n     * //                  <ows:Identifier>__KEY__</ows:Identifier>\n     * //                  <wps:Data>\n     * //                    <wps:LiteralData>__DATA__</wps:LiteralData>\n     * //                  </wps:Data>\n     * //              </wps:Input>\n     *\n     * @returns {Boolean} validation de la construction de la requete\n     */\n    processRequestString : function () {\n        this.logger.trace(\"WPS::processRequestString ()\");\n\n        var template = \"\";\n        if (this.method === \"POST\") {\n            template = this.template.post.value;\n        } else if (this.method === \"GET\") {\n            template = this.template.get.value;\n        } else {\n            this.logger.error(\"No other method supported by the service !\");\n            return false;\n        }\n\n        template = template.replace(/__SERVICE__/g, this.paramservice);\n        template = template.replace(/__VERSION__/g, this.paramversion);\n        template = template.replace(/__RAWDATAOUTPUT__/g, this.paramrawdataoutput);\n        template = template.replace(/__IDENTIFIER__/g, this.paramidentifier);\n        template = template.replace(/__REQUEST__/g, this.paramrequest);\n\n        // ajout +\n        if (this.method === \"POST\") {\n            template = template.replace(/__NAMESPACE__/g, this.namespaceByDefault);\n            template = template.replace(/__SCHEMALOCATION__/g, this.schemaLocationByDefault);\n        }\n\n        // ajout des datainputs\n        template = template.replace(/<!-- __DATAINPUTS__ -->/g, this.__addDataInputs());\n\n        if (!template) {\n            this.logger.warn(\"traduction tmpl : empty request !?\");\n            return false;\n        }\n\n        this.requestString = template;\n        this.logger.trace(\"traduction tmpl\", template);\n\n        return true;\n    },\n\n    /**\n     * Ajout des données\n     *\n     * @returns {String} Données concaténées dans une chaine\n     */\n    __addDataInputs : function () {\n        this.logger.trace(\"WPS::__addDataInputs ()\");\n\n        // c'est un peu grossier...\n        var tmpl = this.method === \"GET\" ? this.template.get.input : this.template.post.input;\n        var sep = this.method === \"GET\" ? \";\" : \"\";\n\n        var result = \"\";\n        var that = this;\n        var map = this.DataObject.getData();\n        for (var i = 0; i < map.length; i++) {\n            // FIXME closure ?\n            (function (j) {\n                if (sep) {\n                    sep = (j === map.length - 1) ? \"\" : \";\";\n                }\n                result = result.concat(that.__addDataInput(tmpl, map[j].k, map[j].v), sep);\n            })(i);\n        }\n\n        return result;\n    },\n\n    /**\n     * Ajout d'une donnée.\n     *\n     * @param {String} tmpl - template\n     * @param {String} key - clef\n     * @param {String} data - valeur\n     * @returns {String} chaine avec les substitutions clef/valeur\n     */\n    __addDataInput : function (tmpl, key, data) {\n        var tmp = tmpl;\n        tmp = tmp.replace(/__KEY__/g, key);\n        tmp = tmp.replace(/__DATA__/g, data);\n        return tmp;\n    },\n\n    /**\n     * Definir le mode de requête\n     *\n     * @param {String} method - GET|POST\n     */\n    setMethod : function (method) {\n        if (method === \"GET\" || method === \"POST\") {\n            this.method = method;\n        } else {\n            this.logger.warn(\"support only GET and POST method !\");\n        }\n    },\n\n    /**\n     * Retourne le mode de requete (GET|POST).\n     *\n     * @returns {AltiRequest.options.mode|String} methode (GET|POST)\n     */\n    getMethod : function () {\n        return this.method;\n    }\n};\n\nexport default WPS;\n","/**\n * Classe d'interface des requêtes de type WPS sur le service altimetrique.\n * (Factory)\n *\n * @module Gp.Services.Alti.Request.AltiRequestWPS\n * @alias Gp.Services.Alti.Request.AltiRequestWPS\n * @private\n */\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport _ from \"../../../Utils/MessagesResources\";\nimport WPS from \"../../../Formats/WPS\";\nimport AltiElevationRequest from \"./model/AltiElevationRequest\";\nimport AltiProfilRequest from \"./model/AltiProfilRequest\";\n\nvar AltiRequestWPS = {\n\n    /**\n     * Interface unique de construction de la requête.\n     *\n     * @method build\n     * @param {Object} options - options\n     * @param {Object}   options.param.positions - tableau de coordonnées lon/lat\n     * @param {String}   options.param.delimiter - '|'\n     * @param {Boolean}  options.param.indent - false|true\n     * @param {String}   options.param.crs - 'CRS:84'\n     * @param {String}   options.param.sampling - 3\n     * @param {Boolean}  options.param.zonly - false|true\n     * @param {String}   options.param.format - \"JSON|XML\" (only to POST)\n     * @param {String}   options.wps.service - \"WPS\"\n     * @param {String}   options.wps.version - \"1.0.0\"\n     * @param {String}   options.wps.identifier - \"gs:WPSElevation|gs:WPSLineElevation\"\n     * @param {String}   options.wps.rawdataoutput - \"result\"\n     * @param {String}   options.wps.request - \"Execute\"\n     * @param {String}   options.type - \"Profil|Elevation\"\n     * @param {String}   options.method - GET|POST\n     * @example\n     *      var options = {\n     *           type : 'Profil', // Elevation\n     *           method : 'GET',  // par defaut\n     *           param : {\n     *               positions : [\n     *                   {lon:'1.11', lat:'1.11'},\n     *                   {lon:'1.10', lat:'1.10'},\n     *                   {lon:'1.12', lat:'1.12'}\n     *               ],\n     *               delimiter : \";\",         // par defaut\n     *               indent    : true,        // par defaut\n     *               crs       : 'EPSG:4326', // par defaut\n     *               format    : 'json',      // par defaut (only to POST)\n     *               sampling  : 3 ,          // par defaut (only use by Profil)\n     *               zonly     : false,       // par defaut (only use by Elevation)\n     *           },\n     *           wps : {\n     *                 service : 'WPS',         // par defaut\n     *                 version : '1.0.0',       // par defaut\n     *                 identifier : 'gs:WPS',   // par defaut, Elevation = gs:WPSElevation, Profil = gs:WPSLineElevation\n     *                 rawdataoutput : 'result',// par defaut\n     *                 request : 'Execute'      // par defaut\n     *           }\n     *       };\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"AltiRequestWPS\");\n        logger.trace([\"AltiRequestWPS::build()\"]);\n\n        // existance des options\n        if (!options) {\n            throw new Error(_.getMessage(\"PARAM_EMPTY\", \"options\"));\n        }\n\n        // type de requete : Altitude ou Profil\n        // (param. à determiner en fonction des parametres d'entrée)\n        if (!options.type) {\n            throw new Error(_.getMessage(\"PARAM_EMPTY\", \"type (Elevation or Profil)\"));\n        }\n\n        // construction du modele de requête\n        // (test du type d'objet candidat)\n        var DataObject = null;\n        switch (options.type) {\n            case \"Elevation\":\n                // surcharge\n                options.wps.identifier = \"gs:WPSElevation\";\n                DataObject = new AltiElevationRequest(options.param);\n                break;\n            case \"Profil\":\n                // surcharge\n                options.wps.identifier = \"gs:WPSLineElevation\";\n                DataObject = new AltiProfilRequest(options.param);\n                break;\n            default:\n                throw new Error(_.getMessage(\"PARAM_TYPE\", \"type (Elevation or Profil)\"));\n        }\n\n        // construction de la requête WPS\n        var settings = {\n            data : DataObject,\n            method : options.method,\n            param : options.wps\n        };\n\n        var rqstWPS = new WPS(settings);\n\n        if (!rqstWPS.processRequestString()) {\n            throw new Error(\"Enable to process request !\");\n        }\n\n        return rqstWPS.requestString;\n    }\n};\n\nexport default AltiRequestWPS;\n","/**\n * Creation d'une requête en REST ou WPS\n * (Factory)\n *\n * @module AltiRequestFactory\n * @alias Gp.Services.Alti.Request.AltiRequestFactory\n * @private\n */\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport AltiRequestREST from \"./AltiRequestREST\";\nimport AltiRequestWPS from \"./AltiRequestWPS\";\n\nvar AltiRequestFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Alti\n     *\n     * @example\n     *   var options = {\n     *      httpMethod : 'GET', // GET|POST\n     *      onSuccess : function (response) {},\n     *      onError : function (error) {},\n     *      scope : this,\n     *      positions : [{lon:, lat:}, {lon:, lat:}],\n     *      outputFormat : 'json' // json|xml\n     *      sampling : 3,\n     *      api : 'REST', // REST|WPS\n     *      zonly : false // false|true\n     *   };\n     *\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"AltiRequestFactory\");\n        logger.trace([\"AltiRequestFactory::build()\"]);\n\n        var request = null;\n\n        // on factorise les options par groupe;\n        // - global,\n        // - param, les params pour les data inputs\n        // - wps, les param du service\n        // - callback\n\n        var settings = {\n            // ajout des valeurs par defaut spécifiques au service\n            type : options.sampling ? \"Profil\" : \"Elevation\",\n            method : options.httpMethod,\n            param : {\n                positions : null,\n                delimiter : null, // FIXME par defaut, on ne le met pas en place car ça fait planter la requête !?\n                indent : null, // par defaut\n                crs : null, // par defaut\n                format : null, // (only to POST)\n                sampling : null, // (only use by Profil)\n                zonly : null // (only use by Elevation)\n            }\n        };\n\n        // surcharge des valeurs obligatoires\n        settings.param.positions = options.positions;\n        settings.param.format = options.outputFormat;\n        settings.param.sampling = options.sampling;\n        settings.param.zonly = options.zonly;\n\n        // gestion des callback\n        var bOnError = !!(options.onError !== null && typeof options.onError === \"function\"); // cast variable to boolean\n        var bOnSuccess = !!(options.onSuccess !== null && typeof options.onSuccess === \"function\");\n\n        var message = null;\n        switch (options.api) {\n            case \"REST\":\n                // FIXME les exceptions ne sont pas 'catchées' sur le constructeur !\n                var myReq = new AltiRequestREST(settings);\n                if (!myReq.processRequestString()) {\n                    message = \"Error in process request (rest) !\";\n                    if (bOnError) {\n                        options.onError.call(options.scope, new ErrorService(message));\n                        return;\n                    }\n                    throw new Error(message);\n                }\n                request = myReq.requestString;\n                break;\n            case \"WPS\":\n                // ajout des valeurs par defaut spécifiques au service WPS\n                settings.wps = {\n                    service : null, // par defaut\n                    version : null, // par defaut\n                    identifier : null, // par defaut\n                    rawdataoutput : null, // par defaut\n                    request : null // par defaut\n                };\n\n                request = AltiRequestWPS.build(settings);\n                if (!request) {\n                    message = \"Error in process request (wps) !\";\n                    if (bOnError) {\n                        options.onError.call(options.scope, new ErrorService(message));\n                        return;\n                    }\n                    throw new Error(message);\n                }\n                break;\n            default:\n                message = \"Type of API is not supported by service (REST or WPS) !\";\n                if (bOnError) {\n                    options.onError.call(options.scope, new ErrorService(message));\n                    return;\n                }\n                throw new Error(message);\n        }\n\n        if (bOnSuccess) {\n            options.onSuccess.call(options.scope, request);\n        }\n\n        return request;\n    }\n};\n\nexport default AltiRequestFactory;\n","/* global require */\n\nimport Logger from \"../Utils/LoggerByDefault\";\n// import __xmldom from \"xmldom\";\n\n/**\n * @classdesc\n *\n * Classe permettant d'écrire ou de lire du XML, sous forme de document DOM,\n * éventuellement selon des clés de lecture (readers) ou d'écriture (writers) spécifiques.\n *\n * @constructor\n * @alias Gp.Formats.XML\n *\n * @param {Object} [options] - options du format XML\n *\n * @param {Object} [options.reader] - Instance d'un Reader de service (AltiResponseReader, GeocodeRequestReader, etc.)\n *      utile pour interpréter le XML lorsque sa structure est connue.\n *      Ce reader doit comporter au moins une fonction statique read (root) permettant d'initialiser la lecture.\n *\n * @param {Object} [options.writers] - writers\n *\n * @param {String} [options.xmlString] - chaîne de caractère contenant du XML à interpréter.\n *\n * @private\n */\nfunction XML (options) {\n    if (!(this instanceof XML)) {\n        throw new TypeError(\"XML constructor cannot be called as a function.\");\n    }\n\n    // FIXME : notion de singleton\n\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur XML ()]\");\n\n    /**\n     * Chaîne de caractères contenant le texte XML\n     * @type {String}\n     */\n    this.xmlString = null;\n\n    /**\n     * DOM Element correspondant à la structure du XML.\n     * @type {DOMElement}\n     */\n    this.xmlDoc = null;\n\n    /**\n     * Objet contenant des fonctions de lecture des différentes balises XML.\n     * @type {Object}\n     */\n    this.reader = null;\n\n    // traitement des paramètres d'options s'il y en a\n    if (options) {\n        if (options.xmlString && typeof options.xmlString === \"string\") {\n            this.xmlString = options.xmlString;\n            // Si une chaine de caractère a été passée en entrée : on la transforme aussi en XML document\n            this.xmlDoc = __getXMLDOC(options.xmlString);\n        }\n        if (options.reader) {\n            this.setReader(options.reader);\n        }\n    }\n}\n\nXML.prototype = {\n\n    /**\n     * @lends module:XML\n     */\n\n    /*\n     * Constructeur (alias)\n     */\n    constructor : XML,\n\n    /**\n     * Méthode permettant de récupérer la chaîne de caractères associée au format XML\n     *\n     * @returns {String} xmlString - la chaîne de caractères correspondant au format XML\n     */\n    getXMLString : function () {\n        return this.xmlString;\n    },\n\n    /**\n     * Méthode permettant d'attribuer une chaîne de caractères au format XML (attribut xmlString).\n     * La méthode va aussi transformer cette chaîne de caractères en document XML,\n     * afin de remplir l'attribut xmlDoc.\n     *\n     * @param {String} xmlString - la chaîne de caractères correspondant au format XML\n     */\n    setXMLString : function (xmlString) {\n        if (xmlString && typeof xmlString === \"string\") {\n            this.xmlString = xmlString;\n            this.xmlDoc = __getXMLDOC(xmlString);\n        }\n    },\n\n    /**\n     * Méthode permettant de récupérer les readers associés au format XML, s'ils ont été définis\n     *\n     * @return {Object} readers - les readers associés au format XML, s'ils existent,\n     *      sous forme d'une collection de fonctions\n     */\n    getReader : function () {\n        return this.reader;\n    },\n\n    /**\n     * Méthode permettant d'attribuer des readers, sous la forme d'un objet de fonctions (node, data),\n     *      lorsqu'ils n'ont pas été définis lors de l'instanciation par exemple (new XML (options)).\n     *\n     * @param {Object} reader - Instance d'un Reader de service (AltiResponseReader, GeocodeRequestReader, etc.)\n     *      utile pour interpréter le XML lorsque sa structure est connue.\n     *      Ce reader doit comporter au moins une fonction statique read (root) permettant d'initialiser la lecture.\n     */\n    setReader : function (reader) {\n        if (reader && reader.read && typeof reader.read === \"function\") {\n            this.reader = reader;\n        }\n    },\n\n    /**\n     * Méthode permettant de récupérer le document XML associé au format, s'il existe.\n     *\n     * @return {DOMElement} xmlDoc - le document XML (DOM document node) s'il existe\n     */\n    getXMLDoc : function () {\n        return this.xmlDoc;\n    },\n\n    /**\n     * Setter\n     */\n    setXMLDoc : function (doc) {\n        this.xmlDoc = doc;\n    },\n    /**\n     * Méthode initialisant la lecture du XML, à partir d'un XML Document :\n     *      création d'un objet JavaScript contenant les informations du XML,\n     *      sauf dans le cas où il n'existe pas de XML Document à interpréter (retourne un objet vide).\n     *\n     * @return {Object} [parserOutput] - un objet JavaScript contenant les informations du XML :\n     * - soit toutes les informations si aucun reader n'a été spécifié à la création du format\n     * - soit les informations spécifiées dans le reader.\n     */\n    parse : function () {\n        // build xml document from xmlString\n        if (!this.xmlDoc && this.xmlString) {\n            this.xmlDoc = __getXMLDOC(this.xmlString);\n        }\n        if (this.xmlDoc) {\n            var root = __getRootNode(this.xmlDoc);\n            if (root) {\n                var parserOutput;\n                // call reader if exists\n                if (this.reader && this.reader.read) {\n                    parserOutput = this.reader.read(root);\n                } else {\n                    parserOutput = {};\n                    parserOutput[root.nodeName] = __readDefault(root);\n                }\n                return parserOutput;\n            } else {\n                return {};\n            }\n        }\n    }\n\n};\n\n/**\n * Méthode de la classe (privée) permettant de créer un XML Document à partir d'une chaîne de caractères XML,\n *      en utilisant DOMParser () lorsque c'est possible.\n *      For more information, see: https://dvcs.w3.org/hg/innerhtml/raw-file/tip/index.html#the-domparser-interface\n *\n * @private\n * @memberof XML\n * @method __getXMLDOC\n * @param {String} xmlString - xml string to be converted into DOM element\n * @return {DOMElement} - the corresponding XML Document\n */\nfunction __getXMLDOC (xmlString) {\n    if (typeof window === \"undefined\") {\n        // env. nodejs\n        var DOMParser = require(\"xmldom\").DOMParser; // __xmldom.DOMParser;\n        return new DOMParser().parseFromString(xmlString, \"text/xml\");\n    } else {\n        // env. browser\n\n        var parser;\n        var xmlDoc;\n        var errorMsg = \"Erreur lors du parsing de la réponse du service : XML non conforme\";\n\n        if (window.ActiveXObject) {\n            // Internet Explorer < 9\n            xmlDoc = new window.ActiveXObject(\"Microsoft.XMLDOM\");\n            xmlDoc.async = false;\n            xmlDoc.loadXML(xmlString);\n            var parseError = xmlDoc.parseError;\n            if (parseError.errorCode) {\n                if (parseError.line && parseError.linepos) {\n                    errorMsg += \"( ligne \" + parseError.line + \", colonne \" + parseError.linepos;\n                }\n                if (parseError.reason) {\n                    errorMsg += \":  \" + parseError.reason + \")\";\n                }\n                throw new Error(errorMsg);\n            }\n            return xmlDoc;\n        } else if (window.DOMParser) {\n            // les autres (Chrome, Mozilla, IE >= 9)\n            parser = new window.DOMParser();\n            try {\n                xmlDoc = parser.parseFromString(xmlString, \"text/xml\");\n            } catch (e) {\n                // Internet Explorer browser raises exception if xmlString is not valid XML\n                if (e.message === \"SyntaxError\") {\n                    throw new Error(errorMsg);\n                } else {\n                    throw new Error(\"Erreur lors du parsing de la réponse du service : \" + e.message);\n                }\n            }\n            // look for parsing error in case no exception was raised\n            if (xmlDoc.getElementsByTagName(\"parsererror\").length > 0) {\n                var parsererror = xmlDoc.getElementsByTagName(\"parsererror\");\n                for (var i = 0; i < parsererror.length; i++) {\n                    var content = parsererror[i].innerHTML;\n                    // except in case parsererror is just because of huge xml, but parsing is done.\n                    if (content.indexOf(\"Huge input lookup\") === -1) {\n                        errorMsg += \"(\" + content + \")\";\n                        throw new Error(errorMsg);\n                    }\n                }\n            } else if (!xmlDoc.documentElement) { // may happen in chrome browser\n                throw new Error(errorMsg);\n            }\n            return xmlDoc;\n        } else {\n            // FIXME\n            throw new Error(\"Incompatible DOM Parser pour ce navigateur !\");\n        }\n    }\n}\n\n/**\n * Méthode de la classe (privée) permettant de récupérer le noeud racine du document,\n *      à partir d'un document node (nodeType=9), puis lecture de ce noeud (readNode)\n *\n * @private\n * @memberof XML\n * @method __getRootNode\n * @param {DOMElement} [xmlDoc] - a Document Node\n * @return {DOMElement} root - the document root node\n */\nfunction __getRootNode (xmlDoc) {\n    var root;\n    if (xmlDoc.nodeType === 9) {\n        // INFO : nodeType 9 represents the entire document (the root-node of the DOM tree)\n        root = xmlDoc.documentElement;\n    } else if (xmlDoc.nodeType === 1) {\n        root = xmlDoc;\n    }\n    return root;\n}\n\n/**\n * Méthode de la classe (privée) permettant de lire automatiquement un noeud XML,\n *      lorsqu'aucun reader spécifique n'a été spécifié (parser brut)\n *\n * @private\n * @memberof XML\n * @method readDefault\n * @param {DOMElement} node - a DOM element node\n * @example final data object looks like :\n *          data = {\n *              attributeName: attributeValue,\n *              childName: {\n *                  attributeName: attributeValue,\n *                  attributeName: attributeValue,\n *                  childName: {\n *                      \"textContent\": textContent\n *                  },\n *                  childName: {\n *                      childName: {\n *                          attributeName:attributeValue\n *                      }\n *                  }\n *              }\n *          }\n */\nfunction __readDefault (node) {\n    var data = {};\n\n    // if element node has attributes, set their values to data\n    if (node.attributes.length > 0) {\n        var dataAttributes = __getAttributes(node);\n        data[\"attributes\"] = dataAttributes;\n    }\n\n    // if element node has childNodes, read them and set them to data\n    if (node.hasChildNodes()) {\n        var childData = {};\n        var child;\n        var children = node.childNodes;\n\n        for (var i = 0; i < children.length; i++) {\n            child = children[i];\n\n            if (child.nodeType === 3) { // TEXT_NODE\n                data[\"textContent\"] = child.nodeValue;\n            } else if (child.nodeType === 1) {\n                childData = __readDefault(child);\n\n                if (!data[child.nodeName]) {\n                    // store childData in an object\n                    data[child.nodeName] = childData;\n                } else {\n                    // in case several childNodes has the same name : store them in an array.\n                    // if data[nodeName] already exists but is not an array\n                    if (!Array.isArray(data[child.nodeName])) {\n                        var old = data[child.nodeName];\n                        data[child.nodeName] = [];\n                        data[child.nodeName].push(old);\n                    }\n                    data[child.nodeName].push(childData);\n                }\n            }\n            // TODO : manage other node types (4=CDATA, etc)\n        }\n    }\n\n    return data;\n}\n\n/**\n * Méthode de la classe (privée) permettant de récupérer les attributs d'un noeud élément\n *\n * @private\n * @memberof XML\n * @method __getAttributes\n * @param {DOMElement} node - noeud contenant l'attribut recherché\n * @return {Object} nodeAttributes - objet contenant les noms et valeurs des différents attributs\n */\nfunction __getAttributes (node) {\n    if (node.attributes.length > 0) {\n        var nodeAttributes = {};\n        var attributes = node.attributes;\n        for (var i = 0; i < attributes.length; i++) {\n            var attribute = attributes[i];\n            nodeAttributes[attribute.nodeName] = attribute.nodeValue;\n        }\n        return nodeAttributes;\n    }\n}\n\nexport default XML;\n","/**\n * Response object for {@link module:Services~getAltitude Gp.Services.getAltitude ()} invocation when successful. Received as the argument of onSuccess callback function.\n *\n * @property {Array.<Gp.Services.Alti.Elevation>} elevations - Elevations array.\n *\n * @namespace\n * @alias Gp.Services.AltiResponse\n */\nfunction AltiResponse () {\n    if (!(this instanceof AltiResponse)) {\n        throw new TypeError(\"AltiResponse constructor cannot be called as a function.\");\n    }\n\n    this.elevations = [];\n}\n\nAltiResponse.prototype = {\n\n    constructor : AltiResponse\n\n};\n\nexport default AltiResponse;\n","\n/**\n * Single elevation object returned by underlying web service. Contains at least, one elevation (z). May also contain point coordinates and elevation accuracy if \"zonly\" parameter wasn't set to true.\n *\n * @property {Float} lat - Point latitude. (only if zonly=false)\n * @property {Float} lon - Point longitude. (only if zonly=false)\n * @property {Float} z - Point elevation.\n * @property {Float} acc - Accuracy of elevation for this point. (only if zonly=false)\n *\n * @namespace\n * @alias Gp.Services.Alti.Elevation\n */\nfunction Elevation () {\n    if (!(this instanceof Elevation)) {\n        throw new TypeError(\"Elevation constructor cannot be called as a function.\");\n    }\n\n    this.z = null;\n}\n\nElevation.prototype = {\n\n    constructor : Elevation\n\n};\n\nexport default Elevation;\n","\n/**\n * Fonction retournant un objet contenant des clés de lecture (readers)\n *      qui permettent de parser des réponses XML du service Altimétrique du Géoportail\n *      (calcul altimétrique simple ou profil altimétrique d'une courbe),\n *      lorsque le paramètre output = xml,\n *      afin de récupérer les élévations retournées.\n *\n * @module AltiResponseReader\n * @alias Gp.Services.Alti.Formats.AltiResponseReader\n * @private\n */\n\n// import Logger from \"../../../Utils/LoggerByDefault\";\nimport AltiResponse from \"../Response/model/AltiResponse\";\nimport Elevation from \"../Response/model/Elevation\";\n\n/**\n *\n * Objet AltiResponseReader\n *\n * @member {Object} AltiResponseReader\n *\n * @property {Object} AltiResponseReader.READERS - Objet contenant des fonctions de lecture, appelées \"readers\"\n *      dont chaque clé correspond au nom d'un tag du XML que l'on souhaite lire\n *      et la valeur associée est une fonction (node, data)\n *      où node est un noeud du document DOM\n *      et data est un objet où l'on stocke les informations lues dans le XML.\n *\n * @property {Method} AltiResponseReader.READERS.elevations -  Lecture d'un noeud \"elevations\" de la réponse XML\n *      du service alti, correspondant logiquement à la racine du document\n *      (contient un ou plusieurs childNodes correspondant chacun à une élévation retournée)\n *\n * @property {Method} AltiResponseReader.READERS.elevation - ecture d'un noeud \"elevation\" de la réponse xml du service alti.\n *      (contient un ou 4 childNode (s) correspondant à l'altitude (z) et éventuellement lat, lon, et acc)\n *\n * @property {Method} AltiResponseReader.READERS.lat - Lecture d'un noeud \"lat\" de la réponse xml du service alti.\n *      (contient une valeur de latitude, qui est un flottant)\n *\n * @property {Method} AltiResponseReader.READERS.lon - Lecture d'un noeud \"lon\" de la réponse xml du service alti.\n *      (contient une valeur de longitude, qui est un flottant)\n *\n * @property {Method} AltiResponseReader.READERS.z - Lecture d'un noeud \"z\" de la réponse xml du service alti.\n *      (contient une valeur d'altitude, qui est un flottant)\n *\n * @property {Method} AltiResponseReader.READERS.acc - Lecture d'un noeud \"acc\" de la réponse xml du service alti.\n *      (contient une valeur de précision, qui est un flottant)\n *\n * @property {Method} AltiResponseReader.READERS.exceptionreport - Lecture d'un noeud \"ExceptionReport\" de la réponse xml du service alti.\n *\n * @property {Method} AltiResponseReader.READERS.exception - Lecture d'un noeud \"Exception\" de la réponse xml du service alti.\n *\n * @property {Method} AltiResponseReader.read - Méthode permettant de lancer la lecture d'une réponse XML du service altimétrique,\n *      à l'aide des readers de la classe.\n *\n */\nvar AltiResponseReader = {};\n\nAltiResponseReader.READERS = {\n\n    /**\n     * Lecture d'un noeud \"elevations\" de la réponse XML du service alti, correspondant logiquement à la racine du document\n     *      (contient un ou plusieurs childNodes correspondant chacun à une élévation retournée)\n     *\n     * @param {DOMElement} root - racine de la réponse XML\n     * @static\n     * @memberof AltiResponseReader\n     * @returns {Object} Retourne un objet de type AltiResponse\n     */\n    elevations : function (root) {\n        // INFO : on passe en paramètre l'objet en entrée elevations, vide, à remplir.\n        var altiResponse = new AltiResponse();\n\n        if (root.hasChildNodes()) {\n            var children = root.childNodes;\n            var child;\n            var elevation;\n\n            for (var i = 0; i < children.length; i++) {\n                child = children[i];\n\n                if (AltiResponseReader.READERS[child.nodeName]) {\n                    elevation = AltiResponseReader.READERS[child.nodeName](child);\n                    altiResponse.elevations.push(elevation);\n                }\n            }\n        }\n\n        return altiResponse;\n    },\n\n    /**\n     * Lecture d'un noeud \"elevation\" de la réponse xml du service alti.\n     *      (contient un ou 4 childNode (s) correspondant à l'altitude (z) et éventuellement lat, lon, et acc)\n     *\n     * @param {DOMElement} node - noeud elevation à lire pour récupérer les informations de l'élévation retournée (z [, lon, lat, acc])\n     * @return {Array} elevationResponse - format de la réponse en sortie, instance de AltiResponse\n     * @static\n     * @memberof AltiResponseReader\n     */\n    elevation : function (node) {\n        var elevation = new Elevation();\n\n        if (node.hasChildNodes()) {\n            var children = node.childNodes;\n            var child;\n            for (var i = 0; i < children.length; i++) {\n                child = children[i];\n                if (AltiResponseReader.READERS[child.nodeName]) {\n                    // INFO : on passe en paramètre l'objet en entrée elevation, vide, à remplir.\n                    AltiResponseReader.READERS[child.nodeName](child, elevation);\n                }\n            }\n        }\n        return elevation;\n    },\n\n    /**\n     * Lecture d'un noeud \"lat\" de la réponse xml du service alti.\n     *      (contient une valeur de latitude, qui est un flottant)\n     *\n     * @param {DOMElement} node - noeud à lire pour récupérer la latitude\n     * @param {Object} elevation - objet dans lequel stocker la latitude retournée\n     * @static\n     * @memberof AltiResponseReader\n     */\n    lat : function (node, elevation) {\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            elevation.lat = parseFloat(textNode.nodeValue);\n        } else {\n            throw new Error(\"Erreur dans la lecture de la réponse du service : latitude attendue mais absente\");\n        }\n    },\n\n    /**\n     * Lecture d'un noeud \"lon\" de la réponse xml du service alti.\n     *      (contient une valeur de longitude, qui est un flottant)\n     *\n     * @param {DOMElement} node - noeud à lire pour récupérer la longitude\n     * @param {Object} elevation - objet dans lequel stocker la longitude retournée\n     * @static\n     * @memberof AltiResponseReader\n     */\n    lon : function (node, elevation) {\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            elevation.lon = parseFloat(textNode.nodeValue);\n        } else {\n            throw new Error(\"Erreur dans la lecture de la réponse du service : longitude attendue mais absente\");\n        }\n    },\n\n    /**\n     * Lecture d'un noeud \"z\" de la réponse xml du service alti.\n     *      (contient une valeur d'altitude, qui est un flottant)\n     *\n     * @param {DOMElement} node - noeud à lire pour récupérer l'altitude\n     * @param {Object} elevation - objet dans lequel stocker l'altitude retournée\n     * @static\n     * @memberof AltiResponseReader\n     */\n    z : function (node, elevation) {\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            if (elevation) {\n                elevation.z = parseFloat(textNode.nodeValue);\n            } else {\n                elevation = new Elevation();\n                elevation.z = parseFloat(textNode.nodeValue);\n                return elevation;\n            }\n        } else {\n            throw new Error(\"Erreur dans la lecture de la réponse du service : altitude attendue mais absente\");\n        }\n    },\n\n    /**\n     * Lecture d'un noeud \"acc\" de la réponse xml du service alti.\n     *      (contient une valeur de précision, qui est un flottant)\n     *\n     * @param {DOMElement} node - noeud à lire pour récupérer la précision\n     * @param {Object} elevation - objet dans lequel stocker la précision retournée\n     * @static\n     * @memberof AltiResponseReader\n     */\n    acc : function (node, elevation) {\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            elevation.acc = parseFloat(textNode.nodeValue);\n        } else {\n            throw new Error(\"Erreur dans la lecture de la réponse du service : précision (acc) attendue mais absente\");\n        }\n    },\n\n    /**\n     * Lecture d'un noeud \"ExceptionReport\" de la réponse xml du service alti.\n     *\n     * @param {DOMElement} node - noeud à lire pour récupérer l'exception\n     * @return {Object} exceptionReport - objet contenant l'exception\n     * @static\n     * @memberof AltiResponseReader\n     */\n    exceptionreport : function (node) {\n        var response = {};\n\n        if (node.hasChildNodes()) {\n            var children = node.childNodes;\n            var child;\n            for (var i = 0; i < children.length; i++) {\n                child = children[i];\n                if (child.nodeName === \"Exception\") {\n                    response.exceptionReport = AltiResponseReader.READERS.exception(child);\n                }\n            }\n        }\n\n        return response;\n    },\n\n    /**\n     * Lecture d'un noeud \"Exception\" de la réponse xml du service alti.\n     *\n     * @param {DOMElement} node - noeud à lire pour récupérer l'exception\n     * @return {Object} exceptionReport - objet contenant l'exception, avec deux attributs :\n     *      {String} exceptionReport.exceptionCode - qui contient l'identifiant du code de l'exception\n     *      {String} exceptionReport.exception - qui contient le message de l'exception\n     * @static\n     * @memberof AltiResponseReader\n     */\n    exception : function (node) {\n        var exceptionReport = {};\n\n        // get exception code\n        var exceptionCode = node.getAttribute(\"exceptionCode\");\n        if (exceptionCode) {\n            exceptionReport.exceptionCode = exceptionCode;\n        }\n\n        // get exception message\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            exceptionReport.exception = textNode.nodeValue;\n        }\n\n        return exceptionReport;\n    },\n\n    /**\n     * Lecture d'un noeud \"Error\" de la réponse xml du service alti.\n     *\n     * @param {DOMElement} node - noeud à lire pour récupérer l'exception\n     * @return {Object} error - objet contenant l'exception\n     * @static\n     */\n    error : function (node) {\n        var response = {\n            error : {}\n        };\n        // get error code and description\n        if (node.hasChildNodes()) {\n            var children = node.childNodes;\n            var child;\n            for (var i = 0; i < children.length; i++) {\n                child = children[i];\n                var textNode;\n                // get error code\n                if (child.nodeType === 1 && child.nodeName === \"code\") { // 1 === node.ELEMENT_NODE\n                    textNode = child.firstChild;\n                    if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n                        response.error.code = textNode.nodeValue;\n                    }\n                }\n                // get error description\n                if (child.nodeType === 1 && child.nodeName === \"description\") { // 1 === node.ELEMENT_NODE\n                    textNode = child.firstChild;\n                    if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n                        response.error.description = textNode.nodeValue;\n                    }\n                }\n            }\n        }\n        return response;\n    }\n\n};\n\n/**\n * Méthode permettant de lancer la lecture d'une réponse XML du service altimétrique,\n *      à l'aide des readers de la classe.\n *\n * @method AltiResponseReader.read\n * @param {DOMElement} root - racine de la réponse XML à lire\n * @static\n * @memberof AltiResponseReader\n */\nAltiResponseReader.read = function (root) {\n    if (root.nodeName === \"elevations\") {\n        var altiResponse = AltiResponseReader.READERS.elevations(root);\n        return altiResponse;\n    } else if (root.nodeName === \"ExceptionReport\") {\n        var exceptionReport = AltiResponseReader.READERS.exceptionreport(root);\n        return exceptionReport;\n    } else if (root.nodeName === \"error\") {\n        var error = AltiResponseReader.READERS.error(root);\n        return error;\n    } else {\n        throw new Error(\"Erreur lors de la lecture de la réponse : elle n'est pas au format attendu.\");\n    }\n};\n\nexport default AltiResponseReader;\n","/**\n * Factory pour générer une reponse JSON à partir d'un XML ou d'un JSON\n * (Factory)\n *\n * @module AltiResponseFactory\n * @private\n * @alias Gp.Services.Alti.Response.AltiResponseFactory\n */\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport MRes from \"../../../Utils/MessagesResources\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport XML from \"../../../Formats/XML\";\nimport AltiResponseReader from \"../Formats/AltiResponseReader\";\nimport AltiResponse from \"./model/AltiResponse\";\nimport Elevation from \"./model/Elevation\";\n\nvar AltiResponseFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Alti\n     *\n     * @example\n     *   var options = {\n     *      response :\n     *      outputFormat :\n     *      rawResponse :\n     *      scope :\n     *      onSuccess :\n     *      onError :\n     *   };\n     *\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"AltiResponseFactory\");\n        logger.trace([\"AltiResponseFactory::build()\"]);\n\n        var data = null;\n\n        if (options.response) {\n            if (options.rawResponse) {\n                logger.trace(\"analyze response : raw\");\n                data = options.response;\n            } else {\n                switch (options.outputFormat) {\n                    case \"xml\":\n                        logger.trace(\"analyze response : xml\");\n\n                        try {\n                            var p = new XML({\n                                reader : AltiResponseReader\n                            });\n\n                            if (typeof options.response === \"string\") {\n                                p.setXMLString(options.response);\n                            } else {\n                                p.setXMLDoc(options.response);\n                            }\n\n                            data = p.parse();\n\n                            if (!data) {\n                                throw new Error(MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION_2\"));\n                            }\n                        } catch (e) {\n                            var message = e.message;\n                            options.onError.call(options.scope, new ErrorService({\n                                message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", message),\n                                status : 200,\n                                type : ErrorService.TYPE_SRVERR\n                            }));\n                            return;\n                        }\n\n                        break;\n\n                    case \"json\":\n                        logger.trace(\"analyze response : json\");\n                        logger.trace(\"analyze response : \", typeof options.response);\n\n                        var JSONResponse = null;\n                        if (typeof options.response === \"string\") {\n                            JSONResponse = JSON.parse(options.response);\n                        } else {\n                            JSONResponse = options.response;\n                        }\n\n                        // le service renvoie t il une erreur ?\n                        if (JSONResponse && JSONResponse.error) {\n                            // ex. {\"error\": {\"code\": \"BAD_PARAMETER\",\"description\": \"The values () cannot be parsed as a valid longitude (double value such as -180 < lat < 180).\"}}\n                            options.onError.call(options.scope, new ErrorService({\n                                message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", JSONResponse.error.description),\n                                status : 200,\n                                type : ErrorService.TYPE_SRVERR\n                            }));\n                            return;\n                        }\n\n                        // analyse de la reponse\n                        if (JSONResponse) {\n                            var elevations = JSONResponse.elevations;\n                            var altiResponse = new AltiResponse();\n                            var elevation;\n                            if (Array.isArray(elevations) && elevations.length) {\n                                for (var i = 0; i < elevations.length; i++) {\n                                    elevation = new Elevation();\n\n                                    if (typeof elevations[i] === \"object\") {\n                                        // elevations[i] est un objet elevation\n                                        if (elevations[i].lon) {\n                                            elevation.lon = elevations[i].lon;\n                                        }\n                                        if (elevations[i].lat) {\n                                            elevation.lat = elevations[i].lat;\n                                        }\n                                        if (elevations[i].z) {\n                                            elevation.z = elevations[i].z;\n                                        }\n                                        if (elevations[i].acc) {\n                                            elevation.acc = elevations[i].acc;\n                                        }\n                                    } else if (typeof elevations[i] === \"number\") {\n                                        // elevations[i] est un nombre, dans le cas de zonly=true notamment\n                                        elevation.z = elevations[i];\n                                    }\n\n                                    if (Array.isArray(altiResponse.elevations)) {\n                                        altiResponse.elevations.push(elevation);\n                                    }\n                                }\n                            }\n                            data = altiResponse;\n                        }\n\n                        if (!data) {\n                            options.onError.call(options.scope, new ErrorService({\n                                message : MRes.getMessage(\"SERVICE_RESPONSE_ANALYSE_2\"),\n                                type : ErrorService.TYPE_UNKERR,\n                                status : -1\n                            }));\n                            return;\n                        }\n                        break;\n\n                    default:\n                        options.onError.call(options.scope, new ErrorService({\n                            message : MRes.getMessage(\"SERVICE_RESPONSE_FORMAT_2\"),\n                            type : ErrorService.TYPE_UNKERR,\n                            status : -1\n                        }));\n                        return;\n                }\n\n                // Si la réponse contenait une exception renvoyée par le service\n                if (data.exceptionReport) {\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", data.exceptionReport),\n                        type : ErrorService.TYPE_SRVERR,\n                        status : 200\n                    }));\n                    return;\n                } else if (data.error) {\n                    var errorMess = data.error.description;\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", errorMess),\n                        type : ErrorService.TYPE_SRVERR,\n                        status : 200\n                    }));\n                    return;\n                }\n            }\n        } else {\n            options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n            return;\n        }\n\n        options.onSuccess.call(options.scope, data);\n    }\n};\n\nexport default AltiResponseFactory;\n","\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport _ from \"../../Utils/MessagesResources\";\nimport ErrorService from \"../../Exceptions/ErrorService\";\nimport CommonService from \"../CommonService\";\nimport DefaultUrlService from \"../DefaultUrlService\";\nimport AltiRequestFactory from \"./Request/AltiRequestFactory\";\nimport AltiResponseFactory from \"./Response/AltiResponseFactory\";\n\n/**\n * @classdesc\n *\n * Appel du service d'altimétrie du Géoportail\n *\n * @todo gestion du parma. output et callback\n * @todo outputFormat (REST) et format (WPS)\n * @todo La reponse JSON peut encapsuler un XML !\n *\n * @constructor\n * @extends {Gp.Services.CommonService}\n * @alias Gp.Services.Alti\n * @param {Object} options - options spécifiques au service (+ les options heritées)\n *\n * @param {Array.<Object>} options.positions - Tableau ({lon:float,lat:float}) contenant les coordonnées des points (CRS:84)\n *      dont on veut connaître les altitudes (ou à partir desquelles on va calculer le profil).\n *      Chaque élément du tableau est un objet JavaScript avec deux attributs : lon et lat, qui sont des flottants.\n *      Minimum 2 éléments si on souhaite calculer un profil altimétrique (ElevationLine).\n *      Maximum 50 éléments.\n *\n * @param {String} options.outputFormat - Le format de la réponse du service alti : 'xml' ou 'json'.\n *      Ce paramètre déterminera l'extension '.xml' ou '.json' du service dans le cas de l'API REST,\n *      ou la valeur du paramètre 'format' dans le cas de la norme WPS.\n *      Nécessaire si serverUrl est renseigné, et qu'on souhaite passer par l'API REST,\n *      pour connaître le format dans lequel sera fournie la réponse (pour son traitement).\n *      Non nécessaire pour la norme WPS. Par défaut, ce paramètre vaut 'json'.\n *\n * @param {Number} [options.sampling] - Nombre de points à utiliser pour déterminer le tracé d'un profil altimétrique, compris entre 2 et 5000.\n *      A spécifier lorsqu'on souhaite accéder à cette fonctionnalité.\n *      Dans ce cas, les points fournis en entrée (au minimum de deux) servent à déterminer l'axe planimétrique\n *      le long duquel le profil doit être calculé.\n *      Si le paramètre sampling n'est pas spécifié ou moins de deux points sont fournis,\n *      c'est le service Elevation qui sera interrogé (altitudes simples calculées pour les points fournis).\n *      Une valeur de sampling strictement inférieure à 2 déclenchera un échantillonnage avec la valeur par défaut du service (3 points).\n *\n * @param {String} [options.api] - Manière d'accéder au service : 'REST' (via l'API REST) ou 'WPS' (via la norme WPS).\n *      Par défaut, on utilise l'API REST.\n *\n * @param {Boolean} [options.zonly] - Permet de ne récupérer que les altitudes en sortie s'il vaut 'true'.\n *      Vaut 'false' par défaut.\n *\n * @example\n *   var options = {\n *      apiKey : null,\n *      serverUrl : 'http://localhost/service/',\n *      protocol : 'JSONP', // JSONP|XHR\n *      proxyURL : null,\n *      httpMethod : 'GET', // GET|POST\n *      timeOut : 10000, // ms\n *      rawResponse : false, // true|false\n *      scope : null, // this\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *      // spécifique au service\n *      positions : [{lon:, lat:}, {lon:, lat:}],\n *      outputFormat : 'json' // json|xml\n *      sampling : 3,\n *      api : 'REST', // REST|WPS\n *      zonly : false // false|true\n *   };\n *\n * @private\n */\nfunction Alti (options) {\n    if (!(this instanceof Alti)) {\n        throw new TypeError(_.getMessage(\"CLASS_CONSTRUCTOR\", \"Alti\"));\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     * FIXME instance ou classe ?\n     */\n    this.CLASSNAME = \"Alti\";\n\n    // appel du constructeur par heritage\n    CommonService.apply(this, arguments);\n\n    this.logger = Logger.getLogger(\"Gp.Services.Alti\");\n    this.logger.trace(\"[Constructeur Alti (options)]\");\n\n    // #####################\n    // analyse des options\n    // #####################\n\n    if (!options.positions) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"positions\"));\n    }\n\n    if (options.positions.length === 0) {\n        throw new Error(_.getMessage(\"PARAM_EMPTY\", \"positions\"));\n    }\n\n    // ajout des options spécifiques au service\n    this.options.positions = options.positions;\n\n    // format de réponse du service : \"json\" ou \"xml\" (valeur par défaut), en minuscule !\n    this.options.outputFormat = (typeof options.outputFormat === \"string\") ? options.outputFormat.toLowerCase() : \"xml\";\n\n    // sampling\n    this.options.sampling = options.sampling || null;\n\n    // type d'api utilisé pour requeter le service, en majuscule !\n    this.options.api = (typeof options.api === \"string\") ? options.api.toUpperCase() : \"REST\";\n\n    // l'api ne peut être interrogée qu'en GET.\n    if (this.options.api === \"REST\") {\n        this.options.httpMethod = \"GET\";\n    }\n\n    // param. zonly\n    this.options.zonly = options.zonly || false;\n\n    // gestion de l'url du service par defaut\n    // si l'url n'est pas renseignée, il faut utiliser les urls par defaut\n    // en fonction du type d'api, REST ou WPS, du format de reponse demandé (outputFormat)\n    // ainsi que sur le type de service (profil ou elevation)\n    if (!this.options.serverUrl) {\n        var lstUrlByDefault = DefaultUrlService.Alti.url(this.options.apiKey);\n        var urlFound = null;\n        switch (this.options.api) {\n            case \"WPS\":\n                urlFound = lstUrlByDefault.wps;\n                break;\n            case \"REST\":\n                var key = (options.sampling ? \"profil\" : \"elevation\") + \"-\" + this.options.outputFormat;\n                urlFound = lstUrlByDefault[key];\n                break;\n            default:\n                throw new Error(_.getMessage(\"PARAM_UNKNOWN\", \"api\"));\n        }\n\n        if (!urlFound) {\n            throw new Error(\"Url by default not found !\");\n        }\n        this.options.serverUrl = urlFound;\n        this.logger.trace(\"Server URL by default : \" + this.options.serverUrl);\n    }\n\n    // gestion du type de service\n    // si l'extension de l'url est .json ou .xml, on surcharge le format de sortie (outputFormat)\n    var idx = this.options.serverUrl.lastIndexOf(\".\");\n    if (idx !== -1) {\n        var extension = this.options.serverUrl.substring(idx + 1);\n        if (extension && extension.length < 5) { // FIXME extension de moins de 4 car. ...\n            this.logger.trace(\"Server Extension URL : \" + extension);\n            switch (extension.toLowerCase()) {\n                case \"json\":\n                case \"xml\":\n                    this.options.outputFormat = extension.toLowerCase();\n                    break;\n                default:\n                    throw new Error(\"type of service : unknown or unsupported (json or xml) !\");\n            }\n        }\n    }\n}\n\n/**\n * @lends module:Alti#\n */\nAlti.prototype = Object.create(CommonService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/**\n * Constructeur (alias)\n */\nAlti.prototype.constructor = Alti;\n\n/**\n * Création de la requête (overwrite)\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nAlti.prototype.buildRequest = function (error, success) {\n    // utilisation en mode callback\n    var options = {\n        httpMethod : this.options.httpMethod,\n        // callback\n        onSuccess : function (result) {\n            // sauvegarde de la requete !\n            this.request = result;\n            success.call(this, this.request);\n        },\n        onError : error,\n        scope : this,\n        // spécifique au service :\n        positions : this.options.positions,\n        outputFormat : this.options.outputFormat,\n        sampling : this.options.sampling,\n        api : this.options.api,\n        zonly : this.options.zonly\n    };\n\n    AltiRequestFactory.build(options);\n};\n\n/**\n * Analyse de la reponse (overwrite)\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nAlti.prototype.analyzeResponse = function (error, success) {\n    // INFO\n    // Factory pour masquer la complexité du retour du service qui renvoie soit\n    //  - une 'string' qui contient du XML ou JSON natif en mode XHR\n    //  - un objet JSON qui est natif ou encapsulé\n\n    if (this.response) {\n        var options = {\n            response : this.response,\n            outputFormat : this.options.outputFormat, // utile pour parser la string en mode XHR : JSON ou XML !\n            rawResponse : this.options.rawResponse,\n            onError : error,\n            onSuccess : success,\n            scope : this\n        };\n\n        AltiResponseFactory.build(options);\n    } else {\n        error.call(this, new ErrorService(_.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n    }\n};\n\nexport default Alti;\n","\n/**\n * Response object for {@link module:Services~getConfig Gp.Services.getConfig ()} invocation when successful. Received as the argument of onSuccess callback function.\n *\n * @property {Object} generalOptions - General properties for default map configuration resources.\n * @property {Object} generalOptions.apiKeys - Object that associates apiKey (s) with an array of resources IDs availables with that key.\n * @property {String} generalOptions.title - Underlying web service Title.\n * @property {String} generalOptions.defaultGMLGFIStyle - XSL URL used by default to translate an XML GetFeatureInfo response into an HTML array.\n * @property {String} generalOptions.theme - default theme (FIXME : for what ?)\n * @property {Array.<Float>} generalOptions.wgs84Resolutions - geographical resolutions Array for each [zoom level of the Geoportal platform]{@link http://api.ign.fr/tech-docs-js/webmaster/layers.html#Geoportal_resolutions} from 0 to 21. Expressed in degrees/pixel.\n * @property {Object} layers - Associative array mapping resources availables IDs (keys) with their properties (values given as {@link Gp.Services.Config.Layer}).\n * @property {Object} territories - Associative array mapping french territories IDs (keys) with their properties (values given as {@link Gp.Services.Config.Territory}).\n * @property {Object} tileMatrixSets - Associative Array mapping TileMatrixSets IDs (keys) availables with their properties (values given as {@link Gp.Services.Config.TileMatrixSet}).\n * @property {Object} services - Associative Array mapping Geoportal web services IDs (keys) availables with their properties (values given as {@link Gp.Services.Config.Service}).\n *\n * @namespace\n * @alias Gp.Services.GetConfigResponse\n */\nfunction AutoConfResponse () {\n    if (!(this instanceof AutoConfResponse)) {\n        throw new TypeError(\"AutoConfResponse constructor cannot be called as a function.\");\n    }\n\n    this.generalOptions = {\n        apiKeys : {},\n        title : null,\n        defaultGMLGFIStyle : null,\n        theme : null,\n        wgs84Resolutions : []\n    };\n\n    this.layers = {};\n\n    this.territories = {};\n\n    this.tileMatrixSets = {};\n\n    this.services = {};\n}\n\nAutoConfResponse.prototype = {\n\n    /*\n     * Constructor (alias)\n     */\n    constructor : AutoConfResponse,\n\n    /**\n     * Check if config is loaded for a given key\n     *\n     * @param {String} apiKey - Access key to Geoportal platform\n     * @returns {Boolean} isConfLoaded - true if config is already loaded, false otherwise\n     */\n    isConfLoaded : function (apiKey) {\n        if (!apiKey) {\n            return;\n        }\n        if (this.generalOptions.apiKeys[apiKey]) {\n            return true;\n        }\n        return false;\n    },\n\n    /**\n     * Returns an array of Geoportal layers identifiers, corresponding to an API contract key.\n     *\n     * @param {String} apiKey - Access key to Geoportal platform\n     * @returns {Array} apiKeys - Array of geoportal layers identifiers\n     */\n    getLayersId : function (apiKey) {\n        return this.generalOptions.apiKeys[apiKey];\n    },\n\n    /**\n     * Returns an associative array of Geoportal layers configurations, corresponding to an API contract key.\n     * If no key is specified, all layers from configuration are returned.\n     *\n     * @param {String} apiKey - Access key to Geoportal platform\n     * @returns {Object} layers - Object which properties are layers identifiers, and corresponding\n     *      values are instances of <Gp.Services.Config.Layer>.\n     */\n    getLayersConf : function (apiKey) {\n        var layers = {};\n        var layersIdArray = this.getLayersId(apiKey);\n        if (layersIdArray) {\n            for (var i = 0; i < layersIdArray.length; i++) {\n                var lyrId = layersIdArray[i];\n                layers[lyrId] = this.layers[lyrId];\n            }\n        }\n        return layers;\n    },\n\n    /**\n     * Returns a geoportal layer configuration, given its identifier\n     *\n     * @param {String} layerId - Geoportal layer identifier (e.g. \"GEOGRAPHICALGRIDSYSTEMS.MAPS$GEOPORTAIL:OGC:WMTS\")\n     * @return {Object} layer - Layer configuration : instance of {@link Gp.Services.Config.Layer}\n     */\n    getLayerConf : function (layerId) {\n        if (!this.layers) {\n            return;\n        }\n        return this.layers[layerId];\n    },\n\n    /**\n     * Returns an associative array of Tile Matrix Sets configurations.\n     *\n     * @return {Object} tileMatrixSets - Object which properties are TMS identifiers,\n     *      and corresponding values are instances of {@link Gp.Services.Config.TileMatrixSet}.\n     */\n    getTileMatrixSets : function () {\n        return this.tileMatrixSets;\n    },\n\n    /**\n     * Returns a Tile Matrix Sets configuration, given its identifier.\n     *\n     * @param {String} tmsID - Tile Matrix Set identifier (e.g. : \"PM\")\n     * @return {Object} tileMatrixSet - Tile Matrix Set configuration, instance of {@link Gp.Services.Config.TileMatrixSet}\n     */\n    getTMSConf : function (tmsID) {\n        if (!this.tileMatrixSets) {\n            return;\n        }\n        return this.tileMatrixSets[tmsID];\n    },\n\n    /**\n     * Returns an associative array of territories configurations.\n     *\n     * @return {Object} territories - Object which properties are territory identifiers,\n     *      and corresponding values are instances of {@link Gp.Services.Config.Territory}.\n     */\n    getTerritories : function () {\n        return this.territories;\n    },\n\n    /**\n     * Returns a territory configuration, given its identifier.\n     *\n     * @param {String} territoryID - territory identifier (e.g. \"FXX\")\n     * @return {Object} territory - Territory configuration, instance of {@link Gp.Services.Config.Territory}\n     */\n    getTerritoryConf : function (territoryID) {\n        if (!this.territories) {\n            return;\n        }\n        return this.territories[territoryID];\n    },\n\n    /**\n     * Returns an associative array of services configurations.\n     *\n     * @return {Object} services - Object which properties are services identifiers,\n     *      and corresponding values are instances of {@link Gp.Services.Config.Service}.\n     */\n    getServices : function () {\n        return this.services;\n    },\n\n    /**\n     * Returns a service configuration, given its identifier.\n     *\n     * @param {String} serviceID - service identifier (e.g. \"OGC:WMTS\")\n     * @return {Object} service - service configuration, instance of {@link Gp.Services.Config.Service}\n     */\n    getServiceConf : function (serviceID) {\n        if (!this.services) {\n            return;\n        }\n        return this.services[serviceID];\n    }\n\n};\n\nexport default AutoConfResponse;\n","\n/**\n *\n * Object used to express a geographical (BBOX, scale) and temporal constraint.\n *\n * @property {String} crs - Coordinates System ID used to express coordinates contraints.\n * @property {Gp.BBox} bbox - Constraint Bounding Box.\n * @property {Number} minScaleDenominator - Minimum scale denominator where constraint applies.\n * @property {Number} maxScaleDenominator - Maximum scale denominator where constraint applies.\n * @property {Array.<String>} temporalExtent - Array expressing the time interval of the constraint [minT, maxT]. Dates are expressed in the [ISO-8601]{@link https://en.wikipedia.org/wiki/ISO_8601} way.\n *\n * @namespace\n * @alias Gp.Services.Config.Constraint\n */\n\nfunction Constraint () {\n    if (!(this instanceof Constraint)) {\n        throw new TypeError(\"Constraint constructor cannot be called as a function.\");\n    }\n\n    this.crs = null;\n\n    this.bbox = {\n        left : null,\n        right : null,\n        top : null,\n        bottom : null\n    };\n\n    this.minScaleDenominator = null;\n\n    this.maxScaleDenominator = null;\n\n    this.temporalExtent = [null, null];\n}\n\nConstraint.prototype = {\n\n    constructor : Constraint\n\n};\n\nexport default Constraint;\n","\n/**\n * Object used to describe a format to use with Geoportal resources.\n *\n * @property {Boolean} current - If true, then this format is used by default.\n * @property {String} name - Format mime-type.\n *\n * @namespace\n * @alias Gp.Services.Config.Format\n */\n\nfunction Format () {\n    if (!(this instanceof Format)) {\n        throw new TypeError(\"Format constructor cannot be called as a function.\");\n    }\n\n    this.current = null;\n\n    this.name = null;\n}\n\nFormat.prototype = {\n\n    constructor : Format\n\n};\n\nexport default Format;\n","\n/**\n * Object used to describe geoportal resource (WMTS, WMS, WFS layers, geocoding resources or elevation service) parameters. Properties may be used or not depending on the resource type.\n *\n * @property {String} name - name of the resource to use with the webservice that serves it (eg : \"GEOGRAPHICALGRIDSYSTEMS.MAPS\").\n * @property {String} title - Human readable name for the resource.\n * @property {String} description - Resource description.\n * @property {String} layerId - Unique resource Identifier (eg : \"GEOGRAPHICALGRIDSYSTEMS.MAPS$GEOPORTAIL:OGC:WMTS\")\n * @property {String} quicklookUrl - Image URL for the resource.\n * @property {Object} serviceParams - Informations about the webservice that serves the resource (OpenLS, WFS, WMTS)\n * @property {String} serviceParams.id - Web Service identifier (\"OGC:WMTS\", \"OGC:OPENLS;ReverseGeocode\", etc...)\n * @property {Object} serviceParams.serverUrl - Associative array mapping geoportal access key (keys) with their properties (URLs of the web service, with the geoportal access key).\n * @property {String} serviceParams.version - webservice version.\n * @property {String} defaultProjection - coordinates system ID used by default for the resource (WMS or WFS layer) or of the TileMatrixSet used by the WMTS layer.\n * @property {Array.<String>} additionalProjections - additional coordinates systems IDs availables for the resource, others than the default one (see defaultProjection) (WMS and WFS layers only).\n * @property {Array.<Gp.Services.Config.Format>} formats - Formats availables for the resource.\n * @property {Array.<Gp.Services.Config.Legend>} legends - Informations about legends associated to the resource.\n * @property {Array.<Gp.Services.Config.Metadata>} metadata - Informations about metadata associated to the resource.\n * @property {Array.<Gp.Services.Config.Style>} styles - Informations about styles availables for the resources (WMS, WFS and WMTS only).\n * @property {Array.<Gp.Services.Config.Thematic>} thematics - Informations about thematics associated to the resource.\n * @property {Gp.Services.Config.Constraint} globalConstraint - geographical constraint for the resource.\n * @property {Array.<Gp.Services.Config.Constraint>} constraints - additionnal geographical constraints for the resource.\n * @property {Array.<Gp.Services.Config.Originator>} originators - Informations about originator of the resource.\n * @property {Object} wmtsOptions - Informations associated to WMTS resources.\n * @property {String} wmtsOptions.tileMatrixSetLink - TileMatrixSet identifier used by the resource (see {@link Gp.Services.Config.TileMatrixSet})\n * @property {Gp.Services.Config.TileMatrixLimit} wmtsOptions.tileMatrixSetLimits - limits of the resource for that TileMAtrixSet.\n * @property {Boolean} queryable - true if a getFeatureInfo request may be done for the resource (WMS or WMTS only).\n * @property {Boolean} hidden - true if the resource is not visible.\n * @property {Boolean} isAggregate - true if the resource is an aggregate of other resources (@see aggregatedLayers).\n * @property {Array.<String>} aggregatedLayers - Layers IDs composing the being described aggregated layer.\n * @property {Array.<String>} apiKeys - Array of access keys that grant access to that resource.\n * @property {Object} dimensions - Dimensions informations associated with the resource.\n * @property {String} dimensions.type\n * @property {String} dimensions.visibilityRange\n * @property {String} dimensions.visibilityMode\n * @property {String} dimensions.noDataValue\n * @property {String} dimensions.geometricType\n *\n * @namespace\n * @alias Gp.Services.Config.Layer\n */\nfunction Layer () {\n    if (!(this instanceof Layer)) {\n        throw new TypeError(\"Layer constructor cannot be called as a function.\");\n    }\n\n    // info : une instance de la classe Layer n'a aucune propriété au départ,.\n    // les attributs possibles sont documentés ci-dessus,\n    // et seront implémentés au fur et à mesure de la lecture de la réponse de l'autoconf, lorsque l'information est rencontrée.\n}\n\nLayer.prototype = {\n\n    constructor : Layer,\n\n    /**\n     * Returns the layer name\n     *\n     * @returns {String} name - name of the resource to use with the webservice that serves it (eg : \"GEOGRAPHICALGRIDSYSTEMS.MAPS\").\n     */\n    getName : function () {\n        return this.name;\n    },\n\n    /**\n     * Returns the layer title\n     *\n     * @returns {String} title - Human readable name for the resource.\n     */\n    getTitle : function () {\n        return this.title;\n    },\n\n    /**\n     * Returns the layer description\n     *\n     * @returns {String} description - Resource description.\n     */\n    getDescription : function () {\n        return this.description;\n    },\n\n    /**\n     * Returns the layer identifier\n     *\n     * @returns {String} layerId - Unique resource Identifier (eg : \"GEOGRAPHICALGRIDSYSTEMS.MAPS$GEOPORTAIL:OGC:WMTS\")\n     */\n    getLayerId : function () {\n        return this.layerId;\n    },\n\n    /**\n     * Returns the layer quicklookUrl\n     *\n     * @returns {String} quicklookUrl - Image URL for the resource.\n     */\n    getQuicklookUrl : function () {\n        return this.quicklookUrl;\n    },\n\n    /**\n     * Returns the layer default projection\n     *\n     * @returns {String} defaultProjection - coordinates system ID used by default for the resource (WMS or WFS layer) or of the TileMatrixSet used by the WMTS layer.\n     */\n    getDefaultProjection : function () {\n        return this.defaultProjection;\n    },\n\n    /**\n     * Returns the layer projections\n     *\n     * @returns {Array.<String>} projections - coordinates systems IDs availables for the resource, including the default one.\n     */\n    getProjections : function () {\n        var projections = [];\n        projections.push(this.defaultProjection);\n        var proj = projections.concat(this.additionalProjections);\n        return proj;\n    },\n\n    /**\n     * Returns the global BBOX\n     *\n     * @returns {Gp.BBox} bbox - the layer global bounding box, expressed in CRS system.\n     */\n    getBBOX : function () {\n        if (!this.globalConstraint) {\n            return;\n        }\n        return this.globalConstraint.bbox;\n    },\n\n    /**\n     * Returns the layer minimum scale denominator\n     *\n     * @returns {Number} minScaleDenominator - minimum scale denominator for this layer\n     */\n    getMinScaleDenominator : function () {\n        if (!this.globalConstraint) {\n            return;\n        }\n        return this.globalConstraint.minScaleDenominator;\n    },\n\n    /**\n     * Returns the layer maximum scale denominator\n     *\n     * @returns {Number} maxScaleDenominator - maximum scale denominator for this layer\n     */\n    getMaxScaleDenominator : function () {\n        if (!this.globalConstraint) {\n            return;\n        }\n        return this.globalConstraint.maxScaleDenominator;\n    },\n\n    /**\n     * Returns layer Tile Matrix Set identifier if exists\n     *\n     * @returns {String} tileMatrixSetLink - Tile Matrix Set identifier (for instance : \"PM\")\n     */\n    getTMSID : function () {\n        if (this.wmtsOptions) {\n            return this.wmtsOptions.tileMatrixSetLink;\n        }\n    },\n\n    /**\n     * Returns information about the webservice that serves the resource\n     *\n     * @returns {Object} serviceParams - Information about the webservice that serves the resource (OpenLS, WFS, WMTS)\n     */\n    getServiceParams : function () {\n        return this.serviceParams;\n    },\n\n    /**\n     * Returns Geoportal server url for a given key\n     *\n     * @param {String} apiKey - Access key to Geoportal platform\n     * @returns {String} serverUrl - general URL of the web service (with the geoportal access key)\n     */\n    getServerUrl : function (apiKey) {\n        if (!apiKey || !this.serviceParams || !this.serviceParams.serverUrl) {\n            return;\n        }\n        return this.serviceParams.serverUrl[apiKey];\n    },\n\n    /**\n     * Returns information about legends associated to the resource.\n     *\n     * @returns {Array.<Gp.Services.Config.Legend>} legends - Informations about legends associated to the resource.\n     */\n    getLegends : function () {\n        return this.legends;\n    },\n\n    /**\n     * Returns information about metadata associated to the resource.\n     *\n     * @returns {Array.<Gp.Services.Config.Metadata>} metadata - Informations about metadata associated to the resource.\n     */\n    getMetadata : function () {\n        return this.metadata;\n    },\n\n    /**\n     * Returns information about styles availables for the resources (WMS, WFS and WMTS only).\n     *\n     * @returns {Array.<Gp.Services.Config.Style>} styles - Informations about styles availables for the resources (WMS, WFS and WMTS only).\n     */\n    getStyles : function () {\n        return this.styles;\n    },\n\n    /**\n     * Returns layer default style\n     *\n     * @returns {String} styleName - style identifier (eg : \"normal\", \"bdparcellaire\", ...)\n     */\n    getDefaultStyle : function () {\n        if (!this.styles) {\n            return;\n        }\n        var style;\n        var s = this.styles;\n        for (var i = 0; i < s.length; i++) {\n            if (s[i].current === true) {\n                style = s[i].name;\n                break;\n            }\n        }\n        return style;\n    },\n\n    /**\n     * Returns information about thematics associated to the resource.\n     *\n     * @returns {Array.<Gp.Services.Config.Thematic>} thematics - Informations about thematics associated to the resource.\n     */\n    getThematics : function () {\n        return this.thematics;\n    },\n\n    /**\n     * Returns layer default format\n     *\n     * @returns {String} formatName - Format mime-type. (eg. \"image/jpeg\")\n     */\n    getDefaultFormat : function () {\n        if (!this.formats) {\n            return;\n        }\n        var format;\n        var f = this.formats;\n        for (var i = 0; i < f.length; i++) {\n            if (f[i].current === true) {\n                format = f[i].name;\n                break;\n            }\n        }\n        return format;\n    },\n\n    /**\n     * Returns information about geographical or temporal constraints for the resource\n     *\n     * @returns {Array.<Gp.Services.Config.Constraint>} constraints - Informations about geographical or temporal constraints for the resource\n     */\n    getConstraints : function () {\n        return this.constraints;\n    },\n\n    /**\n     * Returns information about originators of this resource\n     *\n     * @returns {Array.<Gp.Services.Config.Originator>} originators - Informations about originators of this resource\n     */\n    getOriginators : function () {\n        return this.originators;\n    },\n\n    /**\n     * Returns information about dimensions associated with this resource\n     *\n     * @returns {Object} dimensions - Dimensions informations associated with the resource.\n     */\n    getDimensions : function () {\n        return this.dimensions;\n    },\n\n    /**\n     * Returns information about aggregated layers composing the being described layer, in case the resource is an aggregate of other resources.\n     *\n     * @returns {Object} aggregatedLayers - Layers IDs composing the being described aggregated layer.\n     */\n    getAggregatedLayers : function () {\n        if (this.isAggregate) {\n            return this.aggregatedLayers;\n        } else {\n            // ...\n        }\n    }\n\n};\n\nexport default Layer;\n","\n/**\n * Object used to describe a legend file associated with a geoportal resource (WMTS, WMS, WFS layers).\n *\n * @property {String} format - mime-type of the legend file.\n * @property {String} url - legend file URL\n * @property {Number} minScaleDenominator - minimum scale denominator where this legend applies.\n *\n * @namespace\n * @alias Gp.Services.Config.Legend\n */\n\nfunction Legend () {\n    if (!(this instanceof Legend)) {\n        throw new TypeError(\"Legend constructor cannot be called as a function.\");\n    }\n\n    this.format = null;\n\n    this.url = null;\n\n    this.minScaleDenominator = null;\n}\n\nLegend.prototype = {\n\n    constructor : Legend\n\n};\n\nexport default Legend;\n","\n/**\n * Object used to describe a metadata file associated with a geoportal resource.\n *\n * @property {String} format - mime-type of the metadata file.\n * @property {String} url - metadata file URL\n *\n * @namespace\n * @alias Gp.Services.Config.Metadata\n */\n\nfunction Metadata () {\n    if (!(this instanceof Metadata)) {\n        throw new TypeError(\"Metadata constructor cannot be called as a function.\");\n    }\n\n    this.format = null;\n\n    this.url = null;\n}\n\nMetadata.prototype = {\n\n    constructor : Metadata\n\n};\n\nexport default Metadata;\n","\n/**\n * Object used to describe an Originator of geoportal resource.\n *\n * @property {String} name - originator name\n * @property {String} attribution - originator full name\n * @property {String} logo - originator logo file URL\n * @property {String} url - originator web site URL\n * @property {Array.<Gp.Services.Config.Constraint>} constraints - where and when the originator applies for the ressource.\n *\n * @namespace\n * @alias Gp.Services.Config.Originator\n */\n\nfunction Originator () {\n    if (!(this instanceof Originator)) {\n        throw new TypeError(\"Originator constructor cannot be called as a function.\");\n    }\n\n    this.name = null;\n\n    this.attribution = null;\n\n    this.logo = null;\n\n    this.url = null;\n\n    this.constraints = [];\n}\n\nOriginator.prototype = {\n\n    constructor : Originator\n\n};\n\nexport default Originator;\n","\n/**\n * Object used to describe a web service of the geoportal platform.\n *\n * @property {String} title - Web service name\n * @property {Object} serverUrl - Associative array mapping geoportal access key (keys) with their properties (URLs of the web service, with the geoportal access key).\n * @property {String} version - web service version.\n *\n * @namespace\n * @alias Gp.Services.Config.Service\n */\nfunction Service () {\n    if (!(this instanceof Service)) {\n        throw new TypeError(\"Service constructor cannot be called as a function.\");\n    }\n\n    this.title = null;\n\n    this.serverUrl = null;\n\n    this.version = null;\n}\n\nService.prototype = {\n\n    constructor : Service\n\n};\n\nexport default Service;\n","\n/**\n * Object used to describe a style that may be used for a geoportal resource.\n *\n * @property {String} name - Style identifier (eg : \"normal\", \"bdparcellaire\", ...)\n * @property {String} title - human readable name of the style.\n * @property {Boolean} current - true if this is the default style.\n * @property {String} url - Url Style (eg: vectortile).\n *\n * @namespace\n * @alias Gp.Services.Config.Style\n */\n\nfunction Style () {\n    if (!(this instanceof Style)) {\n        throw new TypeError(\"Style constructor cannot be called as a function.\");\n    }\n\n    this.name = null;\n\n    this.title = null;\n\n    this.current = null;\n\n    this.url = null;\n}\n\nStyle.prototype = {\n\n    constructor : Style\n\n};\n\nexport default Style;\n","\n/**\n * Object used to describe properties of a french territory covered by geoportal resources.\n *\n * @property {Boolean} isDefault - if this territory is to use by default.\n * @property {String} defaultCRS - Identifier of the coordinates system to use by default for that territory.\n * @property {Array.<String>} additionalCRS - Identifiers of additional coordinates systems availables for that territory.\n * @property {Array.<String>} defaultLayers - Identifiers of layers to load by default for that territory.\n * @property {Object} defaultOptions - options to use by default for that territory.\n * @property {Number} defaultOptions.resolution - resolution to use by default for that territory (in meter per pixel).\n * @property {Number} defaultOptions.minScaleDenominator - minimum scaleDenominator accessible for that territory.\n * @property {Number} defaultOptions.maxScaleDenominator - maximum scaleDenominator accessible for that territory.\n * @property {Gp.BBox} geoBBox - Bounding Box of the territory (expressed in geographical coordinates)\n * @property {Object} geoCenter - center of the territory (expressed in geographical coordinates)\n * @property {Float} geoCenter.lon - center longitude\n * @property {Float} geoCenter.lat - center latitude\n *\n * @namespace\n * @alias Gp.Services.Config.Territory\n */\nfunction Territory () {\n    if (!(this instanceof Territory)) {\n        throw new TypeError(\"Territory constructor cannot be called as a function.\");\n    }\n\n    this.isDefault = null;\n\n    this.defaultCRS = null;\n\n    this.additionalCRS = [];\n\n    this.geoBBOX = {\n        left : null,\n        right : null,\n        top : null,\n        bottom : null\n    };\n\n    this.geoCenter = {\n        lon : null,\n        lat : null\n    };\n\n    this.defaultOptions = {\n        resolution : null,\n        minScaleDenominator : null,\n        maxScaleDenominator : null\n    };\n\n    this.defaultLayers = [];\n}\n\nTerritory.prototype = {\n\n    constructor : Territory\n\n};\n\nexport default Territory;\n","\n/**\n * Object used to describe a thematic\n *\n * @property {String} name - Thematic name\n * @property {Boolean} inspire - true if the thematic name is an [INSPIRE one]{@link http://inspire.ec.europa.eu/index.cfm/pageid/2/list/7}.\n *\n * @namespace\n * @alias Gp.Services.Config.Thematic\n */\n\nfunction Thematic () {\n    if (!(this instanceof Thematic)) {\n        throw new TypeError(\"Thematic constructor cannot be called as a function.\");\n    }\n\n    this.inspire = null;\n\n    this.name = null;\n}\n\nThematic.prototype = {\n\n    constructor : Thematic\n\n};\n\nexport default Thematic;\n","\n/**\n *\n * Object used to describe a TileMatrix set (for WMTS use).\n *\n * @property {Array.<String>} matrixIds - Array of IDs for each TileMatrix of the set.\n * @property {Array.<Gp.Services.Config.TileMatrix>} tileMatrices - Array of TileMatrix descriptions.\n * @property {Array.<Float>} nativeResolutions - Array of resolutions (in meter per pixel) applying for each TileMatrix of the set.\n * @property {String} projection - Identifier of the Cordinates System used for the tileMatrixSet.\n *\n * @namespace\n * @alias Gp.Services.Config.TileMatrixSet\n */\nfunction TileMatrixSet () {\n    if (!(this instanceof TileMatrixSet)) {\n        throw new TypeError(\"TileMatrixSet constructor cannot be called as a function.\");\n    }\n\n    this.projection = null;\n\n    this.nativeResolutions = [];\n\n    this.matrixIds = [];\n\n    this.tileMatrices = {};\n}\n\nTileMatrixSet.prototype = {\n\n    constructor : TileMatrixSet,\n\n    /**\n     * Returns Tile Matrix Set resolutions\n     *\n     * @returns {Array} nativeResolutions - Array of resolutions (in meter per pixel) applying for each TileMatrix of the set.\n     */\n    getResolutions : function () {\n        return this.nativeResolutions;\n    },\n\n    /**\n     * Returns Tile Matrix Set identifiers\n     *\n     * @returns {Array} matrixIds - Array of IDs for each TileMatrix of the set.\n     */\n    getMatrixIds : function () {\n        return this.matrixIds;\n    },\n\n    /**\n     * Returns Tile Matrix Set projection\n     *\n     * @returns {String} projection - Identifier of the Cordinates System used for the tileMatrixSet.\n     */\n    getProjection : function () {\n        return this.projection;\n    },\n\n    /**\n     * Returns Tile Matrices descriptions.\n     *\n     * @returns {Array.<Gp.Services.Config.TileMatrix>} tileMatrices - Array of TileMatrix descriptions.\n     */\n    getTileMatrices : function () {\n        return this.tileMatrices;\n    },\n\n    /**\n     * Returns top left corner point of matrices\n     *\n     * @returns {Gp.Point} topLeftCorner - Top Left Corner Point of TMS matrices, expressed in the tileMatrixSet coordinates system.\n     */\n    getTopLeftCorner : function () {\n        var topLeftCorner;\n        var matrices = this.getTileMatrices();\n        if (matrices) {\n            for (var id in matrices) {\n                if (matrices.hasOwnProperty(id)) {\n                    topLeftCorner = matrices[id].topLeftCorner;\n                    break;\n                }\n            }\n        }\n        return topLeftCorner;\n    }\n\n};\n\nexport default TileMatrixSet;\n","\n/**\n * Object used to describe a TileMatrix.\n *\n * @property {String} matrixId - matrix Identifier\n * @property {Number} matrixHeight - Number of tiles from the top to the bottom of the matrix.\n * @property {Number} matrixWidth - Number of tiles from the left to the right of the matrix.\n * @property {Number} scaleDenominator - Scale denominator associated to that matrix.\n * @property {Number} tileHeight - tile height in number of pixels\n * @property {Number} tileWidth - tile width in number of pixels\n * @property {Gp.Point} topLeftCorner - Top Left Corner Point of the matrix expressed in the tileMatrixSet coordinates system.\n *\n * @namespace\n * @alias Gp.Services.Config.TileMatrix\n */\n\nfunction TileMatrix () {\n    if (!(this instanceof TileMatrix)) {\n        throw new TypeError(\"TileMatrix constructor cannot be called as a function.\");\n    }\n\n    this.matrixId = null;\n\n    this.matrixHeight = null;\n\n    this.matrixWidth = null;\n\n    this.scaleDenominator = null;\n\n    this.tileHeight = null;\n\n    this.tileWidth = null;\n\n    this.topLeftCorner = null;\n}\n\nTileMatrix.prototype = {\n\n    constructor : TileMatrix,\n\n    /**\n     * Returns top left corner point of the matrix\n     *\n     * @returns {Gp.Point} topLeftCorner - Top Left Corner Point of the matrix expressed in the tileMatrixSet coordinates system.\n     */\n    getTopLeftCorner : function () {\n        return this.topLeftCorner;\n    },\n\n    /**\n     * Returns Scale denominator associated to that matrix.\n     *\n     * @returns {Number} scaleDenominator - Scale denominator associated to that matrix.\n     */\n    getScaleDenominator : function () {\n        return this.scaleDenominator;\n    },\n\n    /**\n     * Returns tile height of matrix\n     *\n     * @returns {Number} tileHeight - tile height in number of pixels\n     */\n    getTileHeight : function () {\n        return this.tileHeight;\n    },\n\n    /**\n     * Returns tile width of matrix\n     *\n     * @returns {Number} tileWidth - tile width in number of pixels\n     */\n    getTileWidth : function () {\n        return this.tileWidth;\n    },\n\n    /**\n     * Returns matrix height (number of tiles)\n     *\n     * @returns {Number} matrixHeight - Number of tiles from the top to the bottom of the matrix.\n     */\n    getMatrixHeight : function () {\n        return this.matrixHeight;\n    },\n\n    /**\n     * Returns matrix width (number of tiles)\n     *\n     * @returns {Number} matrixWidth - Number of tiles from the left to the right of the matrix.\n     */\n    getMatrixWidth : function () {\n        return this.matrixWidth;\n    }\n\n};\n\nexport default TileMatrix;\n","\n/**\n * Object used to describe a layer extent on a Tile Matrix.\n *\n * @property {Number} minTileCol - minimum column index where tile can be found on the Tile matrix.\n * @property {Number} maxTileCol - maximum column index where tile can be found on the Tile matrix.\n * @property {Number} minTileRow - minimum row index where tile can be found on the Tile matrix.\n * @property {Number} maxTileCol - maximum row index where tile can be found on the Tile matrix.\n *\n * @namespace\n * @alias Gp.Services.Config.TileMatrixLimit\n */\n\nfunction TileMatrixLimit () {\n    if (!(this instanceof TileMatrixLimit)) {\n        throw new TypeError(\"TileMatrixLimit constructor cannot be called as a function.\");\n    }\n\n    this.minTileRow = null;\n\n    this.maxTileRow = null;\n\n    this.minTileCol = null;\n\n    this.maxTileCol = null;\n}\n\n/**\n * @lends module:Autoconf/Response/TileMatrixLimit\n */\nTileMatrixLimit.prototype = {\n\n    constructor : TileMatrixLimit\n};\n\nexport default TileMatrixLimit;\n","\n/**\n * Fonction retournant un objet contenant des clés de lecture (readers)\n *      qui permettent de parser des réponses XML du service d'autoconfiguration du Géoportail\n *      afin de récupérer les informations retournées.\n * @module AutoConfResponseReader\n * @private\n * @alias Gp.Services.AutoConf.Formats.AutoConfResponseReader\n */\n\n// import Logger from \"../../../Utils/LoggerByDefault\";\nimport AutoConfResponse from \"../Response/model/AutoConfResponse\";\nimport Constraint from \"../Response/model/Constraint\";\nimport Format from \"../Response/model/Format\";\nimport Layer from \"../Response/model/Layer\";\nimport Legend from \"../Response/model/Legend\";\nimport Metadata from \"../Response/model/Metadata\";\nimport Originator from \"../Response/model/Originator\";\nimport Service from \"../Response/model/Service\";\nimport Style from \"../Response/model/Style\";\nimport Territory from \"../Response/model/Territory\";\nimport Thematic from \"../Response/model/Thematic\";\nimport TileMatrixSet from \"../Response/model/TileMatrixSet\";\nimport TileMatrix from \"../Response/model/TileMatrix\";\nimport TileMatrixLimit from \"../Response/model/TileMatrixLimit\";\n\nvar AutoConfResponseReader = {};\n\n/**\n * version du service d'autoconf\n */\nAutoConfResponseReader.VERSION = \"1.1.0\";\n\n/**\n * Objet stockant les différents namespaces et les URI associées\n */\nAutoConfResponseReader.NAMESPACES = {\n    xmlns : \"http://www.opengis.net/context\",\n    gpp : \"http://api.ign.fr/geoportail\",\n    ows : \"http://www.opengis.net/ows/1.1\",\n    sld : \"http://www.opengis.net/sld\",\n    wmts : \"http://www.opengis.net/wmts/1.0\",\n    xlink : \"http://www.w3.org/1999/xlink\",\n    xsi : \"http://www.w3.org/2001/XMLSchema-instance\"\n};\n\n/**\n * Localisation (URL) du schema de définition du XML (XSD)\n */\nAutoConfResponseReader.SCHEMALOCATION = [\n    \"http://www.opengis.net/context http://wxs.ign.fr/schemas/extContext.xsd http://api.ign.fr/geoportail http://wxs.ign.fr/schemas/autoconf/autoconf.xsd\",\n    \"http://www.opengis.net/context http://wxs.ign.fr/schemas/extContext.xsd http://api.ign.fr/geoportail http://wxs.ign.fr/schemas/autoconf.xsd\"\n];\n\n/**\n * Namespace par défaut du format\n */\nAutoConfResponseReader.DEFAULTPREFIX = \"context\";\n\n/**\n * Objet contenant des fonctions de lecture, appelées \"READERS\"\n *      dont chaque clé correspond au nom d'un tag du XML que l'on souhaite lire\n *      et la valeur associée est une fonction (node, data)\n *      où node est un noeud du document DOM\n *      et data est un objet où l'on stocke les informations lues dans le XML.\n */\nAutoConfResponseReader.READERS = {\n\n    context : {\n\n        /** ViewContext */\n        ViewContext : function (viewContextNode) {\n            // info : balise \"racine\" de la réponse de l'autoconf\n\n            // vérification de la version du service, et des namespaces de l'en-tête\n            __checkServiceAttributes(viewContextNode);\n\n            // create AutoConfResponse\n            var config = new AutoConfResponse();\n\n            __getChildNodes(viewContextNode, config);\n\n            return config;\n        },\n\n        // info : /General/Title\n        // ou : /LayerList/Layer/Title\n        /** Title */\n        Title : function (titleNode, data) {\n            if (data && data.generalOptions) { // cas de la variable config générale\n                data.generalOptions.title = __getChildValue(titleNode);\n            } else if (data && data.lyr) { // cas d'une layer\n                data.lyr.title = __getChildValue(titleNode);\n            }\n        },\n\n        // info : /LayerList/Layer/Abstract\n        /** Abstract */\n        Abstract : function (node, data) {\n            if (data && data.lyr) {\n                data.lyr.description = __getChildValue(node);\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:Services/Server\n        // ou : /LayerList/Server\n        /** Server */\n        Server : function (node, data) {\n            var serverId = node.getAttribute(\"service\");\n            var title = node.getAttribute(\"title\");\n            var version = node.getAttribute(\"version\");\n            if (serverId) {\n                if (data && data.services && typeof data.services === \"object\" && !data.services[serverId]) {\n                    // on est dans la balise Services\n                    var s = new Service();\n                    s.title = title;\n                    s.version = version;\n                    // récupération de l'url du service, dans une balise enfant \"OnlineResource\"\n                    __getChildNodes(node, s);\n                    // ajout du service à la variable config\n                    data.services[serverId] = s;\n                } else if (data && data.lyr) {\n                    // on est dans la balise Layer\n                    if (!data.lyr.serviceParams) {\n                        // si l'objet serviceParams n'a pas encore été créé, on le crée.\n                        data.lyr.serviceParams = {};\n                    }\n                    data.lyr.serviceParams.id = serverId;\n                    data.lyr.serviceParams.version = version;\n                }\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:Services/Server/OnlineResource\n        // ou : /LayerList/Layer/Server/OnlineResource\n        // ou : /LayerList/Layer/Extention/gpp:Layer/gpp:QuickLook/OnlineResource\n        // ou : /LayerList/Layer/Extension/gpp:Layer/gpp:Legends/gpp:Legend/gpp:LegendURL/OnlineResource\n        // ou : /LayerList/Layer/Extension/gpp:Layer/gpp:MetadataURL/OnlineResource\n        /** OnlineResource */\n        OnlineResource : function (node, service) {\n            if (service && service.hasOwnProperty(\"serverUrl\")) {\n                service.serverUrl = node.getAttribute(\"xlink:href\");\n            }\n        },\n\n        // info : /LayerList\n        /** LayerList */\n        LayerList : function (layerListNode, config) {\n            // liste de balises \"layer\"\n            __getChildNodes(layerListNode, config);\n\n            if (config && config.layers && config.generalOptions && config.services) {\n                // récupération des clés et des couches associées\n                for (var lyr in config.layers) {\n                    if (config.layers.hasOwnProperty(lyr)) {\n                        var layerConfig = config.layers[lyr];\n\n                        // récupération de la clé associée\n                        var apiKeys = layerConfig.apiKeys;\n                        if (apiKeys && Array.isArray(apiKeys)) {\n                            for (var i = 0; i < apiKeys.length; i++) {\n                                // pour chaque clé API, on ajoute la couche\n                                var key = apiKeys[i];\n                                if (config.generalOptions.apiKeys) {\n                                    if (!config.generalOptions.apiKeys[key] || !Array.isArray(config.generalOptions.apiKeys[key])) {\n                                        config.generalOptions.apiKeys[key] = [];\n                                    }\n                                    config.generalOptions.apiKeys[key].push(lyr);\n                                }\n                            }\n                        }\n\n                        // récupération du service associé\n                        var serviceParams = layerConfig.serviceParams;\n                        if (serviceParams && serviceParams.id) {\n                            if (!config.services[serviceParams.id]) {\n                                var s = new Service();\n                                if (serviceParams.serverUrl) {\n                                    s.serverUrl = serviceParams.serverUrl;\n                                }\n                                if (serviceParams.version) {\n                                    s.version = serviceParams.version;\n                                }\n                                config.services[serviceParams.id] = s;\n                            }\n                        }\n\n                        // récupération de la projection associée (dans le cas d'une couche WMTS)\n                        if (layerConfig.wmtsOptions && layerConfig.wmtsOptions.tileMatrixSetLink && config.tileMatrixSets) {\n                            var tmsLink = layerConfig.wmtsOptions.tileMatrixSetLink;\n                            var tileMatrixSets = config.tileMatrixSets;\n                            for (var tms in tileMatrixSets) {\n                                if (tileMatrixSets.hasOwnProperty(tms) && tms === tmsLink) {\n                                    layerConfig.defaultProjection = tileMatrixSets[tms].projection;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        },\n\n        // info : /LayerList/Layer\n        /** Layer */\n        Layer : function (layerNode, config) {\n            if (config && config.layers) {\n                var lyrData = {\n                    lyr : new Layer(),\n                    lyrId : null\n                };\n\n                var hidden = layerNode.getAttribute(\"hidden\");\n                if (hidden === \"1\") {\n                    lyrData.lyr.hidden = true;\n                } else {\n                    lyrData.lyr.hidden = false;\n                }\n\n                var queryable = layerNode.getAttribute(\"queryable\");\n                if (queryable === \"1\") {\n                    lyrData.lyr.queryable = true;\n                } else {\n                    lyrData.lyr.queryable = false;\n                }\n\n                // on peut avoir les balises : Server, Name, Title, Abstract, DataURL, MetadataURL,\n                // sld:MinScaleDenominator, sld:MaxScaleDenominator, SRS, FormatList, StyleList\n                // DimensionList, Extension\n                __getChildNodes(layerNode, lyrData);\n\n                // si on a bien récupéré l'identifiant de la couche, on s'en sert pour l'ajouter au tableau associatif des couches disponibles\n                if (lyrData.lyrId) {\n                    // Dans le cas des services, on modifie le contexte de l'identifiant.\n                    if (lyrData.lyr.serviceParams && lyrData.lyr.serviceParams.id) {\n                        var serviceid = lyrData.lyr.serviceParams.id;\n                        if (serviceid.toUpperCase().indexOf(\"OPENLS\") !== -1 || serviceid.toUpperCase().indexOf(\"ELEVATION\") !== -1) {\n                            // Il faut changer l'identifiant de la ressource.\n                            var resourceId = lyrData.lyrId.split(\"$\")[0];\n                            lyrData.lyrId = resourceId + \"$\" + serviceid;\n                        }\n                    }\n\n                    // on ajoute l'information dans les attributs de la couche\n                    lyrData.lyr.layerId = lyrData.lyrId;\n                    // et dans le tableau Gp.Config.layers\n                    config.layers[lyrData.lyrId] = lyrData.lyr;\n                }\n            }\n        },\n\n        // info : /LayerList/Layer/Name\n        /** TODO : jsdoc block */\n        Name : function (node, lyrData) {\n            if (lyrData && lyrData.lyr) {\n                lyrData.lyr.name = __getChildValue(node);\n            }\n        },\n\n        // info : /LayerList/Layer/SRS (dans le cas des couches WMS ou WFS)\n        /** TODO : jsdoc block */\n        SRS : function (node, lyrData) {\n            // on récupère la projection de la couche (SRS)\n            if (lyrData && lyrData.lyr) {\n                lyrData.lyr.defaultProjection = __getChildValue(node);\n            }\n        },\n\n        // info : /LayerList/Layer/FormatList/Format\n        /** TODO : jsdoc block */\n        Format : function (node, lyrData) {\n            if (lyrData && lyrData.lyr) {\n                var f = new Format();\n                var current = node.getAttribute(\"current\");\n                if (current === \"1\") {\n                    f.current = true;\n                } else {\n                    f.current = false;\n                }\n                f.name = __getChildValue(node);\n                // si on n'a pas encore ajouté de format, on crée le tableau vide\n                if (!lyrData.lyr.formats || !Array.isArray(lyrData.lyr.formats)) {\n                    lyrData.lyr.formats = [];\n                }\n                lyrData.lyr.formats.push(f);\n            }\n        },\n\n        // info : /LayerList/Layer/StyleList/Style\n        /** TODO : jsdoc block */\n        Style : function (node, lyrData) {\n            if (lyrData && lyrData.lyr) {\n                var s = new Style();\n                var current = node.getAttribute(\"current\");\n                if (current === \"1\" || current === 1) {\n                    s.current = true;\n                } else {\n                    s.current = false;\n                }\n                if (node.hasChildNodes) {\n                    var children = node.childNodes;\n                    var child;\n                    var childName;\n                    for (var i = 0; i < children.length; i++) {\n                        child = children[i];\n                        if (child.nodeType === 1) { // 1 === node.ELEMENT_NODE\n                            childName = child.localName || child.baseName || child.nodeName;\n                            if (childName === \"Name\") {\n                                s.name = __getChildValue(child);\n                            } else if (childName === \"Title\") {\n                                s.title = __getChildValue(child);\n                            } else if (childName === \"URL\") {\n                                s.url = __getChildValue(child);\n                            }\n                        }\n                    }\n                }\n                // si on n'a pas encore ajouté de style, on crée le tableau vide\n                if (!lyrData.lyr.styles || !Array.isArray(lyrData.lyr.styles)) {\n                    lyrData.lyr.styles = [];\n                }\n                lyrData.lyr.styles.push(s);\n            }\n        },\n\n        // info : /LayerList/Layer/DimensionList/Dimension\n        /** TODO : jsdoc block */\n        Dimension : function (node, lyrData) {\n            // possède des attributs obligatoires : name, units, unitSymbol et userValue\n            // et d'autres attributs facultatifs : default, multipleValues, nearestValue, current\n            var name = node.getAttribute(\"name\");\n            var dim = __getChildValue(node);\n            if (lyrData && lyrData.lyr) {\n                // si on n'a pas encore ajouté de dimension, on crée l'objet vide\n                if (!lyrData.lyr.dimensions) {\n                    lyrData.lyr.dimensions = {};\n                }\n                if (name === \"Type\") {\n                    lyrData.lyr.dimensions.type = dim;\n                } else if (name === \"VisibilityRange\") {\n                    lyrData.lyr.dimensions.visibilityRange = dim;\n                } else if (name === \"VisibilityMode \") {\n                    lyrData.lyr.dimensions.visibilityMode = dim;\n                } else if (name === \"GeometricType\") {\n                    lyrData.lyr.dimensions.geometricType = dim;\n                } else if (name === \"NoDataValue\") {\n                    lyrData.lyr.dimensions.noDataValue = dim;\n                }\n            }\n        }\n\n    },\n\n    gpp : {\n\n        // info : /General/Extension/gpp:General/gpp:Theme\n        /** TODO : jsdoc block */\n        Theme : function (themeNode, config) {\n            if (config && config.generalOptions && config.generalOptions.hasOwnProperty(\"theme\")) {\n                config.generalOptions.theme = __getChildValue(themeNode);\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:defaultGMLGFIStyleUrl\n        /** TODO : jsdoc block */\n        defaultGMLGFIStyleUrl : function (node, config) {\n            if (config && config.generalOptions && config.generalOptions.hasOwnProperty(\"defaultGMLGFIStyle\")) {\n                config.generalOptions.defaultGMLGFIStyle = __getChildValue(node);\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:Territories/gpp:Territory\n        /** TODO : jsdoc block */\n        Territory : function (territoryNode, config) {\n            // info : Information to configure the API for this territory\n            var tid = territoryNode.getAttribute(\"id\");\n            if (tid) {\n                // create a new Territory\n                var t = new Territory();\n\n                var isDefault = territoryNode.getAttribute(\"default\");\n                if (isDefault === \"1\") {\n                    t.isDefault = true;\n                } else {\n                    t.isDefault = false;\n                }\n                // read territory informations\n                __getChildNodes(territoryNode, t);\n                // add territory to config\n                if (config && config.territories && typeof config.territories === \"object\") {\n                    config.territories[tid] = t;\n                }\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:Territories/gpp:Territory/gpp:defaultCRS\n        /** TODO : jsdoc block */\n        defaultCRS : function (node, territory) {\n            // info : Identifier for the default Coordinate Reference System (CRS).\n            if (territory && territory.hasOwnProperty(\"defaultCRS\")) {\n                territory.defaultCRS = __getChildValue(node);\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:Territories/gpp:Territory/gpp:AdditionalCRS\n        // ou : /LayerList/Extension/gpp:Layer/gpp:AdditionalCRS\n        /** TODO : jsdoc block */\n        AdditionalCRS : function (node, data) {\n            // info : Identifier for additional Coordinate Reference System (CRS).\n            // info : data peut être une instance de Territory.js, ou une instance de Layer.js\n            var addCRS = __getChildValue(node);\n            if (addCRS && data) {\n                if (Array.isArray(data.additionalCRS)) { // cas d'un territoire\n                    data.additionalCRS.push(addCRS);\n                } else { // cas d'une couche\n                    // si le tableau n'est pas encore créé\n                    if (!data.additionalProjections || !Array.isArray(data.additionalProjections)) {\n                        data.additionalProjections = [];\n                    }\n                    data.additionalProjections.push(addCRS);\n                }\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:Territories/gpp:Territory/gpp:DefaultLayer\n        /** TODO : jsdoc block */\n        DefaultLayer : function (node, territory) {\n            var lyr = node.getAttribute(\"layerId\");\n            if (lyr && territory && Array.isArray(territory.defaultLayers)) {\n                territory.defaultLayers.push(lyr);\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:Territories/gpp:Territory/gpp:BoundingBox\n        // ou : /LayerList/Extension/gpp:Layer/gpp:BoundingBox\n        // ou : /LayerList/Layer/Extension/gpp:Layer/gpp:Constraints/gpp:Constraint/gpp:BoundingBox\n        // ou : /LayerList/Extension/gpp:Layer/gpp:Originators/gpp:Originator/gpp:Constraints/gpp:Constraint/gpp:BoundingBox\n        /** TODO : jsdoc block */\n        BoundingBox : function (node, data) {\n            if (data) {\n                var values = __getChildValue(node).split(\",\");\n                if (values.length === 4) {\n                    // get bbox coordinates (wgs84)\n                    var bbox = {\n                        left : parseFloat(values[0]),\n                        right : parseFloat(values[2]),\n                        top : parseFloat(values[3]),\n                        bottom : parseFloat(values[1])\n                    };\n                    // get temporal extent params (constraint or layer)\n                    var minT = node.getAttribute(\"minT\");\n                    var maxT = node.getAttribute(\"maxT\");\n\n                    if (data.hasOwnProperty(\"geoBBOX\")) { // cas d'un territoire\n                        data.geoBBOX = bbox;\n                    } else if (data.hasOwnProperty(\"bbox\")) { // cas d'une constraint\n                        if (data.bbox.left || data.bbox.right || data.bbox.top || data.bbox.bottom) {\n                            // si on a déjà une bbox, il faut stocker d'autres contraintes\n                            if (!data.multiConstraints) {\n                                data.multiConstraints = [];\n                            }\n                            var newConstraint = new Constraint();\n                            newConstraint.bbox = bbox;\n                            newConstraint.temporalExtent = [minT, maxT];\n                            data.multiConstraints.push(newConstraint);\n                        } else {\n                            // contrainte classique\n                            data.bbox = bbox;\n                            data.temporalExtent = [minT, maxT];\n                        }\n                    } else { // cas d'une layer\n                        if (!data.globalConstraint) {\n                            data.globalConstraint = new Constraint();\n                        }\n                        data.globalConstraint.bbox = bbox;\n                        data.globalConstraint.temporalExtent = [minT, maxT];\n                    }\n                }\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:Territories/gpp:Territory/gpp:Resolution\n        /** TODO : jsdoc block */\n        Resolution : function (node, territory) {\n            // info : The default resolution to display on this territory, in CRS coordinate system\n            var res = __getChildValue(node);\n            if (res && territory && territory.defaultOptions && territory.defaultOptions.hasOwnProperty(\"resolution\")) {\n                territory.defaultOptions.resolution = parseFloat(res);\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:Territories/gpp:Territory/gpp:Center/gpp:x\n        /** TODO : jsdoc block */\n        x : function (node, territory) {\n            var lon = __getChildValue(node);\n            if (lon && territory && territory.geoCenter && territory.geoCenter.hasOwnProperty(\"lon\")) {\n                territory.geoCenter.lon = parseFloat(lon);\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:Territories/gpp:Territory/gpp:Center/gpp:y\n        /** TODO : jsdoc block */\n        y : function (node, territory) {\n            var lat = __getChildValue(node);\n            if (lat && territory && territory.geoCenter && territory.geoCenter.hasOwnProperty(\"lat\")) {\n                territory.geoCenter.lat = parseFloat(lat);\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:Resolutions\n        /** TODO : jsdoc block */\n        Resolutions : function (resNode, config) {\n            // info : List of resolutions in CRS:84 (comma separated values)\n            if (config && config.generalOptions && config.generalOptions.hasOwnProperty(\"wgs84Resolutions\")) {\n                config.generalOptions.wgs84Resolutions = __getChildValue(resNode).split(\",\");\n            }\n        },\n\n        // info : /LayerList/Layer/Extension/gpp:Layer\n        /** TODO : jsdoc block */\n        Layer : function (node, lyrData) {\n            // attributs : id, opacity, order, visibleInCatalog, aggregate, more\n            if (lyrData && lyrData.hasOwnProperty(\"lyrId\") && lyrData.lyr) {\n                lyrData.lyrId = node.getAttribute(\"id\");\n                var aggregate = node.getAttribute(\"aggregate\");\n                var more = node.getAttribute(\"more\");\n                if (aggregate || more) {\n                    lyrData.lyr.isAggregate = true;\n                }\n                __getChildNodes(node, lyrData.lyr);\n            }\n        },\n\n        // info : /LayerList/Layer/Extension/gpp:Layer/gpp:Constraints/gpp:Constraint\n        // ou : /LayerList/Extension/gpp:Layer/gpp:Originators/gpp:Originator/gpp:Constraints/gpp:Constraint\n        /** TODO : jsdoc block */\n        Constraint : function (node, data) {\n            var c = new Constraint();\n            __getChildNodes(node, c);\n            if (data) {\n                // on peut être dans le cas d'un originator ou d'une layer, tous les deux ont l'attribut constraints\n                if (!data.constraints || !Array.isArray(data.constraints)) {\n                    data.constraints = [];\n                }\n\n                // cas de plusieurs contraintes (par ex différents territoires)\n                if (c.multiConstraints && Array.isArray(c.multiConstraints)) {\n                    // on récupère la première contrainte, stockée normalement\n                    var constraint = new Constraint();\n                    constraint.crs = c.crs;\n                    constraint.bbox = c.bbox;\n                    constraint.minScaleDenominator = c.minScaleDenominator;\n                    constraint.maxScaleDenominator = c.maxScaleDenominator;\n                    constraint.temporalExtent = c.temporalExtent;\n                    data.constraints.push(constraint);\n\n                    // puis on récupère les autres contraintes, à partir de multiConstraints\n                    for (var i = 0; i < c.multiConstraints.length; i++) {\n                        constraint = new Constraint();\n                        constraint.crs = c.crs;\n                        constraint.minScaleDenominator = c.minScaleDenominator;\n                        constraint.maxScaleDenominator = c.maxScaleDenominator;\n                        constraint.bbox = c.multiConstraints[i].bbox;\n                        constraint.temporalExtent = c.multiConstraints[i].temporalExtent;\n                        data.constraints.push(constraint);\n                    }\n                } else {\n                    // cas d'une contrainte classique\n                    data.constraints.push(c);\n                }\n            }\n        },\n\n        // info : /LayerList/Layer/Extension/gpp:Layer/gpp:Originators/gpp:Originator/gpp:Constraints/gpp:Constraint/gpp:CRS\n        // ou : /LayerList/Layer/Extension/gpp:Layer/gpp:Constraints/gpp:Constraint/gpp:CRS\n        /** TODO : jsdoc block */\n        CRS : function (node, data) {\n            // nothing to do.\n            if (data && data.hasOwnProperty(\"crs\")) {\n                data.crs = __getChildValue(node);\n            }\n        },\n\n        // info : /LayerList/Layer/Extension/gpp:Layer/gpp:Thematics/gpp:Thematic\n        /** TODO : jsdoc block */\n        Thematic : function (node, lyr) {\n            if (lyr) {\n                var t = new Thematic();\n                t.inspire = false;\n                t.name = __getChildValue(node);\n                // si aucune thématique n'a été ajoutée, on crée le tableau vide\n                if (!lyr.thematics || !Array.isArray(lyr.thematics)) {\n                    lyr.thematics = [];\n                }\n                lyr.thematics.push(t);\n            }\n        },\n\n        // info : /LayerList/Layer/Extension/gpp:Layer/gpp:Thematics/gpp:InspireThematic\n        /** TODO : jsdoc block */\n        InspireThematic : function (node, lyr) {\n            if (lyr) {\n                var t = new Thematic();\n                t.inspire = true;\n                t.name = __getChildValue(node);\n                // si aucune thématique n'a été ajoutée, on crée le tableau vide\n                if (!lyr.thematics || !Array.isArray(lyr.thematics)) {\n                    lyr.thematics = [];\n                }\n                lyr.thematics.push(t);\n            }\n        },\n\n        // info : /LayerList/Layer/Extension/gpp:Layer/gpp:Originators/gpp:Originator\n        /** TODO : jsdoc block */\n        Originator : function (node, lyr) {\n            if (lyr) {\n                // info : contient des balises Attribution, Logo, URL, et Constraints\n                var o = new Originator();\n                o.name = node.getAttribute(\"name\");\n                __getChildNodes(node, o);\n                // si aucun originator n'a été ajouté, on crée le tableau vide\n                if (!lyr.originators || !Array.isArray(lyr.originators)) {\n                    lyr.originators = [];\n                }\n                lyr.originators.push(o);\n            }\n        },\n\n        // info : /LayerList/Layer/Extension/gpp:Layer/gpp:Originators/gpp:Originator/gpp:Attribution\n        /** TODO : jsdoc block */\n        Attribution : function (node, originator) {\n            if (originator && originator.hasOwnProperty(\"attribution\")) {\n                originator.attribution = __getChildValue(node);\n            }\n        },\n\n        // info : /LayerList/Layer/Extension/gpp:Layer/gpp:Originators/gpp:Originator/gpp:Logo\n        /** TODO : jsdoc block */\n        Logo : function (node, originator) {\n            if (originator && originator.hasOwnProperty(\"logo\")) {\n                originator.logo = __getChildValue(node);\n            }\n        },\n\n        // info : /LayerList/Layer/Extension/gpp:Layer/gpp:Originators/gpp:Originator/gpp:URL\n        /** TODO : jsdoc block */\n        URL : function (node, originator) {\n            if (originator && originator.hasOwnProperty(\"url\")) {\n                originator.url = __getChildValue(node);\n            }\n        },\n\n        // info : /LayerList/Layer/Extension/gpp:Layer/gpp:Legends/gpp:Legend\n        /** TODO : jsdoc block */\n        Legend : function (node, lyr) {\n            // 2 balises : sld:MinScaleDenominator et gpp:LegendURL\n            var l = new Legend();\n            __getChildNodes(node, l);\n            if (lyr) {\n                // si aucune légende n'a encore été ajoutée, on crée le tableau vide\n                if (!lyr.legends || !Array.isArray(lyr.legends)) {\n                    lyr.legends = [];\n                }\n                lyr.legends.push(l);\n            }\n        },\n\n        // info : /LayerList/Layer/Extension/gpp:Layer/gpp:Legends/gpp:Legend/gpp:LegendURL\n        /** TODO : jsdoc block */\n        LegendURL : function (node, legend) {\n            if (legend && legend.hasOwnProperty(\"format\")) {\n                legend.format = node.getAttribute(\"format\");\n                if (node.hasChildNodes) {\n                    var child = node.childNodes[0];\n                    var childName = child.localName || child.baseName || child.nodeName;\n                    if (childName === \"OnlineResource\" && legend.hasOwnProperty(\"url\")) {\n                        legend.url = child.getAttribute(\"xlink:href\");\n                    }\n                }\n            }\n        },\n\n        // info : /LayerList/Layer/Extension/gpp:Layer/gpp:QuickLook\n        /** TODO : jsdoc block */\n        QuickLook : function (node, lyr) {\n            // info : contient une balise OnlineResource avec l'url dans l'attribut \"xlink:href\"\n            if (node.hasChildNodes) {\n                var child = node.childNodes[0];\n                var childName = child.localName || child.baseName || child.nodeName;\n                if (childName === \"OnlineResource\" && lyr) {\n                    lyr.quicklookUrl = child.getAttribute(\"xlink:href\");\n                }\n            }\n        },\n\n        // info : /LayerList/Layer/Extension/gpp:Layer/gpp:MetadataURL\n        /** TODO : jsdoc block */\n        MetadataURL : function (node, lyr) {\n            if (lyr) {\n                // info : contient une balise OnlineResource avec l'url dans l'attribut \"xlink:href\"\n                var m = new Metadata();\n                m.format = node.getAttribute(\"format\");\n                if (node.hasChildNodes) {\n                    var child = node.childNodes[0];\n                    var childName = child.localName || child.baseName || child.nodeName;\n                    if (childName === \"OnlineResource\") {\n                        m.url = child.getAttribute(\"xlink:href\");\n                    }\n                }\n                // si aucune metadata n'a été ajoutée, on crée le tableau vide\n                if (!lyr.metadata) {\n                    lyr.metadata = [];\n                }\n                lyr.metadata.push(m);\n            }\n        },\n\n        // info : /LayerList/Layer/Extension/gpp:Layer/gpp:Keys/gpp:Key\n        /** TODO : jsdoc block */\n        Key : function (node, lyr) {\n            if (lyr) {\n                // récupération de la clé API\n                var key = node.getAttribute(\"id\");\n                // si on n'a pas encore ajouté de clé, on crée le tableau vide\n                if (!lyr.apiKeys || !Array.isArray(lyr.apiKeys)) {\n                    lyr.apiKeys = [];\n                }\n                lyr.apiKeys.push(key);\n\n                // récupération de l'url du service avec la clé API\n                var serverUrl = __getChildValue(node);\n                if (!lyr.serviceParams) {\n                    lyr.serviceParams = {};\n                }\n                if (!lyr.serviceParams.serverUrl) {\n                    lyr.serviceParams.serverUrl = {};\n                }\n                if (!lyr.serviceParams.serverUrl[key]) {\n                    lyr.serviceParams.serverUrl[key] = serverUrl;\n                }\n            }\n        }\n\n    },\n\n    ows : {\n        /** TODO : jsdoc block */\n        Identifier : function (node, data) {\n            if (data && data.hasOwnProperty(\"TMS\")) { // dans le cas d'un TileMatrixSet\n                data.identifier = __getChildValue(node);\n            } else if (data && data.hasOwnProperty(\"matrixId\")) { // dans le cas d'une TileMatrix\n                data.matrixId = __getChildValue(node);\n            }\n        },\n\n        /** TODO : jsdoc block */\n        SupportedCRS : function (node, tmsData) {\n            if (tmsData && tmsData.TMS && tmsData.TMS.hasOwnProperty(\"projection\")) {\n                tmsData.TMS.projection = __getChildValue(node);\n            }\n        }\n    },\n\n    sld : {\n        // info : /General/Extension/gpp:General/gpp:Territories/gpp:Territory/sld:MinScaleDenominator\n        // ou : /LayerList/Layer/sld:MinScaleDenominator\n        // ou : /LayerList/Layer/Extension/gpp:Layer/gpp:Originators/gpp:Originator/gpp:Constraints/sld:MinScaleDenominator\n        // ou : /LayerList/Layer/Extension/gpp:Layer/gpp:Legends/gpp:Legend/sld:MinScaleDenominator\n        /** TODO : jsdoc block */\n        MinScaleDenominator : function (node, data) {\n            var minScale = __getChildValue(node);\n            if (minScale && data) {\n                if (data.hasOwnProperty(\"defaultOptions\")) { // cas d'un territoire\n                    data.defaultOptions.minScaleDenominator = parseFloat(minScale);\n                } else if (data.lyr) { // cas d'une layer\n                    if (!data.lyr.globalConstraint) {\n                        data.lyr.globalConstraint = new Constraint();\n                    }\n                    data.lyr.globalConstraint.minScaleDenominator = parseFloat(minScale);\n                } else if (data.hasOwnProperty(\"minScaleDenominator\")) { // cas d'une contrainte ou d'une légende\n                    data.minScaleDenominator = parseFloat(minScale);\n                }\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:Territories/gpp:Territory/sld:MaxScaleDenominator\n        // ou : /LayerList/Layer/sld:MaxScaleDenominator\n        // ou : /LayerList/Layer/Extension/gpp:Layer/gpp:Originators/gpp:Originator/gpp:Constraints/sld:MaxScaleDenominator\n        /** TODO : jsdoc block */\n        MaxScaleDenominator : function (node, data) {\n            var maxScale = __getChildValue(node);\n            if (maxScale && data) {\n                if (data.hasOwnProperty(\"defaultOptions\")) { // cas d'un territoire\n                    data.defaultOptions.maxScaleDenominator = parseFloat(maxScale);\n                } else if (data.lyr) { // cas d'une layer\n                    if (!data.lyr.globalConstraint) {\n                        data.lyr.globalConstraint = new Constraint();\n                    }\n                    data.lyr.globalConstraint.maxScaleDenominator = parseFloat(maxScale);\n                } else if (data.hasOwnProperty(\"maxScaleDenominator\")) { // cas d'une contrainte\n                    data.maxScaleDenominator = parseFloat(maxScale);\n                }\n            }\n        }\n    },\n\n    wmts : {\n\n        // info : /LayerList/Layer/Extension/gpp:Layer/wmts:TileMatrixSetLink/wmts:TileMatrixSetLimits\n        /** TODO : jsdoc block */\n        TileMatrixSetLimits : function (node, lyr) {\n            // info : contient des balises wmts:TileMatrixLimits\n            if (lyr) {\n                var limits = {};\n                // on récupère les limites dans les balises TileMatrixLimits\n                __getChildNodes(node, limits);\n\n                if (!lyr.wmtsOptions) {\n                    lyr.wmtsOptions = {};\n                }\n                lyr.wmtsOptions.tileMatrixSetLimits = limits;\n            }\n        },\n\n        // info : /LayerList/Layer/Extension/gpp:Layer/wmts:TileMatrixSetLink/wmts:TileMatrixSetLimits/wmts:TileMatrixLimits\n        /** TODO : jsdoc block */\n        TileMatrixLimits : function (node, limits) {\n            var limit = new TileMatrixLimit();\n            var limitId;\n            if (node.hasChildNodes) {\n                var children = node.childNodes;\n                for (var i = 0; i < children.length; i++) {\n                    var child = children[i];\n                    var childName = child.localName || child.baseName || child.nodeName;\n                    if (childName === \"TileMatrix\") {\n                        limitId = __getChildValue(child);\n                    } else if (childName === \"MinTileRow\") {\n                        limit.minTileRow = __getChildValue(child);\n                    } else if (childName === \"MaxTileRow\") {\n                        limit.maxTileRow = __getChildValue(child);\n                    } else if (childName === \"MinTileCol\") {\n                        limit.minTileCol = __getChildValue(child);\n                    } else if (childName === \"MaxTileCol\") {\n                        limit.maxTileCol = __getChildValue(child);\n                    }\n                }\n                if (limitId && limits && !limits[limitId]) {\n                    limits[limitId] = limit;\n                }\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:TileMatrixSets/wmts:TileMatrixSet\n        // ou : // info : /LayerList/Layer/Extension/gpp:Layer/wmts:TileMatrixSetLink/wmts:TileMatrixSet\n        /** TODO : jsdoc block */\n        TileMatrixSet : function (node, data) {\n            // info : Describes a particular set of tile matrices.\n\n            if (data && data.tileMatrixSets) { // les tileMatrixSets de General\n                // nouvel objet TileMatrixSet\n                var tmsData = {};\n                tmsData.TMS = new TileMatrixSet();\n                tmsData.resolutions = [];\n\n                // lecture des informations du TMS\n                __getChildNodes(node, tmsData);\n\n                // récupération des identifiants des niveaux de matrice (pour faciliter l'accès au WMTS via les API carto)\n                var tileMatrices = tmsData.TMS.tileMatrices;\n                for (var tm in tileMatrices) {\n                    if (tileMatrices.hasOwnProperty(tm)) {\n                        tmsData.TMS.matrixIds.push(tm);\n                    }\n                }\n\n                if (tmsData.TMS.getProjection() === \"IGNF:WGS84G\" || tmsData.TMS.getProjection() === \"EPSG:4326\") {\n                    if (data.generalOptions && Array.isArray(data.generalOptions.wgs84Resolutions)) {\n                        var wgs84Resolutions = data.generalOptions.wgs84Resolutions;\n                        for (var i = 0; i < wgs84Resolutions.length; i++) {\n                            // info : les résolutions stockées dans wgs84Resolutions, issues de l'autoconf, sont des string\n                            tmsData.resolutions[i] = parseFloat(wgs84Resolutions[i]);\n                        }\n                    }\n                }\n\n                // tri des résolutions (par ordre décroissant cette fois)\n                if (Array.isArray(tmsData.resolutions) && tmsData.resolutions.sort !== undefined) {\n                    tmsData.resolutions.sort(\n                        function (x, y) {\n                            return y - x;\n                        }\n                    );\n                }\n                tmsData.TMS.nativeResolutions = tmsData.resolutions;\n\n                // ajout du TileMatrixSet à la variable config\n                data.tileMatrixSets[tmsData.identifier] = tmsData.TMS;\n            } else { // le TileMatrixSetLink d'une couche (layer)\n                if (data && !data.wmtsOptions) {\n                    data.wmtsOptions = {};\n                }\n                // ajout du lien vers le TMS\n                data.wmtsOptions.tileMatrixSetLink = __getChildValue(node);\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:TileMatrixSets/wmts:TileMatrixSet/wmts:TileMatrix\n        /** TODO : jsdoc block */\n        TileMatrix : function (node, tmsData) {\n            // info : Describes a particular tile matrix.\n\n            if (tmsData) {\n                // nouveau niveau de matrice : TileMatrix\n                var tileMatrix = new TileMatrix();\n\n                // lecture des information du TileMatrix\n                __getChildNodes(node, tileMatrix);\n\n                // calcul de la résolution associée au dénominateur d'échelle du niveau de pyramide, selon la projection.\n                if (tmsData.TMS && tmsData.TMS.getProjection()) {\n                    var proj = tmsData.TMS.getProjection();\n                    if (proj === \"EPSG:3857\" || proj === \"EPSG:2154\") {\n                        // calcul de la résolution associée, en m/px\n                        // en se basant sur une \"taille standard de pixel\" de 0.28mm*0.28mm (standard WMTS 1.0)\n                        var r = tileMatrix.scaleDenominator * 0.00028;\n                        if (tmsData.resolutions && Array.isArray(tmsData.resolutions)) {\n                            tmsData.resolutions.push(r);\n                        }\n                    }\n                }\n\n                // ajout du TileMatrix au TileMatrixSet\n                if (tmsData.TMS && tmsData.TMS.tileMatrices) {\n                    tmsData.TMS.tileMatrices[tileMatrix.matrixId] = tileMatrix;\n                }\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:TileMatrixSets/wmts:TileMatrixSet/wmts:TileMatrix/wmts:ScaleDenominator\n        /** TODO : jsdoc block */\n        ScaleDenominator : function (node, tileMatrix) {\n            var scale = __getChildValue(node);\n            if (scale && tileMatrix && tileMatrix.hasOwnProperty(\"scaleDenominator\")) {\n                tileMatrix.scaleDenominator = parseFloat(scale);\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:TileMatrixSets/wmts:TileMatrixSet/wmts:TileMatrix/wmts:TopLeftCorner\n        /** TODO : jsdoc block */\n        TopLeftCorner : function (node, tileMatrix) {\n            var values = __getChildValue(node).split(\" \");\n            if (values && tileMatrix) {\n                tileMatrix.topLeftCorner = {};\n                tileMatrix.topLeftCorner.x = parseFloat(values[0]);\n                tileMatrix.topLeftCorner.y = parseFloat(values[1]);\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:TileMatrixSets/wmts:TileMatrixSet/wmts:TileMatrix/wmts:TileWidth\n        /** TODO : jsdoc block */\n        TileWidth : function (node, tileMatrix) {\n            var value = __getChildValue(node);\n            if (value && tileMatrix && tileMatrix.hasOwnProperty(\"tileWidth\")) {\n                tileMatrix.tileWidth = parseInt(value, 10);\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:TileMatrixSets/wmts:TileMatrixSet/wmts:TileMatrix/wmts:TileHeight\n        /** TODO : jsdoc block */\n        TileHeight : function (node, tileMatrix) {\n            var value = __getChildValue(node);\n            if (value && tileMatrix && tileMatrix.hasOwnProperty(\"tileHeight\")) {\n                tileMatrix.tileHeight = parseInt(value, 10);\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:TileMatrixSets/wmts:TileMatrixSet/wmts:TileMatrix/wmts:MatrixWidth\n        /** TODO : jsdoc block */\n        MatrixWidth : function (node, tileMatrix) {\n            var value = __getChildValue(node);\n            if (value && tileMatrix && tileMatrix.hasOwnProperty(\"matrixWidth\")) {\n                tileMatrix.matrixWidth = parseInt(value, 10);\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:TileMatrixSets/wmts:TileMatrixSet/wmts:TileMatrix/wmts:MatrixHeight\n        /** TODO : jsdoc block */\n        MatrixHeight : function (node, tileMatrix) {\n            var value = __getChildValue(node);\n            if (value && tileMatrix && tileMatrix.hasOwnProperty(\"matrixHeight\")) {\n                tileMatrix.matrixHeight = parseInt(value, 10);\n            }\n        }\n    },\n\n    /** TODO : jsdoc block */\n    serviceException : function (node) {\n        var response = {};\n        if (node.hasChildNodes()) {\n            var children = node.childNodes;\n            var child;\n            for (var i = 0; i < children.length; i++) {\n                child = children[i];\n                if (child.nodeName === \"exception\") {\n                    response.exceptionReport = AutoConfResponseReader.READERS[\"exception\"](child);\n                }\n            }\n        }\n        return response;\n    },\n\n    /** TODO : jsdoc block */\n    exception : function (node) {\n        var exceptionReport = {};\n\n        // get exception code\n        var exceptionCode = node.getAttribute(\"code\");\n        if (exceptionCode) {\n            exceptionReport.exceptionCode = exceptionCode;\n        }\n\n        // get exception message\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            exceptionReport.exception = textNode.nodeValue;\n        }\n\n        return exceptionReport;\n    }\n\n};\n\n/**\n * Méthode permettant de lancer la lecture d'une réponse XML du service d'autoconf,\n *      à l'aide des READERS de la classe.\n *\n * @method AutoConfResponseReader.read\n * @param {DOMElement} root - racine de la réponse XML à lire\n * @return {Object} config|exceptionReport : l'objet contenant les informations de la réponse XML,\n *      sous la forme d'un objet AutoConfResponse, ou un objet littéral exceptionReport si le service a renvoyé une exception.\n * @static\n * @memberof AutoConfResponseReader\n */\nAutoConfResponseReader.read = function (root) {\n    if (root.nodeName === \"ViewContext\") {\n        var nsPrefix = root.prefix || AutoConfResponseReader.DEFAULTPREFIX;\n        var config = AutoConfResponseReader.READERS[nsPrefix][root.nodeName](root);\n        return config;\n    } else if (root.nodeName === \"serviceException\") {\n        var exceptionReport = AutoConfResponseReader.READERS[root.nodeName](root);\n        return exceptionReport;\n    } else {\n        throw new Error(\"Erreur lors de la lecture de la réponse : elle n'est pas au format attendu.\");\n    }\n};\n\n/**\n * Récupération des attributs d'un noeud élément\n *\n * @private\n * @memberof AutoConfResponseReader\n * @method __getAttributes\n * @param {DOMElement} node - noeud contenant l'attribut recherché\n * @return {Object} nodeAttributes - objet contenant les noms et valeurs des différents attributs\n */\nfunction __getAttributes (node) {\n    if (node.attributes.length > 0) {\n        var nodeAttributes = {};\n        var attributes = node.attributes;\n        for (var i = 0; i < attributes.length; i++) {\n            var attribute = attributes[i];\n            nodeAttributes[attribute.nodeName] = attribute.nodeValue;\n        }\n        return nodeAttributes;\n    }\n}\n\n/**\n * Récupération des noeuds enfants (seulement de type ELEMENT), à partir d'un noeud donné, pour lecture (readNode).\n *\n * @private\n * @memberof AutoConfResponseReader\n * @method __getChildNodes\n * @param {DOMElement} node - a DOM node\n * @param {Array|Object} [data] - an object to be filled with node data\n */\nfunction __getChildNodes (node, data) {\n    if (node.hasChildNodes()) {\n        var children = node.childNodes;\n        var child;\n        var childName;\n        var childPrefix;\n\n        for (var i = 0; i < children.length; i++) {\n            child = children[i];\n\n            if (child.nodeType === 1) { // 1 === node.ELEMENT_NODE\n                childName = child.localName || child.baseName || child.nodeName;\n                childPrefix = child.prefix || AutoConfResponseReader.DEFAULTPREFIX;\n\n                if (AutoConfResponseReader.READERS[childPrefix][childName]) {\n                    var reader = AutoConfResponseReader.READERS[childPrefix][childName];\n                    reader(child, data);\n                } else {\n                    __getChildNodes(child, data);\n                }\n            }\n        }\n    }\n}\n\n/**\n * Lecture de la valeur du premier child d'un noeud, si elle existe.\n *\n * @private\n * @memberof AutoConfResponseReader\n * @method __getChildValue\n * @param {DOMElement} node - a DOM node\n * @return {String} value - valeur du firstChild du noeud en entrée, ou chaîne vide.\n */\nfunction __getChildValue (node) {\n    var textNode;\n    var value = \"\";\n\n    if (node.hasChildNodes()) {\n        textNode = node.firstChild;\n        if (textNode.nodeType === 3 || textNode.nodeType === 4) { // 3 === node.TEXT_NODE\n            value = textNode.nodeValue;\n        }\n    }\n    return value;\n}\n\n/**\n * Vérification des attributs du service, dans la balise XLS de la réponse :\n *      version, namespaces, et namespace par défaut doivent correspondre à ceux attendus.\n *\n * @private\n * @memberof AutoConfResponseReader\n * @method __checkServiceAttributes\n * @param {DOMElement} viewContextNode - a DOM node, corresponding to XLS first tag.\n */\nfunction __checkServiceAttributes (viewContextNode) {\n    if (viewContextNode.attributes.length > 0) {\n        // on récupère et parcourt les attributs de la balise XLS de la réponse\n        var xlsAttributes = __getAttributes(viewContextNode);\n        for (var att in xlsAttributes) {\n            if (xlsAttributes.hasOwnProperty(att)) {\n                // vérification de la version\n                if (att === \"version\") {\n                    if (xlsAttributes[\"version\"] !== AutoConfResponseReader.VERSION) {\n                        console.log(\"[AutoConfResponseReader] autoconf version is not the expected one : there may be errors in parsing\");\n                        return;\n                    }\n                }\n\n                // on vérifie que l'uri du namespace par défaut est bien celle que l'on attend\n                if (att === \"xmlns\") {\n                    if (xlsAttributes[att] !== AutoConfResponseReader.NAMESPACES.xmlns) {\n                        console.log(\"[AutoConfResponseReader] autoconf response default namespace is not the expected one\");\n                        return;\n                    }\n                    continue;\n                }\n\n                var prefix = att.split(\":\")[0];\n                var ns = att.split(\":\")[1];\n\n                // si on a un autre xmlns, on vérifie aussi les URI\n                if (prefix === \"xmlns\" && ns) {\n                    // si l'attribut correspond à un namespace défini dans le reader\n                    if (AutoConfResponseReader.NAMESPACES[ns]) {\n                        // il faut que les URI correspondent aussi.\n                        if (AutoConfResponseReader.NAMESPACES[ns] !== xlsAttributes[att]) {\n                            console.log(\"[AutoConfResponseReader] autoconf response \" + att + \" namespace is not the expected one\");\n                            return;\n                        }\n                    }\n                }\n\n                // pour finir on vérifie la localisation du schema XSD du service\n                if (ns === \"schemaLocation\") {\n                    if (xlsAttributes[att] !== AutoConfResponseReader.SCHEMALOCATION[0] && xlsAttributes[att] !== AutoConfResponseReader.SCHEMALOCATION[1]) {\n                        console.log(\"[AutoConfResponseReader] autoconf response schema location is not the expected one\");\n                        return;\n                    }\n                }\n            }\n        }\n    }\n}\n\nexport default AutoConfResponseReader;\n","/**\n * Factory pour générer une reponse JSON à partir d'un XML\n *\n * @module AutoConfReponseFactory\n * @private\n * @alias Gp.Services.AutoConf.Response.AutoConfResponseFactory\n * @todo gérer le cas du JSONP qui encapsule du XML ?\n */\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport MRes from \"../../../Utils/MessagesResources\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport XML from \"../../../Formats/XML\";\nimport AutoConfResponseReader from \"../Formats/AutoConfResponseReader\";\n\nvar AutoConfReponseFactory = {\n\n    /**\n     * interface unique\n     * Fabrique d'analyse des réponses (xml) du service d'autoconfiguration.\n     * Création d'un format XML, auquel on associe un reader et une chaîne XML, et qui renverra un objet JavaScript correspondant.\n     * Si une erreur est levée lors de l'analyse, ou si l'objet est vide ou contient une exception : appel de la fonction de callback onError\n     * Sinon, appel de la fonction de callback onSuccess (définies dans Autoconf.analyzeResponse)\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant AutoConf\n     *\n     * @example\n     *   var options = {\n     *      layerId :\n     *      response :\n     *      rawResponse :\n     *      scope :\n     *      onSuccess :\n     *      onError :\n     *   };\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"AutoConfResponseFactory\");\n        logger.trace([\"AutoConfResponseFactory::build()\"]);\n\n        // data de type AutoConfResponse\n        var data = null;\n\n        if (options.response) {\n            if (options.rawResponse) {\n                data = options.response;\n            } else {\n                try {\n                    var p = new XML({\n                        reader : AutoConfResponseReader\n                    });\n\n                    if (typeof options.response === \"string\") {\n                        p.setXMLString(options.response);\n                    } else {\n                        p.setXMLDoc(options.response);\n                    }\n\n                    data = p.parse();\n                } catch (e) {\n                    // si une exception a été levée, on appelle le callback d'erreur avec le message renvoyé\n                    var message = e.message;\n                    if (typeof options.response === \"string\") {\n                        message += \"\\n (raw response service'\" + options.response + \"')\";\n                    } else {\n                        message += \"\\n (raw response service'\" + options.response.documentElement.innerHTML + \"')\";\n                    }\n\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", message),\n                        status : 200,\n                        type : ErrorService.TYPE_SRVERR\n                    }));\n                    return;\n                }\n\n                // Si la réponse est vide, on appelle le callback d'erreur\n                var isEmpty = true;\n                for (var key in data) {\n                    if (data.hasOwnProperty(key)) {\n                        isEmpty = false;\n                    }\n                }\n                if (isEmpty) {\n                    options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_EMPTY_2\")));\n                    return;\n                }\n\n                // Si la réponse contenait une exception renvoyée par le service, on appelle le callback d'erreur\n                if (data.exceptionReport) {\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", data.exceptionReport),\n                        type : ErrorService.TYPE_SRVERR,\n                        status : 200\n                    }));\n                    return;\n                }\n            }\n        } else {\n            // si la réponse (xmlString) est vide, on appelle le callback d'erreur\n            options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n            return;\n        }\n\n        // définition de la variable globale Gp.Config à partir de la réponse\n        var scope = typeof window !== \"undefined\" ? window : {};\n\n        if (!scope.Gp) {\n            scope.Gp = {};\n        }\n        if (!scope.Gp.Config) {\n            scope.Gp.Config = data;\n        } else {\n            this.mergeConfig(scope.Gp.Config, data, options.layerId);\n        }\n\n        // si tout s'est bien passé, on appelle le callback de succès\n        options.onSuccess.call(options.scope, scope.Gp.Config);\n    },\n\n    /**\n     * Fonction utilisée dans le cas où l'autoconfiguration est appelée plusieurs fois\n     * (par exemple pour des clés différentes ou pour des infos sur une couche agrégée)\n     *\n     * @method mergeConfig\n     * @static\n     * @param {Object} GpConfig - Variable Gp.Config préexistante\n     * @param {Object} data - la nouvelle réponse de l'autoconf, à fusionner avec GpConfig\n     * @param {String} [layerId] - l'identifiant d'une couche agrégée dans le cas d'une 2è opération de l'autoconf\n     */\n    mergeConfig : function (GpConfig, data, layerId) {\n        if (data && GpConfig) {\n            // on boucle sur les propriétés (generalOptions, layers, projections, services, tileMatrixSets, territories)\n            for (var prop in data) {\n                if (data.hasOwnProperty(prop)) {\n                    // on récupère la nouvelle clé dans generalOptions\n                    if (prop === \"generalOptions\") {\n                        for (var key in data[prop].apiKeys) {\n                            if (data[prop].apiKeys.hasOwnProperty(key) && !GpConfig.generalOptions.apiKeys[key]) {\n                                GpConfig.generalOptions.apiKeys[key] = data[prop].apiKeys[key];\n                            }\n                        }\n                        // on récupère les nouveaux objets (TMS, layers, projections...)\n                    } else {\n                        if (GpConfig[prop]) {\n                            for (var obj in data[prop]) {\n                                if (data[prop].hasOwnProperty(obj) && !GpConfig[prop][obj]) {\n                                    GpConfig[prop][obj] = data[prop][obj];\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n\n            // dans le cas d'une autoconf pour une couche agrégée, on récupère l'info\n            if (layerId) {\n                var aggregatedLayers = [];\n\n                for (var lyr in data.layers) {\n                    if (data.layers.hasOwnProperty(lyr)) {\n                        aggregatedLayers.push(lyr);\n                    }\n                }\n\n                if (GpConfig.layers[layerId]) {\n                    GpConfig.layers[layerId].aggregatedLayers = aggregatedLayers;\n                }\n            }\n        }\n    }\n};\n\nexport default AutoConfReponseFactory;\n","\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport _ from \"../../Utils/MessagesResources\";\nimport Helper from \"../../Utils/Helper\";\nimport ErrorService from \"../../Exceptions/ErrorService\";\nimport DefaultUrlService from \"../DefaultUrlService\";\nimport CommonService from \"../CommonService\";\nimport AutoConfResponseFactory from \"./Response/AutoConfResponseFactory\";\n\n/**\n * @classdesc\n * Appel du service d'autoconfiguration du Géoportail\n *\n * @private\n * @constructor\n * @extends {Gp.Services.CommonService}\n * @alias Gp.Services.AutoConf\n *\n * @param {Object} options - options spécifiques au service (+ les options heritées)\n *\n * @param {String} [options.layerId] - Le nom de l'agrégat (couche) dont on veut connaître les informations détaillées.\n *      La présence de cette propriété implique l'utilisation de la deuxième opération du service pour accéder aux informations d'une couche aggrégée.\n *      Dans ce cas, la fonction effectuera quand même dans un premier temps la récupération des informations de l'auto-\n *      configuration complète, sauf si un premier appel à l'autoconf a déjà été fait avec cette clé (i.e. si la variable globale est définie\n *      pour la clé de contrat). Elle ira ensuite chercher les informations des couches agrégées, qui seront ajoutées à la variable globale Gp.Config.\n *\n * @example\n *   var options = {\n *      // options communes aux services\n *      apiKey : \"apikey\",\n *      protocol : 'JSONP', // JSONP|XHR\n *      timeOut : 10000, // ms\n *      rawResponse : false, // true|false\n *      scope : null, // this\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *      layerId : \"ORTHOIMAGERY.ORTHOPHOTOS.3D$GEOPORTAIL:OGC:WMTS@aggregate\"\n *   };\n */\nfunction AutoConf (options) {\n    if (!(this instanceof AutoConf)) {\n        throw new TypeError(_.getMessage(\"CLASS_CONSTRUCTOR\", \"AutoConf\"));\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     * FIXME instance ou classe ?\n     */\n    this.CLASSNAME = \"AutoConf\";\n\n    // Autoconf default protocol remains JSONP (#see http://ignf.github.io/geoportal-access-lib/latest/jsdoc/tutorial-optimize-getconfig.html)\n    if (!options) {\n        options = {};\n    }\n    options.protocol = options.protocol || \"JSONP\";\n\n    // appel du constructeur par heritage\n    CommonService.apply(this, arguments);\n\n    this.logger = Logger.getLogger(\"Gp.Services.AutoConf\");\n    this.logger.trace(\"[Constructeur AutoConf (options)]\");\n\n    // #####################\n    // analyse des options\n    // #####################\n\n    // gestion de l'url du service par defaut\n    if (!this.options.serverUrl) {\n        // si l'url n'est pas renseignée, il faut utiliser les urls par defaut\n        // en fonction du nombre de clés en entrée et du paramètre layerId\n        if (!this.options.serverUrl) {\n            var lstUrlByDefault = DefaultUrlService.AutoConf.url(this.options.apiKey);\n\n            if (!this.options.layerId) {\n                // cas d'une autoconf simple\n                if (Array.isArray(this.options.apiKey) && this.options.apiKey.length > 0) {\n                    // cas d'un tableau de clés en entrée\n                    this.options.serverUrl = lstUrlByDefault.apiKeys;\n                } else {\n                    this.options.serverUrl = lstUrlByDefault.apiKey;\n                }\n            } else {\n                // cas d'une autoconf pour des couches aggrégées\n                this.options.serverUrl = lstUrlByDefault.aggregate + this.options.layerId;\n            }\n        }\n    }\n\n    // INFO\n    // le service ne repond pas en mode POST (405 Method Not Allowed)\n    if (this.options.protocol === \"XHR\" && this.options.httpMethod === \"POST\") {\n        this.logger.warn(\"Le service ne gére pas le mode d'interrogation en POST, on bascule sur du GET !\");\n        this.options.httpMethod = \"GET\"; // on surcharge !\n    }\n\n    // #####################\n    // attributs d'instances\n    // #####################\n\n    /**\n     * Format forcé de la réponse du service : \"xml\"\n     * sauf si l'on souhaite une reponse brute (options.rawResponse)\n     */\n    this.options.outputFormat = (this.options.rawResponse) ? \"\" : \"xml\";\n}\n\n/**\n * @lends module:AutoConf#\n */\n\nAutoConf.prototype = Object.create(CommonService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/*\n * Constructeur (alias)\n */\nAutoConf.prototype.constructor = AutoConf;\n\n/**\n * Création de la requête (overwrite)\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback de succès de la création de la requête\n */\nAutoConf.prototype.buildRequest = function (error, success) {\n    var scope = typeof window !== \"undefined\" ? window : {};\n\n    if (scope.Gp && scope.Gp.Config && scope.Gp.Config.generalOptions && scope.Gp.Config.layers) {\n        if (scope.Gp.Config.generalOptions.apiKeys[this.options.apiKey]) {\n            if (this.options.layerId) { // cas d'une autoconf + détaillée sur une couche agrégée\n                if (scope.Gp.Config.layers[this.options.layerId] && scope.Gp.Config.layers[this.options.layerId].aggregatedLayers) {\n                    this.logger.warn(\"Gp.Config existe déjà pour cette clé et cette couche\");\n                    this.options.onSuccess.call(this, scope.Gp.Config);\n                    return;\n                }\n            } else {\n                this.logger.warn(\"Gp.Config existe déjà pour cette clé\");\n                this.options.onSuccess.call(this, scope.Gp.Config);\n                return;\n            }\n        }\n    }\n\n    // requete par defaut\n    this.request = \"\";\n\n    // gestion de l'autoconf local\n    // Le fichier en local doit respecter le format de sortie du service.\n    //  - En XHR, le format est en xml\n    //  - En JSONP, le format est en xml encapsulé dans un json avec une fonction de callback\n    //    ex. callback ({\"http\":{\"status\":200,\"error\":null},\"xml\":\"...\"})\n    var bLocal;\n    if (this.options.serverUrl.indexOf(\"http://\") === -1) {\n        bLocal = true;\n    } else {\n        bLocal = false;\n    }\n\n    // FIXME param. KVP optionnel sur un service uniquement (pas sur un autoconf local !)\n    if (!bLocal && this.layerId) {\n        this.request = Helper.normalyzeParameters({\n            layerId : this.layerId\n        });\n    }\n\n    // normalement pas d'erreur d'autoconf...\n    (this.request || this.request === \"\")\n        ? success.call(this, this.request)\n        : error.call(this, new ErrorService(_.getMessage(\"SERVICE_REQUEST_BUILD\")));\n};\n\n/**\n * Analyse de la reponse (overwrite)\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback de succès de l'analyse de la réponse\n */\nAutoConf.prototype.analyzeResponse = function (error, success) {\n    if (this.response) {\n        var options = {\n            layerId : this.options.layerId,\n            response : this.response,\n            rawResponse : this.options.rawResponse,\n            onSuccess : success,\n            onError : error,\n            scope : this\n        };\n\n        AutoConfResponseFactory.build(options);\n    } else {\n        error.call(this, new ErrorService(_.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n    }\n};\n\nexport default AutoConf;\n","import Logger from \"../../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n *\n * Entête de la requête XSL\n *\n * @example\n * // header XSL\n * header = new RequestHeader ();\n * header.srsName = \"epsg:4326\";\n * header.toString();\n * // out ->\n * // <RequestHeader srsName=\"epsg:4326\"/>\n *\n * @constructor\n * @alias Gp.Formats.XLS.RequestHeader\n * @param {Object} options - options\n * @param {Object}   options.srsName - projection\n * @param {Function} options.onsuccess - function callback success (TODO)\n * @param {Function} options.onerror   - function callback error   (TODO)\n *\n * @private\n */\nfunction RequestHeader (options) {\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur RequestHeader ()]\");\n\n    if (!(this instanceof RequestHeader)) {\n        throw new TypeError(\"RequestHeader constructor cannot be called as a function.\");\n    }\n\n    // options par defaut\n    this.options = options || {\n        srsName : \"EPSG:4326\"\n    };\n\n    // et on ajoute les options en paramètre aux options par défaut\n    for (var opt in options) {\n        if (options.hasOwnProperty(opt)) {\n            this.options[opt] = options[opt];\n        }\n    }\n}\n\nRequestHeader.prototype = {\n\n    /**\n     * @lends module:RequestHeader#\n     */\n\n    /**\n     * request (out)\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * Template de la requête.\n     * substitution des valeurs suivantes :\n     * __SRSNAME__\n     */\n    template : \"<RequestHeader srsName=\\\"__SRSNAME__\\\"/>\",\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : RequestHeader,\n\n    /**\n     * toString\n     * @returns {String} requête\n     */\n    toString : function () {\n        var template = null;\n        template = this.template;\n        template = template.replace(/__SRSNAME__/g, this.options.srsName);\n        this.requestString = template;\n        return this.requestString;\n    }\n};\n\nexport default RequestHeader;\n","/* jshint bitwise: false */\nimport Logger from \"../../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n *\n * Requête XLS\n *\n * @example\n * // request XSL\n * request = new Request ();\n * request.maximumResponses = 26;\n * request.methodName = \"GeocodeRequest\";\n * request.version = \"1.2\";\n * request.toString();\n * // out ->\n * // <Request maximumResponses=\"26\" methodName=\"GeocodeRequest\" requestID=\"uid1349081498314_388\" version=\"1.2\">\n * //   <!-- __LUS__ -->\n * //  </Request>\n *\n * @constructor\n * @alias Gp.Formats.XLS.Request\n * @param {Object} options - options\n * @param {Object}   options.maximumResponses - 25\n * @param {String}   options.methodName - nom de l'objet LUS, \"GeocodeRequest\" | \"ReverseGeocodeRequest\"\n * @param {String}   options.version - '1.2'\n * @param {Function} options.onsuccess - function callback success (TODO)\n * @param {Function} options.onerror   - function callback error   (TODO)\n *\n * @private\n */\nfunction Request (options) {\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur Request ()]\");\n\n    if (!(this instanceof Request)) {\n        throw new TypeError(\"Request constructor cannot be called as a function.\");\n    }\n\n    // options par defaut\n    this.options = options || {\n        maximumResponses : 25,\n        methodName : null,\n        version : \"1.2\"\n    };\n\n    // et on ajoute les options en paramètre aux options par défaut\n    for (var opt in options) {\n        if (options.hasOwnProperty(opt)) {\n            this.options[opt] = options[opt];\n        }\n    }\n}\n\nRequest.prototype = {\n\n    /**\n     * @lends module:Request#\n     */\n\n    /**\n     * request (out)\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * Template de la requête.\n     * substitution des valeurs suivantes :\n     * __MAXRESPONSES__, __METHODNAME__, __UUID__, __VERSION__\n     * __REQUESTSERVICE__\n     */\n    template : \"<Request maximumResponses=\\\"__MAXRESPONSES__\\\" methodName=\\\"__METHODNAME__\\\" requestID=\\\"__UUID__\\\" version=\\\"__VERSION__\\\">\" +\n        \"<!-- __REQUESTSERVICE__ -->\" +\n        \"</Request>\",\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : Request,\n\n    /**\n     * an rfc4122 version 4 compliant guid\n     * @returns {String} guid\n     */\n    guid : function () {\n        // INFO\n        // cf. http://byronsalau.com/blog/how-to-create-a-guid-uuid-in-javascript/\n        return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n            var r = Math.random() * 16 | 0;\n            var v = c === \"x\" ? r : (r & 0x3 | 0x8);\n            return v.toString(16);\n        });\n    },\n\n    /**\n     * toString\n     * @returns {String} requête\n     */\n    toString : function () {\n        var template = null;\n        template = this.template;\n        template = template.replace(/__MAXRESPONSES__/g, this.options.maximumResponses);\n        template = template.replace(/__METHODNAME__/g, this.options.methodName);\n        template = template.replace(/__UUID__/g, this.guid());\n        template = template.replace(/__VERSION__/g, this.options.version);\n\n        this.requestString = template;\n        return this.requestString;\n    }\n};\n\nexport default Request;\n","import Logger from \"../../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n * @private\n *\n * @constructor\n * @alias Gp.Formats.XLS.AbstractService\n *\n * @param {Object} [options] - options\n */\nfunction AbstractService (options) {\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur AbstractService ()]\");\n\n    if (!(this instanceof AbstractService)) {\n        throw new TypeError(\"AbstractService constructor cannot be called as a function.\");\n    }\n\n    // options par defaut\n    this.options = options || {};\n\n    // et on ajoute les options en paramètre aux options par défaut\n    for (var opt in options) {\n        if (options.hasOwnProperty(opt)) {\n            this.options[opt] = options[opt];\n        }\n    }\n}\n\n/**\n * @lends module:AbstractService#\n */\nAbstractService.prototype = {\n\n    /**\n     * request (out)\n     * @type {String}\n     */\n    strRequest : null,\n\n    /**\n     * objet Request\n     * @type {Request}\n     */\n    oRequest : null,\n\n    /**\n     * Filter\n     * @type {FilterExtension}\n     */\n    oFilter : null,\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : AbstractService,\n\n    /**\n     * Ajout d'un objet de type Request : GeocodeRequest / ReverseGeocodeRequest / RouteRequest\n     *\n     * @param {Object} oRequest - GeocodeRequest / ReverseGeocodeRequest / RouteRequest\n     */\n    addRequest : function (oRequest) {\n        this.logger.error(\"overwritten method !\");\n    },\n\n    /**\n     * Ajout d'un objet de type FilterExtension : GeocodeFilterExtension ou RouteRequestExtension\n     *\n     * @param {Object} oFilter - GeocodeFilterExtension ou RouteRequestExtension\n     */\n    addFilter : function (oFilter) {\n        this.logger.error(\"overwritten method !\");\n    },\n\n    /**\n     * toString\n     */\n    toString : function () {\n        this.logger.error(\"overwritten method !\");\n    }\n};\n\nexport default AbstractService;\n","import Logger from \"../Utils/LoggerByDefault\";\nimport RequestHeader from \"./XLS/RequestHeader\";\nimport Request from \"./XLS/Request\";\nimport AbstractService from \"./XLS/AbstractService\";\n\n/**\n * @classdesc\n *\n * standard OpenLS\n * standard XLS\n * (version 1.2)\n *\n * Réfs :\n *     - {@link http://schemas.opengis.net/ols/1.2/}\n *     - {@link http://www.opengeospatial.org/standards/ols}\n *     - {@link http://wxs.ign.fr/schemas/}\n *\n *\n * Création du template XLS (avec gestion des namespaces)\n * ------------------------\n * ```\n *   balise xsd : element name=\"XLS\" attribute name=\"version\" [(attribute ref=\"lang\")]\n * ```\n *\n * Exemple :\n * ```\n * <XLS xmlns=\"http://www.opengis.net/xls\" version=\"1.2\">\n *   < (ref. OLS) />\n * </XLS>\n * ```\n * ```\n * <xls:XLS xmlns:xls=\"http://www.opengis.net/xls\" version=\"1.2\">\n *   <xls: (ref. OLS) />\n * </xls:XLS>\n * ```\n *\n * Création des templates OLS pour LocationUtilityService\n * ------------------------------------------------------\n *\n * Exemple :\n *\n * ```\n * <RequestHeader srsName=\"epsg:4326\"/>\n * <Request maximumResponses=\"26\" methodName=\"GeocodeRequest\" requestID=\"uid1349081498314_388\" version=\"1.2\">\n *      <GeocodeRequest>\n *          <Address countryCode=\"PositionOfInterest\">\n *              <freeFormAddress>saint mandé</freeFormAddress>\n *          </Address>\n *      </GeocodeRequest>\n *  </Request>\n * ```\n * ```\n * <RequestHeader sessionID=\"\" />\n * <Request methodName=\"ReverseGeocodeRequest\" version=\"1.2\" requestID=\"\" maximumResponses=\"10\">\n *   <ReverseGeocodeRequest>\n *     <Position>\n *       <gml:Point xmlns:gml=\"http://www.opengis.net/gml\">\n *           <gml:pos>50.347775 3.205098</gml:pos>\n *       </gml:Point>\n *     </Position>\n *     <ReverseGeocodePreference>StreetAddress</ReverseGeocodePreference>\n *  </ReverseGeocodeRequest>\n * </Request>\n * ```\n * ```\n * Geocodage direct (balise xsd) :\n *   element ref=\"RequestHeader\" [ (attribute name=\"clientName\" attribute name=\"clientPassword\" attribute name=\"sessionID\" attribute name=\"srsName\" attribute name=\"MSID\") ]\n *     element name=\"Request\" attribute name=\"methodName\" attribute name=\"version\" attribute name=\"requestID\" [ attribute name=\"maximumResponses\" ]\n *       element name=\"GeocodeRequest\" attribute name=\"returnFreeForm\"\n *         element ref=\"xls:Address\"\n * ```\n * ```\n * Geocodage inverse (balise xsd) :\n *   element ref=\"RequestHeader\" [ (attribute name=\"clientName\" attribute name=\"clientPassword\" attribute name=\"sessionID\" attribute name=\"srsName\" attribute name=\"MSID\") ]\n *     element name=\"Request\" attribute name=\"methodName\" attribute name=\"version\" attribute name=\"requestID\" [ attribute name=\"maximumResponses\" ]\n *       element name=\"ReverseGeocodeRequest\"\n *         element ref=\"xls:Position\"\n *         element name=\"ReverseGeocodePreference\" (enumeration)\n * ```\n *\n * Il existe 3 sous ensembles d'objets :\n *     - RequestHeader\n *     - Request\n *     - ReverseGeocodeRequest, GeocodeRequest\n *\n * GeocodeRequest est composé d'un objet {@link Gp.Services.Geocode.Response.GeocodeLocation}.\n * ReverseGeocodeRequest est composé d'un objet {@link Gp.Services.ReverseGeocode.Response.ReverseGeocodeLocation}.\n *\n * Les locations font appels aux objets suivants qui possèdent des attributs spécifiques\n * en fonction du type de table de geocodage interrogé :\n *     - StreetAddress\n *     - CadastralParcel\n *     - PositionOfInterest\n *     - Administratif\n *\n *\n * et des élements sous jacents tels que :\n *     - ReverseGeocodePreference -> tables de geocodages :\n *         - StreetAddress\n *         - CadastralParcel\n *         - PositionOfInterest\n *         - Administratif (une balise par table)\n *     - Position -> standard GML 3.2.1\n *     - Address  -> cf. ci-dessous\n *\n * ```\n * Position (balise xsd) :\n *   ex. <Position><gml:Point xmlns:gml=\"http://www.opengis.net/gml\"><gml:pos>50.347775 3.205098</gml:pos></gml:Point></Position>\n *   ex. <Position><gml:CircleByCenterPoint xmlns:gml=\"http://www.opengis.net/gml\"><gml:pos>48.85978570614691 2.2913572761128878</gml:pos><gml:radius>1000</gml:radius></gml:CircleByCenterPoint></Position>\n *   (au choix)\n *   element ref=\"gml:Point\"\n *   element ref=\"gml:CircleByCenterPoint\"\n *   element ref=\"gml:Polygon\"\n *   element ref=\"gml:MultiPolygon\"\n *   les autres elemennts ne sont pas implémentés (QoP, Speed, Direction, Time, ...)\n *\n * Address (balise xsd) :\n *   ex. <Address countryCode=\"StreetAddress\"><freeFormAddress>1 r de paris saint denis</freeFormAddress></Address>\n *   attribute name=\"countryCode\"\n *     element name=\"freeFormAddress\"\n *     element ref=\"xls:Place\"\n *     element ref=\"gml:Envelope\"\n *  ou\n *   ex. <Address countryCode=\"StreetAddress\"><StreetAddress><Street>1 rue Marconi</Street></StreetAddress><Place type=\"Municipality\">Metz</Place><PostalCode>57000</PostalCode></Address>\n *   attribute name=\"countryCode\"\n *     element ref=\"xls:StreetAddress\"\n *     element ref=\"xls:PostalCode\"\n *     element ref=\"xls:Place\"\n *     element ref=\"gml:Envelope\"\n *\n * Place  (balise xsd) :\n *  ex. <Place type=\"Municipality\">Metz</Place>\n *  attribute name=\"type\"\n *   enumeration value=\"CountrySubdivision\"\n *   enumeration value=\"CountrySecondarySubdivision\"\n *   enumeration value=\"Municipality\"\n *   enumeration value=\"MunicipalitySubdivision\"\n *   enumeration value=\"choume-banchi-go\"\n *   enumeration value=\"Qualite\"\n *   enumeration value=\"Departement\"\n *   enumeration value=\"Bbox\"\n *   enumeration value=\"Commune\"\n *   enumeration value=\"Territoire\"\n *   enumeration value=\"Importance\"\n *   enumeration value=\"Nature\"\n *   (la liste n'est pas exhaustives...)\n *\n * StreetAddress (balise xsd) :\n *   ex. <StreetAddress><Street>1 rue Marconi</Street></StreetAddress>\n *   attribute name=\"locator\"\n *    element name=\"xls:Building\"\n *    element ref=\"xls:Street\"\n *\n * Street (balise xsd) :\n *   ex. <Street>1 rue Marconi</Street>\n *   attribute name=\"officialName\" (...)\n *\n * Building (balise xsd) :\n *   ex. <Building number=\"800\"/>\n *   attribute name=\"number\" attribute name=\"subdivision\" attribute name=\"buildingName\"\n *\n * PostalCode (balise xsd) :\n *   ex. <PostalCode>77182</PostalCode>\n *\n * ```\n *\n * Requête\n * -------\n *\n * 2 modes de requête sur les services : GET ou POST.\n *\n * Le mode GET n'est que l'encodage du XML en param (qxml) de la requête (donc pas d'implementation particulière ?)\n *\n * Modèle de classes\n * -----------------\n *\n * ```\n *                 ________  XLS ____________\n *               /            |               \\\n *   RequestHeader      AbstractService    Request\n *                            ^\n *                      ______|________________________\n *           (extends) /                               \\ (extends)\n *          LocationUtilityService                    RouteService\n *                    |                                    |\n *         ___________|___________                       (...)\n *       /                        \\\n * GeocodeRequest          ReverseGeocodeRequest\n *      |                          |\n *      |                     _____|______\n *      |                    /            \\\n *   Address              Preference  Position\n *      |\n *    /   \\\n * Place   StreetAddress\n *               |\n *             /   \\\n *       Street   Building\n * ```\n *\n * @example\n * // encapsule un objet 'LocationUtilityService'\n * // dans une coquille XSL (avec/sans namespace)\n * xsl = new XSL ();\n * xsl.namespace = false;\n * xsl.srsName = \"epsg:4326\";\n * xsl.maximumResponses = 26;\n * //   methodName fournit par l'objet 'lus'\n * //   requestID est calculé\n * xsl.setService (lus);\n * xsl.build ();\n * // out ->\n * // <XLS xmlns=\"http://www.opengis.net/xls\" version=\"1.2\">\n * // <RequestHeader srsName=\"epsg:4326\"/>\n * // <Request maximumResponses=\"26\" methodName=\"GeocodeRequest\" requestID=\"uid1349081498314_388\" version=\"1.2\">\n * //   < (ref. LocationUtilityService ou vide) />\n * //  </Request>\n * // </XLS>\n *\n *\n * @constructor\n * @alias Gp.Formats.XLS\n * @param {Object} options - options du constructeur\n * @param {Object} options.srsName - identifiant du Systeme de Coordonnees\n * @param {String}   options.maximumResponses - nombre de reponses max d'une requete\n * @param {Function} options.onsuccess - function callback success (TODO)\n * @param {Function} options.onerror   - function callback error   (TODO)\n *\n * @private\n */\nfunction XLS (options) {\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur XLS()]\");\n\n    if (!(this instanceof XLS)) {\n        throw new TypeError(\"XLS constructor cannot be called as a function.\");\n    }\n\n    // options par defaut\n    this.options = {\n        srsName : \"EPSG:4326\",\n        maximumResponses : 25\n    };\n\n    // et on ajoute les options en paramètre aux options par défaut\n    for (var opt in options) {\n        if (options.hasOwnProperty(opt)) {\n            if (options[opt]) {\n                this.options[opt] = options[opt];\n            }\n        }\n    }\n}\n\n/**\n * Version\n */\nXLS.VERSION = \"1.2\";\n\nXLS.prototype = {\n\n    /**\n     * @lends module:XLS#\n     */\n\n    /**\n     * request (out)\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * namespace\n     * Surcharge les balises XLS d'un prefixe.\n     * Par defaut, false\n     * @type {Boolean}\n     */\n    namespace : false,\n\n    /**\n     * Objet Service\n     * LocationUtilityService ou RouteService\n     * @type {AbstractService}\n     */\n    oService : null,\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : XLS,\n\n    /**\n     * Template de la requête.\n     * substitution des valeurs suivantes :\n     * __VERSION__, __NAMESPACE__, __SCHEMALOCATION__\n     * __REQUESTHEADER__, __REQUEST__\n     */\n    template : \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n\" +\n        \"<XLS version=\\\"__VERSION__\\\"\\n\" +\n        \"__NAMESPACE__ \\n\" +\n        \"__SCHEMALOCATION__>\\n\" +\n        \"__REQUESTHEADER__\\n\" +\n        \"__REQUEST__\\n\" +\n        \"</XLS>\\n\",\n\n    /**\n     * Namespace par defaut.\n     *\n     * @returns {String} namespace\n     */\n    namespaceByDefault : function () {\n        var ns = [\n            \"xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\"\",\n            \"xmlns:xls=\\\"http://www.opengis.net/xls\\\"\",\n            \"xmlns:gml=\\\"http://www.opengis.net/gml\\\"\"\n        ];\n\n        return ns.join(\" \");\n    },\n\n    /**\n     * Schemalocation par defaut\n     *\n     * @returns {String} schemaLocation\n     */\n    schemaLocationByDefault : function () {\n        return \"xsi:schemaLocation=\\\"http://www.opengis.net/xls http://schemas.opengis.net/ols/1.2/olsAll.xsd\\\"\";\n    },\n\n    /**\n     * Setter Service\n     * Ajout d'un objet de type LocationUtilityService (LUS) ou RouteService\n     *\n     * @param {Object} oService - GeoceodeRequest / ReverseGeocodeRequest ou RouteRequest\n     */\n    setService : function (oService) {\n        if (!oService) {\n            this.logger.trace(\"L'objet de type Service XSL n'est pas encore defini !?\");\n            return;\n        }\n\n        if (oService instanceof AbstractService) {\n            this.oService = oService;\n        } else {\n            this.logger.error(\"L'objet n'est pas du type 'LocationUtilityService' ou 'RouteService' !?\");\n        }\n    },\n\n    /**\n     * Getter Service\n     * Retourne un objet de type LocationUtilityService (LUS) ou RouteService\n     * ex. GeoceodeRequest / ReverseGeocodeRequest ou RouteRequest\n     *\n     * @returns {Object} service (LocationUtilityService|RouteService)\n     */\n    getService : function () {\n        return this.oService;\n    }\n};\n\n/**\n * Ajout d'un prefixe de namespace\n *\n * @todo impl. l'ajout de namespace\n * @param {Object} ns - ex. {key:xls, url:http://www.opengis.net/xls}\n * @param {String} request - requête\n * @returns {String} requête\n */\nXLS.prototype.addNamespace = function (ns, request) {\n    // INFO\n    // on recherche la clef dans les namespaces par defaut.\n    // si la clef n'existe pas dans les namespaceByDefault (), on l'ajoute.\n    // on surcharge toutes les balises, ex. XLS -> xls:XLS\n    // sauf celles qui sont déjà prefixées !\n\n    var keyNS = ns.key;\n    // var urlNS = ns.url; // TODO not yet implemented !\n\n    // recherche la clef dans les namespaces par defaut\n    var bFound = false;\n    var allNS = this.namespaceByDefault().split(\" \");\n    for (var index = 0; index < allNS.length; index++) {\n        var element = allNS[index];\n        var map = element.split(\"=\");\n        var key = map[0];\n        // var url = map[1]; // TODO not yet implemented !\n\n        if (key === \"xmlns:\" + keyNS) {\n            bFound = true;\n            break;\n        }\n    }\n\n    // TODO\n    // si on a une nouvelle clef, on l'ajoute...\n    if (!bFound) {\n        this.logger.warn(\"L'ajout d'un nouvel namespace n'est pas encore implémenté !\");\n        return request;\n    }\n\n    // surcharge toutes les balises\n    var regex;\n    var subst;\n\n    // regex balise ouvrante\n    regex = /<(\\w+[\\s>])/g;\n    subst = \"<\" + keyNS + \":$1\";\n    request = request.replace(regex, subst);\n\n    // regex balise fermante\n    regex = /<\\/(\\w+[\\s>])/g;\n    subst = \"</\" + keyNS + \":$1\";\n    request = request.replace(regex, subst);\n\n    this.logger.trace(\"namespace\", request);\n\n    return request;\n};\n\n/**\n * Construction de la requête\n * @returns {String} requête\n */\nXLS.prototype.build = function () {\n    // out ->\n    // <XLS xmlns=\"http://www.opengis.net/xls\" version=\"1.2\">\n    // <RequestHeader srsName=\"epsg:4326\"/>\n    // <Request maximumResponses=\"26\" methodName=\"GeocodeRequest\" requestID=\"uid1349081498314_388\" version=\"1.2\">\n    //   < (ref. LocationUtilityService ou vide) />\n    //  </Request>\n    // </XLS>\n\n    // as t on un objet de type Service XLS à disposition ?\n    var bService = !!this.getService();\n\n    var template = \"\";\n    template = this.template;\n    template = template.replace(/__VERSION__/g, XLS.VERSION);\n    template = template.replace(/__NAMESPACE__/g, this.namespaceByDefault);\n    template = template.replace(/__SCHEMALOCATION__/g, this.schemaLocationByDefault);\n\n    // header\n    var oHeader = new RequestHeader({\n        srsName : this.options.srsName\n    });\n    template = template.replace(/__REQUESTHEADER__/g, oHeader.toString());\n\n    // request\n    var oRequest = new Request({\n        maximumResponses : this.options.maximumResponses,\n        version : XLS.VERSION, // FIXME même version ?\n        methodName : bService ? this.getService().CLASSTYPE : null\n    });\n    template = template.replace(/__REQUEST__/g, oRequest.toString());\n\n    // objet lus ou route\n    if (bService) { // INFO : clef __REQUESTSERVICE__ dispo dans l'objet 'Request'\n        template = template.replace(/<!-- __REQUESTSERVICE__ -->/g, this.getService().toString());\n    }\n\n    if (!template) {\n        this.logger.warn(\"traduction tmpl : empty request !?\");\n        return;\n    }\n\n    // ajout d'un namespace\n    if (this.namespace) {\n        // ajout de xls par defaut\n        template = this.addNamespace({\n            key : \"xls\",\n            url : \"http://www.opengis.net/xls\"\n        }, template);\n    }\n\n    this.requestString = template;\n    this.logger.trace(\"traduction tmpl\", template);\n\n    // on retourne qqchose !\n    return this.requestString;\n};\n\nexport default XLS;\n","\nimport Logger from \"../../../../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n *\n * Location type \"Address\".\n *\n * Modèles de classes :\n * ------------------\n * ```\n *\n *                Address\n *            (est composé de)\n *           ______ | _________ _________________\n *          /       |          \\                 \\\n *      Place (StreetAddress ou FreeFormAddress) PostalCode\n *       (*)       _|_\n *                /   \\\n *           Street   Building\n * ```\n * ```\n * XSD\n * Address (balise xsd) :\n *   ex. <Address countryCode=\"StreetAddress\"><freeFormAddress>1 r de paris saint denis</freeFormAddress></Address>\n *   attribute name=\"countryCode\"\n *     element name=\"freeFormAddress\"\n *     element ref=\"xls:Place\"\n *     element ref=\"gml:Envelope\"\n *  ou\n *   ex. <Address countryCode=\"StreetAddress\"><StreetAddress><Street>1 rue Marconi</Street></StreetAddress><Place type=\"Municipality\">Metz</Place><PostalCode>57000</PostalCode></Address>\n *   attribute name=\"countryCode\"\n *     element ref=\"xls:StreetAddress\"\n *     element ref=\"xls:PostalCode\"\n *     element ref=\"xls:Place\"\n *     element ref=\"gml:Envelope\"\n * ```\n *\n * @example\n * // simple\n * adr = new Address ({\n *    location : \"2 av pasteur, Saint-Mandée\",\n *    type : [\"StreetAddress\"],\n *    filter : {}\n * });\n * adr.toString();\n * // -> out\n * // <Address countryCode=\"StreetAddress\">\n * //   <freeFormAddress>2 av pasteur, Saint-Mandée</freeFormAddress>\n * // </Address>\n *\n * // avec filtre\n * adr = new Address ({\n *    location : {\n *      number : 2,\n *      street : \"av pasteur\",\n *      city : \"Saint-Mandée\", // FIXME filter Place \"commune\" ou \"municipality\" ?\n *      postalCode : \"94166\"   // FIXME filter Place ou balise PostalCode ?\n *    },\n *    type : [\"StreetAddress\"],\n *    filter : {\n *      territory : \"FR\",\n *      department : \"94\"\n *    }\n * });\n * adr.toString();\n * // -> out\n * // <Address countryCode=\"StreetAddress\">\n * //   <StreetAddress>\n * //   <Building number=\"2\"/>\n * //   <Street>2 av pasteur</Street>\n * // </StreetAddress>\n * // <Place type=\"municipality\">Saint-Mandée</Place>\n * // <Place type=\"departement\">94</Place>\n * // <Place type=\"territoire\">FR</Place>\n * // <PostalCode>94166</PostalCode>\n * // </Address>\n *\n * // avec bbox\n * adr = new Address ({\n *    location : \"2 av pasteur, Saint-Mandée\",\n *    type : [\"StreetAddress\"],\n *    filter : {\n *      bbox : {left:1, right:2, top:2, bottom:0}\n *    }\n * });\n * adr.toString();\n * // -> out\n * // <Address countryCode=\"StreetAddress\">\n * //   <freeFormAddress>2 av pasteur, Saint-Mandée</freeFormAddress>\n * //   <gml:Envelope>\n * //     <gml:lowerCorner>1 0</gml:lowerCorner>\n * //     <gml:upperCorner>2 2</gml:upperCorner>\n * //   </gl:Envelope>\n * // </Address>\n *\n * @constructor\n * @alias Gp.Formats.XLS.LocationUtilityService.Address\n * @param {Object} options - options\n * @param {Object} options.location - location\n * @param {String} options.type - type\n * @param {String} options.filter - filtres\n * @param {String} options.filter.* - Filtré en fonction des tables de geocodage interrogées\n *\n * @private\n */\nfunction Address (options) {\n    this.logger = Logger.getLogger(\"Address\");\n    this.logger.trace(\"[Constructeur Address ()]\");\n\n    if (!(this instanceof Address)) {\n        throw new TypeError(\"Address constructor cannot be called as a function.\");\n    }\n\n    // param par defaut\n    this.options = options || {\n        location : {},\n        type : [\"StreetAddress\"],\n        filter : {}\n    };\n\n    // param obligatoire\n    if (!this.options.location || Object.keys(this.options.location).length === 0) {\n        throw new Error(\"l'option 'location' n'est pas renseignée !\");\n    }\n}\n\n/**\n * @lends module:Address#\n */\nAddress.prototype = {\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : Address,\n\n    /**\n     * request (out)\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * Template de la requête.\n     *\n     * substitution des valeurs suivantes :\n     * - address :  __COUNTRYCODE__, __LOCATION__, __PLACE__, __POSTALCODE__, __ENVELOPE__\n     * - freeFormAddress : __FREEFORMADDRESSVALUE__\n     * - streetAddress : __STREET__, __BUILDING__\n     * - street : __STREETVALUE__\n     * - building : __BUILDINGVALUE__\n     * - place : __PLACEATYPE__, __PLACEVALUE__\n     * - postalCode : __POSTALCODEVALUE__\n     * - gml:envelope : __LEFT__ __BOTTOM__ __RIGHT__ __TOP__\n     *\n     * @todo gestion de l\"indentation\n     */\n    template : {\n        address : \"<Address countryCode=\\\"__COUNTRYCODE__\\\">\" +\n            \"__LOCATION__\" +\n            \"__PLACE__\" +\n            \"__POSTALCODE__\" +\n            \"__ENVELOPE__\" +\n            \"</Address>\",\n        location : {\n            freeFormAddress : \"<freeFormAddress>__FREEFORMADDRESSVALUE__</freeFormAddress>\",\n            streetAddress : {\n                container : \"<StreetAddress>\" +\n                    \"__STREET__\" +\n                    \"__BUILDING__\" +\n                    \"</StreetAddress>\",\n                building : \"<Building number=\\\"__BUILDINGVALUE__\\\"/>\",\n                street : \"<Street>__STREETVALUE__</Street>\"\n            }\n        },\n        place : \"<Place type=\\\"__PLACETYPE__\\\">__PLACEVALUE__</Place>\",\n        postalCode : \"<PostalCode>__POSTALCODEVALUE__</PostalCode>\",\n        envelope : \"<gml:Envelope>\" +\n            \"<gml:lowerCorner>__LEFT__ __BOTTOM__</gml:lowerCorner>\" +\n            \"<gml:upperCorner>__RIGHT__ __TOP__</gml:upperCorner>\" +\n            \"</gml:Envelope>\"\n    }\n\n};\n\n/**\n * toString\n *\n * @returns {String} requête\n */\nAddress.prototype.toString = function () {\n    var template = null;\n    template = this.template.address;\n    template = template.replace(/__COUNTRYCODE__/g, this.options.type);\n\n    // on a une adresse structurée ou libre ?\n    if (typeof this.options.location === \"string\") {\n        // balise freeFormeAddress\n        var tmplFreeFormAddress = this.template.location.freeFormAddress;\n        tmplFreeFormAddress = tmplFreeFormAddress.replace(/__FREEFORMADDRESSVALUE__/g, this.options.location);\n        template = template.replace(/__LOCATION__/g, tmplFreeFormAddress);\n    } else {\n        // balises Street et Building\n        var tmplBuilding = \"\";\n        var tmplStreet = \"\";\n\n        if (this.options.location.number) {\n            tmplBuilding = this.template.location.streetAddress.building;\n            tmplBuilding = tmplBuilding.replace(/__BUILDINGVALUE__/g, this.options.location.number);\n        }\n\n        if (this.options.location.street) {\n            tmplStreet = this.template.location.streetAddress.street;\n            tmplStreet = tmplStreet.replace(/__STREETVALUE__/g, this.options.location.street);\n        }\n\n        // balise streetAddress\n        var tmplStreetAddress = this.template.location.streetAddress.container;\n        tmplStreetAddress = tmplStreetAddress.replace(/__STREET__/g, tmplStreet);\n        tmplStreetAddress = tmplStreetAddress.replace(/__BUILDING__/g, tmplBuilding);\n        template = template.replace(/__LOCATION__/g, tmplStreetAddress);\n    }\n\n    // a t on un filtre de type PostalCode ?\n    var tmplPostalCode = \"\";\n    if (this.options.location.postalCode) {\n        tmplPostalCode = this.template.postalCode;\n        tmplPostalCode = tmplPostalCode.replace(/__POSTALCODEVALUE__/g, this.options.location.postalCode);\n    }\n\n    // a t on un filtre de type GML::Envelope ?\n    var tmplEnvelope = \"\";\n    if (this.options.filter) {\n        var bbox = this.options.filter.bbox;\n        if (bbox) {\n            tmplEnvelope = this.template.envelope;\n            tmplEnvelope = tmplEnvelope.replace(/__LEFT__/g, bbox.left);\n            tmplEnvelope = tmplEnvelope.replace(/__BOTTOM__/g, bbox.bottom);\n            tmplEnvelope = tmplEnvelope.replace(/__RIGHT__/g, bbox.right);\n            tmplEnvelope = tmplEnvelope.replace(/__TOP__/g, bbox.top);\n        }\n    }\n\n    // liste des filtres Place\n    var Places = [];\n\n    // a t on des filtres de type Place ?\n    var tmplPlace = \"\";\n    if (this.options.filter) {\n        var filters = this.options.filter;\n        for (var filter in filters) {\n            if (filter === \"bbox\") {\n                continue;\n            }\n            // FIXME gestion des filtres spécifiques IGN ?\n            tmplPlace = this.template.place;\n            tmplPlace = tmplPlace.replace(/__PLACETYPE__/g, filter);\n            tmplPlace = tmplPlace.replace(/__PLACEVALUE__/g, filters[filter]);\n            Places.push(tmplPlace);\n        }\n    }\n\n    // a t on un filtre de type Place dans location ?\n    var tmplPlaceCity = \"\";\n    if (this.options.location.city) {\n        tmplPlaceCity = this.template.place;\n        tmplPlaceCity = tmplPlaceCity.replace(/__PLACETYPE__/g, \"Municipality\");\n        tmplPlaceCity = tmplPlaceCity.replace(/__PLACEVALUE__/g, this.options.location.city);\n        Places.push(tmplPlaceCity);\n    }\n\n    template = template.replace(/__POSTALCODE__/g, tmplPostalCode);\n    template = template.replace(/__PLACE__/g, Places.join(\"\\n\"));\n    template = template.replace(/__ENVELOPE__/g, tmplEnvelope);\n\n    this.requestString = template;\n    return this.requestString;\n};\n\nexport default Address;\n","\nimport Logger from \"../../../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n *\n * Ajouter des extensions de filtres spécifiques au service de geocodage de l'IGN.\n * Ceci permet de contrôler les options spécifiques de la table de geocodage intérrogées.\n *\n * @example\n * var ext =  new GeocodeFiltersExtension ();\n *     ext.add (new Administratif ());\n *     ext.add (new StreetAddress ());\n *     ext.add (new PositionOfInterest ());\n *     ext.add (new CadastralParcel ());\n *\n * ext.getNames ()\n * // --> out\n * // [Administratif, StreetAddress, PositionOfInterest, CadastralParcel]\n *\n * ext.getFilters ()\n * // --> out\n * // [Object, Object, Object, Object] = tableau d'objet GeocodeLocation\n *\n * ext.getFilter ('StreetAddress')\n * // --> out\n * // {Object} = objet GeocodeLocation\n *\n * ext.getAttributs ('StreetAddress')\n * // --> out\n * // [\"bbox\", \"number\", \"ID\", \"IDTR\", \"postalCode\", \"quality\", \"street\", \"territoire\", \"commune\", \"department\", \"insee\", \"municipality\"]\n *\n * ext.setPlaceAttributs ('StreetAddress', {number:'', territoire:'', quality:'', fake:''})\n * // --> out\n * // (fake est écarté car il n'appartient pas à la liste !)\n *\n * ext.getPlaceAttributs ('StreetAddress')\n * // --> out\n * // {number : '', territoire : '', quality : ''}\n *\n * // Comment ajouter des filtres spécifiques au service de geocodage ?\n * var req = new GeocodeRequest ({\n *      location : \"saint mandé\",\n *      returnFreeForm : true,\n *      filterOptions : {\n *          type : ['PositionOfInterest'], <-- ajouter une extension afin de gerer les attributs de cette table de geocodage !\n *          (...)\n *      }\n *  })\n *  req.addFilter (new PositionOfInterest ());\n * @constructor\n * @alias Gp.Formats.XLS.LocationUtilityService.GeocodeFilterExtension\n *\n * @private\n */\nfunction GeocodeFilterExtension () {\n    this.logger = Logger.getLogger(\"GeocodeFilterExtension\");\n    this.logger.trace(\"[Constructeur GeocodeFilterExtension ()]\");\n\n    if (!(this instanceof GeocodeFilterExtension)) {\n        throw new TypeError(\"GeocodeFilterExtension constructor cannot be called as a function.\");\n    }\n\n    /**\n     * Tableau de filtres (table de geocodage)\n     */\n    this.filters = [];\n}\n\n/**\n * @lends module:GeocodeFilterExtension#\n */\nGeocodeFilterExtension.prototype = {\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : GeocodeFilterExtension,\n\n    /**\n     * Ajout d'un filtre\n     *\n     * @param {Object} oGeocodeLocation - objet de type 'GeocodeLocation'\n     */\n    addFilterExtensions : function (oGeocodeLocation) {\n        // FIXME test sur le type d'objet !\n        if (oGeocodeLocation) {\n            // FIXME ou test sur ses propriétés !\n            this.filters.push(oGeocodeLocation);\n        }\n    },\n\n    // getter\n\n    /**\n     * Tableau de noms (tables de geocodage)\n     *\n     * @returns {Array.<String>} liste des noms de filtres\n     */\n    getNames : function () {\n        var names = [];\n        for (var idx in this.filters) {\n            names.push(this.filters[idx].CLASSNAME);\n        }\n        this.logger.trace(names);\n        return names;\n    },\n\n    /**\n     * Retourne une table de geocodage\n     *\n     * @param {String} name - nom de la table de geocodage\n     * @returns {Object} filtre\n     */\n    getFilter : function (name) {\n        var filter = null;\n        for (var idx in this.filters) {\n            if (this.filters[idx].CLASSNAME === name) {\n                filter = this.filters[idx];\n            }\n        }\n        this.logger.trace(filter);\n        return filter;\n    },\n\n    /**\n     * Tableau d'objects (tables de geocodage)\n     *\n     * @returns {Array.<Object>} liste des filtres\n     */\n    getFilters : function () {\n        this.logger.trace(this.filters);\n        return this.filters;\n    },\n\n    /**\n     * Récupère la liste des attributs (filtres) sur une table de geocodage\n     *\n     * @param {String} name - nom de la table de geocodage\n     * @returns {Array} liste des attributs d'un filtre\n     */\n    getAttributs : function (name) {\n        var attributs = [];\n        for (var idx in this.filters) {\n            if (this.filters[idx].CLASSNAME === name) {\n                attributs = this.filters[idx].attributesList;\n            }\n        }\n        this.logger.trace(attributs);\n        return attributs;\n    },\n\n    /**\n     * Ajout des attributs (filtres) sur une table de geocodage\n     *\n     * @param {String} name - nom de la table de geocodage\n     * @param {Object} options - options de la table de geocodage\n     */\n    setPlaceAttributs : function (name, options) {\n        var filter = this.getFilter(name);\n        var attributs = this.getAttributs(name);\n        for (var idx in attributs) {\n            var value = attributs[idx];\n            if (options[value]) {\n                filter.placeAttributes[value] = options[value];\n            }\n        }\n    },\n\n    /**\n     * Retourne les attributs (filtres) sur une table de geocodage\n     *\n     * @param {String} name - nom de la table de geocodage\n     * @returns {Array} liste des attributs d'un filtre\n     */\n    getPlaceAttributs : function (name) {\n        var places = {};\n        for (var idx in this.filters) {\n            if (this.filters[idx].CLASSNAME === name) {\n                places = this.filters[idx].placeAttributes;\n            }\n        }\n        this.logger.trace(places);\n        return places;\n    }\n};\n\nexport default GeocodeFilterExtension;\n","import Logger from \"../../../Utils/LoggerByDefault\";\nimport Address from \"./model/Address\";\nimport GeocodeFilterExtension from \"./GeocodeFilterExtension\";\n\n/**\n * @classdesc\n * Requête de geocodage direct\n *\n * ```\n * XSD\n * Geocodage direct (balise xsd) :\n *   element ref=\"RequestHeader\" [ (attribute name=\"clientName\" attribute name=\"clientPassword\" attribute name=\"sessionID\" attribute name=\"srsName\" attribute name=\"MSID\") ]\n *     element name=\"Request\" attribute name=\"methodName\" attribute name=\"version\" attribute name=\"requestID\" [ attribute name=\"maximumResponses\" ]\n *       element name=\"GeocodeRequest\" attribute name=\"returnFreeForm\"\n *         element ref=\"xls:Address\"\n * ```\n *\n * @example\n * // creation de l'objet Geocode an ajoutant un objet Address\n * req = new GeocodeRequest ();\n * req.returnFreeForm = true; // TODO !\n * req.addAddress (new Address ({\n *      location : \"saint mandé\",\n *      type : ['PositionOfInterest'],\n *      filter : {\n *          (...)\n *      }\n * }));\n * req.toString();\n * // out ->\n * // <GeocodeRequest>\n * //   <Address countryCode=\"PositionOfInterest\">\n * //     <freeFormAddress>saint mandé</freeFormAddress>\n * //   </Address>\n * // </GeocodeRequest>\n *\n * // creation de l'objet Geocode avec les options uniquement\n * req = new GeocodeRequest ({\n *      location : \"saint mandé\",\n *      returnFreeForm : true,\n *      filterOptions : {\n *          type : ['PositionOfInterest'],\n *          (...)\n *      }\n * });\n * req.toString();\n * // out ->\n * // <GeocodeRequest>\n * //   <Address countryCode=\"PositionOfInterest\">\n * //     <freeFormAddress>saint mandé</freeFormAddress>\n * //   </Address>\n * // </GeocodeRequest>\n * @constructor\n *\n * @alias Gp.Formats.XLS.LocationUtilityService.GeocodeRequest\n * @param {Object} options - options\n * @param {Object}   options.location - location\n * @param {String}   options.returnFreeForm - returnFreeForm\n * @param {String}   options.filterOptions - filtres\n * @param {Function} options.onsuccess - function callback success (TODO)\n * @param {Function} options.onerror   - function callback error   (TODO)\n *\n * @private\n */\nfunction GeocodeRequest (options) {\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur GeocodeRequest ()]\");\n\n    if (!(this instanceof GeocodeRequest)) {\n        throw new TypeError(\"GeocodeRequest constructor cannot be called as a function.\");\n    }\n\n    // options par defaut\n    this.options = options || {};\n\n    // et on ajoute les options en paramètre aux options par défaut\n    for (var opt in options) {\n        if (options.hasOwnProperty(opt)) {\n            this.options[opt] = options[opt];\n        }\n    }\n\n    // TODO\n    // gestion de l'option 'returnFreeForm' si elle n'est pas renseignée dans les options !\n\n    /**\n     * Nom de la classe (heritage)\n     */\n    this.CLASSNAME = \"GeocodeRequest\";\n}\n\nGeocodeRequest.prototype = {\n\n    /**\n     * @lends module:GeocodeRequest#\n     */\n\n    /**\n     * request (out)\n     * @type {String}\n     */\n    strRequest : null,\n\n    /**\n     * Addresse\n     * @type {Address}\n     */\n    oAddress : null,\n\n    /**\n     * Filter\n     * @type {GeocodeFilterExtension}\n     */\n    oFilter : null,\n\n    /**\n     * Template de la requête.\n     * substitution des valeurs suivantes :\n     * __ADDRESS__, __RETURNFREEFORM__\n     */\n    template : \"<GeocodeRequest returnFreeForm=\\\"__RETURNFREEFORM__\\\">\" +\n        \"__ADDRESS__\" +\n        \"</GeocodeRequest>\",\n\n    /**\n     * Ajout d'un objet de type Adresse\n     *\n     * @param {Object} oAddress - Adresse\n     */\n    addAddress : function (oAddress) {\n        if (oAddress instanceof Address) {\n            this.oAddress = oAddress;\n        }\n    },\n\n    /**\n     * Ajout d'un objet de type GeocodeFilterExtension\n     *\n     * @param {Object} oFilter - GeocodeFilterExtension\n     */\n    addFilter : function (oFilter) {\n        // FIXME gestion des filtres à partir des tables de geocodages\n        if (oFilter instanceof GeocodeFilterExtension) {\n            this.oFilter = oFilter;\n        }\n    },\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : GeocodeRequest,\n\n    /**\n     * toString\n     *\n     * @returns {String} requête\n     */\n    toString : function () {\n        var template = \"\";\n        template = this.template;\n\n        // soit on a déjà un objet Address instancié,\n        // sinon, on le fabrique via les options\n        if (!this.oAddress) {\n            var settings = {};\n            settings.location = this.options.location;\n            settings.type = this.options.filterOptions.type || [\"StreetAddress\"];\n            settings.filter = this.options.filterOptions;\n            delete settings.filter.type; // on ne met pas le 'type' dans les filtres...\n\n            // gestion des filtres\n            if (this.oFilter) {\n                // on reconstruit les filtres\n                settings.filter = {};\n\n                // on determine la liste des filtres possibles\n                // pour chaque table de geocodage en param\n                for (var idx in settings.type) {\n                    var filter = settings.type[idx];\n                    var oFilter = this.oFilter.getFilter(filter);\n\n                    if (!oFilter) {\n                        this.logger.warn(\"Le filtre '\" + filter + \"' n'existe pas !?\");\n                        continue;\n                    }\n\n                    var mFilter = this.options.filterOptions;\n\n                    // correspondances des attributs de filtres possibles avec ceux qui sont en options\n                    var attributs = oFilter.attributesList;\n                    for (var idxe = 0; idxe < attributs.length; idxe++) {\n                        var key = attributs[idxe];\n                        if (mFilter[key]) {\n                            var matchingKey = oFilter.serviceAttributes[idxe];\n                            oFilter.placeAttributes[matchingKey] = mFilter[key];\n                            this.logger.trace(\"Selection du filtre '\" + key + \"' sur le type '\" + filter + \"'.\");\n                        }\n                    }\n\n                    // ajout des valeurs des filtres\n                    var places = oFilter.placeAttributes;\n                    for (var kplace in places) {\n                        if (places.hasOwnProperty(kplace)) {\n                            settings.filter[kplace] = places[kplace];\n                        }\n                    }\n                }\n            }\n\n            this.oAddress = new Address(settings);\n            if (!this.oAddress) {\n                throw new Error(\"La construction de l'adresse n'est pas correctement definie !?\");\n            }\n        }\n\n        // FIXME gestion des filtres pour un objet Address déjà instancié ?\n\n        template = template.replace(/__ADDRESS__/g, this.oAddress.toString());\n        template = template.replace(/__RETURNFREEFORM__/g, (this.options.returnFreeForm) ? \"true\" : \"false\");\n\n        this.strRequest = template;\n        return this.strRequest;\n    }\n};\n\nexport default GeocodeRequest;\n","import Logger from \"../../../../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n * Location de type Position\n *\n * ```\n * XSD\n * Position (balise xsd) :\n *   ex. <Position><gml:Point xmlns:gml=\"http://www.opengis.net/gml\"><gml:pos>50.347775 3.205098</gml:pos></gml:Point></Position>\n *   ex. <Position><gml:CircleByCenterPoint xmlns:gml=\"http://www.opengis.net/gml\"><gml:pos>48.85978570614691 2.2913572761128878</gml:pos><gml:radius>1000</gml:radius></gml:CircleByCenterPoint></Position>\n *   (au choix)\n *   element ref=\"gml:Point\"\n *   element ref=\"gml:CircleByCenterPoint\"\n *   element ref=\"gml:Polygon\"\n *   element ref=\"gml:MultiPolygon\"\n * ```\n *\n * FIXME les autres elements ne sont pas implémentés (QoP, Speed, Direction, Time, ...) ?\n *\n * ```\n * template : \"<Position>\n *                  __GMLPOINT__\n *                  __GMLFILTER__\n *             </Position>\"\n * ```\n * ```\n * GML : {\n *  pos     : \"<gml:pos>__X__ __Y__</gml:pos>\",\n *  point   : \"<gml:Point xmlns:gml=\\\"http://www.opengis.net/gml\\\">__POS__</gml:Point>\",\n *  circle  : \"<gml:CircleByCenterPoint xmlns:gml=\\\"http://www.opengis.net/gml\\\">__POS__<gml:radius>__RADIUS__</gml:radius></gml:CircleByCenterPoint>\",\n *  // not yet implemented !\n *  polygon      : \"\",\n *  multipolygon : \"\"\n * }\n * ```\n *\n * @constructor\n * @alias Gp.Formats.XLS.LocationUtilityService.Position\n * @param {Object} options - options données en entrée\n * @param {Object} options.position - x/y\n * @param {Object} options.filter - filtre\n * @param {Object} options.filter.circle - un cercle\n * @param {Object} options.filter.polygon - un polygone\n *\n * @private\n */\nfunction Position (options) {\n    this.logger = Logger.getLogger(\"Position\");\n    this.logger.trace(\"[Constructeur Position ()]\");\n\n    if (!(this instanceof Position)) {\n        throw new TypeError(\"Position constructor cannot be called as a function.\");\n    }\n\n    // param par defaut\n    this.options = options || {};\n\n    // param obligatoire\n    if (!this.options.position) {\n        throw new Error(\"l'option 'position' n'est pas renseignée !\");\n    }\n}\n\n/**\n * @lends module:Position#\n */\nPosition.prototype = {\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : Position,\n\n    /**\n     * request (out)\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * Template de la requête.\n     *\n     * substitution des valeurs suivantes :\n     * __GMLPOINT__ __GMLFILTER__\n     * __X__ __Y__ __RADIUS__\n     * __XY__\n     * @todo indentation XML\n     * @todo implementation classe GML\n     */\n    template : {\n        position : \"<Position>\" +\n            \"__GMLPOINT__\" +\n            \"__GMLFILTER__\" +\n            \"</Position>\",\n        gml : {\n            point : \"<gml:Point xmlns:gml=\\\"http://www.opengis.net/gml\\\"><gml:pos>__X__ __Y__</gml:pos></gml:Point>\",\n            pos : null,\n            filter : {\n                bbox : \"<gml:Envelope xmlns:gml=\\\"http://www.opengis.net/gml\\\">\" +\n                    \"<gml:lowerCorner>__LEFT__ __BOTTOM__</gml:lowerCorner>\" +\n                    \"<gml:upperCorner>__RIGHT__ __TOP__</gml:upperCorner>\" +\n                    \"</gml:Envelope>\",\n                circle : \"<gml:CircleByCenterPoint xmlns:gml=\\\"http://www.opengis.net/gml\\\"><gml:pos>__X__ __Y__</gml:pos><gml:radius>__RADIUS__</gml:radius></gml:CircleByCenterPoint>\",\n                polygon : \"<gml:Polygon xmlns:gml=\\\"http://www.opengis.net/gml\\\"><gml:exterior><gml:LinearRing><gml:posList>__XY__</gml:posList></gml:LinearRing></gml:exterior></gml:Polygon>\",\n                multipolygon : null\n            }\n        }\n    }\n};\n\n/**\n * toString\n *\n * @returns {String} requête\n */\nPosition.prototype.toString = function () {\n    var template = this.template.position;\n\n    var tmplGmlPoint = this.template.gml.point;\n    tmplGmlPoint = tmplGmlPoint.replace(/__X__/g, this.options.position.x);\n    tmplGmlPoint = tmplGmlPoint.replace(/__Y__/g, this.options.position.y);\n\n    var tmplGmlFilter = \"\";\n    if (this.options.filter) {\n        var filter = this.options.filter;\n\n        for (var name in filter) {\n            switch (name) {\n                case \"circle\":\n                    tmplGmlFilter = this.template.gml.filter[name];\n                    tmplGmlFilter = tmplGmlFilter.replace(/__X__/g, filter[name].x);\n                    tmplGmlFilter = tmplGmlFilter.replace(/__Y__/g, filter[name].y);\n                    tmplGmlFilter = tmplGmlFilter.replace(/__RADIUS__/g, filter[name].radius);\n                    break;\n                case \"bbox\":\n                    tmplGmlFilter = this.template.gml.filter[name];\n                    tmplGmlFilter = tmplGmlFilter.replace(/__LEFT__/g, filter[name].left);\n                    tmplGmlFilter = tmplGmlFilter.replace(/__BOTTOM__/g, filter[name].bottom);\n                    tmplGmlFilter = tmplGmlFilter.replace(/__RIGHT__/g, filter[name].right);\n                    tmplGmlFilter = tmplGmlFilter.replace(/__TOP__/g, filter[name].top);\n                    break;\n                case \"polygon\":\n                    // FIXME implementation simple du polygone !\n                    // aucun test de fermeture du polygone, ni de gestion des trous !\n                    tmplGmlFilter = this.template.gml.filter[name];\n                    var strPoints = \"\";\n                    var lstPoints = filter[name];\n                    for (var i = 0; i < lstPoints.length; i++) {\n                        var coord = lstPoints[i];\n                        if (Array.isArray(coord)) {\n                            this.logger.error(\"Holes are not implemented !\");\n                            break;\n                        }\n                        if ((coord.x && coord.y) || (coord.x === 0 || coord.y === 0)) {\n                            strPoints += coord.x + \" \" + coord.y;\n                        }\n                        if (lstPoints.length !== i + 1) {\n                            strPoints += \" \";\n                        }\n                    }\n                    tmplGmlFilter = tmplGmlFilter.replace(/__XY__/g, strPoints);\n                    break;\n                case \"multipolygon\":\n                    this.logger.warn(\"Filter '\" + name + \"' is not yet implemented !\");\n                    break;\n                default:\n                    this.logger.error(\"This filter '\" + name + \"' is not useful !\");\n            }\n        }\n    }\n\n    template = template.replace(/__GMLPOINT__/g, tmplGmlPoint);\n    template = template.replace(/__GMLFILTER__/g, tmplGmlFilter);\n\n    this.requestString = template;\n    return this.requestString;\n};\n\nexport default Position;\n","import Logger from \"../../../../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n *\n * Preference (Reverse)\n *\n * FIXME liste des types de tables de geocodage\n *\n * ```\n * template : \"<ReverseGeocodePreference>__TYPE__</ReverseGeocodePreference>\"\n * ```\n *\n * @constructor\n * @alias Gp.Formats.XLS.LocationUtilityService.Preference\n * @param {String} type - type de table de geocodage\n *\n * @private\n *\n */\n\nfunction Preference (type) {\n    this.logger = Logger.getLogger(\"Preference\");\n    this.logger.trace(\"[Constructeur Preference ()]\");\n\n    if (!(this instanceof Preference)) {\n        throw new TypeError(\"Preference constructor cannot be called as a function.\");\n    }\n\n    /**\n     * type de table de geocodage\n     * @type {Array.<String>}\n     */\n    this.type = type;\n}\n\n/**\n * @lends module:Preference#\n */\nPreference.prototype = {\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : Preference,\n\n    /**\n     * request (out)\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * Template de la requête.\n     *\n     * substitution des valeurs suivantes :\n     *  __TYPE__\n     *\n     */\n    template : \"<ReverseGeocodePreference>__TYPE__</ReverseGeocodePreference>\"\n};\n\n/**\n * toString\n *\n * @returns {String} requête\n */\nPreference.prototype.toString = function () {\n    var Preferences = [];\n    var tmplPreference = \"\";\n    for (var idx = 0; idx < this.type.length; idx++) {\n        tmplPreference = this.template;\n        tmplPreference = tmplPreference.replace(/__TYPE__/g, this.type[idx]);\n        Preferences.push(tmplPreference);\n    }\n\n    this.strRequest = Preferences.join(\"\\n\");\n    return this.strRequest;\n};\n\nexport default Preference;\n","\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport Position from \"./model/Position\";\nimport Preference from \"./model/Preference\";\n\n/**\n * @classdesc\n *\n * Requête de geocodage inverse\n *\n * XSD\n * ```\n * Geocodage inverse (balise xsd) :\n *   element ref=\"RequestHeader\" [ (attribute name=\"clientName\" attribute name=\"clientPassword\" attribute name=\"sessionID\" attribute name=\"srsName\" attribute name=\"MSID\") ]\n *     element name=\"Request\" attribute name=\"methodName\" attribute name=\"version\" attribute name=\"requestID\" [ attribute name=\"maximumResponses\" ]\n *       element name=\"ReverseGeocodeRequest\"\n *         element ref=\"xls:Position\"\n *         element name=\"ReverseGeocodePreference\" (enumeration)\n * ```\n *\n * @example\n * // creation de l\"objet ReverseGeocode\n * req = new ReverseGeocodeRequest ();\n * req.addPosition (new Position (position:{x: , y: }));\n * req.addPreference ([\"StreetAddress\"]);\n * req.toString();\n * // out ->\n * // <ReverseGeocodeRequest>\n * //     <Position>\n * //       <gml:Point xmlns:gml=\"http://www.opengis.net/gml\">\n * //           <gml:pos>50.347775 3.205098</gml:pos>\n * //       </gml:Point>\n * //     </Position>\n * //     <ReverseGeocodePreference>StreetAddress</ReverseGeocodePreference>\n * //  </ReverseGeocodeRequest>\n * @constructor\n * @alias Gp.Formats.XLS.ReverseGeocodeRequest\n * @param {Object} options - options\n * @param {Object}   options.position - position\n * @param {String}   options.returnFreeForm - returnFreeForm\n * @param {String}   options.filterOptions - filtres\n * @param {Function} options.onsuccess - function callback success (TODO)\n * @param {Function} options.onerror   - function callback error   (TODO)\n *\n * @private\n */\nfunction ReverseGeocodeRequest (options) {\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur ReverseGeocodeRequest ()]\");\n\n    if (!(this instanceof ReverseGeocodeRequest)) {\n        throw new TypeError(\"ReverseGeocodeRequest constructor cannot be called as a function.\");\n    }\n\n    // options par defaut\n    this.options = options || {};\n\n    // et on ajoute les options en paramètre aux options par défaut\n    for (var opt in options) {\n        if (options.hasOwnProperty(opt)) {\n            this.options[opt] = options[opt];\n        }\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     */\n    this.CLASSNAME = \"ReverseGeocodeRequest\";\n}\n\nReverseGeocodeRequest.prototype = {\n\n    /**\n     * @lends module:ReverseGeocodeRequest#\n     */\n\n    /**\n     * request (out)\n     * @type {String}\n     */\n    strRequest : null,\n\n    /**\n     * Position\n     * @type {Position}\n     */\n    oPosition : null,\n\n    /**\n     * Preference\n     * @type {Preference}\n     */\n    oPreference : null,\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : ReverseGeocodeRequest,\n\n    /**\n     * Template de la requête.\n     * substitution des valeurs suivantes :\n     * __POSITION__, __PREFERENCE__, __RETURNFREEFORM__\n     */\n    template : \"<ReverseGeocodeRequest returnFreeForm=\\\"__RETURNFREEFORM__\\\">\" +\n        \"__POSITION__\" +\n        \"__PREFERENCE__\" +\n        \"</ReverseGeocodeRequest>\",\n\n    /**\n     * Ajout d\"un objet de type Position\n     *\n     * @param {Object} oPosition - Position\n     */\n    addPosition : function (oPosition) {\n        if (oPosition instanceof Position) {\n            this.oPosition = oPosition;\n        }\n    },\n\n    /**\n     * Ajout d\"une liste de table de référence LUS :\n     * [StreetAddress, PointOfInterest, CadastralParcel, Administrativ]\n     *\n     * @param {Object} oPreference - Preference\n     */\n    addPreferences : function (oPreference) {\n        if (oPreference instanceof Preference) {\n            this.oPreference = oPreference;\n        }\n    },\n\n    /**\n     * toString\n     * @returns {String} requête\n     */\n    toString : function () {\n        var template = \"\";\n        template = this.template;\n\n        // si on a déjà un objet Preference instancié,\n        // sinon, on le fabrique via les options\n        if (!this.oPreference) {\n            this.oPreference = new Preference(this.options.filterOptions.type || [\"StreetAddress\"]);\n            if (!this.oPreference) {\n                throw new Error(\"Les preferences ne sont pas definies !?\");\n            }\n        }\n        template = template.replace(/__PREFERENCE__/g, this.oPreference.toString());\n\n        // si on a déjà un objet Position instancié,\n        // sinon, on le fabrique via les options\n        if (!this.oPosition) {\n            var settings = {\n                position : this.options.position,\n                filter : {}\n            };\n\n            // FIXME gestion des filtres ?\n            if (this.options.filterOptions) {\n                settings.filter = this.options.filterOptions;\n                delete settings.filter.type; // pas besoin ?\n            }\n            this.oPosition = new Position(settings);\n            if (!this.oPosition) {\n                throw new Error(\"La position et ses filtres ne sont pas definis !?\");\n            }\n        }\n        template = template.replace(/__POSITION__/g, this.oPosition.toString());\n        template = template.replace(/__RETURNFREEFORM__/g, (this.options.returnFreeForm) ? \"true\" : \"false\");\n\n        this.strRequest = template;\n        return this.strRequest;\n    }\n};\n\nexport default ReverseGeocodeRequest;\n","import Logger from \"../../Utils/LoggerByDefault\";\nimport AbstractService from \"./AbstractService\";\nimport GeocodeRequest from \"./LocationUtilityService/GeocodeRequest\";\nimport ReverseGeocodeRequest from \"./LocationUtilityService/ReverseGeocodeRequest\";\nimport GeocodeFilterExtension from \"./LocationUtilityService/GeocodeFilterExtension\";\n\n/**\n * @classdesc\n *\n * Requête de type LocationUtilityService (LUS)\n * (Factory)\n *\n * @example\n * // encapsule un objet dans une coquille XSL, Factory sur les objets Geocode/ReverseGeocode\n * lus = new LocationUtilityService ();\n * lus.addRequest (req);\n * lus.toString();\n *  ou\n * lus = new LocationUtilityService ({\n *      location : \"saint mandé\",\n *      returnFreeForm : true,\n *      filterOptions : {\n *          type :  ['PositionOfInterest']\n *      }\n * });\n * lus.toString();\n *\n * // out ->\n * // <GeocodeRequest>\n * //   <Address countryCode=\"PositionOfInterest\">\n * //     <freeFormAddress>saint mandé</freeFormAddress>\n * //   </Address>\n * // </GeocodeRequest>\n *\n * // creation de l'objet Geocode\n * req = new GeocodeRequest ();\n * req.addAddress (new Address (/*todo/*));\n * req.toString();\n * // out ->\n * // <GeocodeRequest>\n * //   <Address countryCode=\"PositionOfInterest\">\n * //     <freeFormAddress>saint mandé</freeFormAddress>\n * //   </Address>\n * // </GeocodeRequest>\n *\n * // creation de l'objet ReverseGeocode\n * req = new ReverseGeocodeRequest ();\n * req.addPosition (new Position (position:{x: , y: }));\n * req.addPreference (['StreetAddress']);\n * req.toString();\n * // out ->\n * // <ReverseGeocodeRequest>\n * //     <Position>\n * //       <gml:Point xmlns:gml=\"http://www.opengis.net/gml\">\n * //           <gml:pos>50.347775 3.205098</gml:pos>\n * //       </gml:Point>\n * //     </Position>\n * //     <ReverseGeocodePreference>StreetAddress</ReverseGeocodePreference>\n * //  </ReverseGeocodeRequest>\n *\n * @constructor\n * @alias Gp.Formats.XLS.LocationUtilityService\n * @param {Object} options - options\n * @param {Object}   options.location - location\n * @param {String}   options.position - position : {x : \"\", y : \"\"}\n * @param {String}   options.returnFreeForm - true|false\n * @param {Object}   options.filterOptions - filtres\n * @param {Function} options.onsuccess - function callback success (TODO)\n * @param {Function} options.onerror   - function callback error   (TODO)\n *\n * @private\n */\nfunction LocationUtilityService (options) {\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur LocationUtilityService ()]\");\n\n    if (!(this instanceof LocationUtilityService)) {\n        throw new TypeError(\"LocationUtilityService constructor cannot be called as a function.\");\n    }\n\n    /**\n     * Nom de la classe\n     */\n    this.CLASSNAME = \"LocationUtilityService\";\n\n    /**\n     * Type de classe de geocodage\n     * ex. GeocodeRequest ou ReverseGeocodeRequest\n     */\n    this.CLASSTYPE = null;\n\n    // appel du constructeur par heritage\n    AbstractService.apply(this, arguments);\n\n    // on determine le type de geocodage si les options sont renseignées\n    if (this.options) {\n        this.CLASSTYPE = (this.options.location) ? \"GeocodeRequest\" : (this.options.position) ? \"ReverseGeocodeRequest\" : null;\n    }\n}\n\n/**\n * @lends module:LocationUtilityService#\n */\nLocationUtilityService.prototype = Object.create(AbstractService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/**\n * Constructeur (alias)\n */\nLocationUtilityService.prototype.constructor = LocationUtilityService;\n\n/**\n * (overwrite) Ajout d'un objet de type LUS : GeocodeRequest ou ReverseGeocodeRequest\n *\n * @param {Object} oLUSRequest - objet de type LUS\n */\nLocationUtilityService.prototype.addRequest = function (oLUSRequest) {\n    // on determine le type de geocodage\n    this.CLASSTYPE = oLUSRequest.CLASSNAME;\n\n    // on controle les types acceptés\n    switch (this.CLASSTYPE) {\n        case \"GeocodeRequest\":\n        case \"ReverseGeocodeRequest\":\n            this.oRequest = oLUSRequest;\n            break;\n        default:\n            throw new Error(\"Ce n'est pas un objet de type 'LUS Request' !?\");\n    }\n};\n\n/**\n * (overwrite) Ajout d'un objet de type GeocodeFilterExtension\n *\n * @param {Object} oFilter - objet de type Filtre\n */\nLocationUtilityService.prototype.addFilter = function (oFilter) {\n    // FIXME gestion des filtres à partir des tables de geocodages\n    if (oFilter instanceof GeocodeFilterExtension) {\n        this.oFilter = oFilter;\n    }\n};\n\n/**\n * (overwrite) toString\n *\n * @returns {String} requête\n */\nLocationUtilityService.prototype.toString = function () {\n    // soit, on a un objet LUS Request déjà instancié\n    // sinon, il faut le construire à partir des options à disposition\n    if (!this.oRequest) {\n        // il nous faut des options\n        if (!this.options) {\n            throw new Error(\"Les options ne sont pas renseignées, impossible de construire la requête !\");\n        }\n\n        // si les options 'location' et 'position' sont renseignées,\n        // on prendra par defaut le choix du geocodage direct\n        if (this.CLASSTYPE === \"GeocodeRequest\") {\n            var settingsDirect = {\n                location : this.options.location,\n                returnFreeForm : this.options.returnFreeForm,\n                filterOptions : this.options.filterOptions || {}\n            };\n            this.oRequest = new GeocodeRequest(settingsDirect);\n            // ajout des filtres spécifiques au service du geocodage direct de l'IGN\n            if (this.oFilter) {\n                this.oRequest.addFilter(this.oFilter);\n            }\n        } else if (this.CLASSTYPE === \"ReverseGeocodeRequest\") {\n            var settingsInv = {\n                position : this.options.position,\n                returnFreeForm : this.options.returnFreeForm,\n                filterOptions : this.options.filterOptions || {}\n            };\n            this.oRequest = new ReverseGeocodeRequest(settingsInv);\n        } else {\n            this.logger.error(\"impossible de determiner le type de geocodage : Direct ou Inverse !?\");\n        }\n    }\n\n    // objet indefini !?\n    if (!this.oRequest) {\n        throw new Error(\"Type de Geocodage indefini !\");\n    }\n\n    this.strRequest = this.oRequest.toString();\n    return this.strRequest;\n};\n\nexport default LocationUtilityService;\n","\n/**\n * @classdesc\n *\n * Liste des attributs des tables de geocodage\n * @constructor\n * @alias Gp.Services.Geocode.Request.GeocodeLocation\n * @private\n */\nfunction GeocodeLocation () {\n    if (!(this instanceof GeocodeLocation)) {\n        throw new TypeError(\"GeocodeLocation constructor cannot be called as a function.\");\n    }\n\n    /**\n     * Objet qui peut prendre comme propriétés les valeurs du tableau serviceAttributes\n     * @type {Object}\n     */\n    this.placeAttributes = {};\n\n    /**\n     * Tableau qui liste les attributs spécifiques selon le type de la GeocodeLocation.\n     * Ces attributs correspondent à ceux saisis par l'utilisateur (légèrement différents de ceux du service)\n     * @type {String[]}\n     */\n    this.attributesList = [];\n\n    /**\n     * Tableau qui liste les attributs spécifiques selon le type de la GeocodeLocation\n     * Ces attributs correspondent à ceux interprétés par le service (balises Place).\n     * @type {String[]}\n     */\n    this.serviceAttributes = [];\n}\n\n/**\n * @lends module:GeocodeLocation\n */\nGeocodeLocation.prototype = {\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : GeocodeLocation\n\n};\n\nexport default GeocodeLocation;\n","\nimport GeocodeLocation from \"../GeocodeLocation\";\n\n/**\n * @classdesc\n * Format des attributs d'un résultat de géocodage de type StreetAddress.\n *\n * @constructor\n * @alias Gp.Services.Geocode.Request.StreetAddress\n * @private\n */\nfunction StreetAddress () {\n    if (!(this instanceof StreetAddress)) {\n        throw new TypeError(\"StreetAddress constructor cannot be called as a function.\");\n    }\n\n    // INFO\n    // appel du constructeur de la classe mère\n    // avec passage de param.\n    GeocodeLocation.apply(this, arguments);\n\n    /**\n     * Nom de la classe (heritage)\n     * @type {String}\n     */\n    this.CLASSNAME = \"StreetAddress\";\n\n    /**\n     * Liste des attributs possibles pour une GeocodeLocation de type StreetAddress\n     * - **bbox** : Emprise de l'adresse dans le système de coordonnées demandé {left, right, top, bottom}. *{Object}*\n     * - **ID** : Identifiant BD ADRESSE dans le cas où le résultat est une adresse. *{String}*\n     * - **IDTR** : Identifiant \"Route Adresse\" de la voie portant l'adresse dans la base BD ADRESSE. *{String}*\n     * - **quality** : Indicateur de qualité du géocodage (pour plus d'infos : http://api.ign.fr/tech-docs-js/fr/developpeur/search.html *{String}*\n     * - **territory** : Code du territoire français où se situe l'adresse *{String}*\n     * - **commune** : Ville l'adresse. *{String}*\n     * - **department** : Département l'adresse. *{String}*\n     * - **insee** : Code INSEE de l'adresse. *{Number}*\n     * - **municipality** : Municipalité de l'adresse. *{String}*\n     */\n\n    this.attributesList = [\"bbox\", \"ID\", \"IDTR\", \"quality\", \"territory\", \"commune\", \"department\", \"insee\", \"municipality\"];\n\n    this.serviceAttributes = [\"bbox\", \"ID\", \"IDTR\", \"Qualite\", \"Territoire\", \"Commune\", \"Departement\", \"INSEE\", \"Municipality\"];\n}\n\n/**\n * @lends module:StreetAdress#\n */\nStreetAddress.prototype = Object.create(GeocodeLocation.prototype);\n\n/**\n * Constructeur (alias)\n */\nStreetAddress.prototype.constructor = StreetAddress;\n\nexport default StreetAddress;\n","\nimport GeocodeLocation from \"../GeocodeLocation\";\n\n/**\n * @classdesc\n * Format des attributs d'un résultat de géocodage de type PositionOfInterest\n *\n * @constructor\n * @alias Gp.Services.Geocode.Request.PositionOfInterest\n * @private\n */\nfunction PositionOfInterest () {\n    if (!(this instanceof PositionOfInterest)) {\n        throw new TypeError(\"PositionOfInterest constructor cannot be called as a function.\");\n    }\n\n    // INFO\n    // appel du constructeur de la classe mère\n    // avec passage de param.\n    GeocodeLocation.apply(this, arguments);\n\n    /**\n     * Nom de la classe (heritage)\n     * @type {String}\n     */\n    this.CLASSNAME = \"PositionOfInterest\";\n\n    /**\n     * Liste des attributs possibles pour une GeocodeLocation de type PositionOfInterest\n     * - **bbox** : Emprise du toponyme dans le système de coordonnées demandé {left, right, top, bottom} *{Object}*\n     * - **importance** : Importance du toponyme *{number}*\n     * - **nature** : Nature du toponyme. *{String}*\n     * - **territory** : Code du territoire français où se situe le toponyme *{String}*\n     * - **commune** : Ville du toponyme. *{String}*\n     * - **department** : Département du toponyme. *{String}*\n     * - **insee** : Code INSEE de la commune où se situe le toponyme. *{Number}*\n     * - **municipality** : Municipalité du toponyme. *{String}*\n     */\n\n    this.attributesList = [\"bbox\", \"importance\", \"nature\", \"territory\", \"commune\", \"department\", \"insee\", \"municipality\"];\n\n    this.serviceAttributes = [\"bbox\", \"Importance\", \"Nature\", \"Territoire\", \"Commune\", \"Departement\", \"INSEE\", \"Municipality\"];\n}\n\n/**\n * @lends module:PositionOfInterest#\n */\nPositionOfInterest.prototype = Object.create(GeocodeLocation.prototype);\n\n/**\n * Constructeur (alias)\n */\nPositionOfInterest.prototype.constructor = PositionOfInterest;\n\nexport default PositionOfInterest;\n","\nimport GeocodeLocation from \"../GeocodeLocation\";\n\n/**\n * @classdesc\n * Format des attributs d'un filtre de géocodage de type CadastralParcel.\n *\n * @constructor\n * @alias Gp.Services.Geocode.Request.CadastralParcel\n * @private\n */\nfunction CadastralParcel () {\n    if (!(this instanceof CadastralParcel)) {\n        throw new TypeError(\"CadastralParcel constructor cannot be called as a function.\");\n    }\n\n    // INFO\n    // appel du constructeur de la classe mère\n    // avec passage de param.\n    GeocodeLocation.apply(this, arguments);\n\n    /**\n     * Nom de la classe (heritage)\n     */\n    this.CLASSNAME = \"CadastralParcel\";\n\n    /**\n     * Liste des attributs possibles pour une GeocodeLocation de type CadastralParcel\n     * - **absorbedCity** : Code commune absorbée de la parcelle :\n     *      lorsqu'une parcelle est issue p d'une ancienne commune qui a fusionné avec une autre.\n     *      Sinon, le code vaut '000'. *{String}*\n     * - **sheet** : Feuille de la parcelle (ex 1). *{String}*\n     * - **number** : Numéro de la parcelle (ex. 0041) *{String}*\n     * - **section** : Section de la parcelle (ex 0D). *{String}*\n     * - **commune** : Ville du filtre. *{String}*\n     * - **department** : Département du filtre. *{String}*\n     * - **insee** : Code INSEE du filtre. *{Number}*\n     * - **municipality** : Municipalité du filtre. *{String}*\n     * - **origin** : L'origine de l'objet parcellaire renvoyé\n     *      (correspond à l'attribut \"type\" dans la réponse XML)\n     *      Pour plus d'informations : http://api.ign.fr/tech-docs-js/fr/developpeur/search.html#Recherche_par_parcelles_cadastrales *{Number}*\n     *\n     */\n\n    this.attributesList = [\"absorbedCity\", \"sheet\", \"number\", \"section\", \"commune\", \"department\", \"insee\", \"municipality\", \"origin\"];\n\n    this.serviceAttributes = [\"CommuneAbsorbee\", \"Feuille\", \"Numero\", \"Section\", \"Commune\", \"Departement\", \"INSEE\", \"Municipality\", \"Type\"];\n}\n\n/**\n * @lends module:CadastralParcel#\n */\nCadastralParcel.prototype = Object.create(GeocodeLocation.prototype);\n\n/**\n * Constructeur (alias)\n */\nCadastralParcel.prototype.constructor = CadastralParcel;\n\nexport default CadastralParcel;\n","\nimport GeocodeLocation from \"../GeocodeLocation\";\n\n/**\n * @classdesc\n * Format des attributs d'un filtre de géocodage de type Administratif.\n * @constructor\n * @alias Gp.Services.Geocode.Request.Administratif\n * @private\n */\nfunction Administratif () {\n    if (!(this instanceof Administratif)) {\n        throw new TypeError(\"Administratif constructor cannot be called as a function.\");\n    }\n\n    // INFO\n    // appel du constructeur de la classe mère\n    // avec passage de param.\n    GeocodeLocation.apply(this, arguments);\n\n    /**\n     * Nom de la classe (heritage)\n     * @type {String}\n     */\n    this.CLASSNAME = \"Administratif\";\n\n    /**\n     * Liste des attributs possibles pour une GeocodedLocation de type Administratif\n     * - **bbox** : Emprise de l'unité administrative dans le système de coordonnées demandé *{left, right, top, bottom}*\n     * - **prefecture** - Nom de la préfécture de la région ou du département *{String}*\n     * - **inseeRegion** - Numéro INSEE de la région *{String}*\n     * - **inseeDepartment** - Numéro INSEE du département *{String}*\n     * - **municipality** - Nom de l'unité administrative *{String}*\n     *\n     */\n\n    this.attributesList = [\"bbox\", \"prefecture\", \"inseeRegion\", \"inseeDepartment\", \"municipality\"];\n\n    this.serviceAttributes = [\"bbox\", \"Prefecture\", \"InseeRegion\", \"InseeDepartement\", \"Municipality\"];\n}\n\n/**\n * @lends module:Administratif#\n */\nAdministratif.prototype = Object.create(GeocodeLocation.prototype);\n\n/**\n * Constructeur (alias)\n */\nAdministratif.prototype.constructor = Administratif;\n\nexport default Administratif;\n","/**\n * Creation d'une requête OpenLS en mode POST ou GET\n * (Factory)\n *\n * @module DirectGeocodeRequestFactory\n * @alias Gp.Services.Geocode.Request.DirectGeocodeRequestFactory\n * @private\n */\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport XLS from \"../../../Formats/XLS\";\nimport LocationUtilityService from \"../../../Formats/XLS/LocationUtilityService\";\nimport GeocodeFilterExtension from \"../../../Formats/XLS/LocationUtilityService/GeocodeFilterExtension\";\nimport StreetAddress from \"../Request/model/StreetAddress\";\nimport PositionOfInterest from \"../Request/model/PositionOfInterest\";\nimport CadastralParcel from \"../Request/model/CadastralParcel\";\nimport Administratif from \"../Request/model/Administratif\";\n\nvar DirectGeocodeRequestFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Geocode\n     *\n     * @example\n     *   var options = {\n     *      httpMethod:\n     *      // options specifiques du service\n     *      location:\n     *      returnFreeForm:\n     *      filterOptions:\n     *      srs:\n     *      maximumResponses:\n     *   };\n     *   var result = DirectGeocodeRequestFactory.build(options);\n     *   if (!result) {\n     *       // error...\n     *   }\n     * @returns {String} request\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"DirectGeocodeRequestFactory\");\n        logger.trace([\"DirectGeocodeRequestFactory::build()\"]);\n\n        var request = null;\n\n        // gestion des filtres (table de geocodage) !\n        // par defaut, on les ajoute toute ...\n        var oFilter = new GeocodeFilterExtension();\n        oFilter.addFilterExtensions(new Administratif());\n        oFilter.addFilterExtensions(new StreetAddress());\n        oFilter.addFilterExtensions(new PositionOfInterest());\n        oFilter.addFilterExtensions(new CadastralParcel());\n\n        // objet LUS\n        // on peut aussi par un objet XLS::GeocodeRequest\n        var oLUS = new LocationUtilityService({\n            location : options.location,\n            returnFreeForm : options.returnFreeForm,\n            filterOptions : options.filterOptions\n        });\n        oLUS.addFilter(oFilter);\n\n        // Format XLS\n        var oXLS = new XLS({\n            srsName : options.srs,\n            maximumResponses : options.maximumResponses\n        });\n        oXLS.namespace = true;\n        oXLS.setService(oLUS);\n\n        // request brute !\n        request = oXLS.build();\n\n        // en mode GET, la requête est encodée\n        // et le param. 'qxml' est ajouté\n        if (options.httpMethod === \"GET\") {\n            var myRequest = \"qxml=\" +\n                encodeURIComponent(request)\n                    .replace(/-/g, \"%2D\")\n                    .replace(/_/g, \"%5F\")\n                    .replace(/\\./g, \"%2E\")\n                    .replace(/!/g, \"%21\")\n                    .replace(/~/g, \"%7E\")\n                    .replace(/\\*/g, \"%2A\")\n                    .replace(/'/g, \"%27\")\n                    .replace(/\\(/g, \"%28\")\n                    .replace(/\\)/g, \"%29\");\n            request = myRequest;\n        }\n\n        logger.trace(request);\n\n        return request;\n    }\n};\n\nexport default DirectGeocodeRequestFactory;\n","\n/**\n * Response object for {@link module:Services~geocode Gp.Services.geocode ()} or {@link module:Services~reverseGeocode Gp.Services.reverseGeocode ()} invocation when successful. Received as the argument of onSuccess callback function.\n *\n * @property {Array.<Gp.Services.Geocode.DirectGeocodedLocation|Gp.Services.Geocode.ReverseGeocodedLocation>} locations - locations array.\n *\n * @namespace\n * @alias Gp.Services.GeocodeResponse\n */\nfunction GeocodeResponse () {\n    if (!(this instanceof GeocodeResponse)) {\n        throw new TypeError(\"GeocodeResponse constructor cannot be called as a function.\");\n    }\n\n    this.locations = [];\n}\n\nGeocodeResponse.prototype = {\n\n    constructor : GeocodeResponse\n\n};\n\nexport default GeocodeResponse;\n","\n/**\n * Location object holding common properties returned by the underlying geocoding and reverse geocoding web service.\n *\n * @property {Gp.Point} position - Position of the location given in the requested coordinates system.\n * @property {String} type - location type \"StreetAddress\" (for an address), \"PositionOfInterest\" (for a place name) or \"CadastralParcel\" (for cadastral parcel).\n * @property {String} matchType - how geocoding is performed : \"street number\" (exact address), \"street enhanced\" (street number calculated by interpolation), \"street\" (only the street), \"city\" (only the city).\n * @property {Object} placeAttributes - Associative array matching the following attributes with their values given by the underlying web service :\n *\n * *Common attributes : *\n *\n * - **freeform** - freeform complete Address.\n * - **bbox** - Bounding Box *{@link Gp.BBox}*.\n * - **municipality** - Municipality\n *\n * *if type === \"StreetAddress\" : *\n *\n * - **number** - Street number.\n * - **ID** - Identifier of the address in the [BD ADRESSE Database]{@link http://professionnels.ign.fr/bdadresse}.\n * - **IDTR** - Identifier of the lineString in the [BD ADRESSE Database]{@link http://professionnels.ign.fr/bdadresse}.\n * - **postalCode** - PostCode\n * - **quality** - Geocoding quality ([see]{@link http://api.ign.fr/tech-docs-js/developpeur/search.html})\n * - **street** - Street name\n * - **territory** - French Territory code\n * - **commune** - City\n * - **department** - Department\n * - **insee** - INSEE Code\n *\n *\n * *if type === \"PositionOfInterest\" :*\n *\n * - **importance** - Place name importance\n * - **nature** - Place name nature\n * - **postalCode** - PostCode\n * - **territory** - French Territory code\n * - **commune** - City\n * - **department** - Department\n * - **insee** - INSEE Code\n *\n *\n * *si type = \"CadastralParcel\" :*\n *\n * - **absorbedCity** - when a parcel comes from a city that was absorbed by another, code of that old city. \"000\" otherwise.\n * - **arrondissement** - arrondissement\n * - **cadastralParcel** - cadastral parcel code\n * - **district** - district\n * - **sheet** - Parcel Sheet (eg. \"1\").\n * - **number** - Parcel Number (eg. \"0041\")\n * - **section** - Parcel Section (eg. \"0D\").\n * - **commune** - Parcel municipality.\n * - **department** - Parcel Department.\n * - **insee** - INSEE Code.\n * - **origin** - Parcel origin (see \"type\" attribute in the [underlying web service response]{@link http://api.ign.fr/tech-docs-js/developpeur/search.html#Cadastral_parcels_search})\n *\n * @namespace\n * @alias Gp.Services.Geocode.GeocodedLocation\n */\nfunction GeocodedLocation () {\n    if (!(this instanceof GeocodedLocation)) {\n        throw new TypeError(\"GeocodedLocation constructor cannot be called as a function.\");\n    }\n\n    this.position = {\n        x : null,\n        y : null\n    };\n\n    this.matchType = null;\n\n    this.placeAttributes = {};\n\n    this.type = null;\n}\n\nGeocodedLocation.prototype = {\n\n    constructor : GeocodedLocation\n\n};\n\nexport default GeocodedLocation;\n","\nimport GeocodedLocation from \"./GeocodedLocation\";\n\n/**\n * Single location object returned by the underlying geocoding web service.\n *\n * @property {Float} accuracy - Accuracy of the response towards the requested location between 0 (unaccurate) and 1 (exact match).\n *\n * @namespace\n * @extends {Gp.Services.Geocode.GeocodedLocation}\n * @alias Gp.Services.Geocode.DirectGeocodedLocation\n */\nfunction DirectGeocodedLocation () {\n    if (!(this instanceof DirectGeocodedLocation)) {\n        throw new TypeError(\"DirectGeocodedLocation constructor cannot be called as a function.\");\n    }\n\n    // INFO\n    // appel du constructeur de la classe mère\n    // avec passage de param.\n    GeocodedLocation.apply(this, arguments);\n\n    /**\n     * Nom de la classe (heritage) : \"DirectGeocodedLocation\"\n     * @type {String}\n     */\n    this.CLASSNAME = \"DirectGeocodedLocation\";\n\n    this.accuracy = null;\n}\n\nDirectGeocodedLocation.prototype = Object.create(GeocodedLocation.prototype);\n\nDirectGeocodedLocation.prototype.constructor = DirectGeocodedLocation;\n\nexport default DirectGeocodedLocation;\n","\n/**\n * Fonction retournant un objet contenant des clés de lecture (readers)\n *      qui permettent de parser des réponses XML du service de géocodage direct du Géoportail\n *      afin de récupérer les résultats retournés.\n * @module DirectGeocodeResponseReader\n * @alias Gp.Services.Geocode.Formats.DirectGeocodeResponseReader\n * @private\n */\n\n// import Logger from \"../../../Utils/LoggerByDefault\";\nimport MR from \"../../../Utils/MessagesResources\";\nimport ErrSrv from \"../../../Exceptions/ErrorService\";\nimport GeocodeResponse from \"../Response/model/GeocodeResponse\";\nimport DirectGeocodedLocation from \"../Response/model/DirectGeocodedLocation\";\n\n/**\n * @member DirectGeocodeResponseReader\n */\nvar DirectGeocodeResponseReader = {};\n\n/**\n * @property {String} DirectGeocodeResponseReader.VERSION - version du service de géocodage\n */\nDirectGeocodeResponseReader.VERSION = \"1.2\";\n\n/**\n * Objet stockant les différents namespaces et les URI associées\n */\nDirectGeocodeResponseReader.NAMESPACES = {\n    xmlns : \"http://www.opengis.net/xls\",\n    gml : \"http://www.opengis.net/gml\",\n    xls : \"http://www.opengis.net/xls\",\n    xlsext : \"http://www.opengis.net/xlsext\",\n    xsi : \"http://www.w3.org/2001/XMLSchema-instance\"\n};\n\n/**\n * Localisation (URL) du schema de définition du XML (XSD)\n */\nDirectGeocodeResponseReader.SCHEMALOCATION = \"http://wxs.ign.fr/schemas/olsAll.xsd\";\n\n/**\n * Namespace par défaut du format\n */\nDirectGeocodeResponseReader.DEFAULTPREFIX = \"xls\";\n\n/**\n * Objet contenant des fonctions de lecture, appelées \"READERS\"\n *      dont chaque clé correspond au nom d'un tag du XML que l'on souhaite lire\n *      et la valeur associée est une fonction (node, data)\n *      où node est un noeud du document DOM\n *      et data est un objet où l'on stocke les informations lues dans le XML.\n */\nDirectGeocodeResponseReader.READERS = {\n\n    xls : {\n\n        /** TODO : jsdoc block */\n        XLS : function (root) {\n            var geocodeResponse = new GeocodeResponse();\n\n            // vérification de la version du service, et des namespaces de l'en-tête\n            __checkServiceAttributes(root);\n\n            // puis lancement de la lecture de l'ensemble des noeuds, en bouclant sur les childNodes\n            __getChildNodes(root, geocodeResponse);\n\n            return geocodeResponse;\n        },\n\n        /** TODO : jsdoc block */\n        GeocodedAddress : function (node, geocodeResponse) {\n            var geocodedLocation = new DirectGeocodedLocation();\n\n            __getChildNodes(node, geocodedLocation);\n\n            // Ajout du résultat au tableau geocodedLocations de geocodeReponse\n            if (geocodeResponse && Array.isArray(geocodeResponse.locations)) {\n                geocodeResponse.locations.push(geocodedLocation);\n            }\n        },\n\n        /** TODO : jsdoc block */\n        GeocodeMatchCode : function (node, geocodedLocation) {\n            var acc = node.getAttribute(\"accuracy\");\n            if (acc && geocodedLocation) {\n                geocodedLocation.accuracy = parseFloat(acc);\n            }\n            var matchType = node.getAttribute(\"matchType\");\n            if (matchType && geocodedLocation) {\n                geocodedLocation.matchType = matchType;\n            }\n        },\n\n        /** TODO : jsdoc block */\n        Address : function (node, geocodedLocation) {\n            var countrycode = node.getAttribute(\"countryCode\");\n            if (geocodedLocation && countrycode) {\n                geocodedLocation.type = countrycode;\n            }\n            // on va récupérer les autres informations (StreetAddress, place, postalCode...)\n            __getChildNodes(node, geocodedLocation);\n        },\n\n        /** TODO : jsdoc block */\n        freeFormAddress : function (node, geocodedLocation) {\n            if (geocodedLocation && geocodedLocation.hasOwnProperty(\"placeAttributes\")) {\n                geocodedLocation.placeAttributes.freeform = __getChildValue(node);\n            }\n        },\n\n        /** TODO : jsdoc block */\n        Building : function (node, geocodedLocation) {\n            var num = node.getAttribute(\"number\");\n            if (geocodedLocation && geocodedLocation.hasOwnProperty(\"placeAttributes\")) {\n                if (num) {\n                    geocodedLocation.placeAttributes.number = num;\n                } else if (node.getAttribute(\"buildingName\")) {\n                    geocodedLocation.placeAttributes.number = node.getAttribute(\"buildingName\");\n                } else if (node.getAttribute(\"subdivision\")) {\n                    geocodedLocation.placeAttributes.number = node.getAttribute(\"subdivision\");\n                }\n            }\n        },\n\n        /** TODO : jsdoc block */\n        Street : function (node, geocodedLocation) {\n            if (geocodedLocation && geocodedLocation.hasOwnProperty(\"placeAttributes\")) {\n                // in case of a streetAddress result : street represents the street name\n                if (geocodedLocation.type === \"StreetAddress\") {\n                    geocodedLocation.placeAttributes.street = __getChildValue(node);\n\n                    // in case of a cadastral parcel result : street represents the cadastral parcel identifier\n                } else if (geocodedLocation.type === \"CadastralParcel\") {\n                    geocodedLocation.placeAttributes.cadastralParcel = __getChildValue(node);\n                }\n            }\n        },\n\n        /** TODO : jsdoc block */\n        Place : function (node, geocodedLocation) {\n            var placeType = node.getAttribute(\"type\");\n            var placeName = __getChildValue(node);\n\n            if (geocodedLocation && geocodedLocation.hasOwnProperty(\"placeAttributes\")) {\n                if (placeType === \"Municipality\") {\n                    geocodedLocation.placeAttributes.municipality = placeName;\n                } else if (placeType === \"Bbox\") {\n                    var values = placeName.split(\";\");\n                    if (values.length === 4) {\n                        geocodedLocation.placeAttributes.bbox = {\n                            left : parseFloat(values[0]),\n                            right : parseFloat(values[2]),\n                            top : parseFloat(values[1]),\n                            bottom : parseFloat(values[3])\n                        };\n                    }\n                } else if (placeType === \"Commune\") {\n                    geocodedLocation.placeAttributes.commune = placeName;\n                } else if (placeType === \"Departement\") {\n                    geocodedLocation.placeAttributes.department = placeName;\n                } else if (placeType === \"INSEE\") {\n                    geocodedLocation.placeAttributes.insee = placeName;\n                } else if (placeType === \"Qualite\") {\n                    geocodedLocation.placeAttributes.quality = placeName;\n                } else if (placeType === \"Territoire\") {\n                    geocodedLocation.placeAttributes.territory = placeName;\n                } else if (placeType === \"ID\") {\n                    geocodedLocation.placeAttributes.ID = placeName;\n                } else if (placeType === \"ID_TR\") {\n                    geocodedLocation.placeAttributes.IDTR = placeName;\n                } else if (placeType === \"Importance\") {\n                    geocodedLocation.placeAttributes.importance = parseInt(placeName, 10);\n                } else if (placeType === \"Nature\") {\n                    geocodedLocation.placeAttributes.nature = placeName;\n                } else if (placeType === \"Numero\") {\n                    geocodedLocation.placeAttributes.number = placeName;\n                } else if (placeType === \"Feuille\") {\n                    geocodedLocation.placeAttributes.sheet = placeName;\n                } else if (placeType === \"Section\") {\n                    geocodedLocation.placeAttributes.section = placeName;\n                } else if (placeType === \"CommuneAbsorbee\") {\n                    geocodedLocation.placeAttributes.absorbedCity = placeName;\n                } else if (placeType === \"Arrondissement\") {\n                    if (placeName) {\n                        geocodedLocation.placeAttributes.arrondissement = placeName;\n                    }\n                } else if (placeType === \"Type\") {\n                    geocodedLocation.placeAttributes.origin = placeName;\n                } else if (placeType === \"Prefecture\") {\n                    geocodedLocation.placeAttributes.prefecture = placeName;\n                } else if (placeType === \"InseeRegion\") {\n                    geocodedLocation.placeAttributes.inseeRegion = placeName;\n                } else if (placeType === \"InseeDepartment\") {\n                    geocodedLocation.placeAttributes.inseeDepartment = placeName;\n                }\n            }\n        },\n\n        /** TODO : jsdoc block */\n        PostalCode : function (node, geocodedLocation) {\n            if (geocodedLocation && geocodedLocation.hasOwnProperty(\"placeAttributes\")) {\n                geocodedLocation.placeAttributes.postalCode = __getChildValue(node);\n            }\n        },\n\n        /** TODO : jsdoc block */\n        Error : function (node) {\n            // on imagine qu'on a une balise ainsi :\n            // <Error message=\"Message...\" errorCode=\"InternalServerError\"/>\n            var srvMess = node.getAttribute(\"message\");\n            var errorCode = node.getAttribute(\"errorCode\");\n            var message = MR.getMessage(\"SERVICE_RESPONSE_EXCEPTION\",\n                \"(\" + errorCode + \") : \" + srvMess);\n            throw new ErrSrv({\n                message : message,\n                type : ErrSrv.TYPE_SRVERR\n            });\n        }\n    },\n\n    gml : {\n\n        /** TODO : jsdoc block */\n        pos : function (node, geocodedLocation) {\n            var pos = __getChildValue(node);\n            if (geocodedLocation && pos) {\n                geocodedLocation.position = {\n                    x : parseFloat(pos.split(\" \")[0]),\n                    y : parseFloat(pos.split(\" \")[1])\n                };\n            }\n        }\n    },\n\n    /** TODO : jsdoc block */\n    ExceptionReport : function (node) {\n        var response = {};\n        if (node.hasChildNodes()) {\n            var children = node.childNodes;\n            var child;\n            for (var i = 0; i < children.length; i++) {\n                child = children[i];\n                if (child.nodeName === \"Exception\") {\n                    response.exceptionReport = DirectGeocodeResponseReader.READERS[\"Exception\"](child);\n                }\n            }\n        }\n        return response;\n    },\n\n    /** TODO : jsdoc block */\n    Exception : function (node) {\n        var exceptionReport = {};\n\n        // get exception code\n        var exceptionCode = node.getAttribute(\"exceptionCode\");\n        if (exceptionCode) {\n            exceptionReport.exceptionCode = exceptionCode;\n        }\n\n        // get exception message\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            exceptionReport.exception = textNode.nodeValue;\n        }\n\n        return exceptionReport;\n    }\n\n};\n\n/**\n * Méthode permettant de lancer la lecture d'une réponse XML du service de géocodage,\n *      à l'aide des READERS de la classe.\n *\n * @method DirectGeocodeResponseReader.read\n * @param {DOMElement} root - racine de la réponse XML à lire\n * @return {Object} geocodeResponse|exceptionReport : l'objet contenant les informations de la réponse XML,\n *      sous la forme d'un objet GeocodeResponse, ou un objet littéral exceptionReport si le service a renvoyé une exception.\n * @static\n * @memberof DirectGeocodeResponseReader\n */\nDirectGeocodeResponseReader.read = function (root) {\n    if (root.nodeName === \"XLS\") {\n        var nsPrefix = root.prefix;\n        if (!nsPrefix) {\n            nsPrefix = DirectGeocodeResponseReader.DEFAULTPREFIX;\n        }\n        var geocodeResponse = DirectGeocodeResponseReader.READERS[nsPrefix][root.nodeName](root);\n        return geocodeResponse;\n    } else if (root.nodeName === \"ExceptionReport\") {\n        var exceptionReport = DirectGeocodeResponseReader.READERS[root.nodeName](root);\n        return exceptionReport;\n    } else {\n        var mess = MR.getMessage(\"SERVICE_RESPONSE_ANALYSE\", root.nodeName);\n        throw new ErrSrv({\n            message : mess,\n            type : ErrSrv.TYPE_UNKERR,\n            status : 200\n        });\n    }\n};\n\n/**\n * Récupération des attributs d'un noeud élément\n *\n * @private\n * @memberof DirectGeocodeResponseReader\n * @method __getAttributes\n * @param {DOMElement} node - noeud contenant l'attribut recherché\n * @return {Object} nodeAttributes - objet contenant les noms et valeurs des différents attributs\n */\nfunction __getAttributes (node) {\n    if (node.attributes.length > 0) {\n        var nodeAttributes = {};\n        var attributes = node.attributes;\n        for (var i = 0; i < attributes.length; i++) {\n            var attribute = attributes[i];\n            nodeAttributes[attribute.nodeName] = attribute.nodeValue;\n        }\n        return nodeAttributes;\n    }\n}\n\n/**\n * Récupération des noeuds enfants à partir d'un noeud donné, pour lecture (readNode).\n *\n * @private\n * @memberof DirectGeocodeResponseReader\n * @method __getChildNodes\n * @param {DOMElement} node - a DOM node\n * @param {Array|Object} [data] - an object to be filled with node data\n */\nfunction __getChildNodes (node, data) {\n    if (node.hasChildNodes()) {\n        var children = node.childNodes;\n        var child;\n        var childName;\n        var childPrefix;\n\n        for (var i = 0; i < children.length; i++) {\n            child = children[i];\n\n            if (child.nodeType === 1) { // 1 === node.ELEMENT_NODE\n                childName = child.localName || child.baseName || child.nodeName;\n                childPrefix = child.prefix || DirectGeocodeResponseReader.DEFAULTPREFIX;\n\n                if (DirectGeocodeResponseReader.READERS[childPrefix][childName]) {\n                    var reader = DirectGeocodeResponseReader.READERS[childPrefix][childName];\n                    reader(child, data);\n                } else {\n                    __getChildNodes(child, data);\n                }\n            }\n        }\n    }\n}\n\n/**\n * Lecture de la valeur du premier child d'un noeud, si elle existe.\n *\n * @private\n * @memberof DirectGeocodeResponseReader\n * @method __getChildValue\n * @param {DOMElement} node - a DOM node\n * @return {String} value - valeur du firstChild du noeud en entrée, ou chaîne vide.\n */\nfunction __getChildValue (node) {\n    var textNode;\n    var value = \"\";\n\n    if (node.hasChildNodes()) {\n        textNode = node.firstChild;\n        if (textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            value = textNode.nodeValue;\n        }\n    }\n    return value;\n}\n\n/**\n * Vérification des attributs du service, dans la balise XLS de la réponse :\n *      version, namespaces, et namespace par défaut doivent correspondre à ceux attendus.\n *\n * @private\n * @memberof DirectGeocodeResponseReader\n * @method __checkServiceAttributes\n * @param {DOMElement} XLSNode - a DOM node, corresponding to XLS first tag.\n */\nfunction __checkServiceAttributes (XLSNode) {\n    if (XLSNode.attributes.length > 0) {\n        // on récupère et parcourt les attributs de la balise XLS de la réponse\n        var xlsAttributes = __getAttributes(XLSNode);\n        for (var att in xlsAttributes) {\n            if (xlsAttributes.hasOwnProperty(att)) {\n                // vérification de la version\n                if (att === \"version\") {\n                    if (xlsAttributes[\"version\"] !== DirectGeocodeResponseReader.VERSION) {\n                        console.log(\"[DirectGeocodeResponseReader] geocode version is not the expected one : there may be errors in parsing\");\n                        return;\n                    }\n                }\n\n                // on vérifie que l'uri du namespace par défaut est bien celle que l'on attend\n                if (att === \"xmlns\") {\n                    if (xlsAttributes[att] !== DirectGeocodeResponseReader.NAMESPACES[DirectGeocodeResponseReader.DEFAULTPREFIX]) {\n                        console.log(\"[DirectGeocodeResponseReader] geocode response default namespace is not the expected one\");\n                        return;\n                    }\n                    continue;\n                }\n\n                var prefix = att.split(\":\")[0];\n                var ns = att.split(\":\")[1];\n\n                // si on a un autre xmlns, on vérifie aussi les URI\n                if (prefix === \"xmlns\" && ns) {\n                    // si l'attribut correspond à un namespace défini dans le reader\n                    if (DirectGeocodeResponseReader.NAMESPACES[ns]) {\n                        // il faut que les URI correspondent aussi.\n                        if (DirectGeocodeResponseReader.NAMESPACES[ns] !== xlsAttributes[att]) {\n                            console.log(\"[DirectGeocodeResponseReader] geocode response \" + att + \" namespace is not the expected one\");\n                            return;\n                        }\n                    }\n                }\n\n                // pour finir on vérifie la localisation du schema XSD du service\n                if (ns === \"schemaLocation\") {\n                    if (DirectGeocodeResponseReader.SCHEMALOCATION !== xlsAttributes[att]) {\n                        console.log(\"[DirectGeocodeResponseReader] geocode response schema location is not the expected one\");\n                        return;\n                    }\n                }\n            }\n        }\n    }\n}\n\nexport default DirectGeocodeResponseReader;\n","/**\n * Factory pour générer une reponse JSON à partir d'un XML\n * ou d'un JSON encapsulant du XML\n * (Factory)\n *\n * @module GeocodeResponseFactory\n * @alias Gp.Services.Geocode.Response.GeocodeResponseFactory\n * @todo La reponse JSON peut encapsuler un XML !\n * @private\n */\n// import Logger from \"../../../Utils/LoggerByDefault\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport MRes from \"../../../Utils/MessagesResources\";\nimport XML from \"../../../Formats/XML\";\nimport DirectGeocodeResponseReader from \"../Formats/DirectGeocodeResponseReader\";\n\nvar DirectGeocodeReponseFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Geocode\n     *\n     * @example\n     *   var options = {\n     *      response :\n     *      rawResponse :\n     *      scope :\n     *      onSuccess :\n     *      onError :\n     *   };\n     *\n     */\n    build : function (options) {\n        // data de type GeocodeResponse\n        var data = null;\n\n        if (options.response) {\n            if (options.rawResponse) {\n                data = options.response;\n            } else {\n                try {\n                    var p = new XML({\n                        reader : DirectGeocodeResponseReader\n                    });\n\n                    if (typeof options.response === \"string\") {\n                        p.setXMLString(options.response);\n                    } else {\n                        p.setXMLDoc(options.response);\n                    }\n\n                    data = p.parse();\n\n                    if (!data) {\n                        throw new Error(\"L'analyse de la réponse du service !?\");\n                    }\n                } catch (e) {\n                    var message = e.message;\n                    if (typeof options.response === \"string\") {\n                        message += \"('\" + options.response + \"')\";\n                    } else {\n                        message += \"('\" + options.response.documentElement.innerHTML + \"')\";\n                    }\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_ANALYSE\", message),\n                        type : ErrorService.TYPE_UNKERR,\n                        status : -1\n                    }));\n                    return;\n                }\n\n                // Si la réponse contenait une exception renvoyée par le service\n                if (data.exceptionReport) {\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", data.exceptionReport),\n                        type : ErrorService.TYPE_SRVERR,\n                        status : 200 // FIXME : 200 ?\n                    }));\n                    return;\n                }\n            }\n        } else {\n            options.onError.call(options.scope, new ErrorService({\n                message : MRes.getMessage(\"SERVICE_RESPONSE_EMPTY\"),\n                type : ErrorService.TYPE_SRVERR,\n                status : -1 // FIXME : status response\n            }));\n            return;\n        }\n\n        options.onSuccess.call(options.scope, data);\n    }\n};\n\nexport default DirectGeocodeReponseFactory;\n","\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport _ from \"../../Utils/MessagesResources\";\nimport ErrorService from \"../../Exceptions/ErrorService\";\nimport CommonService from \"../CommonService\";\nimport DirectGeocodeRequestFactory from \"./Request/DirectGeocodeRequestFactory\";\nimport DirectGeocodeResponseFactory from \"./Response/DirectGeocodeResponseFactory\";\n\n/**\n * @classdesc\n * Appel du service de géocodage direct du Géoportail :\n *     envoi de la requête construite selon les paramètres en options,\n *     éventuellement parsing et analyse  de la réponse,\n *     retour d'une réponse en paramètre de la fonction onSuccess.\n *\n *\n * @constructor\n * @extends {Gp.Services.CommonService}\n * @alias Gp.Services.Geocode\n *\n * @param {Object} options - options spécifiques au service (+ les options heritées)\n *\n * @param {String|Object} options.location - Nom de l'adresse, du toponyme, de l'unité administrative ou de la parcelle cadastrale recherchée.\n *      Sous forme de String, la propriété permet de faire une recherche déstructurée.\n *      Sous forme d'objet, la propriété permet de structurer la recherche.\n *      Dans ce cas, les propriétés possibles de cet objet sont décrites ci-après.\n *      @param {Number} [options.location.number] - Numéro du bâtiment de l'adresse recherchée, dans le cas d'une recherche structurée\n *      (si options.location est un objet Javascript).\n *      @param {String} [options.location.street] - Nom de la rue de l'adresse recherchée, dans le cas d'une recherche structurée\n *      (si options.location est un objet Javascript).\n *      @param {String} [options.location.city] - Nom de la ville de l'adresse recherchée, dans le cas d'une recherche structurée\n *      (si options.location est un objet Javascript).\n *      @param {Number} [options.location.postalCode] - Numéro du code postal de l'adresse recherchée, dans le cas d'une recherche structurée\n *      (si options.location est un objet Javascript).\n *\n * @param {Object} [options.filterOptions] - Les propriétés possibles de cet objet sont décrites ci-après.\n * @param {Object} [options.filterOptions.bbox] - Emprise dans laquelle on souhaite effectuer la recherche.\n *      Les propriétés possibles de cet objet sont décrites ci-après.\n *      @param {Float} options.filterOptions.bbox.left - Abscisse du côté gauche de la BBOX\n *      @param {Float} options.filterOptions.bbox.right - Abscisse du côté droit de la BBOX\n *      @param {Float} options.filterOptions.bbox.top - Ordonnée supérieure de la BBOX\n *      @param {Float} options.filterOptions.bbox.bottom - Ordonnée inférieure de la BBOX\n *\n * @param {Array.<String>} [options.filterOptions.type = \"StreetAddress\"] - Type de l'objet recherché.\n *      Le service de géocodage du Géoportail permet de rechercher des 'PostionOfInterest' pour des toponymes, des 'StreetAddress'\n *      pour des adresses postales, et/ou des 'CadastralParcel' pour des parcelles cadastrales.\n *      D'autres types pourront être rajoutés selon l'évolution du service.\n *      Par défaut, type = ['StreetAddress'].\n *\n * @param {String} [options.filterOptions.[proprietes du filtre]] - Critère supplémentaire pour filtrer la recherche sous la forme\n *      d'un couple clé/valeur à définir selon les possibilités du serveur ajouté à la requête.\n *      Le service de géocodage du Géoportail permet de filtrer tous les résultats avec les propriétés :\n *          \"municipality\", \"insee\", et \"department\".\n *      Il permet aussi de filtrer les adresses postales avec les propriétés :\n *          \"quality\", \"ID\", \"ID_TR\" et \"territory\".\n *      Il permet de filtrer les toponymes avec les propriétés :\n *          \"importance\", \"nature\" et \"territory\".\n *      Enfin, il permet de filtrer les parcelles cadastrales avec les propriétés :\n *          \"sheet\", \"section\", et \"absorbedcity\". Pas de valeur par défaut.\n *\n * @param {Number} [options.maximumResponses] - Nombre de réponses maximal que l'on souhaite recevoir.\n *      Pas de valeur par défaut.\n *      Si le serveur consulté est celui du Géoportail, la valeur par défaut sera donc celle du service : 25.\n *\n * @param {Boolean} [options.returnFreeForm] - Indique si l'on souhaite en réponse un localisant concaténée plutôt que structuré.\n *      Pas de valeur par défaut. Si le serveur consulté est celui du Géoportail, la valeur par défaut sera donc celle du service : 'false'.\n *\n * @param {String} [options.srs] - Système de coordonnées dans lequel les paramètres géographiques en entrée et la réponse du service sont exprimés.\n *      Pas de valeur par défaut. Si le serveur consulté est celui du Géoportail, la valeur par défaut sera donc celle du service : 'EPSG:4326'.\n *\n * @example\n *   var options = {\n *      apiKey : null,\n *      serverUrl : 'http://localhost/service/',\n *      protocol : 'JSONP', // JSONP|XHR\n *      proxyURL : null,\n *      httpMethod : 'GET', // GET|POST\n *      timeOut : 10000, // ms\n *      rawResponse : false, // true|false\n *      scope : null, // this\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *      // spécifique au service\n *      positions : [{lon:, lat:}, {lon:, lat:}],\n *      (...)\n *   };\n * @private\n */\nfunction Geocode (options) {\n    if (!(this instanceof Geocode)) {\n        throw new TypeError(_.getMessage(\"CLASS_CONSTRUCTOR\", \"Geocode\"));\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     * FIXME instance ou classe ?\n     */\n    this.CLASSNAME = \"Geocode\";\n\n    // appel du constructeur par heritage\n    CommonService.apply(this, arguments);\n\n    this.logger = Logger.getLogger(\"Gp.Services.Geocode\");\n    this.logger.trace(\"[Constructeur Geocode (options)]\");\n\n    if (!options.location) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"location\"));\n    }\n\n    // FIXME ECMAScript 5 support\n    if (typeof options.location === \"object\" && Object.keys(options.location).length === 0) {\n        throw new Error(_.getMessage(\"PARAM_EMPTY\", \"location\"));\n    } else if (typeof options.location === \"string\" && options.location.length === 0) {\n        throw new Error(_.getMessage(\"PARAM_EMPTY\", \"location\"));\n    }\n\n    // ajout des options spécifiques au service\n    this.options.location = options.location;\n\n    // on definit des filtres apr defaut\n    if (!options.filterOptions || typeof options.filterOptions !== \"object\") {\n        this.options.filterOptions = options.filterOptions = {\n            type : [\"StreetAddress\"]\n        };\n    }\n\n    // FIXME ECMAScript 5 support (valable pour un objet uniquement !)\n    // ceci permet de tester le cas où 'options.filterOptions' : {}\n    if (Object.keys(options.filterOptions).length === 0) {\n        this.options.filterOptions = {\n            type : [\"StreetAddress\"]\n        };\n    }\n\n    var filter = Object.keys(options.filterOptions);\n    for (var i = 0; i < filter.length; i++) {\n        var key = filter[i];\n        // on transforme certains filtres qui pourraient être numériques en string\n        var filtersCouldBeNumberList = [\"department\", \"number\", \"postalCode\", \"insee\", \"importance\", \"ID\", \"IDTR\", \"absorbedCity\", \"sheet\", \"section\", \"inseeRegion\", \"inseeDepartment\"];\n        if (filtersCouldBeNumberList.indexOf(key) !== -1 && typeof options.filterOptions[key] !== \"string\") {\n            options.filterOptions[key] = options.filterOptions[key].toString();\n        }\n        // on supprime les filtres vides\n        if (!options.filterOptions[key]) {\n            delete this.options.filterOptions[key];\n        }\n    }\n\n    this.options.filterOptions.type = options.filterOptions.type || [\"StreetAddress\"];\n    this.options.maximumResponses = options.maximumResponses || 25;\n    this.options.returnFreeForm = options.returnFreeForm || false;\n    this.options.srs = options.srs || \"EPSG:4326\";\n\n    // attributs d'instances\n\n    /**\n     * Format forcé de la réponse du service : \"xml\"\n     * sauf si l'on souhaite une reponse brute (options.rawResponse)\n     */\n    this.options.outputFormat = (this.options.rawResponse) ? \"\" : \"xml\";\n}\n\n/**\n * @lends module:Geocode#\n */\nGeocode.prototype = Object.create(CommonService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/*\n * Constructeur (alias)\n */\nGeocode.prototype.constructor = Geocode;\n\n/**\n * Création de la requête (overwrite)\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nGeocode.prototype.buildRequest = function (error, success) {\n    var options = {\n        httpMethod : this.options.httpMethod,\n        // options specifiques du service\n        location : this.options.location,\n        returnFreeForm : this.options.returnFreeForm,\n        filterOptions : this.options.filterOptions,\n        srs : this.options.srs,\n        maximumResponses : this.options.maximumResponses\n    };\n\n    this.request = DirectGeocodeRequestFactory.build(options);\n\n    // on teste si la requete a bien été construite !\n    (!this.request)\n        ? error.call(this, new ErrorService(_.getMessage(\"SERVICE_REQUEST_BUILD\")))\n        : success.call(this, this.request);\n};\n\n/**\n * Analyse de la reponse (overwrite)\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nGeocode.prototype.analyzeResponse = function (error, success) {\n    /* INFO :\n         Etape 1 : Création de la requête\n            -> Appel du format OpenLS pour créer une requête à partir des paramètres (par exemple)\n              (soit directement une URL si GET, soit une requête XML si POST)\n            /!\\ tester si apiKey && serverUrl => on ne garde que serverUrl\n            -> stockage de la requête dans this.request\n         Etape 2 : Envoi de la requête selon le bon protocole\n            -> appel du protocol JSONP ou XHR, et envoi (par ex send ()) (this.protocol)\n            -> récupération de la réponse xml dans la fonction onSuccess () (this.response)\n            -> si code HTTP 200 et pas de message d'erreur : etape 3\n            -> si code HTTP != 200 : lancement de la fonction de callback onFailure avec le message d'erreur\n         Etape 3 : Analyse de la réponse xml et construction du JSON (si rawResponse === false )\n            -> appel du parser pour récupérer le xmlDocument\n            -> appel du reader OpenLS pour lire les éléments et récupérer l'objet JSON\n               correspondant au type de géocodage (défini dans les specs)\n         Etape 4 : Lancement de la fonction de callback onSuccess avec la réponse :\n            -> xmlResponse (si rawResponse === true)\n            -> ou geocodedLocations\n    */\n\n    if (this.response) {\n        var options = {\n            response : this.response,\n            rawResponse : this.options.rawResponse,\n            onError : error,\n            onSuccess : success,\n            scope : this\n        };\n\n        DirectGeocodeResponseFactory.build(options);\n    } else {\n        error.call(this, new ErrorService(_.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n    }\n};\n\nexport default Geocode;\n","/**\n * Creation d'une requête OpenLS en mode POST ou GET\n * (Factory)\n *\n * @module ReverseGeocodeRequestFactory\n * @alias Gp.Services.Geocode.Request.ReverseGeocodeRequestFactory\n * @private\n */\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport XLS from \"../../../Formats/XLS\";\nimport LocationUtilityService from \"../../../Formats/XLS/LocationUtilityService\";\n\nvar ReverseGeocodeRequestFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Geocode\n     *\n     * @example\n     *   var options = {\n     *      httpMethod :\n     *      // options specifiques du service\n     *      position :\n     *      returnFreeForm :\n     *      filterOptions :\n     *      srs :\n     *      maximumResponses :\n     *   };\n     *   var result = ReverseGeocodeRequestFactory.build(options);\n     *   if (!result) {\n     *       // error...\n     *   }\n     * @returns {String} request\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"ReverseGeocodeRequestFactory\");\n        logger.trace([\"ReverseGeocodeRequestFactory::build()\"]);\n\n        // options non definies\n        var settings = options || {};\n\n        var request = null;\n\n        // objet LUS\n        var oLUS = new LocationUtilityService({\n            position : settings.position,\n            returnFreeForm : settings.returnFreeForm,\n            filterOptions : settings.filterOptions\n        });\n\n        // Format XLS\n        var oXLS = new XLS({\n            srsName : settings.srs,\n            maximumResponses : settings.maximumResponses\n        });\n        oXLS.namespace = true;\n        oXLS.setService(oLUS);\n\n        // request brute !\n        request = oXLS.build();\n\n        // en mode GET, la requête est encodée\n        // et le param. 'qxml' est ajouté\n        if (settings.httpMethod === \"GET\") {\n            var myRequest = \"qxml=\" +\n                encodeURIComponent(request)\n                    .replace(/-/g, \"%2D\")\n                    .replace(/_/g, \"%5F\")\n                    .replace(/\\./g, \"%2E\")\n                    .replace(/!/g, \"%21\")\n                    .replace(/~/g, \"%7E\")\n                    .replace(/\\*/g, \"%2A\")\n                    .replace(/'/g, \"%27\")\n                    .replace(/\\(/g, \"%28\")\n                    .replace(/\\)/g, \"%29\");\n            request = myRequest;\n        }\n\n        logger.trace(request);\n\n        return request;\n    }\n};\n\nexport default ReverseGeocodeRequestFactory;\n","\nimport GeocodedLocation from \"./GeocodedLocation\";\n\n/**\n * Single location object returned by the underlying reverse geocoding web service.\n *\n * @property {Float} searchCenterDistance - Distance between the requested point and the location.\n *\n * @namespace\n * @extends {Gp.Services.Geocode.GeocodedLocation}\n * @alias Gp.Services.Geocode.ReverseGeocodedLocation\n */\nfunction ReverseGeocodedLocation () {\n    if (!(this instanceof ReverseGeocodedLocation)) {\n        throw new TypeError(\"ReverseGeocodedLocation constructor cannot be called as a function.\");\n    }\n\n    // INFO\n    // appel du constructeur de la classe mère\n    // avec passage de param.\n    GeocodedLocation.apply(this, arguments);\n\n    /**\n     * Nom de la classe (heritage) : \"ReverseGeocodedLocation\"\n     * @type {String}\n     */\n    this.CLASSNAME = \"ReverseGeocodedLocation\";\n\n    this.searchCenterDistance = null;\n}\n\nReverseGeocodedLocation.prototype = Object.create(GeocodedLocation.prototype);\n\nReverseGeocodedLocation.prototype.constructor = ReverseGeocodedLocation;\n\nexport default ReverseGeocodedLocation;\n","\n/**\n * Fonction retournant un objet contenant des clés de lecture (readers)\n *      qui permettent de parser des réponses XML du service de géocodage inverse du Géoportail\n *      afin de récupérer les résultats retournés.\n * @module ReverseGeocodeResponseReader\n * @alias Gp.Services.Geocode.Formats.ReverseGeocodeResponseReader\n * @private\n */\n\n// import Logger from \"../../../Utils/LoggerByDefault\";\nimport MR from \"../../../Utils/MessagesResources\";\nimport ErrSrv from \"../../../Exceptions/ErrorService\";\nimport ReverseGeocodeResponse from \"../Response/model/GeocodeResponse\";\nimport ReverseGeocodedLocation from \"../Response/model/ReverseGeocodedLocation\";\n\n/**\n * Objet ReverseGeocodeResponseReader\n * @member {Object} ReverseGeocodeResponseReader\n *\n * @property {String} ReverseGeocodeResponseReader.VERSION - Version du service de géocodage\n *\n * @property {Object} ReverseGeocodeResponseReader.NAMESPACES - Objet stockant les différents namespaces et les URI associées\n *\n * @property {String} ReverseGeocodeResponseReader.SCHEMALOCATION - Localisation (URL) du schema de définition du XML (XSD)\n *\n * @property {String} ReverseGeocodeResponseReader.DEFAULTPREFIX - Namespace par défaut du format\n *\n * @property {Object} ReverseGeocodeResponseReader.READERS - Objet contenant des fonctions de lecture, appelées \"READERS\"\n *      dont chaque clé correspond au nom d'un tag du XML que l'on souhaite lire\n *      et la valeur associée est une fonction (node, data)\n *      où node est un noeud du document DOM\n *      et data est un objet où l'on stocke les informations lues dans le XML.\n *\n * @property {Method} ReverseGeocodeResponseReader.read - Méthode permettant de lancer la lecture d'une réponse XML du service de géocodage,\n *      à l'aide des READERS de la classe.\n *\n */\n\nvar ReverseGeocodeResponseReader = {};\n\n/**\n * version du service de géocodage\n */\nReverseGeocodeResponseReader.VERSION = \"1.2\";\n\n/**\n * Objet stockant les différents namespaces et les URI associées\n */\nReverseGeocodeResponseReader.NAMESPACES = {\n    xmlns : \"http://www.opengis.net/xls\",\n    gml : \"http://www.opengis.net/gml\",\n    xls : \"http://www.opengis.net/xls\",\n    xlsext : \"http://www.opengis.net/xlsext\",\n    xsi : \"http://www.w3.org/2001/XMLSchema-instance\"\n};\n\n/**\n * Localisation (URL) du schema de définition du XML (XSD)\n */\nReverseGeocodeResponseReader.SCHEMALOCATION = \"http://wxs.ign.fr/schemas/olsAll.xsd\";\n\n/**\n * Namespace par défaut du format\n */\nReverseGeocodeResponseReader.DEFAULTPREFIX = \"xls\";\n\n/**\n * Objet contenant des fonctions de lecture, appelées \"READERS\"\n *      dont chaque clé correspond au nom d'un tag du XML que l'on souhaite lire\n *      et la valeur associée est une fonction (node, data)\n *      où node est un noeud du document DOM\n *      et data est un objet où l'on stocke les informations lues dans le XML.\n */\nReverseGeocodeResponseReader.READERS = {\n\n    xls : {\n\n        /** TODO : jsdoc block */\n        XLS : function (root) {\n            var reverseGeocodeResponse = new ReverseGeocodeResponse();\n\n            // vérification de la version du service, et des namespaces de l'en-tête\n            __checkServiceAttributes(root);\n\n            // puis lancement de la lecture de l'ensemble des noeuds, en bouclant sur les childNodes\n            __getChildNodes(root, reverseGeocodeResponse);\n\n            return reverseGeocodeResponse;\n        },\n\n        /** TODO : jsdoc block */\n        ReverseGeocodedLocation : function (node, reverseGeocodeResponse) {\n            var reverseGeocodedLocation = new ReverseGeocodedLocation();\n\n            __getChildNodes(node, reverseGeocodedLocation);\n\n            // Ajout du résultat au tableau locations de reverseGeocodeResponse\n            if (reverseGeocodeResponse && Array.isArray(reverseGeocodeResponse.locations)) {\n                reverseGeocodeResponse.locations.push(reverseGeocodedLocation);\n            }\n        },\n\n        /** TODO : jsdoc block */\n        Address : function (node, reverseGeocodedLocation) {\n            var countrycode = node.getAttribute(\"countryCode\");\n            if (reverseGeocodedLocation && countrycode) {\n                reverseGeocodedLocation.type = countrycode;\n            }\n            // on va récupérer les autres informations (StreetAddress, place, postalCode...)\n            __getChildNodes(node, reverseGeocodedLocation);\n        },\n\n        /** TODO : jsdoc block */\n        Building : function (node, reverseGeocodedLocation) {\n            var num = node.getAttribute(\"number\");\n            if (reverseGeocodedLocation && reverseGeocodedLocation.hasOwnProperty(\"placeAttributes\")) {\n                if (num) {\n                    reverseGeocodedLocation.placeAttributes.number = num;\n                } else if (node.getAttribute(\"buildingName\")) {\n                    reverseGeocodedLocation.placeAttributes.number = node.getAttribute(\"buildingName\");\n                } else if (node.getAttribute(\"subdivision\")) {\n                    reverseGeocodedLocation.placeAttributes.number = node.getAttribute(\"subdivision\");\n                }\n            }\n        },\n\n        /** TODO : jsdoc block */\n        Street : function (node, reverseGeocodedLocation) {\n            // in case of a streetAddress result : street represents the street name\n            if (reverseGeocodedLocation.type === \"StreetAddress\") {\n                reverseGeocodedLocation.placeAttributes.street = __getChildValue(node);\n\n                // in case of a cadastral parcel result : street represents the cadastral parcel identifier\n            } else if (reverseGeocodedLocation.type === \"CadastralParcel\") {\n                reverseGeocodedLocation.placeAttributes.cadastralParcel = __getChildValue(node);\n            }\n        },\n\n        /** TODO : jsdoc block */\n        Place : function (node, reverseGeocodedLocation) {\n            var placeType = node.getAttribute(\"type\");\n            var placeName = __getChildValue(node);\n\n            if (reverseGeocodedLocation && reverseGeocodedLocation.hasOwnProperty(\"placeAttributes\")) {\n                if (placeType === \"Municipality\") {\n                    reverseGeocodedLocation.placeAttributes.municipality = placeName;\n                } else if (placeType === \"Bbox\") {\n                    var values = placeName.split(\";\");\n                    if (values.length === 4) {\n                        reverseGeocodedLocation.placeAttributes.bbox = {\n                            left : parseFloat(values[0]),\n                            right : parseFloat(values[2]),\n                            top : parseFloat(values[1]),\n                            bottom : parseFloat(values[3])\n                        };\n                    }\n                } else if (placeType === \"Commune\") {\n                    reverseGeocodedLocation.placeAttributes.commune = placeName;\n                } else if (placeType === \"Departement\") {\n                    reverseGeocodedLocation.placeAttributes.department = placeName;\n                } else if (placeType === \"INSEE\") {\n                    reverseGeocodedLocation.placeAttributes.insee = placeName;\n                } else if (placeType === \"Qualite\") {\n                    reverseGeocodedLocation.placeAttributes.quality = placeName;\n                } else if (placeType === \"Territoire\") {\n                    reverseGeocodedLocation.placeAttributes.territory = placeName;\n                } else if (placeType === \"ID\") {\n                    reverseGeocodedLocation.placeAttributes.ID = placeName;\n                } else if (placeType === \"ID_TR\") {\n                    reverseGeocodedLocation.placeAttributes.IDTR = placeName;\n                } else if (placeType === \"Importance\") {\n                    reverseGeocodedLocation.placeAttributes.importance = parseInt(placeName, 10);\n                } else if (placeType === \"Nature\") {\n                    reverseGeocodedLocation.placeAttributes.nature = placeName;\n                } else if (placeType === \"Numero\") {\n                    reverseGeocodedLocation.placeAttributes.number = placeName;\n                } else if (placeType === \"Feuille\") {\n                    reverseGeocodedLocation.placeAttributes.sheet = placeName;\n                } else if (placeType === \"Section\") {\n                    reverseGeocodedLocation.placeAttributes.section = placeName;\n                } else if (placeType === \"CommuneAbsorbee\") {\n                    reverseGeocodedLocation.placeAttributes.absorbedCity = placeName;\n                } else if (placeType === \"Arrondissement\") {\n                    if (placeName) {\n                        reverseGeocodedLocation.placeAttributes.arrondissement = placeName;\n                    }\n                } else if (placeType === \"Type\") {\n                    reverseGeocodedLocation.placeAttributes.origin = placeName;\n                } else if (placeType === \"Prefecture\") {\n                    reverseGeocodedLocation.placeAttributes.prefecture = placeName;\n                } else if (placeType === \"InseeRegion\") {\n                    reverseGeocodedLocation.placeAttributes.inseeRegion = placeName;\n                } else if (placeType === \"InseeDepartment\") {\n                    reverseGeocodedLocation.placeAttributes.inseeDepartment = placeName;\n                }\n            }\n        },\n\n        /** TODO : jsdoc block */\n        PostalCode : function (node, reverseGeocodedLocation) {\n            if (reverseGeocodedLocation && reverseGeocodedLocation.hasOwnProperty(\"placeAttributes\")) {\n                reverseGeocodedLocation.placeAttributes.postalCode = __getChildValue(node);\n            }\n        },\n\n        /** TODO : jsdoc block */\n        SearchCentreDistance : function (node, reverseGeocodedLocation) {\n            if (reverseGeocodedLocation) {\n                reverseGeocodedLocation.searchCenterDistance = parseFloat(node.getAttribute(\"value\"));\n            }\n        },\n\n        /** TODO : jsdoc block */\n        Error : function (node) {\n            // <Error message=\"For input string : &quot;2,45&quot;\" errorCode=\"InternalServerError\"/>\n            var srvMess = node.getAttribute(\"message\");\n            var errorCode = node.getAttribute(\"errorCode\");\n            var message = MR.getMessage(\"SERVICE_RESPONSE_EXCEPTION\",\n                \"(\" + errorCode + \") : \" + srvMess);\n            throw new ErrSrv({\n                message : message,\n                type : ErrSrv.TYPE_SRVERR\n            });\n        }\n    },\n\n    gml : {\n\n        /** TODO : jsdoc block */\n        pos : function (node, reverseGeocodedLocation) {\n            var pos = __getChildValue(node);\n            if (reverseGeocodedLocation && pos) {\n                reverseGeocodedLocation.position = {\n                    x : parseFloat(pos.split(\" \")[0]),\n                    y : parseFloat(pos.split(\" \")[1])\n                };\n            }\n        }\n    },\n\n    xlsext : {\n        /** TODO : jsdoc block */\n        ExtendedGeocodeMatchCode : function (node, reverseGeocodedLocation) {\n            if (reverseGeocodedLocation) {\n                reverseGeocodedLocation.matchType = __getChildValue(node);\n            }\n        }\n    },\n\n    /** TODO : jsdoc block */\n    ExceptionReport : function (node) {\n        var response = {};\n        if (node.hasChildNodes()) {\n            var children = node.childNodes;\n            var child;\n            for (var i = 0; i < children.length; i++) {\n                child = children[i];\n                if (child.nodeName === \"Exception\") {\n                    response.exceptionReport = ReverseGeocodeResponseReader.READERS[\"Exception\"](child);\n                }\n            }\n        }\n        return response;\n    },\n\n    /** TODO : jsdoc block */\n    Exception : function (node) {\n        var exceptionReport = {};\n\n        // get exception code\n        var exceptionCode = node.getAttribute(\"exceptionCode\");\n        if (exceptionCode) {\n            exceptionReport.exceptionCode = exceptionCode;\n        }\n\n        // get exception message\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            exceptionReport.exception = textNode.nodeValue;\n        }\n\n        return exceptionReport;\n    }\n\n};\n\n/**\n * Méthode permettant de lancer la lecture d'une réponse XML du service de géocodage,\n *      à l'aide des READERS de la classe.\n *\n * @method ReverseGeocodeResponseReader.read\n * @param {DOMElement} root - racine de la réponse XML à lire\n * @return {Object} geocodeResponse|exceptionReport : l'objet contenant les informations de la réponse XML,\n *      sous la forme d'un objet GeocodeResponse, ou un objet littéral exceptionReport si le service a renvoyé une exception.\n * @static\n * @memberof ReverseGeocodeResponseReader\n */\nReverseGeocodeResponseReader.read = function (root) {\n    if (root.nodeName === \"XLS\") {\n        var nsPrefix = root.prefix;\n        if (!nsPrefix) {\n            nsPrefix = ReverseGeocodeResponseReader.DEFAULTPREFIX;\n        }\n        var geocodeResponse = ReverseGeocodeResponseReader.READERS[nsPrefix][root.nodeName](root);\n        return geocodeResponse;\n    } else if (root.nodeName === \"ExceptionReport\") {\n        var exceptionReport = ReverseGeocodeResponseReader.READERS[root.nodeName](root);\n        return exceptionReport;\n    } else {\n        throw new Error(\"Erreur lors de la lecture de la réponse : elle n'est pas au format attendu.\");\n    }\n};\n\n/**\n * Récupération des attributs d'un noeud élément\n *\n * @private\n * @memberof ReverseGeocodeResponseReader\n * @method __getAttributes\n * @param {DOMElement} node - noeud contenant l'attribut recherché\n * @return {Object} nodeAttributes - objet contenant les noms et valeurs des différents attributs\n */\nfunction __getAttributes (node) {\n    if (node.attributes.length > 0) {\n        var nodeAttributes = {};\n        var attributes = node.attributes;\n        for (var i = 0; i < attributes.length; i++) {\n            var attribute = attributes[i];\n            nodeAttributes[attribute.nodeName] = attribute.nodeValue;\n        }\n        return nodeAttributes;\n    }\n}\n\n/**\n * Récupération des noeuds enfants à partir d'un noeud donné, pour lecture (readNode).\n *\n * @private\n * @memberof ReverseGeocodeResponseReader\n * @method __getChildNodes\n * @param {DOMElement} node - a DOM node\n * @param {Array|Object} [data] - an object to be filled with node data\n */\nfunction __getChildNodes (node, data) {\n    if (node.hasChildNodes()) {\n        var children = node.childNodes;\n        var child;\n        var childName;\n        var childPrefix;\n\n        for (var i = 0; i < children.length; i++) {\n            child = children[i];\n\n            if (child.nodeType === 1) { // 1 === node.ELEMENT_NODE\n                childName = child.localName || child.baseName || child.nodeName;\n                childPrefix = child.prefix || ReverseGeocodeResponseReader.DEFAULTPREFIX;\n\n                if (ReverseGeocodeResponseReader.READERS[childPrefix][childName]) {\n                    var reader = ReverseGeocodeResponseReader.READERS[childPrefix][childName];\n                    reader(child, data);\n                } else {\n                    __getChildNodes(child, data);\n                }\n            }\n        }\n    }\n}\n\n/**\n * Lecture de la valeur du premier child d'un noeud, si elle existe.\n *\n * @private\n * @memberof ReverseGeocodeResponseReader\n * @method __getChildValue\n * @param {DOMElement} node - a DOM node\n * @return {String} value - valeur du firstChild du noeud en entrée, ou chaîne vide.\n */\nfunction __getChildValue (node) {\n    var textNode;\n    var value = \"\";\n\n    if (node.hasChildNodes()) {\n        textNode = node.firstChild;\n        if (textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            value = textNode.nodeValue;\n        }\n    }\n    return value;\n}\n\n/**\n * Vérification des attributs du service, dans la balise XLS de la réponse :\n *      version, namespaces, et namespace par défaut doivent correspondre à ceux attendus.\n *\n * @private\n * @memberof ReverseGeocodeResponseReader\n * @method __checkServiceAttributes\n * @param {DOMElement} XLSNode - a DOM node, corresponding to XLS first tag.\n */\nfunction __checkServiceAttributes (XLSNode) {\n    if (XLSNode.attributes.length > 0) {\n        // on récupère et parcourt les attributs de la balise XLS de la réponse\n        var xlsAttributes = __getAttributes(XLSNode);\n        for (var att in xlsAttributes) {\n            if (xlsAttributes.hasOwnProperty(att)) {\n                // vérification de la version\n                if (att === \"version\") {\n                    if (xlsAttributes[\"version\"] !== ReverseGeocodeResponseReader.VERSION) {\n                        console.log(\"[ReverseGeocodeResponseReader] geocode version is not the expected one : there may be errors in parsing\");\n                        return;\n                    }\n                }\n\n                // on vérifie que l'uri du namespace par défaut est bien celle que l'on attend\n                if (att === \"xmlns\") {\n                    if (xlsAttributes[att] !== ReverseGeocodeResponseReader.NAMESPACES[ReverseGeocodeResponseReader.DEFAULTPREFIX]) {\n                        console.log(\"[ReverseGeocodeResponseReader] geocode response default namespace is not the expected one\");\n                        return;\n                    }\n                    continue;\n                }\n\n                var prefix = att.split(\":\")[0];\n                var ns = att.split(\":\")[1];\n\n                // si on a un autre xmlns, on vérifie aussi les URI\n                if (prefix === \"xmlns\" && ns) {\n                    // si l'attribut correspond à un namespace défini dans le reader\n                    if (ReverseGeocodeResponseReader.NAMESPACES[ns]) {\n                        // il faut que les URI correspondent aussi.\n                        if (ReverseGeocodeResponseReader.NAMESPACES[ns] !== xlsAttributes[att]) {\n                            console.log(\"[ReverseGeocodeResponseReader] geocode response \" + att + \" namespace is not the expected one\");\n                            return;\n                        }\n                    }\n                }\n\n                // pour finir on vérifie la localisation du schema XSD du service\n                if (ns === \"schemaLocation\") {\n                    if (ReverseGeocodeResponseReader.SCHEMALOCATION !== xlsAttributes[att]) {\n                        console.log(\"[ReverseGeocodeResponseReader] geocode response schema location is not the expected one\");\n                        return;\n                    }\n                }\n            }\n        }\n    }\n}\n\nexport default ReverseGeocodeResponseReader;\n","/**\n * Factory pour générer une reponse JSON à partir d'un XML\n * ou d'un JSON encapsulant du XML\n * (Factory)\n *\n * @module ReverseGeocodeResponseFactory\n * @alias Gp.Services.ReverseGeocode.Response.ReverseGeocodeResponseFactory\n * @todo La reponse JSON peut encapsuler un XML !\n * @private\n */\n\nimport MRes from \"../../../Utils/MessagesResources\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport XML from \"../../../Formats/XML\";\nimport ReverseGeocodeResponseReader from \"../Formats/ReverseGeocodeResponseReader\";\n\nvar ReverseGeocodeReponseFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant ReverseGeocode\n     *\n     * @example\n     *   var options = {\n     *      response :\n     *      rawResponse :\n     *      scope :\n     *      onSuccess :\n     *      onError :\n     *   };\n     *\n     */\n    build : function (options) {\n        // data de type ReverseGeocodeResponse\n        var data = null;\n\n        if (options.response) {\n            if (options.rawResponse) {\n                data = options.response;\n            } else {\n                try {\n                    var p = new XML({\n                        reader : ReverseGeocodeResponseReader\n                    });\n\n                    if (typeof options.response === \"string\") {\n                        p.setXMLString(options.response);\n                    } else {\n                        p.setXMLDoc(options.response);\n                    }\n\n                    data = p.parse();\n\n                    if (!data) {\n                        throw new Error(\"L'analyse de la réponse du service !?\");\n                    }\n                } catch (e) {\n                    // on relaye l'erreur reçue\n                    e.status = 200;\n                    options.onError.call(options.scope, e);\n                    return;\n                }\n\n                // Si la réponse contenait une exception renvoyée par le service\n                // TODO : quand cela arrive-t-il ?\n                if (data.exceptionReport) {\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", data.exceptionReport),\n                        type : ErrorService.TYPE_SRVERR,\n                        status : 200\n                    }));\n                    return;\n                }\n\n                // dans le cas d'un srs non EPSG géographique, il faut réinverser les coordonnées (lat,lon => lon,lat)\n                if (options.scope && options.scope.options && options.scope.options.srs && options.scope.options.srs !== \"EPSG:4326\") {\n                    var location;\n                    var pos;\n                    if (data.locations) {\n                        for (var i = 0; i < data.locations.length; i++) {\n                            location = data.locations[i];\n                            if (location) {\n                                pos = location.position;\n                                if (pos) {\n                                    // on inverse les 2 coordonnées\n                                    location.position = {\n                                        x : pos.y,\n                                        y : pos.x\n                                    };\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        } else {\n            options.onError.call(options.scope, new ErrorService({\n                message : MRes.getMessage(\"SERVICE_RESPONSE_EMPTY\"),\n                type : ErrorService.TYPE_SRVERR,\n                status : -1 // FIXME : status response\n            }));\n            return;\n        }\n\n        options.onSuccess.call(options.scope, data);\n    }\n};\n\nexport default ReverseGeocodeReponseFactory;\n","\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport _ from \"../../Utils/MessagesResources\";\nimport ErrorService from \"../../Exceptions/ErrorService\";\nimport CommonService from \"../CommonService\";\nimport ReverseGeocodeRequestFactory from \"./Request/ReverseGeocodeRequestFactory\";\nimport ReverseGeocodeResponseFactory from \"./Response/ReverseGeocodeResponseFactory\";\n\n/**\n * @classdesc\n * Appel du service de géocodage inverse du Géoportail :\n *     envoi de la requête construite selon les paramètres en options,\n *     éventuellement parsing et analyse  de la réponse,\n *     retour d'une réponse en paramètre de la fonction onSuccess.\n * @constructor\n * @extends {Gp.Services.CommonService}\n * @alias Gp.Services.ReverseGeocode\n *\n * @param {Object} options - options spécifiques au service (+ les options heritées)\n *\n * @param {Object} options.position - Position du point de référence pour le calcul de proximité exprimée dans le système de référence spécifié par le srs.\n *      @param {Float} options.position.x - Abcisse du point de référence pour le calcul de proximité exprimée dans le système de référence spécifié par le srs. (= longitude si srs = \"CRS:84\", latitude si srs = \"EPSG:4326\")\n *      @param {Float} options.position.y - Ordonnée du point de référence pour le calcul de proximité exprimée dans le système de référence spécifié par le srs. (= latitude si srs = \"CRS:84\", longitude si srs = \"EPSG:4326\")\n *\n * @param {Object} [options.filterOptions] - Les propriétés possibles de cet objet sont décrites ci-après.\n * @param {Object} [options.filterOptions.bbox] - Emprise dans laquelle on souhaite effectuer la recherche.\n *      Les propriétés possibles de cet objet sont décrites ci-après.\n *      @param {Float} options.filterOptions.bbox.left   - Abscisse du côté gauche de la BBOX\n *      @param {Float} options.filterOptions.bbox.right  - Abscisse du côté droit de la BBOX\n *      @param {Float} options.filterOptions.bbox.top    - Ordonnée supérieure de la BBOX\n *      @param {Float} options.filterOptions.bbox.bottom - Ordonnée inférieure de la BBOX\n *\n * @param {Object} [options.filterOptions.circle] - Cercle dans lequel on souhaite effectuer la recherche.\n *      Les propriétés possibles de cet objet sont décrites ci-après.\n *      @param {Float} options.filterOptions.circle.x      - Abscisse du centre du cercle de recherche.\n *      @param {Float} options.filterOptions.circle.y      - Ordonnée du centre du cercle de recherche.\n *      @param {Float} options.filterOptions.circle.radius - Rayon du cercle de recherche.\n *\n * @param {Array.<Object>} [options.filterOptions.polygon] - Polygone dans lequel on souhaite effectuer la recherche.\n *      Liste des couples x et y pour chaque point constituant le polygone.\n *\n * @param {Array.<String>} [options.filterOptions.type = \"StreetAddress\"] - Type de l'objet recherché.\n *      Le service de géocodage du Géoportail permet de rechercher des 'PostionOfInterest' pour des toponymes, des 'StreetAddress'\n *      pour des adresses postales et/ou des 'CadastralParcel' pour des parcelles cadastrales.\n *      D'autres types pourront être rajoutés selon l'évolution du service.\n *      Par défaut, type = ['StreetAddress'].\n *\n * @param {Number} [options.maximumResponses] - Nombre de réponses maximal que l'on souhaite recevoir.\n *      Pas de valeur par défaut. Si le serveur consulté est celui du Géoportail, la valeur par défaut sera donc celle du service : 25.\n *\n * @param {String} [options.srs = CRS:84] - Système de coordonnées dans lequel les paramètres géographiques en entrée et la réponse du service sont exprimés.\n *      Pas de valeur par défaut.\n *      Si le serveur consulté est celui du Géoportail, la valeur par défaut est : \"CRS:84\".\n *\n * @example\n *   var options = {\n *      apiKey : null,\n *      serverUrl : 'http://localhost/service/',\n *      protocol : 'JSONP', // JSONP|XHR\n *      proxyURL : null,\n *      httpMethod : 'GET', // GET|POST\n *      timeOut : 10000, // ms\n *      rawResponse : false, // true|false\n *      scope : null, // this\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *      // spécifique au service\n *      position : {x:0 , y:0},\n *      filterOptions :{\n *          bbox : {left : 0, right : 1, top : 1, bottom : 0},\n *          [circle : {\n *              x : 0,\n *              y : 0,\n *              radius : 100\n *          }]\n *          [polygon  : [{x:0,y:0}, {x:1,y:1}, {x:2,y:2}, {x:3,y:2}, {x:4,y:1}, {x:0,y:0}]]\n *          type : ['StreetAddress']\n *      },\n *      maximumResponses : 25,\n *      srs : 'EPSG:4326'\n *   };\n *\n * @private\n */\nfunction ReverseGeocode (options) {\n    if (!(this instanceof ReverseGeocode)) {\n        throw new TypeError(_.getMessage(\"CLASS_CONSTRUCTOR\", \"ReverseGeocode\"));\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     * FIXME instance ou classe ?\n     */\n    this.CLASSNAME = \"ReverseGeocode\";\n\n    // appel du constructeur par heritage\n    CommonService.apply(this, arguments);\n\n    this.logger = Logger.getLogger(\"Gp.Services.ReverseGeocode\");\n    this.logger.trace(\"[Constructeur ReverseGeocode (options)]\");\n\n    if (!options.position) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"position\"));\n    }\n\n    // on lance une exception afin d'eviter au service de le faire...\n    if (options.position.x === null) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"position.x\"));\n    }\n\n    if (options.position.y === null) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"position.y\"));\n    }\n\n    // ajout des options spécifiques au service\n    this.options.position = options.position;\n\n    // on definit des filtres par defaut\n    if (!options.filterOptions || typeof options.filterOptions !== \"object\") {\n        this.options.filterOptions = options.filterOptions = {\n            type : [\"StreetAddress\"]\n        };\n    }\n\n    // FIXME ECMAScript 5 support (valable pour un objet uniquement !)\n    // ceci permet de tester le cas où : object = {}\n    if (Object.keys(options.filterOptions).length === 0) {\n        this.options.filterOptions = {\n            type : [\"StreetAddress\"]\n        };\n    }\n\n    // on teste pour chaque filtre, les conditions suivantes : null ou vide !\n    var filter = Object.keys(options.filterOptions);\n    for (var i = 0; i < filter.length; i++) {\n        var key = filter[i];\n        if (!options.filterOptions[key] || Object.keys(options.filterOptions[key]).length === 0) {\n            delete this.options.filterOptions[key];\n        }\n    }\n\n    this.options.filterOptions.type = options.filterOptions.type || [\"StreetAddress\"];\n    // on vérifie que le type est bien dans un tableau\n    if (!Array.isArray(this.options.filterOptions.type)) {\n        throw new Error(_.getMessage(\"PARAM_TYPE\", \"filterOptions.type\"));\n    }\n\n    this.options.maximumResponses = options.maximumResponses || 25;\n\n    // FIXME : cet attribut (returnFreeForm) n'est pas spécifié dans la doc du constructeur ?\n    // Il est inutile en effet, mais présent dans les specs...\n    this.options.returnFreeForm = options.returnFreeForm || false;\n    // info : en réalité le service ne reconnait que EPSG:4326. this.options.srs permet essentiellement de différencier EPSG:4326 (lat,lon) et CRS:84 (lon,lat)\n    this.options.srs = options.srs || \"CRS:84\";\n\n    // si on n'a pas un systeme de coordonnées EPSG géographique, il faut inverser les coordonnées\n    // (car elles sont en lon, lat alors que le service attend une position en lat, lon).\n    // dans le cas d'EPSG:4326 par exemple, les coordonnées sont bien en lat, lon donc on ne fait rien.\n    if (ReverseGeocode.geoEPSG.indexOf(this.options.srs) === -1) {\n        // pour la position\n        this.options.position = {\n            x : this.options.position.y,\n            y : this.options.position.x\n        };\n        // pour les filtres spatiaux s'ils sont spécifiés\n        if (this.options.filterOptions && this.options.filterOptions.circle) {\n            var circle = this.options.filterOptions.circle;\n            this.options.filterOptions.circle = {\n                x : circle.y,\n                y : circle.x,\n                radius : circle.radius\n            };\n        }\n        if (this.options.filterOptions && this.options.filterOptions.polygon) {\n            var polygon = this.options.filterOptions.polygon;\n            for (i = 0; i < polygon.length; i++) {\n                var coords = polygon[i];\n                this.options.filterOptions.polygon[i] = {\n                    x : coords.y,\n                    y : coords.x\n                };\n            }\n        }\n    }\n\n    // attributs d'instances\n\n    /**\n     * Format forcé de la réponse du service : \"xml\"\n     * sauf si l'on souhaite une reponse brute (options.rawResponse)\n     */\n    this.options.outputFormat = (this.options.rawResponse) ? \"\" : \"xml\";\n}\n\n/**\n * @lends module:ReverseGeocode#\n */\nReverseGeocode.prototype = Object.create(CommonService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/*\n * Constructeur (alias)\n */\nReverseGeocode.prototype.constructor = ReverseGeocode;\n\n/**\n * (overwrite)\n * Création de la requête\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nReverseGeocode.prototype.buildRequest = function (error, success) {\n    var options = {\n        httpMethod : this.options.httpMethod,\n        // options specifiques du service\n        position : this.options.position,\n        returnFreeForm : this.options.returnFreeForm,\n        filterOptions : this.options.filterOptions,\n        srs : \"EPSG:4326\", // info : en réalité le service ne reconnait que EPSG:4326. this.options.srs permet essentiellement de différencier EPSG:4326 (lat,lon) et CRS:84 (lon,lat)\n        maximumResponses : this.options.maximumResponses\n    };\n\n    this.request = ReverseGeocodeRequestFactory.build(options);\n\n    // on teste si la requete a bien été construite !\n    (!this.request)\n        ? error.call(this, new ErrorService(_.getMessage(\"SERVICE_REQUEST_BUILD\")))\n        : success.call(this, this.request);\n};\n\n/**\n * (overwrite)\n * Analyse de la reponse\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nReverseGeocode.prototype.analyzeResponse = function (error, success) {\n    if (this.response) {\n        var options = {\n            response : this.response,\n            rawResponse : this.options.rawResponse,\n            onError : error,\n            onSuccess : success,\n            scope : this\n        };\n\n        ReverseGeocodeResponseFactory.build(options);\n    } else {\n        error.call(this, new ErrorService(_.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n    }\n};\n\n/**\n * Codes EPSG géographiques (lat/lon). Utiles car les coordonnées doivent être inversées.\n */\nReverseGeocode.geoEPSG = [\"EPSG:4326\"];\n\nexport default ReverseGeocode;\n","/**\n * Response object for {@link module:Services~autoComplete Gp.Services.autoComplete ()} invocation when successful. Received as the argument of onSuccess callback function.\n *\n * @property {Array.<Gp.Services.AutoComplete.SuggestedLocation>} suggestedLocations - SuggestedLocations array.\n *\n * @namespace\n * @alias Gp.Services.AutoCompleteResponse\n */\nfunction AutoCompleteResponse () {\n    if (!(this instanceof AutoCompleteResponse)) {\n        throw new TypeError(\"AutoCompleteResponse constructor cannot be called as a function.\");\n    }\n\n    this.suggestedLocations = [];\n}\n\nAutoCompleteResponse.prototype = {\n\n    constructor : AutoCompleteResponse\n\n};\n\nexport default AutoCompleteResponse;\n","\n/**\n * Single SuggestedLocation Object returned by underlying web service.\n * Each suggested location represents a street address (\"StreetAddress\") or a place name (\"PositionOfInterest\").\n *\n * @property {String} type - Suggested location type : \"StreetAddress\" ou \"PositionOfInterest\"\n * @property {Gp.Point} position - Position of the suggested location given in requested coordinates system.\n * @property {String} commune - Suggested municipality\n * @property {String} fullText - Full text representation of the suggested location.\n * @property {String} postalCode - Suggested location postcode\n * @property {Integer} classification - Number used to classify the importance of the place where is the suggested location from 1 (most important) to 7 (less important).\n * @property {String} street - Street name of the suggested location (\"StreetAddress\" only).\n * @property {String} kind - Nature of the suggested location : \"prefecture\", \"monument\", \"commune\", ... for instance (\"PositionOfInterest\" only).\n *\n * @namespace\n * @alias Gp.Services.AutoComplete.SuggestedLocation\n */\nfunction SuggestedLocation () {\n    if (!(this instanceof SuggestedLocation)) {\n        throw new TypeError(\"SuggestedLocation constructor cannot be called as a function.\");\n    }\n\n    /* REPONSE :\n        {\n           \"status\" : \"OK\",\n           \"results\" : [\n              {\n                 \"country\":\"PositionOfInterest\",\n                 \"x\":-1.559185,\n                 \"y\":47.952603,\n                 \"city\":\"Brie\",\n                 \"zipcode\":\"35150\",\n                 \"street\":\"corbe\",\n                 \"kind\":\"Lieu-dit habité\",\n                 \"fulltext\":\"corbe, 35150 Brie\",\n                 \"classification\":6\n              },\n              {\n                 \"country\":\"StreetAddress\",\n                 \"x\":1.538295,\n                 \"y\":43.19646,\n                 \"city\":\"Brie\",\n                 \"zipcode\":\"09700\",\n                 \"street\":\"courreste\",\n                 \"kind\":\"\",\n                 \"fulltext\":\"courreste, 09700 Brie\",\n                 \"classification\":7\n              }\n           ]\n        }\n    */\n\n    /* REPONSE EN ERREUR\n        {\n            status : \"ERROR\",\n            results : [ ]\n        }\n    */\n\n    /**\n     * Suggested location type : \"StreetAddress\" ou \"PositionOfInterest\"\n     * @type {String}\n     */\n    this.type = null;\n\n    /**\n     * Position of the suggested location given in requested coordinates system.\n     * @type {Gp.Point}\n     */\n    this.position = {\n        x : null,\n        y : null\n    };\n\n    /**\n     * Suggested municipality\n     * @type {String}\n     */\n    this.commune = null;\n\n    /**\n     * Full text representation of the suggested location.\n     * @type {String}\n     */\n    this.fullText = null;\n\n    /**\n     * Suggested location postcode\n     * @type {Number}\n     */\n    this.postalCode = null;\n\n    /**\n     * Number used to classify the importance of the place where is the suggested location from 1 (most important) to 7 (less important).\n     * @type {Integer}\n     */\n    this.classification = null;\n\n    /**\n     * Street name of the suggested location (\"StreetAddress\" only).\n     * @type {String}\n     */\n    this.street = null;\n\n    /**\n     * Place name of the suggested location (\"PositionOfInterest\" only).\n     * @type {String}\n     */\n    this.poi = null;\n\n    /**\n     * Nature of the suggested location : \"prefecture\", \"monument\", \"commune\", ... for instance (\"PositionOfInterest\" only).\n     * @type {String}\n     */\n    this.kind = null;\n}\n\nSuggestedLocation.prototype = {\n\n    constructor : SuggestedLocation\n};\n\nexport default SuggestedLocation;\n","/**\n * Factory pour générer une reponse JSON à partir d'un XML ou d'un JSON\n * (Factory)\n *\n * @module AutoCompleteResponseFactory\n * @private\n * @alias Gp.Services.AutoComplete.Response.AutoCompleteResponseFactory\n */\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport MRes from \"../../../Utils/MessagesResources\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport AutoCompleteResponse from \"./model/AutoCompleteResponse\";\nimport SuggestedLocation from \"./model/SuggestedLocation\";\n\nvar AutoCompleteResponseFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Alti\n     *\n     * @example\n     *   var options = {\n     *      response :\n     *      outputFormat :\n     *      rawResponse :\n     *      scope :\n     *      onSuccess :\n     *      onError :\n     *   };\n     *\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"AutoCompleteResponseFactory\");\n        logger.trace([\"AutoCompleteResponseFactory::build()\"]);\n\n        var data = null;\n\n        if (options.response) {\n            if (options.rawResponse) {\n                logger.trace(\"analyze response : raw\");\n                data = options.response;\n            } else {\n                var JSONResponse = null;\n                if (typeof options.response === \"string\") {\n                    JSONResponse = JSON.parse(options.response);\n                } else {\n                    JSONResponse = options.response;\n                }\n\n                // analyse de la réponse\n                if (JSONResponse) {\n                    // le service renvoie t il une erreur ?\n                    if (JSONResponse.error) {\n                        // ex. ?\n                        options.onError.call(options.scope, new ErrorService({\n                            message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", JSONResponse.error.description),\n                            status : JSONResponse.error.code,\n                            type : ErrorService.TYPE_SRVERR\n                        }));\n                        return;\n                    }\n\n                    // création de l'objet réponse\n                    data = new AutoCompleteResponse();\n\n                    // boucle sur les résultats de l'autocomplétion\n                    if (JSONResponse.results && Array.isArray(JSONResponse.results)) {\n                        var suggestedLocation = null;\n\n                        for (var i = 0; i < JSONResponse.results.length; i++) {\n                            var result = JSONResponse.results[i];\n                            suggestedLocation = new SuggestedLocation();\n\n                            if (result) {\n                                if (result.country === \"StreetAddress\") {\n                                    suggestedLocation.street = result.street;\n                                    suggestedLocation.type = \"StreetAddress\";\n                                } else if (result.country === \"PositionOfInterest\") {\n                                    suggestedLocation.poi = result.street;\n                                    suggestedLocation.kind = result.kind;\n                                    suggestedLocation.type = \"PositionOfInterest\";\n                                }\n\n                                if (suggestedLocation.position) {\n                                    suggestedLocation.position.x = result.x;\n                                    suggestedLocation.position.y = result.y;\n                                }\n\n                                suggestedLocation.commune = result.city;\n                                suggestedLocation.fullText = result.fulltext;\n                                suggestedLocation.postalCode = result.zipcode;\n                                suggestedLocation.classification = result.classification;\n                            }\n                            // Ajout du résultat au tableau reverseGeocodedLocations de geocodedLocation\n                            data.suggestedLocations.push(suggestedLocation);\n                        }\n                    } else {\n                        options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_FORMAT_3\")));\n                        return;\n                    }\n\n                    if (!data.suggestedLocations.length) {\n                        options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_FORMAT_3\")));\n                        return;\n                    }\n                }\n\n                if (!data) {\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_ANALYSE_2\"),\n                        type : ErrorService.TYPE_UNKERR,\n                        status : -1\n                    }));\n                    return;\n                }\n\n                // Si la réponse contenait une exception renvoyée par le service\n                if (data.exceptionReport) {\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", data.exceptionReport),\n                        type : ErrorService.TYPE_SRVERR,\n                        status : 200\n                    }));\n                    return;\n                }\n            }\n        } else {\n            // si la réponse (xmlString) est vide, on appelle le callback d'erreur\n            options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n            return;\n        }\n\n        // si tout s'est bien passé, on appelle le callback de succès\n        options.onSuccess.call(options.scope, data);\n    }\n};\n\nexport default AutoCompleteResponseFactory;\n","import CommonService from \"../CommonService\";\nimport AutoCompleteResponseFactory from \"./Response/AutoCompleteResponseFactory\";\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport MR from \"../../Utils/MessagesResources\";\nimport Helper from \"../../Utils/Helper\";\nimport ErrorService from \"../../Exceptions/ErrorService\";\n\n/**\n * @classdesc\n * Appel du service d'autocomplétion du Géoportail :\n * envoi de la requête construite selon les paramètres en options,\n * éventuellement parsing et analyse  de la réponse,\n * retour d'une réponse en paramètre de la fonction onSuccess.\n * @constructor\n * @extends {Gp.Services.CommonService}\n * @alias Gp.Services.AutoComplete\n *\n * @param {Object} options - options spécifiques au service (+ les options heritées)\n *\n * @param {String} options.text - La chaîne de caractère à compléter.\n *      Cette chaîne n'est pas \"URL encodée\".\n *      C'est l'API qui s'occupe de l'encoder pour l'inclure dans la requête.\n *\n * @param {Array.<String>} [options.filterOptions.type = \"StreetAddress\"] - Type de l'objet recherché.\n *      Le service d'autocomplétion du Géoportail permet de rechercher des toponymes 'PostionOfInterest' et/ou des adresses postales 'StreetAddress'.\n *      D'autres types pourront être rajoutés selon l'évolution du service.\n *      Par défaut, type = ['StreetAddress'].\n *\n * @param {Array.<String>} [options.filterOptions.territory] - Limitation de la zone de recherche de localisants.\n *      Le service d'autocomplétion du Géoportail permet de limiter la recherche à la métropole et la Corse : options.filterOptions.territory = ['METROPOLE'],\n *      DOMS TOMS : options.filterOptions.territory = ['DOMTOM'], ou à une liste de départements : options.filterOptions.territory = ['31', '34']\n *      Pas de valeur par défaut.\n *      La valeur par défaut est donc celle du service.\n *      Le service d'autocomplétion du Géoportail renvoie toutes les informations quand aucun territoire n'est spécifié.\n *\n * @param {Number} [options.maximumResponses = 10] - Nombre de réponses maximal que l'on souhaite recevoir.\n *      Pas de valeur par défaut.\n *      La valeur par défaut sera donc celle du service : 10.\n *\n * @example\n *   var options = {\n *      // options communes aux services\n *      apiKey : null,\n *      serverUrl : 'http://localhost/service/',\n *      protocol : 'JSONP', // JSONP|XHR\n *      proxyURL : null,\n *      httpMethod : 'GET', // GET|POST\n *      timeOut : 10000, // ms\n *      rawResponse : false, // true|false\n *      scope : null, // this\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *      // spécifique au service\n *      text : \"\",\n *      filterOptions : {\n *          type : [\"StreetAddress\"],\n *          territory : ['METROPOLE', 'DOMTOM', '31']\n *      },\n *      maximumResponses : 10\n *   };\n * @private\n */\nfunction AutoComplete (options) {\n    if (!(this instanceof AutoComplete)) {\n        throw new TypeError(MR.getMessage(\"CLASS_CONSTRUCTOR\", \"AutoComplete\"));\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     * FIXME instance ou classe ?\n     */\n    this.CLASSNAME = \"AutoComplete\";\n\n    // appel du constructeur par heritage\n    CommonService.apply(this, arguments);\n\n    this.logger = Logger.getLogger(\"Gp.Services.AutoComplete\");\n    this.logger.trace(\"[Constructeur AutoComplete (options)]\");\n\n    if (!options.text) {\n        throw new Error(MR.getMessage(\"PARAM_MISSING\", \"text\"));\n    }\n\n    // ajout des options spécifiques au service\n    this.options.text = options.text;\n\n    // on definit des filtres par defaut\n    if (!options.filterOptions || typeof options.filterOptions !== \"object\") {\n        this.options.filterOptions = options.filterOptions = {\n            territory : [],\n            type : [\"StreetAddress\"]\n        };\n    }\n\n    // FIXME ECMAScript 5 support (valable pour un objet uniquement !)\n    // ceci permet de tester le cas où : object = {}\n    if (Object.keys(options.filterOptions).length === 0) {\n        this.options.filterOptions = {\n            territory : [],\n            type : [\"StreetAddress\"]\n        };\n    }\n\n    this.options.filterOptions.type = options.filterOptions.type || [\"StreetAddress\"];\n    this.options.filterOptions.territory = options.filterOptions.territory || [];\n    this.options.maximumResponses = options.maximumResponses || 10;\n\n    // INFO\n    // le service ne repond pas en mode POST (405 Method Not Allowed)\n    if (this.options.protocol === \"XHR\" && this.options.httpMethod === \"POST\") {\n        this.logger.warn(\"Le service ne gére pas le mode d'interrogation en POST, on bascule sur du GET !\");\n        this.options.httpMethod = \"GET\"; // on surcharge !\n    }\n\n    // attributs d'instances\n\n    /**\n     * Format forcé de la réponse du service : \"json\"\n     * sauf si l'on souhaite une reponse brute (options.rawResponse)\n     */\n    this.options.outputFormat = (this.options.rawResponse) ? \"\" : \"json\";\n}\n\n/**\n * @lends module:AutoComplete#\n */\n\nAutoComplete.prototype = Object.create(CommonService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/*\n * Constructeur (alias)\n */\nAutoComplete.prototype.constructor = AutoComplete;\n\n/**\n * (overwrite)\n * Création de la requête\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nAutoComplete.prototype.buildRequest = function (error, success) {\n    // ex.\n    // http://wxs.ign.fr/CLEF/ols/apis/completion?\n    // text=Brie-Comt&\n    // type=StreetAddress,PositionOfInterest&\n    // territory=METROPOLE&\n    // maximumResponses=10\n\n    // traitement des param KPV sous forme de tableau\n    var territories = \"\";\n    if (this.options.filterOptions.territory) {\n        territories = this.options.filterOptions.territory.join(\";\");\n    }\n\n    var types = \"\";\n    if (this.options.filterOptions.type) {\n        types = this.options.filterOptions.type.join(\",\");\n    }\n\n    // normalisation de la requete avec param KPV\n    this.request = Helper.normalyzeParameters({\n        text : encodeURIComponent(this.options.text),\n        type : types,\n        terr : territories,\n        maximumResponses : this.options.maximumResponses\n    });\n\n    (!this.request)\n        ? error.call(this, new ErrorService(MR.getMessage(\"SERVICE_REQUEST_BUILD\")))\n        : success.call(this, this.request);\n};\n\n/**\n * (overwrite)\n * Analyse de la reponse\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback de succès de l'analyse de la réponse\n */\nAutoComplete.prototype.analyzeResponse = function (error, success) {\n    if (this.response) {\n        var options = {\n            response : this.response,\n            rawResponse : this.options.rawResponse,\n            onSuccess : success,\n            onError : error,\n            scope : this\n        };\n\n        AutoCompleteResponseFactory.build(options);\n    } else {\n        error.call(this, new ErrorService(MR.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n    }\n};\n\nexport default AutoComplete;\n","import Logger from \"../../../../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n *  * Élément regroupant l'ensemble des données et paramètres pour le calcul d'itinéraire : points de navigation, configuration.\n *\n * ----\n * XSD :\n * ----\n * [] => non implementé !\n *\n * ```\n * element name=\"RoutePlan\"\n *  [attribute name=\"useRealTimeTraffic\" default=\"false\"]\n *  [attribute name=\"expectedStartTime\"  type=\"dateTime\"]\n *  [attribute name=\"expectedEndTime\"    type=\"dateTime\"]\n *      element ref=\"xls:RoutePreference\"\n *      element ref=\"xls:WayPointList\"\n *      element ref=\"xls:AvoidList\"\n * ```\n * ```\n * element name=\"RoutePreference\"\n *  => value = fastest | shortest | pedestrian\n * ```\n * ```\n * element name=\"WayPointList\"\n *      element ref=\"xls:StartPoint\"\n *      element ref=\"xls:ViaPoint\" minOccurs=\"0\"\n *      element ref=\"xls:EndPoint\"\n * ```\n * ```\n * element name=\"StartPoint\"\n *    [element name=\"GeocodeMatchCode\"]\n *      [attribute name=\"accuracy\"]\n *      [attribute name=\"matchType\"] => value = City, Street, Street number, Street enhanced, ...\n *    element name=\"Position\"\n *      element ref=\"gml:Point\"\n * ```\n * ```\n * element name=\"ViaPoint\"\n *    [element name=\"GeocodeMatchCode\"]\n *      [attribute name=\"accuracy\"]\n *      [attribute name=\"matchType\"] => value = City, Street, Street number, Street enhanced, ...\n *    element name=\"Position\"\n *      element ref=\"gml:Point\"\n * ```\n * ```\n * element name=\"EndPoint\"\n *    [element name=\"GeocodeMatchCode\"]\n *      [attribute name=\"accuracy\"]\n *      [attribute name=\"matchType\"] => value = City, Street, Street number, Street enhanced, ...\n *    element name=\"Position\"\n *      element ref=\"gml:Point\"\n * ```\n * ```\n * element name=\"AvoidList\"\n *      [element ref=\"xls:AOI\"]\n *      [element ref=\"xls:_Location\"] (cf. element name=\"Position\")\n *      element ref=\"xls:AvoidFeature\"\n * ```\n * ```\n * [element name=\"AOI\"]\n *      [element ref=\"gml:CircleByCenterPoint\" || element ref=\"gml:Polygon\" || element ref=\"gml:Envelope\"]\n * ```\n * ```\n * element name=\"AvoidFeature\" => value = highway | tollway | tunnel | bridge\n * ```\n *\n * --------\n * Requête :\n * --------\n * ```\n *     <RoutePlan>\n *       <RoutePreference>Fastest</RoutePreference>\n *       <xlsext:vehicle name=\"Car\" />\n *       <WayPointList>\n *         <StartPoint>\n *           <Position><gml:Point srsName=\"EPSG:4326\"><gml:pos>2.29993 48.87228</gml:pos></gml:Point></Position>\n *         </StartPoint>\n *         <EndPoint>\n *           <Position><gml:Point srsName=\"EPSG:4326\"><gml:pos>-1.53604 47.21548</gml:pos></gml:Point></Position>\n *         </EndPoint>\n *       </WayPointList>\n *       <AvoidList>\n *          <AvoidFeature>highway</AvoidFeature>\n *          <AvoidFeature>tollway</AvoidFeature>\n *          <AvoidFeature>tunnel</AvoidFeature>\n *       </AvoidList>\n *     </RoutePlan>\n * ```\n * @constructor\n * @alias Gp.Formats.XLS.RouteService.RoutePlan\n * @param {Object} options - options\n *\n * @private\n */\nfunction RoutePlan (options) {\n    this.logger = Logger.getLogger(\"RoutePlan\");\n    this.logger.trace(\"[Constructeur RoutePlan ()]\");\n\n    if (!(this instanceof RoutePlan)) {\n        throw new TypeError(\"RoutePlan constructor cannot be called as a function.\");\n    }\n\n    // param par defaut\n    this.options = options || {};\n\n    // param obligatoire\n    if (!this.options.startPoint) {\n        throw new Error(\"l'option 'startPoint' n'est pas renseignée !\");\n    }\n\n    if (!this.options.endPoint) {\n        throw new Error(\"l'option 'endPoint' n'est pas renseignée !\");\n    }\n}\n\nRoutePlan.prototype = {\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : RoutePlan,\n\n    /**\n     * request (out)\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * Template de la requête.\n     * substitution des valeurs suivantes :\n     * - __ROUTEPREFERENCE__, __VALUEROUTEPREFERENCE__\n     * - __GRAPH__, __VALUEGRAPH__\n     * - __WAYPOINTLIST__ (lst?), __STARTPOINT__, __VIAPOINT__, __ENDPOINT__, __POINT__, __X__, __Y__\n     * - __AVOIDLIST__ (lst!), __AVOIDFEATURE__, __VALUEAVOIDFEATURE__\n     */\n    template : {\n        routePlan : \"<RoutePlan>\" +\n            \"__ROUTEPREFERENCE__\" +\n            \"__GRAPH__\" +\n            \"__WAYPOINTLIST__\" +\n            \"__AVOIDLIST__\" +\n            \"</RoutePlan>\",\n        routePreference : \"<RoutePreference>__VALUEROUTEPREFERENCE__</RoutePreference>\",\n        graph : \"<xlsext:graphName xmlns:xlsext=\\\"http://www.opengis.net/xlsext\\\" name=\\\"__VALUEGRAPH__\\\"/>\",\n        wayPointList : {\n            container : \"<WayPointList>\" +\n                \"__STARTPOINT__\" +\n                \"__VIAPOINT__\" +\n                \"__ENDPOINT__\" +\n                \"</WayPointList>\",\n            point : \"<Position><gml:Point xmlns:gml=\\\"http://www.opengis.net/gml\\\"><gml:pos>__X__ __Y__</gml:pos></gml:Point></Position>\",\n            startPoint : \"<StartPoint>\" +\n                \"__POINT__\" +\n                \"</StartPoint>\",\n            endPoint : \"<EndPoint>\" +\n                \"__POINT__\" +\n                \"</EndPoint>\",\n            viaPoint : \"<ViaPoint>\" +\n                \"__POINT__\" +\n                \"</ViaPoint>\" // implémentation de plusieurs étapes...\n        },\n        avoidList : {\n            container : \"<AvoidList>\" +\n                \"__AVOIDFEATURE__\" +\n                \"</AvoidList>\",\n            avoidFeature : \"<AvoidFeature>__VALUEAVOIDFEATURE__</AvoidFeature>\"\n        }\n    },\n\n    /**\n     * toString\n     *\n     * @returns {String} requête\n     */\n    toString : function () {\n        var template = \"\";\n        template = this.template.routePlan;\n\n        // preference\n        if (this.options.routePreference) {\n            var tmplPreference = this.template.routePreference;\n            tmplPreference = tmplPreference.replace(/__VALUEROUTEPREFERENCE__/, this.options.routePreference);\n            template = template.replace(/__ROUTEPREFERENCE__/g, tmplPreference);\n        }\n        // clean preference\n        template = template.replace(/__ROUTEPREFERENCE__/g, \"\");\n\n        // exclusions\n        if (this.options.avoidFeature) {\n            var tmplAvoidList = this.template.avoidList.container;\n            var avoidFeatures = [];\n            for (var i = 0; i < this.options.avoidFeature.length; i++) {\n                var tmplAvoidFeature = this.template.avoidList.avoidFeature;\n                tmplAvoidFeature = tmplAvoidFeature.replace(/__VALUEAVOIDFEATURE__/, this.options.avoidFeature[i]);\n                avoidFeatures.push(tmplAvoidFeature);\n            }\n            tmplAvoidList = tmplAvoidList.replace(/__AVOIDFEATURE__/, avoidFeatures.join(\"\\n\"));\n            template = template.replace(/__AVOIDLIST__/g, tmplAvoidList);\n        }\n        // clean exclusions\n        template = template.replace(/__AVOIDLIST__/g, \"\");\n\n        // graph\n        if (this.options.graph) {\n            var tmplVehicle = this.template.graph;\n            tmplVehicle = tmplVehicle.replace(/__VALUEGRAPH__/, this.options.graph);\n            template = template.replace(/__GRAPH__/g, tmplVehicle);\n        }\n        // clean vehicle\n        template = template.replace(/__GRAPH__/g, \"\");\n\n        // points\n        var tmplWayPointList = this.template.wayPointList.container;\n        var tmplPoint = \"\";\n        // start\n        tmplPoint = this.template.wayPointList.point;\n        tmplPoint = tmplPoint.replace(/__X__/, this.options.startPoint.x);\n        tmplPoint = tmplPoint.replace(/__Y__/, this.options.startPoint.y);\n        tmplWayPointList = tmplWayPointList.replace(/__STARTPOINT__/,\n            this.template.wayPointList.startPoint.replace(/__POINT__/, tmplPoint));\n        // end\n        tmplPoint = this.template.wayPointList.point;\n        tmplPoint = tmplPoint.replace(/__X__/, this.options.endPoint.x);\n        tmplPoint = tmplPoint.replace(/__Y__/, this.options.endPoint.y);\n        tmplWayPointList = tmplWayPointList.replace(/__ENDPOINT__/,\n            this.template.wayPointList.endPoint.replace(/__POINT__/, tmplPoint));\n        // via\n        if (this.options.viaPoint) {\n            var points = [];\n            for (var j = 0; j < this.options.viaPoint.length; j++) {\n                var p = this.options.viaPoint[j];\n                tmplPoint = this.template.wayPointList.point;\n                tmplPoint = tmplPoint.replace(/__X__/, p.x);\n                tmplPoint = tmplPoint.replace(/__Y__/, p.y);\n                points.push(tmplPoint);\n            }\n\n            tmplWayPointList = tmplWayPointList.replace(/__VIAPOINT__/,\n                this.template.wayPointList.viaPoint.replace(/__POINT__/, points.join(\"\\n\")));\n        } else {\n            // clean viaPoint\n            tmplWayPointList = tmplWayPointList.replace(/__VIAPOINT__/, \"\");\n        }\n\n        template = template.replace(/__WAYPOINTLIST__/g, tmplWayPointList);\n\n        this.requestString = template;\n        return this.requestString;\n    }\n};\n\nexport default RoutePlan;\n","import Logger from \"../../../Utils/LoggerByDefault\";\nimport RoutePlan from \"./model/RoutePlan\";\n\n/**\n * @classdesc\n *\n * Requête de calcul d'itinéraire\n *\n * ----\n * XSD :\n * ----\n * [] => non implementé !\n *\n * ```\n * element name=\"DetermineRouteRequest\"\n *  [attribute name=\"provideRouteHandle\" default=\"false\"]\n *  attribute name=\"distanceUnit\"       default=\"M\"\n *      [element ref=\"xls:RouteHandle\" || element ref=\"xls:RoutePlan\"]\n *      element ref=\"xls:RoutePlan\"\n *      element ref=\"xls:RouteInstructionsRequest\"\n *      [element ref=\"xls:RouteGeometryRequest\"]\n *      [element ref=\"xls:RouteMapRequest\"]\n * ```\n * ```\n * element name=\"RouteInstructionsRequest\"\n *  [attribute name=\"format\"]           default=\"text/plain\"\n *  attribute name=\"provideGeometry\"    default=\"false\"\n *  attribute name=\"provideBoundingBox\" default=\"false\"\n * ```\n * ```\n * element name=\"RouteGeometryRequest\"\n *  [attribute name=\"scale\"]                  default=\"1\"\n *  [attribute name=\"provideStartingPortion\"] default=\"false\"\n *  [attribute name=\"maxPoints\"]              default=\"100\"\n *      [element name=\"BoundingBox\" type=\"gml:EnvelopeType\" ]\n * ```\n * ```\n * [element name=\"RouteMapRequest\"]\n *      [element name=\"Output\"]\n *          [attribute name=\"width\"]\n *          [attribute name=\"height\"]\n *          [attribute name=\"format\"]\n *          [attribute name=\"BGcolor\"]\n *          [attribute name=\"transparent\"]\n *          [attribute name=\"style\"] => value = Overview | Maneuver\n *          [element name=\"BBoxContext\" type=\"gml:EnvelopeType\"]\n * ```\n *\n * --------\n * Requête :\n * --------\n * ```\n *   <DetermineRouteRequest distanceUnit=\"KM\">\n *     <RoutePlan>\n *              <RoutePreference>Fastest</RoutePreference>\n *              <xlsext:vehicle name=\"Car\" />\n *              <WayPointList>\n *                  <StartPoint>\n *                      <Position><gml:Point srsName=\"EPSG:4326\"><gml:pos>2.29993 48.87228</gml:pos></gml:Point></Position>\n *                  </StartPoint>\n *                  <EndPoint>\n *                      <Position><gml:Point srsName=\"EPSG:4326\"><gml:pos>-1.53604 47.21548</gml:pos></gml:Point></Position>\n *                  </EndPoint>\n *              </WayPointList>\n *     </RoutePlan>\n *     <RouteInstructionsRequest provideGeometry=\"true\"/>\n *     <RouteGeometryRequest/>\n *   </DetermineRouteRequest>\n * ```\n *\n * @constructor\n * @alias Gp.Formats.XLS.RouteService.DetermineRouteRequest\n * @param {Object} options - options\n * @param {Object}   options.route.routePreference - « fastest », « shortest » ou « pedestrian »\n * @param {String}   options.route.startPoint - Point de départ (coordonnées exprimées en WGS84G)\n * @param {String}   options.route.viaPoint - Liste de points intermédiaires\n * @param {String}   options.route.endPoint - Point d'arrivée (coordonnées)\n * @param {Object}   options.route.avoidFeature - « highway », « tollway », « tunnel » ou « bridge »\n * @param {Object}   options.route.vehicle - « car »\n * @param {Object}   options.route.expectedStartTime - Date et heure de départ\n * @param {Object}   options.provideGeometry - true | false\n * @param {Object}   options.provideBoundingBox - true | false\n * @param {Object}   options.distanceUnit - Unité dans lesquelles la distance est exprimée (« m » ou « km »)\n * @param {Function} options.onsuccess - function callback success (TODO)\n * @param {Function} options.onerror   - function callback error   (TODO)\n *\n * @private\n */\nfunction DetermineRouteRequest (options) {\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur DetermineRouteRequest ()]\");\n\n    if (!(this instanceof DetermineRouteRequest)) {\n        throw new TypeError(\"DetermineRouteRequest constructor cannot be called as a function.\");\n    }\n\n    // options par defaut\n    this.options = options || {};\n\n    // et on ajoute les options en paramètre aux options par défaut\n    for (var opt in options) {\n        if (options.hasOwnProperty(opt)) {\n            this.options[opt] = options[opt];\n        }\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     */\n    this.CLASSNAME = \"DetermineRouteRequest\";\n}\n\nDetermineRouteRequest.prototype = {\n\n    /**\n     * @lends module:DetermineRouteRequest#\n     */\n\n    /**\n     * request (out)\n     * @type {String}\n     */\n    strRequest : null,\n\n    /**\n     * RoutePlan\n     * @type {Address}\n     */\n    oRoutePlan : null,\n\n    /**\n     * Template de la requête.\n     * substitution des valeurs suivantes :\n     * __DISTANCEUNIT__,\n     * __ROUTEPLAN__, __ROUTEINSTRUCTIONREQUEST__, __ROUTEGEOMETRYREQUEST__, __ROUTEMAPREQUEST__\n     * __PROVIDEGEOMETRY__, __PROVIDEBBOX__\n     */\n    template : {\n        determineRouteRequest : \"<DetermineRouteRequest distanceUnit=\\\"__DISTANCEUNIT__\\\">\" +\n            \"__ROUTEPLAN__\" +\n            \"__ROUTEINSTRUCTIONREQUEST__\" +\n            \"__ROUTEGEOMETRYREQUEST__\" +\n            \"__ROUTEMAPREQUEST__\" +\n            \"</DetermineRouteRequest>\",\n        routeInstructionRequest : \"<RouteInstructionsRequest \" +\n            \"provideGeometry=\\\"__PROVIDEGEOMETRY__\\\" \" +\n            \"provideBoundingBox=\\\"__PROVIDEBBOX__\\\" />\",\n        routeGeometryRequest : \"<RouteGeometryRequest />\",\n        routeMapRequest : \"\" // FIXME <RouteMapRequest/> not yet implemented !\n    },\n\n    /**\n     * Ajout d'un objet de type RoutePlan\n     *\n     * @param {Object} oRoutePlan - RoutePlan\n     */\n    addRoute : function (oRoutePlan) {\n        if (oRoutePlan instanceof RoutePlan) {\n            this.oRoutePlan = oRoutePlan;\n        }\n    },\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : DetermineRouteRequest,\n\n    /**\n     * toString\n     *\n     * @returns {String} requête\n     */\n    toString : function () {\n        var template = \"\";\n        template = this.template.determineRouteRequest;\n        template = template.replace(/__DISTANCEUNIT__/g, this.options.distanceUnit || \"KM\");\n\n        // soit on a déjà un objet RoutePlan instancié,\n        // sinon, on le fabrique via les options\n        if (!this.oRoutePlan) {\n            var settings = this.options.route;\n\n            this.oRoutePlan = new RoutePlan(settings);\n            if (!this.oRoutePlan) {\n                throw new Error(\"La construction du calcul d'initineraire n'est pas correctement definie !?\");\n            }\n        }\n\n        // routeplan\n        template = template.replace(/__ROUTEPLAN__/g, this.oRoutePlan.toString());\n\n        // instruction\n        var tmplInstruction = this.template.routeInstructionRequest;\n        tmplInstruction = tmplInstruction.replace(/__PROVIDEGEOMETRY__/g, this.options.provideGeometry || false);\n        tmplInstruction = tmplInstruction.replace(/__PROVIDEBBOX__/g, this.options.provideBoundingBox || false);\n        template = template.replace(/__ROUTEINSTRUCTIONREQUEST__/g, tmplInstruction);\n\n        // geometry\n        var tmplGeometry = this.template.routeGeometryRequest;\n        template = template.replace(/__ROUTEGEOMETRYREQUEST__/g, tmplGeometry);\n\n        // map\n        var tmplMap = this.template.routeMapRequest;\n        template = template.replace(/__ROUTEMAPREQUEST__/g, tmplMap);\n\n        this.strRequest = template;\n        return this.strRequest;\n    }\n};\n\nexport default DetermineRouteRequest;\n","import Logger from \"../../Utils/LoggerByDefault\";\nimport AbstractService from \"./AbstractService\";\nimport DetermineRouteRequest from \"./RouteService/DetermineRouteRequest\";\nimport RouteRequestExtension from \"./RouteService/RouteRequestExtension\";\n\n/**\n * @classdesc\n *\n * Requête de type RouteService\n * (Factory)\n *\n * XSD :\n * ----\n * [] => non implementé !\n *\n * ```\n * element name=\"DetermineRouteRequest\"\n *  [attribute name=\"provideRouteHandle\" default=\"false\"]\n *  attribute name=\"distanceUnit\"       default=\"M\"\n *      [element ref=\"xls:RouteHandle\" || element ref=\"xls:RoutePlan\"]\n *      element ref=\"xls:RoutePlan\"\n *      element ref=\"xls:RouteInstructionsRequest\"\n *      [element ref=\"xls:RouteGeometryRequest\"]\n *      [element ref=\"xls:RouteMapRequest\"]\n * ```\n * ```\n * element name=\"RoutePlan\"\n *  [attribute name=\"useRealTimeTraffic\" default=\"false\"]\n *  [attribute name=\"expectedStartTime\"  type=\"dateTime\"]\n *  [attribute name=\"expectedEndTime\"    type=\"dateTime\"]\n *      element ref=\"xls:RoutePreference\"\n *      element ref=\"xls:WayPointList\"\n *      element ref=\"xls:AvoidList\"\n * ```\n * ```\n * element name=\"RoutePreference\" => value = Fastest | Shortest | Pedestrian\n * ```\n * ```\n * element name=\"WayPointList\"\n *      element ref=\"xls:StartPoint\"\n *      element ref=\"xls:ViaPoint\" minOccurs=\"0\"\n *      element ref=\"xls:EndPoint\"\n * ```\n * ```\n * element name=\"StartPoint\"\n *    [element name=\"GeocodeMatchCode\"]\n *      [attribute name=\"accuracy\"]\n *      [attribute name=\"matchType\"] => value = City, Street, Street number, Street enhanced, ...\n *    element name=\"Position\"\n *      element ref=\"gml:Point\"\n * ```\n * ```\n * element name=\"ViaPoint\"\n *    [element name=\"GeocodeMatchCode\"]\n *      [attribute name=\"accuracy\"]\n *      [attribute name=\"matchType\"] => value = City, Street, Street number, Street enhanced, ...\n *    element name=\"Position\"\n *      element ref=\"gml:Point\"\n * ```\n * ```\n * element name=\"EndPoint\"\n *    [element name=\"GeocodeMatchCode\"]\n *      [attribute name=\"accuracy\"]\n *      [attribute name=\"matchType\"] => value = City, Street, Street number, Street enhanced, ...\n *    element name=\"Position\"\n *      element ref=\"gml:Point\"\n * ```\n * ```\n * element name=\"AvoidList\"\n *      [element ref=\"xls:AOI\"]\n *      [element ref=\"xls:_Location\"] (cf. element name=\"Position\")\n *      element ref=\"xls:AvoidFeature\"\n * ```\n * ```\n * [element name=\"AOI\"]\n *      [element ref=\"gml:CircleByCenterPoint\" || element ref=\"gml:Polygon\" || element ref=\"gml:Envelope\"]\n * ```\n * ```\n * element name=\"AvoidFeature\" => value = highway | tollway | tunnel | bridge\n * ```\n * ```\n * [element name=\"RouteMapRequest\"]\n *      [element name=\"Output\"]\n *          attribute name=\"width\"\n *          attribute name=\"height\"\n *          attribute name=\"format\"\n *          attribute name=\"BGcolor\"\n *          attribute name=\"transparent\"\n *          attribute name=\"style\" => value = Overview | Maneuver\n *          element name=\"BBoxContext\" type=\"gml:EnvelopeType\"\n * ```\n * ```\n * element name=\"RouteInstructionsRequest\"\n *  [attribute name=\"format\"]           default=\"text/plain\"\n *  attribute name=\"provideGeometry\"    default=\"false\"\n *  attribute name=\"provideBoundingBox\" default=\"false\"\n * ```\n * ```\n * [element name=\"RouteGeometryRequest\"]\n *  [attribute name=\"scale\"]                  default=\"1\"\n *  [attribute name=\"provideStartingPortion\"] default=\"false\"\n *  [attribute name=\"maxPoints\"]              default=\"100\"\n *      [element name=\"BoundingBox\" type=\"gml:EnvelopeType\" ]\n * ```\n *\n * --------\n * Requête :\n * --------\n * ```\n * <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n * <XLS\n * xmlns:xls=\"http://www.opengis.net/xls\"\n * xmlns:sch=\"http://www.ascc.net/xml/schematron\"\n * xmlns:gml=\"http://www.opengis.net/gml\"\n * xmlns:xlsext=\"http://www.opengis.net/xlsext\"\n * xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n * xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n * xsi:schemaLocation=\"http://www.opengis.net/xls http://schemas.opengis.net/ols/1.1.0/RouteService.xsd\"\n * version=\"1.1\" xls:lang=\"en\">\n * <RequestHeader/>\n * <Request methodName=\"RouteRequest\" requestID=\"123456789\" version=\"1.1\">\n *   <DetermineRouteRequest distanceUnit=\"KM\">\n *     <RoutePlan>\n *       <RoutePreference>Fastest</RoutePreference>\n *       <xlsext:vehicle name=\"Car\" />\n *       <WayPointList>\n *         <StartPoint>\n *           <Position><gml:Point srsName=\"EPSG:4326\"><gml:pos>2.29993 48.87228</gml:pos></gml:Point></Position>\n *         </StartPoint>\n *         <EndPoint>\n *           <Position><gml:Point srsName=\"EPSG:4326\"><gml:pos>-1.53604 47.21548</gml:pos></gml:Point></Position>\n *         </EndPoint>\n *       </WayPointList>\n *     </RoutePlan>\n *     <RouteInstructionsRequest provideGeometry=\"true\"/>\n *     <RouteGeometryRequest/>\n *   </DetermineRouteRequest>\n * </Request>\n * </XLS\n * ```\n * -----------\n * References :\n * -----------\n * - {@link https://geoportail.forge.ign.fr/jira/browse/GPP-CI}\n * - {@link https://geoportail.forge.ign.fr/jira/browse/GPP-CI-1 Specif. ols}\n * - {@link https://geoportail.forge.ign.fr/jira/browse/GPP-CI-9 Extension}\n * - {@link https://github.com/Emergya/openlayers/blob/master/lib/OpenLayers/Format/XLS/v1_2_0.js}\n *\n * @example\n * // encapsule un objet dans une coquille XSL, Factory sur les objets ''\n * rs = new RouteService ();\n * rs.addRequest (req);\n * rs.toString();\n *  ou\n * rs = new RouteService ({\n *      ...\n * });\n * rs.toString();\n *\n * @extends {Gp.Formats.XLS}\n * @constructor\n * @alias Gp.Formats.XLS.RouteService\n * @param {Object} options - options\n * @param {Object}   options.routePreference - « fastest », « shortest » ou « pedestrian »\n * @param {String}   options.startPoint - Point de départ (coordonnées exprimées en WGS84G)\n * @param {String}   options.viaPoint - Liste de points intermédiaires\n * @param {String}   options.endPoint - Point d'arrivée (coordonnées)\n * @param {Object}   options.avoidFeature - « highway », « tollway », « tunnel » ou « bridge »\n * @param {Object}   options.graph - « car »\n * @param {Object}   options.expectedStartTime - Date et heure de départ\n * @param {Object}   options.provideGeometry - true | false\n * @param {Object}   options.provideBoundingBox - true | false\n * @param {Object}   options.distanceUnit - Unité dans lesquelles la distance est exprimée (« m » ou « km »)\n * @param {Function} options.onsuccess - function callback success (TODO)\n * @param {Function} options.onerror   - function callback error   (TODO)\n *\n * @example\n * var options = {\n *      // spécifique au service\n *      startPoint: {\n *          x: 42.1121,\n *          y: 1.5557\n *      },\n *      endPoint: {\n *          x: 42.1121,\n *          y: 1.5557\n *      },\n *      viaPoint : [\n *          {x: 42.1121,y: 1.5557},\n *          {x: 42.1121,y: 1.5557},\n *          {x: 42.1121,y: 1.5557}\n *      ],\n *      provideBoundingBox : false,\n *      avoidFeature : [\"bridge\", \"tunnel\", \"tollway\"],\n *      expectedStartTime : \"2015-12-23\", // YYYY-MM-DDThh:mm:ssZ\n *      distanceUnit : \"km\",\n *      vehicle: \"car\",\n *      provideGeometry : false,\n *      routePreference : \"fastest\"\n * };\n *\n * @private\n */\nfunction RouteService (options) {\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur RouteService ()]\");\n\n    if (!(this instanceof RouteService)) {\n        throw new TypeError(\"RouteService constructor cannot be called as a function.\");\n    }\n\n    /**\n     * Nom de la classe\n     */\n    this.CLASSNAME = \"RouteService\";\n\n    /**\n     * Type de classe\n     * RouteRequest par defaut\n     */\n    this.CLASSTYPE = \"RouteRequest\";\n\n    // appel du constructeur par heritage\n    AbstractService.apply(this, arguments);\n}\n\n/**\n * @lends module:RouteService#\n */\nRouteService.prototype = Object.create(AbstractService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/**\n * Constructeur (alias)\n */\nRouteService.prototype.constructor = RouteService;\n\n/**\n * (overwrite) Ajout d'un objet de type  : RouteRequest\n *\n * @param {Object} oRequest - RouteRequest\n */\nRouteService.prototype.addRequest = function (oRequest) {\n    // on controle les types acceptés\n    if (oRequest.CLASSNAME === \"DetermineRouteRequest\") {\n        this.oRequest = oRequest;\n    } else {\n        throw new Error(\"Ce n'est pas un objet de type 'Route Request' !?\");\n    }\n};\n\n/**\n * (overwrite) Ajout d'un objet de type RouteFilterExtension\n *\n * @param {Object} oFilter - RouteFilterExtension\n */\nRouteService.prototype.addFilter = function (oFilter) {\n    // gestion des extensions (vehicle)\n    if (oFilter instanceof RouteRequestExtension) {\n        this.oFilter = oFilter;\n    }\n};\n\n/**\n * (overwrite) toString\n *\n * @returns {String} requête\n */\nRouteService.prototype.toString = function () {\n    // soit, on a un objet Request déjà instancié\n    // sinon, il faut le construire à partir des options à disposition\n    if (!this.oRequest) {\n        // il nous faut des options\n        if (!this.options) {\n            throw new Error(\"Les options ne sont pas renseignées, impossible de construire la requête !\");\n        }\n\n        if (this.CLASSTYPE === \"RouteRequest\") {\n            var settings = {\n                distanceUnit : this.options.distanceUnit || null,\n                provideGeometry : this.options.provideGeometry || null,\n                provideBoundingBox : this.options.provideBoundingBox || null,\n                route : {\n                    routePreference : this.options.routePreference || null,\n                    startPoint : this.options.startPoint,\n                    viaPoint : this.options.viaPoint || null,\n                    endPoint : this.options.endPoint,\n                    avoidFeature : this.options.avoidFeature || null,\n                    graph : this.options.graph || null,\n                    expectedStartTime : this.options.expectedStartTime || null\n                }\n            };\n            this.oRequest = new DetermineRouteRequest(settings);\n            // ajout des filtres spécifiques au service\n            if (this.oFilter) {\n                this.oRequest.addFilter(this.oFilter);\n            }\n        }\n    }\n\n    // objet indefini !?\n    if (!this.oRequest) {\n        throw new Error(\"Type de requête indefini !\");\n    }\n\n    this.strRequest = this.oRequest.toString();\n    return this.strRequest;\n};\n\nexport default RouteService;\n","/**\n * Creation d'une requête OpenLS en mode POST ou GET\n * (Factory)\n *\n * @module RouteRequestOLS\n * @alias Gp.Services.Route.Request.RouteRequestOLS\n * @private\n */\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport XLS from \"../../../Formats/XLS\";\nimport RouteService from \"../../../Formats/XLS/RouteService\";\n\nvar RouteRequestOLS = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Route\n     *\n     * @example\n     *   var options = {\n     *      (...)\n     *   };\n     *\n     * @returns {String} request\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"RouteRequestOLS\");\n        logger.trace([\"RouteRequestOLS::build()\"]);\n\n        var request = null;\n\n        // spécifique au service\n        var settings = {\n            startPoint : options.startPoint,\n            endPoint : options.endPoint,\n            viaPoint : options.viaPoints, // mapping OLS et options\n            provideBoundingBox : options.provideBbox, // mapping OLS et options\n            avoidFeature : options.exclusions, // mapping OLS et options\n            expectedStartTime : options.expectedStartTime, // TODO format ?\n            distanceUnit : options.distanceUnit,\n            graph : options.graph,\n            provideGeometry : options.geometryInInstructions, // mapping OLS et options\n            routePreference : options.routePreference\n        };\n\n        // objet RouteService\n        var oRS = new RouteService(settings);\n\n        // Format XLS\n        var oXLS = new XLS({\n            srsName : options.srs,\n            maximumResponses : options.maximumResponses\n        });\n        oXLS.namespace = true;\n        oXLS.setService(oRS);\n\n        // request brute !\n        request = oXLS.build();\n\n        // en mode GET, la requête est encodée\n        // et le param. 'qxml' est ajouté\n        if (options.httpMethod === \"GET\") {\n            var myRequest = \"qxml=\" +\n                encodeURIComponent(request)\n                    .replace(/-/g, \"%2D\")\n                    .replace(/_/g, \"%5F\")\n                    .replace(/\\./g, \"%2E\")\n                    .replace(/!/g, \"%21\")\n                    .replace(/~/g, \"%7E\")\n                    .replace(/\\*/g, \"%2A\")\n                    .replace(/'/g, \"%27\")\n                    .replace(/\\(/g, \"%28\")\n                    .replace(/\\)/g, \"%29\");\n            request = myRequest;\n        }\n\n        return request;\n    }\n};\n\nexport default RouteRequestOLS;\n","\nimport Logger from \"../../../../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n * Classe de gestion des param. des requêtes du service de calcul d'itineraire (REST).\n *      Permet le mapping avec les options du service.\n * @constructor\n * @alias Gp.Services.Route.Request.RouteParamREST\n * @param {Object} options - options\n *\n * @private\n */\nfunction RouteParamREST (options) {\n    if (!(this instanceof RouteParamREST)) {\n        throw new TypeError(\"RouteParamREST constructor cannot be called as a function.\");\n    }\n\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur RouteParamREST ()]\");\n\n    /**\n     * Options en paramêtres du constructeur.\n     */\n    this.options = options || {};\n\n    // mapping des options avec l'API REST\n\n    /** Coordonnées du point de départ. */\n    this.origin = this.options.startPoint.x + \",\" + this.options.startPoint.y;\n\n    /** Coordonnées du point d’arrivée. */\n    this.destination = this.options.endPoint.x + \",\" + this.options.endPoint.y;\n\n    /** Coordonnées des étapes point de départ. */\n    this.waypoints = this.options.viaPoints || null;\n\n    /** Date et heure de départ */\n    this.startDateTime = this.options.expectedStartTime || null; // TODO format !?\n\n    /** Nom du graphe à utiliser */\n    this.graphName = this.options.graph;\n\n    /** projection (code EPSG comme epsg:4326 ou wgs84) */\n    this.srs = this.options.srs;\n\n    /** Liste des règles de restrictions à utiliser, séparés pas le caractère , ou ; (Exemple : Toll, Tunnel, Bridge) */\n    this.exclusions = this.options.exclusions;\n\n    /**\n     * itinéraire le plus court (DISTANCE) ou le plus rapide (TIME)\n     * Par defaut, DISTANCE...\n     * cf. mapping ci dessous\n     */\n    this.method = \"TIME\";\n\n    // mapping particulier sur l'option 'routePreference'\n    if (this.options.routePreference) {\n        var value = this.options.routePreference;\n        switch (value) {\n            case \"fastest\":\n                this.method = \"TIME\";\n                break;\n            case \"shortest\":\n                this.method = \"DISTANCE\";\n                break;\n            default:\n                this.logger.warn(\"Par defaut, on prend l'itinéraire le plus rapide !\");\n                this.method = \"TIME\";\n        }\n    }\n\n    /** Format de sortie (résumé de l’itinéraire) */\n    this.format = (this.options.geometryInInstructions) ? \"STANDARDEXT\" : \"STANDARD\";\n\n    // y'a t-il d'autres options à ajouter (par defaut) ?\n\n    /** Distance de tolérance (en mètre) de simplification de la géométrie. */\n    this.tolerance = 10;\n\n    /** identifiant du véhicule (enregistré dans les profils de véhicule) à utiliser */\n    this.profileId = null;\n\n    /** Profil du véhicule (enregistré dans les profils de véhicule) à utiliser */\n    this.profileName = null;\n\n    // options dont le mapping n'est pas possible :\n    // - distanceUnit\n    // - provideBoundingBox\n}\n\n/**\n * CLASSNAME\n */\nRouteParamREST.CLASSNAME = \"RouteParamREST\";\n\nRouteParamREST.prototype = {\n\n    /**\n     * @lends module:RouteParamREST#\n     */\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : RouteParamREST,\n\n    /**\n     * Retourne une liste de points\n     * @returns {Array} une liste de points (sep ';')\n     */\n    getWaypoints : function () {\n        if (!this.waypoints) {\n            return;\n        }\n        var array = [];\n        for (var i = 0; i < this.waypoints.length; i++) {\n            var obj = this.waypoints[i];\n            array.push(obj.x + \",\" + obj.y);\n        }\n\n        return array.join(\";\");\n    },\n\n    /**\n     * Retourne la liste des exclusions\n     * @returns {Array} une liste d'exclusions (sep ';')\n     */\n    getExclusions : function () {\n        return this.exclusions.join(\";\");\n    }\n};\n\n/**\n * Tableau de clefs/valeurs pour param.\n *\n * @returns {Array} liste de paramêtres\n */\nRouteParamREST.prototype.getParams = function () {\n    var map = [];\n\n    map.push({\n        k : \"origin\",\n        v : this.origin\n    });\n\n    map.push({\n        k : \"destination\",\n        v : this.destination\n    });\n\n    map.push({\n        k : \"method\",\n        v : this.method\n    });\n\n    if (this.waypoints) {\n        map.push({\n            k : \"waypoints\",\n            v : this.getWaypoints()\n        });\n    }\n\n    if (this.startDateTime) {\n        map.push({\n            k : \"startDateTime\",\n            v : this.startDateTime\n        });\n    }\n\n    if (this.graphName) {\n        map.push({\n            k : \"graphName\",\n            v : this.graphName\n        });\n    }\n\n    if (this.exclusions) {\n        map.push({\n            k : \"exclusions\",\n            v : this.getExclusions()\n        });\n    }\n\n    if (this.srs) {\n        map.push({\n            k : \"srs\",\n            v : this.srs\n        });\n    }\n\n    if (this.format) {\n        map.push({\n            k : \"format\",\n            v : this.format\n        });\n    }\n\n    return map;\n};\n\nexport default RouteParamREST;\n","\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport _ from \"../../../Utils/MessagesResources\";\nimport RouteParamREST from \"./model/RouteParamREST\";\n\n/**\n * @classdesc\n * Classe de gestion des requêtes de type REST sur le service de calcul d'itineraire\n * (uniquement en GET)\n *\n * @constructor\n * @alias Gp.Services.Route.Request.RouteRequestREST\n * @param {Object} options - options definies dans le composant Route\n *\n * @example\n * var options = {\n *      (...)\n * };\n *\n * @private\n */\nfunction RouteRequestREST (options) {\n    this.logger = Logger.getLogger(\"RouteRequestREST\");\n    this.logger.trace(\"[Constructeur RouteRequestREST ()]\");\n\n    if (!(this instanceof RouteRequestREST)) {\n        throw new TypeError(\"RouteRequestREST constructor cannot be called as a function.\");\n    }\n\n    // existance des options\n    if (!options) {\n        throw new Error(_.getMessage(\"PARAM_EMPTY\", \"options\"));\n    }\n\n    /** liste des options */\n    this.settings = options;\n}\n\nRouteRequestREST.prototype = {\n\n    /**\n     * @lends module:RouteRequestREST#\n     */\n\n    /**\n     * request\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : RouteRequestREST,\n\n    /**\n     * Construction de la requête.\n     *\n     * @example\n     * // GET  out : origin=2.416907353809513,48.8465772142297&destination=2.4248037771493673,48.84591353161838\n     * // POST out : Not yet supported method POST !\n     * @returns {String} request\n     */\n    processRequestString : function () {\n        // INFO\n        // construction simple sans template...,\n        // mais en attendant que les services soient fixés, on taggue ce composant en mode PROTOTYPE !\n        this.logger.warn(\" PROTOTYPE !\");\n\n        // Mapping des options avec le service de l'API REST\n        var oParams = new RouteParamREST(this.settings);\n        var params = oParams.getParams();\n\n        var request = \"\";\n        for (var i = 0; i < params.length; i++) {\n            var o = params[i];\n            if (request) {\n                request += \"&\";\n            }\n            request += o.k + \"=\" + o.v;\n        }\n\n        // Exemple :\n        //  http://wxs.ign.fr/KEY/itineraire/rest/route.json?\n        //  origin=&\n        //  destination=&\n        //  waypoints=&\n        //  method=DISTANCE&\n        //  graph=Pieton&\n        //  graphName=Pieton&\n        //  exclusions=&\n        //  tolerance=10&\n        //  srs=\n\n        this.logger.trace(request);\n        this.requestString = request;\n\n        return this.requestString;\n    }\n};\n\nexport default RouteRequestREST;\n","/**\n * Creation d'une requête OpenLS ou REST en mode POST ou GET\n * (Factory)\n *\n * @module RouteRequestFactory\n * @alias Gp.Services.Route.Request.RouteRequestFactory\n * @private\n */\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport RouteRequestOLS from \"./RouteRequestOLS\";\nimport RouteRequestREST from \"./RouteRequestREST\";\n\nvar RouteRequestFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Route\n     *\n     * @example\n     *   // utilisation avec les callback\n     *   var options = {\n     *      (...)\n     *      onSuccess : function (response) {},\n     *      onError : function (error) {},\n     *      // spécifique au service\n     *      api : 'OLS',\n     *      startPoint : {\n     *          x : 42.1121,\n     *          y : 1.5557\n     *      },\n     *      endPoint : {\n     *          x : 42.1121,\n     *          y : 1.5557\n     *      },\n     *      provideBbox : false,\n     *      exclusions : [\"Bridge\", \"Tunnel\", \"Toll\"],\n     *      distanceUnit : \"km\",\n     *      graph : \"Voiture\",\n     *      geometryInInstructions : false,\n     *      routePreference : \"fastest\"\n     *   };\n     *   RouteRequestFactory.build(options);\n     *\n     *   // utilisation sans callback\n     *   var options = {...};\n     *   try {\n     *      var result = RouteRequestFactory.build(options);\n     *      if (! result) { throw new Error(\"...\"):}\n     *   } catch (e) {\n     *      // todo\n     *   }\n     * @returns {String} request\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"RouteRequestFactory\");\n        logger.trace([\"RouteRequestFactory::build()\"]);\n\n        var request = null;\n\n        var settings = options || {};\n\n        // gestion des callback\n        var bOnError = !!(options.onError !== null && typeof options.onError === \"function\");\n\n        var message = null;\n        // choix entre les 2 types d'API pour consulter le service\n        switch (options.api) {\n            case \"REST\":\n                // FIXME les exceptions ne sont pas 'catchées' sur le constructeur !\n                var myReq = new RouteRequestREST(settings);\n                if (!myReq.processRequestString()) {\n                    message = \"Error process request (rest) !\";\n                    if (bOnError) {\n                        options.onError.call(options.scope, new ErrorService(message));\n                        return;\n                    }\n                    throw new Error(message);\n                }\n                request = myReq.requestString;\n                break;\n            case \"OLS\":\n                request = RouteRequestOLS.build(settings);\n                if (!request) {\n                    message = \"Error process request (ols) !\";\n                    if (bOnError) {\n                        options.onError.call(options.scope, new ErrorService(message));\n                        return;\n                    }\n                    throw new Error(message);\n                }\n                break;\n            default:\n                message = \"Type of API is not supported by service (REST or OLS) !\";\n                if (bOnError) {\n                    options.onError.call(options.scope, new ErrorService(message));\n                    return;\n                }\n                throw new Error(message);\n        }\n\n        return request;\n    }\n};\n\nexport default RouteRequestFactory;\n","import Logger from \"../Utils/LoggerByDefault\";\n\n/**\n * Lecture / Ecriture du format WKT\n *\n * Les besoins sont assez simples :\n * 1. lecture des types suivants :\n *  - LINESTRING\n *  - POLYGON\n *  - (TODO)\n * 2. convertir aux formats suivants :\n *  - json\n *  - (TODO)\n *\n *\n * @example\n *  var strWKT = \"LINESTRING (2.416907 48.846577, 2.416916 48.846613)\";\n *  WKT.toJson (strWKT,\n *      function onSuccess (json) {\n *          // {\n *          //      type : 'LINESTRING',\n *          //      coordinates : [\n *          //          [2.416907, 48.846577],\n *          //          [2.416916, 48.846613]\n *          //      ]\n *          // }\n *      },\n *      function onError (error) {\n *          console.log(error);\n *      }\n *  );\n *\n * @module WKT\n * @alias Gp.Formats.WKT\n * @private\n */\n\nvar WKT = {\n\n    /**\n     * Parsing d'une chaine WKT\n     *\n     * @method toJson\n     * @param {String} strWkt - chaine de type WKT\n     * @param {Function} success - fonction callback\n     * @param {Function} error   - fonction callback\n     */\n    toJson : function (strWkt, success, error) {\n        var logger = Logger.getLogger();\n\n        var json = null;\n\n        try {\n            if (!strWkt) {\n                throw new Error(\"La chaine WKT n'est pas renseignée !\");\n            }\n\n            if (!success) {\n                // callback success par defaut\n                success = function (json) {\n                    console.log(json);\n                };\n            }\n\n            if (!error) {\n                // callback error par defaut\n                error = function (e) {\n                    console.log(e);\n                };\n            }\n\n            var regex;\n            var subst;\n\n            // regex coordinates\n            regex = /(-?\\d+\\.?[0-9]*)\\s(-?\\d+\\.?[0-9]+)/g;\n            subst = \"[$1,$2]\";\n            strWkt = strWkt.replace(regex, subst);\n\n            // regex type\n            regex = /^(\\w+)/;\n            regex.exec(strWkt);\n            if (RegExp.$1 === \"POLYGON\") {\n                subst = \"{\\\"type\\\" : \\\"Polygon\\\",\";\n                strWkt = strWkt.replace(RegExp.$1, subst);\n                // clean\n                // (( --> coordinates : [[\n                regex = /(\\({2}?)/;\n                subst = \"\\\"coordinates\\\" : [[\";\n                strWkt = strWkt.replace(regex, subst);\n                // )) --> ]]}\n                regex = /(\\){2}?)/;\n                subst = \"]]}\";\n                strWkt = strWkt.replace(regex, subst);\n                // all ( --> [\n                regex = /(\\()/g;\n                subst = \"[\";\n                strWkt = strWkt.replace(regex, subst);\n                // all ) --> ]\n                regex = /(\\))/g;\n                subst = \"]\";\n                strWkt = strWkt.replace(regex, subst);\n            } else if (RegExp.$1 === \"LINESTRING\") {\n                subst = \"{\\\"type\\\" : \\\"LineString\\\",\";\n                strWkt = strWkt.replace(RegExp.$1, subst);\n                // clean\n                regex = /(\\(\\(?)/;\n                subst = \"\\\"coordinates\\\" : [\";\n                strWkt = strWkt.replace(regex, subst);\n                regex = /(\\)\\)?)/;\n                subst = \"]}\";\n                strWkt = strWkt.replace(regex, subst);\n            }\n\n            logger.trace(strWkt);\n\n            json = JSON.parse(strWkt);\n\n            if (!json) {\n                throw new Error(\"Le JSON est vide !\");\n            }\n\n            if (!json.type) {\n                throw new Error(\"Le type de geometrie n'est pas connu !\");\n            }\n\n            if (!json.coordinates) {\n                throw new Error(\"La liste des points est vide !\");\n            }\n\n            success.call(this, json);\n        } catch (e) {\n            if (e.name === \"SyntaxError\") {\n                error.call(this, \"Erreur de parsing JSON !\");\n                return;\n            }\n            error.call(this, e);\n        }\n    }\n};\n\nexport default WKT;\n","/**\n * Response object for {@link module:Services~route Gp.Services.route ()} invocation when successful. Received as the argument of onSuccess callback function.\n *\n * @property {Gp.BBox} bbox - Bounding Box of the route. Given when provideBBox parameter is used in function call.\n * @property {Object} routeGeometry - Geometry (expressed in [GeoJSON]{@link http://geojson.org/}) of the route.\n * @property {Array.<Gp.Services.Route.RouteInstruction>} routeInstructions - Instructions of the route.\n * @property {String} totalDistance - Length of the route. If distanceUnit parameter was set to \"km\" (default), totalDistance is a string containing the total distance expressed in kilometers, followed by \" Km\" (e.g. : \"19.6 Km\"). If distanceUnit parameter was set to \"m\", totalDistance is a string containing the total distance expressed in meters (e.g. : \"19599.14\").\n * @property {Float} totalTime - Route duration in seconds.\n *\n * @namespace\n * @alias Gp.Services.RouteResponse\n */\nfunction RouteResponse () {\n    if (!(this instanceof RouteResponse)) {\n        throw new TypeError(\"RouteResponse constructor cannot be called as a function.\");\n    }\n\n    this.totalTime = null;\n\n    this.totalDistance = null;\n\n    this.bbox = {\n        left : null,\n        right : null,\n        top : null,\n        bottom : null\n    };\n\n    this.routeGeometry = null; // FIXME can be null if option 'geometryInInstructions' is true !\n\n    this.routeInstructions = [];\n}\n\nRouteResponse.prototype = {\n\n    constructor : RouteResponse\n\n};\n\nexport default RouteResponse;\n","\n/**\n * Single Route Instruction object.\n *\n * @property {String} code - Instruction code :\n *\n * - \"F\" : Straight forward\n * - \"B\" : U-turn\n * - \"L\" : turn left\n * - \"R\" : turn right\n * - \"BL\" : turn left strongly\n * - \"BR\" : turn right strongly\n * - \"FL\" : turn lightly to the left\n * - \"FR\" : turn lightly to the right\n * - \"round_about_entry\" : round about entry\n * - \"round_about_exit\" : round about exit\n *\n * @property {String} instruction - Instruction text : translated code + street name\n * @property {Object} geometry - Geometry (expressed in [GeoJSON]{@link http://geojson.org/}) of the street.\n * @property {Float} distance - Length of the instruction. Expressed in km or m, depending on distanceUnit parameter.\n * @property {Float} duration - Instruction duration in seconds.\n *\n * @namespace\n * @alias Gp.Services.Route.RouteInstruction\n */\nfunction RouteInstruction () {\n    if (!(this instanceof RouteInstruction)) {\n        throw new TypeError(\"RouteInstruction constructor cannot be called as a function.\");\n    }\n\n    this.duration = null;\n\n    this.distance = null;\n\n    this.code = null;\n\n    this.instruction = null;\n\n    this.geometry = null; // FIXME can be null if option 'geometryInInstructions' is false !\n}\n\nRouteInstruction.prototype = {\n\n    constructor : RouteInstruction\n\n};\n\nexport default RouteInstruction;\n","/**\n * Analyse de la reponse REST\n *\n * @module RouteResponseRESTReader\n * @alias Gp.Services.Route.Formats.RouteResponseRESTReader\n * @todo not yet implemented !\n * @private\n */\n\n// import Logger from \"../../../Utils/LoggerByDefault\";\nimport MessagesResources from \"../../../Utils/MessagesResources\";\nimport WKT from \"../../../Formats/WKT\";\nimport ErrSrv from \"../../../Exceptions/ErrorService\";\nimport RouteResponse from \"../Response/model/RouteResponse\";\nimport RouteInstruction from \"../Response/model/RouteInstruction\";\n\n/**\n * Objet RouteResponseRestReader\n * @member {Object} RouteResponseRestReader\n *\n * @property {Object} RouteResponseRestReader.READERS - Objet contenant des fonctions de lecture, appelées \"readers\"\n *      dont chaque clé correspond au nom d'un tag du XML que l'on souhaite lire\n *      et la valeur associée est une fonction (node, data)\n *      où node est un noeud du document DOM\n *      et data est un objet où l'on stocke les informations lues dans le XML.\n *\n * @property {Method} RouteResponseRestReader.read - Méthode permettant de lancer la lecture d'une réponse XML du\n *      service de calcul d'itineraire, à l'aide des readers de la classe.\n *\n */\n\nvar RouteResponseRESTReader = {};\n\nRouteResponseRESTReader.READERS = {\n\n    /**\n     * Route response\n     * @param {Object} node - node\n     * @returns {Object} response\n     */\n    routeResult : function (node) {\n        var response = new RouteResponse();\n\n        // on boucle sur les balises \"enfant\" de la réponse :\n        // status, distance, duration, distanceMeters, durationSeconds, bounds, geometryWkt, simplifiedWkt, leg\n        __getChildNodes(node, response);\n\n        if (response.status === \"error\") {\n            var message = MessagesResources.getMessage(\"SERVICE_RESPONSE_EXCEPTION\",\n                response.message);\n            throw new ErrSrv({\n                message : message,\n                type : ErrSrv.TYPE_SRVERR\n            });\n        }\n\n        return response;\n    },\n\n    /**\n     * Route status\n     * @param {Object} node - node\n     * @param {Object} response - response\n     */\n    status : function (node, response) {\n        var status = __getChildValue(node);\n        if (status === \"ERROR\" || status === \"error\") {\n            if (response) {\n                response.status = \"error\";\n            }\n        }\n    },\n\n    /**\n     * Route message\n     * @param {Object} node - node\n     * @param {Object} response - response\n     */\n    message : function (node, response) {\n        if (response) {\n            response.message = __getChildValue(node);\n        }\n    },\n\n    /**\n     * Route distance\n     * @param {Object} node - node\n     * @param {Object} response - response\n     */\n    distance : function (node, response) {\n        if (response) {\n            response.totalDistance = __getChildValue(node);\n        }\n    },\n\n    /**\n     * Route duration\n     * @param {Object} node - node\n     * @param {Object} response - response\n     */\n    durationSeconds : function (node, response) {\n        if (response) {\n            response.totalTime = parseFloat(__getChildValue(node));\n        }\n    },\n\n    /**\n     * Route bounds\n     * @param {Object} node - node\n     * @param {Object} response - response\n     */\n    bounds : function (node, response) {\n        // get value et split et parseFloat\n        if (response && response.bbox) {\n            var coords = __getChildValue(node).split(/[,;]/);\n            response.bbox.left = parseFloat(coords[0]);\n            response.bbox.bottom = parseFloat(coords[1]);\n            response.bbox.right = parseFloat(coords[2]);\n            response.bbox.top = parseFloat(coords[3]);\n        }\n    },\n\n    /**\n     * Route geometry\n     * @param {Object} node - node\n     * @param {Object} response - response\n     */\n    geometryWkt : function (node, response) {\n        if (response) {\n            var geomWkt = node.innerHTML;\n\n            var onWKTSuccess = function (json) {\n                response.routeGeometry = json;\n            };\n\n            var onWKTError = function () {\n                var msg = MessagesResources.getMessage(\"PARAM_FORMAT\", [\"geometryWkt\"]);\n                throw new Error(msg);\n            };\n            // get WKT Geometry from string\n            WKT.toJson(geomWkt, onWKTSuccess, onWKTError);\n        }\n    },\n\n    /**\n     * Route step\n     * @param {Object} node - node\n     * @param {Object} response - response\n     */\n    step : function (node, response) {\n        // création d'une nouvelle instruction\n        var routeInstruction = new RouteInstruction();\n        var name;\n\n        // lecture des informations de l'instruction (balises enfants)\n        if (node.hasChildNodes) {\n            var children = node.childNodes;\n            var child;\n            var childName;\n\n            for (var i = 0; i < children.length; i++) {\n                child = children[i];\n\n                if (child.nodeType === 1) { // 1 === node.ELEMENT_NODE\n                    childName = child.localName || child.baseName || child.nodeName;\n\n                    if (childName === \"durationSeconds\") {\n                        routeInstruction.duration = __getChildValue(child);\n                    } else if (childName === \"distance\") {\n                        routeInstruction.distance = __getChildValue(child);\n                    } else if (childName === \"navInstruction\") {\n                        routeInstruction.code = __getChildValue(child);\n                    } else if (childName === \"name\") {\n                        name = __getChildValue(child);\n                    }\n                }\n            }\n        }\n\n        // on teste le code de l'instruction pour y ajouter la bonne description\n        if (routeInstruction.code) {\n            switch (routeInstruction.code) {\n                case \"F\":\n                    if (name !== \"Valeur non renseignée\") {\n                        routeInstruction.instruction = \"Tout droit \" + name;\n                    } else {\n                        routeInstruction.instruction = \"Continuer tout droit \";\n                    }\n                    break;\n                case \"B\":\n                    routeInstruction.instruction = \"Demi-tour \" + name;\n                    break;\n                case \"L\":\n                    routeInstruction.instruction = \"Tourner à gauche \" + name;\n                    break;\n                case \"R\":\n                    routeInstruction.instruction = \"Tourner à droite \" + name;\n                    break;\n                case \"BL\":\n                    routeInstruction.instruction = \"Tourner très à gauche \" + name;\n                    break;\n                case \"BR\":\n                    routeInstruction.instruction = \"Tourner très à droite \" + name;\n                    break;\n                case \"FL\":\n                    routeInstruction.instruction = \"Tourner légèrement à gauche \" + name;\n                    break;\n                case \"FR\":\n                    routeInstruction.instruction = \"Tourner légèrement à droite \" + name;\n                    break;\n                case \"round_about_entry\":\n                    routeInstruction.instruction = \"Entrée rond-point \" + name;\n                    break;\n                case \"round_about_exit\":\n                    routeInstruction.instruction = \"Sortie rond-point \" + name;\n                    break;\n                case null:\n                    routeInstruction.instruction = \"Prendre \" + name;\n                    break;\n                default:\n                    routeInstruction.instruction = \"?\" + routeInstruction.code + \"? \" + name;\n                    break;\n            }\n        }\n\n        if (Array.isArray(response.routeInstructions)) {\n            response.routeInstructions.push(routeInstruction);\n        }\n    }\n\n};\n\n/**\n * Méthode permettant de lancer la lecture d'une réponse XML du service de calcul d'itineraire,\n * à l'aide des readers de la classe.\n *\n * @method RouteResponseRESTReader.read\n * @param {DOMElement} root - racine de la réponse XML à lire\n * @static\n * @memberof RouteResponseRESTReader\n * @returns {DOMElement} response\n */\nRouteResponseRESTReader.read = function (root) {\n    var response;\n\n    if (root.nodeName === \"routeResult\") {\n        response = RouteResponseRESTReader.READERS[\"routeResult\"](root);\n        return response;\n    } else {\n        throw new Error(\"Erreur lors de la lecture de la réponse : elle n'est pas au format attendu.\");\n    }\n};\n\n/**\n * Lecture de la valeur du premier child d'un noeud, si elle existe.\n *\n * @private\n * @memberof RouteResponseRESTReader\n * @method __getChildValue\n * @param {DOMElement} node - a DOM node\n * @return {String} value - valeur du firstChild du noeud en entrée, ou chaîne vide.\n */\nfunction __getChildValue (node) {\n    var textNode;\n    var value = \"\";\n\n    if (node.hasChildNodes()) {\n        textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            value = textNode.nodeValue;\n        }\n    }\n    return value;\n}\n\n/**\n * Récupération des noeuds enfants à partir d'un noeud donné, pour lecture (readNode).\n *\n * @private\n * @memberof RouteResponseRESTReader\n * @method __getChildNodes\n * @param {DOMElement} node - a DOM node\n * @param {Array|Object} [data] - an object to be filled with node data\n */\nfunction __getChildNodes (node, data) {\n    if (node.hasChildNodes()) {\n        var children = node.childNodes;\n        var child;\n        var childName;\n\n        for (var i = 0; i < children.length; i++) {\n            child = children[i];\n\n            if (child.nodeType === 1) { // 1 === node.ELEMENT_NODE\n                childName = child.localName || child.baseName || child.nodeName;\n\n                if (RouteResponseRESTReader.READERS[childName]) {\n                    var reader = RouteResponseRESTReader.READERS[childName];\n                    reader(child, data);\n                } else {\n                    __getChildNodes(child, data);\n                }\n            }\n        }\n    }\n}\n\nexport default RouteResponseRESTReader;\n","/**\n * Analyse de la reponse OLS\n *\n * @module RouteResponseOLSReader\n * @alias Gp.Services.Route.Formats.RouteResponseOLSReader\n * @todo not yet implemented !\n * @private\n */\n\nimport Logger from \"../../../Utils/LoggerByDefault\";\n\n/**\n * Objet RouteResponseOLSReader\n * @member {Object} RouteResponseOLSReader\n *\n * @property {Object} RouteResponseOLSReader.READERS - Objet contenant des fonctions de lecture, appelées \"readers\"\n *      dont chaque clé correspond au nom d'un tag du XML que l'on souhaite lire\n *      et la valeur associée est une fonction (node, data)\n *      où node est un noeud du document DOM\n *      et data est un objet où l'on stocke les informations lues dans le XML.\n *\n * @property {Method} RouteResponseOLSReader.read -  Méthode permettant de lancer la lecture d'une réponse\n *      XML du service de calcul d'itineraire, à l'aide des readers de la classe.\n */\nvar RouteResponseOLSReader = {};\n\n/**\n * Objet contenant des fonctions de lecture, appelées \"readers\"\n *      dont chaque clé correspond au nom d'un tag du XML que l'on souhaite lire\n *      et la valeur associée est une fonction (node, data)\n *      où node est un noeud du document DOM\n *      et data est un objet où l'on stocke les informations lues dans le XML.\n * @static\n * @memberof RouteResponseOLSReader\n */\nRouteResponseOLSReader.READERS = {\n    /*\n        // INFO\n        // pas de reponse en JSON pour l'API OLS, uniquement du XML !\n\n        // INFO\n        // Exemple d'erreur du service\n        // <?xml version= \"1.0\" encoding= \"UTF-8\" standalone= \"yes\" ?>\n        // <XLS version=\"1.2\" xsi : schemaLocation = \"http://www.opengis.net/xls http://schemas.opengis.net/ols/1.2/olsAll.xsd\" xmlns : xls = \"http://www.opengis.net/xls\" xmlns= \"http://www.opengis.net/xls\" xmlns : xlsext = \"http://www.opengis.net/xlsext\" xmlns : gml = \"http://www.opengis.net/gml\" // xmlns : xsi = \"http://www.w3.org/2001/XMLSchema-instance\" >\n        // <ResponseHeader>\n        //     <ErrorList>\n        //         <Error message=\"Routing error : Error in smartrouting com.geoconcept.smartrouting.SmartRoutingNativeException : failed to connect waypoint { 48.846577, 2.416907, 0.000000 } failed to connect waypoint { 48.846577, 2.416907, 0.000000 } \" errorCode=\"InternalServerError\"/>\n        //     </ErrorList>\n        // </ResponseHeader>\n        // <Response version= \"1.2\" requestID= \"f8358c74-8aee-4203-90b9-2c70db5996a1\" />\n        // </XLS>\n\n        // INFO\n        // Exemple d'erreur NGinx\n        // <ExceptionReport><Exception exceptionCode=\"MissingParameter\">Resource parameter not found</Exception></ExceptionReport>\n    */\n};\n\n/**\n * Méthode permettant de lancer la lecture d'une réponse XML du service de calcul d'itineraire,\n * à l'aide des readers de la classe.\n *\n * @method RouteResponseOLSReader.read\n * @param {DOMElement} root - racine de la réponse XML à lire\n * @static\n * @memberof RouteResponseOLSReader\n */\nRouteResponseOLSReader.read = function (root) {\n    // logger\n    var logger = Logger.getLogger(\"RouteResponseOLSReader\");\n    logger.error(\"not yet implemented !\");\n};\n\nexport default RouteResponseOLSReader;\n","/**\n * Factory pour générer une reponse JSON à partir d'un XML ou d'un JSON\n * (Factory)\n *\n * @module RouteResponseFactory\n * @alias Gp.Services.Route.Response.RouteResponseFactory\n * @private\n */\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport MRes from \"../../../Utils/MessagesResources\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport XML from \"../../../Formats/XML\";\nimport WKT from \"../../../Formats/WKT\";\nimport RouteResponseRESTReader from \"../Formats/RouteResponseRESTReader\";\nimport RouteResponseOLSReader from \"../Formats/RouteResponseOLSReader\";\nimport RouteResponse from \"./model/RouteResponse\";\nimport RouteInstruction from \"./model/RouteInstruction\";\n\nvar RouteResponseFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Alti\n     *\n     * @example\n     *   var options = {\n     *      response :\n     *      outputFormat :\n     *      rawResponse :\n     *      scope :\n     *      onSuccess :\n     *      onError :\n     *   };\n     *\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"RouteResponseFactory\");\n        logger.trace(\"RouteResponseFactory::build()\");\n\n        var data = null;\n\n        if (options.response) {\n            if (options.rawResponse) {\n                logger.trace(\"analyze response : raw\");\n                data = options.response;\n            } else {\n                switch (options.outputFormat) {\n                    case \"xml\":\n                        logger.trace(\"analyze response : xml\");\n\n                        // type de reader en fonction de l'API\n                        var routeReader = options.api === \"REST\" ? RouteResponseRESTReader : RouteResponseOLSReader;\n\n                        try {\n                            var p = new XML({\n                                reader : routeReader\n                            });\n\n                            // FIXME : mode XHR ne retourne que des string ? JSONP aussi à ce niveau ?\n                            if (typeof options.response === \"string\") {\n                                p.setXMLString(options.response);\n                            } else {\n                                p.setXMLDoc(options.response);\n                            }\n\n                            data = p.parse();\n\n                            if (!data) {\n                                throw new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_FORMAT\", \"xml\"));\n                            }\n                        } catch (e) {\n                            options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_ANALYSE\", options.response)));\n                            return;\n                        }\n\n                        break;\n\n                    case \"json\":\n                        logger.trace(\"analyze response : json\");\n\n                        var JSONResponse = null;\n                        if (typeof options.response === \"string\") {\n                            JSONResponse = JSON.parse(options.response);\n                        } else {\n                            JSONResponse = options.response;\n                        }\n\n                        // le service renvoie t il une erreur ?\n                        if (JSONResponse && JSONResponse.message) {\n                            // ex. {\"message\":\"message not null\", \"status\":\"ERROR\"}\n                            options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", JSONResponse.message)));\n                            return;\n                        }\n\n                        // construction de l'objet réponse JSON\n                        if (JSONResponse) {\n                            var legs = [];\n                            var legSteps = [];\n                            var steps = [];\n\n                            data = new RouteResponse();\n\n                            if (data.hasOwnProperty(\"totalTime\")) {\n                                // info : il y a aussi JSONResponse.duration, qui donne la durée en hh:mm:ss.\n                                data.totalTime = parseFloat(JSONResponse.durationSeconds);\n                            }\n                            if (data.hasOwnProperty(\"totalDistance\")) {\n                                data.totalDistance = (options.distanceUnit === \"m\") ? JSONResponse.distanceMeters : JSONResponse.distance;\n                            }\n\n                            if (data.hasOwnProperty(\"bbox\")) {\n                                var coords = JSONResponse.bounds.split(/[,;]/);\n                                data.bbox.left = parseFloat(coords[0]);\n                                data.bbox.bottom = parseFloat(coords[1]);\n                                data.bbox.right = parseFloat(coords[2]);\n                                data.bbox.top = parseFloat(coords[3]);\n                            }\n                            /**\n                            * callback success\n                            * @param {Object} json - json\n                            * @private\n                            */\n                            var onWKTSuccess = function (json) {\n                                data.routeGeometry = json;\n                            };\n                            /**\n                            * callback failed\n                            * @param {Object} e - event\n                            * @private\n                            */\n                            var onWKTError = function (e) {\n                                console.log(e);\n                                options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"PARAM_FORMAT\", [\"geometryWkt\"])));\n                            };\n\n                            if (data.hasOwnProperty(\"routeGeometry\")) {\n                                var geometry = JSONResponse.geometryWkt || JSONResponse.simplifiedWkt;\n                                if (geometry) {\n                                    WKT.toJson(geometry, onWKTSuccess, onWKTError);\n                                    if (!data.routeGeometry) {\n                                        return;\n                                    }\n                                }\n                            }\n\n                            if (data.hasOwnProperty(\"routeInstructions\")) {\n                                var legList = JSONResponse.legs;\n                                var i;\n                                if (Array.isArray(legList) && legList.length) {\n                                    for (i = 0; i < legList.length; i++) {\n                                        legs.push(legList[i]);\n                                    }\n                                }\n                                if (legs.length) {\n                                    for (i = 0; i < legs.length; i++) {\n                                        legSteps.push(legs[i].steps);\n                                    }\n                                }\n                                if (legSteps.length) {\n                                    for (i = 0; i < legSteps.length; i++) {\n                                        steps = steps.concat(legSteps[i]);\n                                    }\n                                }\n\n                                steps.forEach(function (step) {\n                                    data.routeInstructions.push(new RouteInstruction());\n                                    data.routeInstructions[data.routeInstructions.length - 1].duration = step.durationSeconds;\n                                    data.routeInstructions[data.routeInstructions.length - 1].distance = (options.distanceUnit === \"m\") ? step.distanceMeters : step.distance;\n                                    data.routeInstructions[data.routeInstructions.length - 1].code = step.navInstruction;\n                                    // geometrie en geojson\n                                    var points = [];\n                                    for (var i = 0; i < step.points.length; i++) {\n                                        var point = step.points[i].split(\",\");\n                                        if (point) {\n                                            points.push(point);\n                                        }\n                                    }\n                                    if (points.length !== 0) {\n                                        data.routeInstructions[data.routeInstructions.length - 1].geometry = {\n                                            coordinates : points,\n                                            type : \"LineString\"\n                                        };\n                                    } else {\n                                        data.routeInstructions[data.routeInstructions.length - 1].geometry = null;\n                                    }\n\n                                    /*\n                                    Traduction du code en instruction\n                                    * - F : tout droit\n                                    * - B : demi-tour\n                                    * - L : tourner à gauche\n                                    * - R : tourner à droite\n                                    * - BL : tourner très à gauche\n                                    * - BR : tourner très à droite\n                                    * - FL : tourner légèrement à gauche\n                                    * - FR : tourner légèrement à droite\n                                    * - round_about_entry : entrée rond-point\n                                    * - round_about_exit : sortie rond-point\n                                    */\n\n                                    // on ne souhaite pas de ce type de valeur...\n                                    if (step.name === \"Valeur non renseignée\") {\n                                        step.name = \"\";\n                                    }\n\n                                    switch (step.navInstruction) {\n                                        case \"F\":\n                                            if (step.name) {\n                                                data.routeInstructions[data.routeInstructions.length - 1].instruction = \"Tout droit \" + step.name;\n                                            } else {\n                                                data.routeInstructions[data.routeInstructions.length - 1].instruction = \"Continuer tout droit \";\n                                            }\n                                            break;\n                                        case \"B\":\n                                            data.routeInstructions[data.routeInstructions.length - 1].instruction = \"Demi-tour \" + step.name;\n                                            break;\n                                        case \"L\":\n                                            data.routeInstructions[data.routeInstructions.length - 1].instruction = \"Tourner à gauche \" + step.name;\n                                            break;\n                                        case \"R\":\n                                            data.routeInstructions[data.routeInstructions.length - 1].instruction = \"Tourner à droite \" + step.name;\n                                            break;\n                                        case \"BL\":\n                                            data.routeInstructions[data.routeInstructions.length - 1].instruction = \"Tourner très à gauche \" + step.name;\n                                            break;\n                                        case \"BR\":\n                                            data.routeInstructions[data.routeInstructions.length - 1].instruction = \"Tourner très à droite \" + step.name;\n                                            break;\n                                        case \"FL\":\n                                            data.routeInstructions[data.routeInstructions.length - 1].instruction = \"Tourner légèrement à gauche \" + step.name;\n                                            break;\n                                        case \"FR\":\n                                            data.routeInstructions[data.routeInstructions.length - 1].instruction = \"Tourner légèrement à droite \" + step.name;\n                                            break;\n                                        case \"round_about_entry\":\n                                            data.routeInstructions[data.routeInstructions.length - 1].instruction = \"Entrée rond-point \" + step.name;\n                                            break;\n                                        case \"round_about_exit\":\n                                            data.routeInstructions[data.routeInstructions.length - 1].instruction = \"Sortie rond-point \" + step.name;\n                                            break;\n                                        case null:\n                                            data.routeInstructions[data.routeInstructions.length - 1].instruction = \"Prendre tout droit \" + step.name;\n                                            break;\n                                        default:\n                                            data.routeInstructions[data.routeInstructions.length - 1].instruction = \"?\" + step.navInstruction + \"? \" + step.name;\n                                            break;\n                                    }\n                                });\n                            }\n                        }\n\n                        if (!data) {\n                            options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_ANALYSE\", \"json\")));\n                            return;\n                        }\n                        break;\n\n                    default:\n                        options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_FORMAT\", \"json\", \"xml\")));\n                        return;\n                }\n\n                // Si la réponse contenait une exception renvoyée par le service\n                if (data && data.exceptionReport) {\n                    options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION_2\")));\n                    return;\n                }\n            }\n        } else {\n            options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n            return;\n        }\n\n        options.onSuccess.call(options.scope, data);\n    }\n};\n\nexport default RouteResponseFactory;\n","\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport _ from \"../../Utils/MessagesResources\";\nimport ErrorService from \"../../Exceptions/ErrorService\";\nimport CommonService from \"../CommonService\";\nimport DefaultUrlService from \"../DefaultUrlService\";\nimport RouteRequestFactory from \"./Request/RouteRequestFactory\";\nimport RouteResponseFactory from \"./Response/RouteResponseFactory\";\n\n/**\n * @classdesc\n * Appel du service d'itinéraire du Géoportail :\n *     envoi de la requête construite selon les paramètres en options,\n *     éventuellement parsing et analyse  de la réponse,\n *     retour d'une réponse en paramètre de la fonction onSuccess.\n *\n * @alias Gp.Services.Route\n * @constructor\n * @extends {Gp.Services.CommonService}\n * @param {Object} options - options spécifiques au service (+ les options heritées)\n *\n * @param {String} [options.api] - Manière d'accéder au service : 'REST' (via l'API REST) ou 'OLS' (via la norme XLS).\n * Par défaut, on utilise l'API REST.\n *\n * @param {String} options.outputFormat - Le format de la réponse du service itineraire : 'xml' ou 'json'.\n *      Ce paramètre déterminera l'extension '.xml' ou '.json' du service dans le cas de l'API REST.\n *      Nécessaire si serverUrl est renseigné, et qu'on souhaite passer par l'API REST,\n *      pour connaître le format dans lequel sera fournie la réponse (pour son traitement).\n *      Non nécessaire pour la norme OLS. Par défaut, ce paramètre vaut 'json'.\n *\n * @param {String} [options.routePreference = \"fastest\"] - Mode de calcul à utiliser :\n * - le plus rapide « fastest »\n * - le plus court « shortest »\n * Par défaut : « fastest ».\n *\n * @param {Object} options.startPoint - Point de départ du calcul. Coordonnées exprimées en longitudes, latitudes (EPSG:4326)\n * @param {Float} options.startPoint.x - Abcisse du point de départ du calcul d'itinéraire.\n * @param {Float} options.startPoint.y - Ordonnée du point de départ du calcul d'itinéraire.\n *\n * @param {Object} options.endPoint - Point d'arrivée du calcul. Coordonnées exprimées en longitudes, latitudes (EPSG:4326)\n * @param {Float} options.endPoint.x - Abcisse du point d'arrivée du calcul d'itinéraire.\n * @param {Float} options.endPoint.y - Ordonnée du point d'arrivée du calcul d'itinéraire.\n *\n * @param {Object[]} [options.viaPoints] - Liste de point ({x:Float,y:Float}) intermédaires que l'itinéraire doit emprunter dans l'ordre du tableau.\n *      Coordonnées exprimées en longitudes, latitudes (EPSG:4326) :{x:float, y:float}\n *\n * @param {String} [options.graph = \"voiture\"] - Type de graphe utilisé : \"Voiture\" ou \"Pieton\".\n *      Détermine le profil de vitesses utilisé pour le calcul ainsi que les tronçons autorisés ou non.\n *      Par défaut, c'est la valeur \"Voiture\" qui sera utilisée.\n *\n * @param {String[]} [options.exclusions] - Critères d'exclusions à appliquer pour le calcul. (correspond au paramètre \"avoidFeature\" d'OpenLS)\n *      On précise ici le type de tronçons que l'on ne veut pas que l'itinéraire emprunte\n *      (valeurs possibles : « toll » (éviter les péages), « bridge », « tunnel »).\n *\n * @param {Boolean} [options.geometryInInstructions = false] - Indique si la géométrie de l'itinéraire doit être reprise morceau par morceau dans les instructions.\n *      (correspond au paramètre \"provideGeometry\" d'OpenLS) Par défaut : false.\n *\n * @param {Boolean} [options.provideBbox = true] - Indique si les instructions doivent être localisées par une bbox dans la réponse.\n *      Par défaut : true.\n *\n * @param {String} [options.distanceUnit = \"km\"] - Indique si la distance doit être exprimée en km ou m dans la réponse.\n *      Par défaut : km.\n *\n * @param {String} [options.srs] - Système de coordonnées dans lequel les paramètres géographiques en entrée et la réponse du service sont exprimés.\n *      Pas de valeur par défaut. Si le serveur consulté est celui du Géoportail, la valeur par défaut sera donc celle du service : 'EPSG:4326'.\n *\n * @example\n *  var options = {\n *      // options communes aux services\n *      apiKey : null,\n *      serverUrl : 'http://localhost/service/',\n *      protocol : 'JSONP', // JSONP|XHR\n *      proxyURL : null,\n *      httpMethod : 'GET', // GET|POST\n *      timeOut : 10000, // ms\n *      rawResponse : false, // true|false\n *      scope : null, // this\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *      // spécifique au service\n *      api : 'OLS',\n *      outputFormat : 'xml',\n *      startPoint : {\n *          x : 42.1121,\n *          y : 1.5557\n *      },\n *      endPoint : {\n *          x : 42.1121,\n *          y : 1.5557\n *      },\n *      provideBbox : false,\n *      exclusions : [\"Bridge\", \"Tunnel\", \"Toll\"],\n *      distanceUnit : \"km\",\n *      graph : \"Voiture\",\n *      geometryInInstructions : false,\n *      routePreference : \"fastest\"\n *  };\n *\n * @private\n */\nfunction Route (options) {\n    if (!(this instanceof Route)) {\n        throw new TypeError(_.getMessage(\"CLASS_CONSTRUCTOR\", \"Route\"));\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     */\n    this.CLASSNAME = \"Route\";\n\n    // appel du constructeur par heritage\n    CommonService.apply(this, arguments);\n\n    this.logger = Logger.getLogger(\"Gp.Services.Route\");\n    this.logger.trace(\"[Constructeur Route (options)]\");\n\n    if (!options.startPoint) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"startPoint\"));\n    }\n\n    // on lance une exception afin d'eviter au service de le faire...\n    if (options.startPoint.x === null) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"startPoint.x\"));\n    }\n\n    if (options.startPoint.y === null) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"startPoint.y\"));\n    }\n\n    if (!options.endPoint) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"endPoint\"));\n    }\n\n    // on lance une exception afin d'eviter au service de le faire...\n    if (options.endPoint.x === null) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"endPoint.x\"));\n    }\n\n    if (options.endPoint.y === null) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"endPoint.y\"));\n    }\n\n    // options par defaut\n    // on passe l'option api en majuscules afin d'éviter des exceptions.\n    this.options.api = (typeof options.api === \"string\") ? options.api.toUpperCase() : \"REST\";\n\n    // on passe l'option outputFormat en minuscules afin d'éviter des exceptions.\n    this.options.outputFormat = (typeof options.outputFormat === \"string\") ? options.outputFormat.toLowerCase() : \"json\";\n\n    this.options.startPoint = options.startPoint;\n    this.options.endPoint = options.endPoint;\n    this.options.viaPoints = options.viaPoints || null; // INFO mapping viaPoints <=> xls:viaPoint\n    this.options.exclusions = options.exclusions || null; // INFO mapping exclusions <=> xls:avoidFeature\n    this.options.routePreference = options.routePreference || \"fastest\";\n    this.options.graph = options.graph || \"Voiture\";\n    this.options.geometryInInstructions = options.geometryInInstructions || false; // INFO mapping geometryInInstructions <=> xls:provideGeometry\n    this.options.provideBbox = options.provideBbox || true; // INFO mapping provideBbox <=> xls:provideBoundingBox\n    this.options.distanceUnit = options.distanceUnit || \"km\";\n    this.options.expectedStartTime = null; // FIXME not yet implemented !\n    this.options.srs = options.srs || \"EPSG:4326\";\n\n    // FIXME : les readers OLS ne sont pas implémentés. on utilise donc l'API REST.\n    this.options.api = \"REST\";\n    this.logger.warn(\"Surcharge option 'api' : REST (readers OLS non implémentés)\");\n    if (this.options.protocol === \"XHR\") {\n        this.options.httpMethod = \"GET\";\n        this.logger.trace(\"Surcharge option 'HttpMethod' : \" + this.options.httpMethod);\n    }\n\n    // gestion de l'url du service par defaut\n    // si l'url n'est pas renseignée, il faut utiliser les urls par defaut\n    // en fonction du type d'api, REST ou OLS\n    if (!this.options.serverUrl) {\n        var lstUrlByDefault = DefaultUrlService.Route.url(this.options.apiKey);\n        var urlFound = null;\n        switch (this.options.api) {\n            case \"OLS\":\n                urlFound = lstUrlByDefault.ols;\n                break;\n            case \"REST\":\n                var key = \"route\" + \"-\" + this.options.outputFormat;\n                urlFound = lstUrlByDefault[key];\n                break;\n            default:\n                throw new Error(_.getMessage(\"PARAM_UNKNOWN\", \"api\"));\n        }\n\n        if (!urlFound) {\n            throw new Error(\"Url by default not found !\");\n        }\n        this.options.serverUrl = urlFound;\n        this.logger.trace(\"Serveur URL par defaut : \" + this.options.serverUrl);\n    }\n\n    // gestion du type de service\n    // si l'extension de l'url est .json ou .xml, on surcharge le format de sortie (outputFormat)\n    var idx = this.options.serverUrl.lastIndexOf(\".\");\n    if (idx !== -1) {\n        var extension = this.options.serverUrl.substring(idx + 1);\n        if (extension && extension.length < 5) { // FIXME extension de moins de 4 car. ...\n            this.logger.trace(\"Serveur Extension URL : \" + extension);\n            switch (extension.toLowerCase()) {\n                case \"json\":\n                case \"xml\":\n                    this.options.outputFormat = extension.toLowerCase();\n                    break;\n                default:\n                    throw new Error(\"type of service : unknown or unsupported (json or xml) !\");\n            }\n        }\n    }\n}\n\n/**\n * @lends module:Route#\n */\nRoute.prototype = Object.create(CommonService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/*\n * Constructeur (alias)\n */\nRoute.prototype.constructor = Route;\n\n/**\n * (overwrite)\n * Création de la requête\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nRoute.prototype.buildRequest = function (error, success) {\n    var options = {\n        // spécifique au service\n        api : this.options.api,\n        startPoint : this.options.startPoint,\n        endPoint : this.options.endPoint,\n        viaPoints : this.options.viaPoints,\n        provideBbox : this.options.provideBbox,\n        exclusions : this.options.exclusions,\n        distanceUnit : this.options.distanceUnit,\n        graph : this.options.graph,\n        geometryInInstructions : this.options.geometryInInstructions,\n        routePreference : this.options.routePreference,\n        srs : this.options.srs\n    };\n\n    this.request = RouteRequestFactory.build(options);\n\n    // on teste si la requete a bien été construite !\n    if (!this.request) {\n        error.call(this, new ErrorService(_.getMessage(\"SERVICE_REQUEST_BUILD\")));\n    } else {\n        success.call(this, this.request);\n    }\n};\n\n/**\n * (overwrite)\n * Analyse de la reponse\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nRoute.prototype.analyzeResponse = function (error, success) {\n    // INFO\n    // Factory pour masquer la complexité du retour du service qui renvoie soit\n    //  - une 'string' qui contient du XML ou JSON natif en mode XHR\n    //  - un objet JSON qui est natif ou encapsulé\n\n    if (this.response) {\n        var options = {\n            distanceUnit : this.options.distanceUnit, // FIXME ce parametre nous permet de choisir le type d'unité dans la reponse !\n            response : this.response,\n            outputFormat : this.options.outputFormat, // utile pour parser la string en mode XHR : JSON ou XML !\n            api : this.options.api, // utile de connaitre le type d'API car la reponse est differente !\n            rawResponse : this.options.rawResponse,\n            onError : error,\n            onSuccess : success,\n            scope : this\n        };\n\n        RouteResponseFactory.build(options);\n    } else {\n        error.call(this, new ErrorService(_.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n    }\n};\n\nexport default Route;\n","\nimport Logger from \"../../../../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n *\n * Classe de gestion des param. des requêtes du service de calcul des iso.\n * Permet le mapping avec les options du service.\n *\n * @constructor\n * @alias Gp.Services.ProcessIsoCurve.Request.ProcessIsoCurveParam\n * @param {Object} options - options\n * @private\n *\n */\nfunction ProcessIsoCurveParam (options) {\n    if (!(this instanceof ProcessIsoCurveParam)) {\n        throw new TypeError(\"ProcessIsoCurveParam constructor cannot be called as a function.\");\n    }\n\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur ProcessIsoCurveParam ()]\");\n\n    /**\n     * Options en paramêtres du constructeur.\n     */\n    this.options = options || {};\n\n    // mapping des options avec l'API REST\n\n    /** Identifiant de l’isochrone */\n    this.id = this.options.id;\n\n    /** Coordonnées de départ (ou arrivée si le reverse est à true). */\n    this.location = this.options.position;\n\n    /** projection (code EPSG comme epsg:4326 ou wgs84) */\n    this.srs = this.options.srs;\n\n    /**\n     * Profil de véhicule à utiliser pour le calcul.\n     * Voiture ou Pieton\n     */\n    this.graphName = this.options.graph;\n\n    /**\n     * Identifiant et nom du véhicule\n     * FIXME non utilisé\n     */\n    this.profileId = this.options.profileId || null; // TODO !\n    this.profileName = this.options.profileName || null; // TODO !\n\n    /** Liste des règles de restrictions à utiliser */\n    this.exclusions = this.options.exclusions;\n\n    this.reverse = this.options.reverse;\n    this.smoothing = this.options.smoothing;\n    this.holes = this.options.holes;\n\n    /**\n     * \"time\" pour isochrone ou \"distance\" for isodistance.\n     * Par defaut, time...\n     */\n    var value = this.options.method;\n    switch (value) {\n        case \"time\":\n            this.method = \"time\";\n            this.time = this.options.time;\n            break;\n        case \"distance\":\n            this.method = \"distance\";\n            this.distance = this.options.distance;\n            break;\n        default:\n            this.logger.warn(\"Par defaut, on calcule un isochrone !\");\n            this.method = \"time\";\n    }\n}\n\n/**\n * CLASSNAME\n */\nProcessIsoCurveParam.CLASSNAME = \"ProcessIsoCurveParam\";\n\nProcessIsoCurveParam.prototype = {\n\n    /**\n     * @lends module:ProcessIsoCurveParam#\n     */\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : ProcessIsoCurveParam,\n\n    /**\n     * Retourne la liste des exclusions\n     * @returns {String} x,y\n     */\n    getLocation : function () {\n        return this.location.x + \",\" + this.location.y;\n    },\n\n    /**\n     * Retourne la liste des exclusions\n     * @returns {String} exclusions\n     */\n    getExclusions : function () {\n        return this.exclusions.join(\";\");\n    }\n};\n\n/**\n * Tableau de clefs/valeurs pour param.\n *\n * @returns {Object[]} KVP\n */\nProcessIsoCurveParam.prototype.getParams = function () {\n    var map = [];\n\n    map.push({\n        k : \"location\",\n        v : this.getLocation()\n    });\n\n    map.push({\n        k : \"smoothing\",\n        v : this.smoothing\n    });\n\n    map.push({\n        k : \"holes\",\n        v : this.holes\n    });\n\n    map.push({\n        k : \"reverse\",\n        v : this.reverse\n    });\n\n    map.push({\n        k : \"method\",\n        v : this.method\n    });\n\n    if (this.time) {\n        map.push({\n            k : \"time\",\n            v : this.time\n        });\n    }\n\n    if (this.distance) {\n        map.push({\n            k : \"distance\",\n            v : this.distance\n        });\n    }\n\n    map.push({\n        k : \"graphName\",\n        v : this.graphName\n    });\n\n    if (this.exclusions) {\n        map.push({\n            k : \"exclusions\",\n            v : this.getExclusions()\n        });\n    }\n\n    if (this.srs) {\n        map.push({\n            k : \"srs\",\n            v : this.srs\n        });\n    }\n\n    return map;\n};\n\nexport default ProcessIsoCurveParam;\n","\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport _ from \"../../../Utils/MessagesResources\";\nimport ProcessIsoCurveParam from \"./model/ProcessIsoCurveParam\";\n\n/**\n * @classdesc\n * Classe de gestion des requêtes sur le service de calcul d'isoschrone/isodistance.\n *  Les requêtes peuvent être en mode GET ou POST,\n *  et le format de sorti est en JSON ou en XML.\n *\n * @constructor\n * @alias Gp.Services.ProcessIsoCurve.Request.ProcessIsoCurveRequest\n * @param {Object} options - options\n *\n * @example\n * var options = {\n *      httpMethod : 'GET', // GET|POST\n *      // spécifique au service\n *      exclusions : ['Bridge', 'Tunnel'],\n *      position : {\n *          x : 2.3242664298058053,\n *          y : 48.86118017324745\n *      },\n *      graph : \"Voiture\",\n *      method : 'time',\n *      time : 1000, //distance : 200\n *      reverse : false,\n *      smoothing : false,\n *      holes : false,\n *      srs : 'EPSG:4326'\n *  };\n *\n * try {\n *\n *      var oIsoCurve = new ProcessIsoCurveRequest (options);\n *      if (!oIsoCurve.processRequestString ()) {\n *          // error\n *      }\n *\n *      var request = oIsoCurve.requestString;\n *\n * } catch (e) {\n *      // error\n * }\n * @private\n */\nfunction ProcessIsoCurveRequest (options) {\n    this.logger = Logger.getLogger(\"ProcessIsoCurveRequest\");\n    this.logger.trace(\"[Constructeur ProcessIsoCurveRequest ()]\");\n\n    if (!(this instanceof ProcessIsoCurveRequest)) {\n        throw new TypeError(\"ProcessIsoCurveRequest constructor cannot be called as a function.\");\n    }\n\n    // existance des options\n    if (!options) {\n        throw new Error(_.getMessage(\"PARAM_EMPTY\", \"options\"));\n    }\n\n    /**\n     * Liste des options\n     */\n    this.settings = options;\n\n    /**\n     * Mode HTPP.\n     * Par defaut, \"GET\".\n     * @type {String}\n     */\n    this.mode = this.settings.httpMethod || \"GET\";\n}\n\nProcessIsoCurveRequest.prototype = {\n\n    /**\n     * @lends module:ProcessIsoCurveRequest#\n     */\n\n    /**\n     * Requête\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : ProcessIsoCurveRequest,\n\n    /**\n     * Template de la requête (POST)\n     * * __X__ __Y__ __SRS__ __GRAPHNAME__ __METHOD__  (obligatoire)\n     * * __REVERSE__ __SMOOTHING__ __HOLES__           (par defaut)\n     * * __TIME__ __TIMEVALUE__                        (choix)\n     * * __DISTANCE__ __DISTANCEVALUE__                (choix)\n     * * __EXCLUSIONS__ __EXCLUSIONFEATURE__ __EXCLUSIONVALUE__ (optionnel)\n     * * __PROFIL__ __PROFILID__ __PROFILNAME__                 (très optionnel)\n     * * __ID__ __IDVALUE__                                     (très optionnel)\n     */\n    template : {\n        container : \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n\" +\n            \"<isochroneRequest>\\n\" +\n            \"__ID__\" +\n            \"\\t<location>\\n\" +\n            \"\\t\\t<x>__X__</x>\\n\" +\n            \"\\t\\t<y>__Y__</y>\\n\" +\n            \"\\t</location>\\n\" +\n            \"\\t<srs>__SRS__</srs>\\n\" +\n            \"\\t<graphName>__GRAPHNAME__</graphName>\\n\" +\n            \"__PROFIL__\" +\n            \"__EXCLUSIONS__\" +\n            \"\\t<method>__METHOD__</method>\\n\" +\n            \"__TIME__\" +\n            \"__DISTANCE__\" +\n            \"\\t<reverse>__REVERSE__</reverse>\\n\" +\n            \"\\t<smoothing>__SMOOTHING__</smoothing>\\n\" +\n            \"\\t<holes>__HOLES__</holes>\\n\" +\n            \"</isochroneRequest>\",\n        id : \"\\t<id>__IDVALUE__</id>\\n\",\n        profil : \"\\t<profileId>__PROFILID__</profileId>\\n\" + \"\\t<profileName>__PROFILNAME__</profileName>\\n\",\n        exclusions : {\n            container : \"\\t<exclusions>\\n\" +\n                \"__EXCLUSIONFEATURE__\\n\" +\n                \"\\t</exclusions>\\n\",\n            feature : \"\\t\\t<exclusion>__EXCLUSIONVALUE__</exclusion>\"\n        },\n        time : \"\\t<time>__TIMEVALUE__</time>\\n\",\n        distance : \"\\t<distance>__DISTANCEVALUE__</distance>\\n\"\n    },\n\n    /**\n     * Construction de la requête.\n     *\n     * @example\n     * // GET  out :\n     *   //  (http://wxs.ign.fr/KEY/isochrone/isochrone.json?)\n     *   //  location=&\n     *   //  time=& ou distance=&\n     *   //  method=\"DISTANCE|TIME\"&\n     *   //  graph=Pieton&\n     *   //  graphName=Pieton&\n     *   //  exclusions=&\n     *   //  reverse=10&\n     *   //  smoothing=&\n     *   //  holes=&\n     *   //  srs=\n     *\n     * // POST out :\n     *   // <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n     *   // <isochroneRequest>\n     *   //   <id>1</id>\n     *   //   <location>\n     *   //     <x>-1.557189</x>\n     *   //     <y>47.217122</y>\n     *   //   </location>\n     *   //   <srs></srs>\n     *   //   <graphName></graphName>\n     *   //   <profileId></profileId>\n     *   //   <profileName></profileName>\n     *   //   <exclusions>\n     *   //     <exclusion></exclusion>\n     *   //     <exclusion></exclusion>\n     *   //   </exclusions>\n     *   //   <method></method>\n     *   //   <time>50</time>\n     *   //   <distance></distance>\n     *   //   <reverse></reverse>\n     *   //   <smoothing></smoothing>\n     *   //   <holes></holes>\n     *   // </isochroneRequest>\n     *\n     * @returns {String} request\n     */\n    processRequestString : function () {\n        var request = \"\";\n        var i = 0;\n\n        switch (this.mode) {\n            case \"GET\":\n                this.logger.trace(\"Process GET Request\");\n\n                // Mapping des options avec le service de l'API REST\n                var oParams = new ProcessIsoCurveParam(this.settings);\n                var params = oParams.getParams();\n\n                for (i = 0; i < params.length; i++) {\n                    var o = params[i];\n                    if (request) {\n                        request += \"&\";\n                    }\n                    request += o.k + \"=\" + o.v;\n                }\n\n                break;\n\n            case \"POST\":\n                this.logger.trace(\"Process POST Request\");\n\n                request = this.template.container;\n\n                // options non prises en compte car non implémentées !\n                // clean : id\n                request = request.replace(/__ID__/g, \"\");\n                // clean : profil\n                request = request.replace(/__PROFIL__/g, \"\");\n\n                // options obligatoires\n                request = request.replace(/__X__/g, this.settings.position.x);\n                request = request.replace(/__Y__/g, this.settings.position.y);\n                request = request.replace(/__GRAPHNAME__/g, this.settings.graph);\n\n                // options par defaut\n                request = request.replace(/__SRS__/g, this.settings.srs);\n                request = request.replace(/__SMOOTHING__/g, this.settings.smoothing);\n                request = request.replace(/__HOLES__/g, this.settings.holes);\n                request = request.replace(/__REVERSE__/g, this.settings.reverse);\n\n                // options conditionnelles\n\n                // exclusions\n                if (this.settings.exclusions) {\n                    var tmplExclusions = this.template.exclusions.container;\n                    var exclusions = [];\n                    for (i = 0; i < this.settings.exclusions.length; i++) {\n                        var tmplFeature = this.template.exclusions.feature;\n                        tmplFeature = tmplFeature.replace(/__EXCLUSIONVALUE__/, this.settings.exclusions[i]);\n                        exclusions.push(tmplFeature);\n                    }\n                    tmplExclusions = tmplExclusions.replace(/__EXCLUSIONFEATURE__/, exclusions.join(\"\\n\"));\n                    request = request.replace(/__EXCLUSIONS__/g, tmplExclusions);\n                }\n                // clean exclusions\n                request = request.replace(/__EXCLUSIONS__/g, \"\");\n\n                // distance\n                if (this.settings.distance) {\n                    var tmplDistance = this.template.distance;\n                    tmplDistance = tmplDistance.replace(/__DISTANCEVALUE__/g, this.settings.distance);\n                    request = request.replace(/__DISTANCE__/g, tmplDistance);\n                    // method\n                    request = request.replace(/__METHOD__/g, \"distance\");\n                }\n                // clean\n                request = request.replace(/__DISTANCE__/g, \"\");\n\n                // time\n                if (this.settings.time) {\n                    var tmplTime = this.template.time;\n                    tmplTime = tmplTime.replace(/__TIMEVALUE__/g, this.settings.time);\n                    request = request.replace(/__TIME__/g, tmplTime);\n                    // method\n                    request = request.replace(/__METHOD__/g, \"time\");\n                }\n                // clean\n                request = request.replace(/__TIME__/g, \"\");\n                break;\n\n            default:\n                this.logger.error(\"No other HTTP method supported by the service !\");\n        }\n\n        this.logger.trace(request);\n        this.requestString = request;\n\n        return this.requestString;\n    }\n};\n\nexport default ProcessIsoCurveRequest;\n","\n/**\n * Response object for {@link module:Services~isoCurve Gp.Services.isoCurve ()} invocation when successful. Received as the argument of onSuccess callback function.\n *\n * @property {Float} distance - distance (expressed in meters) used for the request.\n * @property {Float} time - time (expressed in seconds) used for the request.\n * @property {Object} geometry - Geometry (expressed in [GeoJSON]{@link http://geojson.org/}) of the isocurve.\n * @property {String} id - request id (used by underlying webservice).\n * @property {Gp.Point} location - Position of the start or end point used for the request (expressed in \"srs\" coordinates system).\n * @property {String} message - message\n * @property {String} srs - Identifier of the coordinates system used for the isocurve.\n *\n * @namespace\n * @alias Gp.Services.IsoCurveResponse\n *\n */\nfunction ProcessIsoCurveResponse () {\n    if (!(this instanceof ProcessIsoCurveResponse)) {\n        throw new TypeError(\"ProcessIsoCurveResponse constructor cannot be called as a function.\");\n    }\n\n    this.message = null;\n\n    this.id = null;\n\n    this.location = {};\n    this.location.x = null;\n    this.location.y = null;\n\n    this.srs = null;\n\n    this.geometry = null;\n\n    this.time = null;\n\n    this.distance = null;\n}\n\nProcessIsoCurveResponse.prototype = {\n\n    constructor : ProcessIsoCurveResponse\n\n};\n\nexport default ProcessIsoCurveResponse;\n","/**\n * Analyse de la reponse XML\n *\n * @module ProcessIsoCurveResponseReader\n * @alias Gp.Services.ProcessIsoCurve.Formats.ProcessIsoCurveResponseReader\n * @todo not yet implemented !\n * @private\n */\n\nimport MessagesResources from \"../../../Utils/MessagesResources\";\nimport WKT from \"../../../Formats/WKT\";\nimport ErrSrv from \"../../../Exceptions/ErrorService\";\nimport ProcessIsoCurveResponse from \"../Response/model/ProcessIsoCurveResponse\";\n\n/**\n * Objet ProcessIsoCurveResponseReader\n *\n * @member {Object} ProcessIsoCurveResponseReader\n *\n * @property {Object} ProcessIsoCurveResponseReader.READERS - Objet contenant des fonctions de lecture, appelées \"readers\"\n *      dont chaque clé correspond au nom d'un tag du XML que l'on souhaite lire\n *      et la valeur associée est une fonction (node, data)\n *      où node est un noeud du document DOM\n *      et data est un objet où l'on stocke les informations lues dans le XML.\n *\n * @property {Method} ProcessIsoCurveResponseReader.read -  Méthode permettant de lancer la lecture d'une réponse XML\n *       du service de calcul isochrone/isodistance, à l'aide des readers de la classe.\n *\n */\n\nvar ProcessIsoCurveResponseReader = {};\n\n/*\n    // INFO\n    // Exemple d'erreur du service\n    // <?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\" ?>\n    // <isochroneResult>\n    //  <message>Location point must have 2 components separated with a ,</message>\n    //  <status>ERROR</status>\n    // </isochroneResult>\n\n    // <?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\" ?>\n    // <serviceResult>\n    //   <message>ServiceException : Error in isochron computation Error in smartrouting null</message>\n    //   <status>ERROR</status>\n    // </serviceResult>\n\n    // INFO\n    // Exemple d'erreur NGinx\n    // <ExceptionReport><Exception exceptionCode=\"MissingParameter\">Resource parameter not found</Exception></ExceptionReport>\n*/\n\n/*\n    // INFO\n    // Exemple de réponse du service\n\n     // <IsochroneResult>\n     //    <status>OK</status>\n     //    <id/>\n     //    <location>-1.557189,47.217122</location>\n     //    <srs/>\n     //    <distance>5000</distance>\n     //    <wktGeometry>POLYGON ((-1.545312 47.178178, -1.545312 47.180418, ...))</wktGeometry>\n     // </IsochroneResult>\n\n    // <isochronResult>\n    //    <status>OK</status>\n    //    <id>1</id>\n    //    <location>-1.557189,47.217122</location>\n    //    <srs/>\n    //    <time>50</time>\n    //    <wktGeometry>POLYGON ((-1.556864 47.216487, -1.556864 47.216948, ...))</wktGeometry>\n    // </isochronResult>\n*/\n\nProcessIsoCurveResponseReader.READERS = {\n\n    /** TODO : jsdoc block */\n    isochronResult : function (root) {\n        // racine de la réponse XML : on crée l'objet de réponse\n        var response = new ProcessIsoCurveResponse();\n\n        if (root.hasChildNodes()) {\n            var children = root.childNodes;\n            var child;\n\n            for (var i = 0; i < children.length; i++) {\n                child = children[i];\n\n                if (ProcessIsoCurveResponseReader.READERS[child.nodeName]) {\n                    ProcessIsoCurveResponseReader.READERS[child.nodeName](child, response);\n                }\n            }\n        }\n\n        if (response.status === \"error\") {\n            var message = MessagesResources.getMessage(\"SERVICE_RESPONSE_EXCEPTION\",\n                response.message);\n            throw new ErrSrv({\n                message : message,\n                type : ErrSrv.TYPE_SRVERR\n            });\n        }\n        return response;\n    },\n\n    /** TODO : jsdoc block */\n    message : function (node, response) {\n        if (response) {\n            response.message = __getChildValue(node);\n        }\n    },\n\n    /** TODO : jsdoc block */\n    status : function (node, response) {\n        var status = __getChildValue(node);\n        if (status === \"ERROR\" || status === \"error\") {\n            if (response) {\n                response.status = \"error\";\n            }\n        }\n    },\n\n    /** TODO : jsdoc block */\n    id : function (node, response) {\n        if (response) {\n            response.id = __getChildValue(node);\n        }\n    },\n\n    /** TODO : jsdoc block */\n    location : function (node, response) {\n        var coords = __getChildValue(node);\n        if (response && response.location) {\n            response.location.x = parseFloat(coords.split(\",\")[0]);\n            response.location.y = parseFloat(coords.split(\",\")[1]);\n        }\n    },\n\n    /** TODO : jsdoc block */\n    srs : function (node, response) {\n        if (response) {\n            response.srs = __getChildValue(node);\n        }\n    },\n\n    /** TODO : jsdoc block */\n    distance : function (node, response) {\n        if (response) {\n            response.distance = parseFloat(__getChildValue(node));\n        }\n    },\n\n    /** TODO : jsdoc block */\n    time : function (node, response) {\n        if (response) {\n            response.time = parseFloat(__getChildValue(node));\n        }\n    },\n\n    /** TODO : jsdoc block */\n    wktGeometry : function (node, response) {\n        if (response) {\n            var wktGeometry = node.innerHTML;\n            /** TODO : jsdoc block */\n            var onWKTSuccess = function (json) {\n                response.geometry = json;\n            };\n            /** TODO : jsdoc block */\n            var onWKTError = function () {\n                var msg = MessagesResources.getMessage(\"PARAM_FORMAT\", [\"wktGeometry\"]);\n                throw new Error(msg);\n            };\n            if (response.hasOwnProperty(\"geometry\")) {\n                WKT.toJson(wktGeometry, onWKTSuccess, onWKTError);\n            }\n        }\n    },\n\n    /** TODO : jsdoc block */\n    serviceResult : function (node) {\n        // en cas d'exception du service\n        var response = {};\n        if (node.hasChildNodes()) {\n            var children = node.childNodes;\n            var child;\n            for (var i = 0; i < children.length; i++) {\n                child = children[i];\n                if (ProcessIsoCurveResponseReader.READERS[child.nodeName]) {\n                    ProcessIsoCurveResponseReader.READERS[child.nodeName](child, response);\n                }\n            }\n        }\n        return response;\n    },\n\n    /** TODO : jsdoc block */\n    ExceptionReport : function (node) {\n        var response = {};\n        if (node.hasChildNodes()) {\n            var children = node.childNodes;\n            var child;\n            for (var i = 0; i < children.length; i++) {\n                child = children[i];\n                if (child.nodeName === \"Exception\") {\n                    response.exceptionReport = ProcessIsoCurveResponseReader.READERS[\"Exception\"](child);\n                }\n            }\n        }\n        return response;\n    },\n\n    /** TODO : jsdoc block */\n    Exception : function (node) {\n        var exceptionReport = {};\n\n        // get exception code\n        var exceptionCode = node.getAttribute(\"exceptionCode\");\n        if (exceptionCode) {\n            exceptionReport.exceptionCode = exceptionCode;\n        }\n\n        // get exception message\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            exceptionReport.exception = textNode.nodeValue;\n        }\n\n        return exceptionReport;\n    }\n};\n\n/** TODO : jsdoc block */\nProcessIsoCurveResponseReader.read = function (root) {\n    var response;\n\n    if (root.nodeName === \"isochronResult\" || root.nodeName === \"isochroneResult\" || root.nodeName === \"IsochroneResult\") {\n        response = ProcessIsoCurveResponseReader.READERS[\"isochronResult\"](root);\n        return response;\n    } else if (root.nodeName === \"ExceptionReport\") {\n        response = ProcessIsoCurveResponseReader.READERS[root.nodeName](root);\n        return response;\n    } else if (ProcessIsoCurveResponseReader.READERS[root.nodeName]) {\n        response = ProcessIsoCurveResponseReader.READERS[root.nodeName](root);\n        if (response.status === \"error\") {\n            var errMsg = MessagesResources.getMessage(\"SERVICE_RESPONSE_EXCEPTION\",\n                response.message);\n            throw new ErrSrv({\n                message : errMsg,\n                type : ErrSrv.TYPE_SRVERR\n            });\n        }\n        return response;\n    } else {\n        throw new ErrSrv({\n            message : MessagesResources.getMessage(\"SERVICE_RESPONSE_ANALYSE\", root.nodeName),\n            type : ErrSrv.TYPE_UNKERR\n        });\n    }\n};\n\n/**\n * Lecture de la valeur du premier child d'un noeud, si elle existe.\n *\n * @private\n * @memberof ProcessIsoCurveResponseReader\n * @method __getChildValue\n * @param {DOMElement} node - a DOM node\n * @return {String} value - valeur du firstChild du noeud en entrée, ou chaîne vide.\n */\nfunction __getChildValue (node) {\n    var textNode;\n    var value = \"\";\n\n    if (node.hasChildNodes()) {\n        textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            value = textNode.nodeValue;\n        }\n    }\n    return value;\n}\n\nexport default ProcessIsoCurveResponseReader;\n","/**\n * Factory pour générer une reponse JSON à partir d'un XML ou d'un JSON\n * (Factory)\n *\n * @module ProcessIsoCurveResponseFactory\n * @alias Gp.Services.ProcessIsoCurve.Response.ProcessIsoCurveResponseFactory\n * @private\n */\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport MRes from \"../../../Utils/MessagesResources\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport XML from \"../../../Formats/XML\";\nimport WKT from \"../../../Formats/WKT\";\nimport ProcessIsoCurveResponseReader from \"../Formats/ProcessIsoCurveResponseReader\";\nimport ProcessIsoCurveResponse from \"./model/ProcessIsoCurveResponse\";\n\nvar ProcessIsoCurveResponseFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant ProcessIsoCurve\n     *\n     * @example\n     *   var options = {\n     *      response :\n     *      outputFormat :\n     *      rawResponse :\n     *      scope :\n     *      onSuccess :\n     *      onError :\n     *   };\n     *\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"ProcessIsoCurveResponseFactory\");\n        logger.trace([\"ProcessIsoCurveResponseFactory::build()\"]);\n\n        var data = null;\n\n        if (options.response) {\n            if (options.rawResponse) {\n                logger.trace(\"analyze response : raw\");\n                data = options.response;\n            } else {\n                switch (options.outputFormat) {\n                    case \"xml\":\n                        logger.trace(\"analyze response : xml\");\n\n                        try {\n                            var p = new XML({\n                                reader : ProcessIsoCurveResponseReader\n                            });\n\n                            // FIXME : mode XHR ne retourne que des string ? JSONP aussi à ce niveau ?\n                            if (typeof options.response === \"string\") {\n                                p.setXMLString(options.response);\n                            } else {\n                                p.setXMLDoc(options.response);\n                            }\n\n                            data = p.parse();\n\n                            if (!data) {\n                                throw new Error(MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION_2\"));\n                            }\n                        } catch (e) {\n                            var message = e.message;\n                            message += \"\\n (raw response service : '\" + options.response + \"')\";\n                            options.onError.call(options.scope, new ErrorService({\n                                message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", message),\n                                status : 200,\n                                type : ErrorService.TYPE_SRVERR\n                            }));\n                            return;\n                        }\n\n                        break;\n\n                    case \"json\":\n                        logger.trace(\"analyze response : json\");\n\n                        var JSONResponse = null;\n                        if (typeof options.response === \"string\") {\n                            JSONResponse = JSON.parse(options.response);\n                        } else {\n                            JSONResponse = options.response;\n                        }\n\n                        // analyse de la reponse\n                        if (JSONResponse && (JSONResponse.status === \"OK\" || JSONResponse.status === \"ok\")) {\n                            // création de l'objet de réponse\n                            data = new ProcessIsoCurveResponse();\n\n                            // remplissage de l'objet créé avec les attribtuts de la réponse du service\n                            data.time = JSONResponse.time;\n                            data.distance = JSONResponse.distance;\n                            data.message = JSONResponse.message;\n                            data.id = JSONResponse.id;\n                            data.srs = JSONResponse.srs;\n                            // callback de la reponse\n                            var onWKTSuccess = function (json) {\n                                data.geometry = json;\n                            };\n                            // callback d'erreur\n                            var onWKTError = function () {\n                                options.onError.call(options.scope, new ErrorService({\n                                    message : MRes.getMessage(\"PARAM_FORMAT\", \"wktGeometry\")\n                                }));\n                            };\n                            if (data.hasOwnProperty(\"geometry\")) {\n                                WKT.toJson(JSONResponse.wktGeometry, onWKTSuccess, onWKTError);\n                                if (!data.geometry) {\n                                    options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_ANALYSE\", options.response)));\n                                    return;\n                                }\n                            }\n                            var coords = JSONResponse.location.split(\",\");\n                            if (data.location) {\n                                data.location.x = coords[0];\n                                data.location.y = coords[1];\n                            }\n                        } else if (JSONResponse && (JSONResponse.status === \"ERROR\" || JSONResponse.status === \"error\")) {\n                            // JSHint bug if var message is used !?\n                            var mess = JSONResponse.message;\n                            mess += \"\\n (raw response service : '\" + JSONResponse + \"')\";\n                            options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", mess)));\n                            return;\n                        }\n                        break;\n\n                    default:\n                        options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_FORMAT\", \"json\", \"xml\")));\n                        return;\n                }\n\n                // info : en cas de problèmes de droits (clé invalide ou autre), la réponse est au format XML !!\n                // ex. <ExceptionReport><Exception exceptionCode=\"MissingParameter\">Key does not exist or has expired</Exception></ExceptionReport>\n                // mais le statut est 403, l'erreur est donc remontée plus tôt.\n                if (data && data.exceptionReport) {\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", data.exceptionReport),\n                        type : ErrorService.TYPE_SRVERR,\n                        status : 200\n                    }));\n                    return;\n                }\n            }\n        } else {\n            // si la réponse est vide, on appelle le callback d'erreur\n            options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n            return;\n        }\n\n        // si tout s'est bien passé, on appelle le callback de succès\n        options.onSuccess.call(options.scope, data);\n    }\n};\n\nexport default ProcessIsoCurveResponseFactory;\n","\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport _ from \"../../Utils/MessagesResources\";\nimport ErrorService from \"../../Exceptions/ErrorService\";\nimport CommonService from \"../CommonService\";\nimport DefaultUrlService from \"../DefaultUrlService\";\nimport ProcessIsoCurveRequest from \"./Request/ProcessIsoCurveRequest\";\nimport ProcessIsoCurveResponseFactory from \"./Response/ProcessIsoCurveResponseFactory\";\n\n/**\n * @classdesc\n * Appel du service d'isochrone/distance du Géoportail :\n *     envoi de la requête construite selon les paramètres en options,\n *     éventuellement parsing et analyse  de la réponse,\n *     retour d'une réponse en paramètre de la fonction onSuccess.\n * @constructor\n * @extends {Gp.Services.CommonService}\n * @alias Gp.Services.ProcessIsoCurve\n * @param {Object} options - options spécifiques au service (+ les options heritées)\n *\n * @param {String} options.outputFormat - Le format de la réponse du service iso : 'xml' ou 'json'.\n *      Ce paramètre déterminera l'extension '.xml' ou '.json' du service.\n *      Nécessaire si serverUrl est renseigné pour connaître le format dans lequel sera fournie la réponse (pour son traitement).\n *      Par défaut, ce paramètre vaut 'json'.\n *\n * @param {Object} options.position - Point de départ du calcul.\n *      Coordonnées exprimées en longitudes, latitudes (EPSG:4326)\n *      @param {Float} options.position.x - Abcisse du point de départ du calcul d'isochrone/distance.\n *      @param {Float} options.position.y - Ordonnée du point de départ du calcul d'isochrone/distance.\n *\n * @param {String} options.srs - Projection.\n *      Système de coordonnées dans lequel les coordonnées du point « location » sont exprimées et\n *      dans lequel la géométrie de la courbe résultante sera exprimée.\n *      Par défaut, le système de coordonnées utilisé sera « EPSG:4326 ».\n *\n * @param {String} [options.graph = \"voiture\"] - Nom du graphe à utiliser pour le calcul (« Pieton » ou « Voiture »).\n *      La valeur par défaut est : «voiture»\n *\n * @param {Array.<String>} [options.exclusions] - Critères d'exclusions à appliquer pour le calcul.\n *      On précise ici le type de tronçons que l'on ne veut pas que l'isochrone/distance emprunte\n *      (valeurs possibles : « toll » (éviter les péages), « bridge », « tunnel »).\n *\n * @param {String} [options.method = \"time\"] - Méthode utilisée pour le calcul de la courbe iso.\n *      Les valeurs possible sont \"time\" pour un calcul d'isochrone, \"distance\" pour un calcul d'isodistance.\n *      Pas de valeur spécifié équivaut à un calcul d'isochrone.\n *\n * @param {Float} options.time - Durée maximum (exprimée en secondes) à utiliser pour le calcul de la courbe à partir du ou jusqu'au point « location ».\n *      Ce paramètre doit être renseigné si l'option \"méthod\" a la valeur \"time\".\n *      Si l'option method n'est pas renseignée, ce paramètre doit être renseigné.\n *\n * @param {Float} options.distance - Distance maximum (exprimée en metres) à utiliser pour le calcul de la courbe à partir du ou j'usqu'au point « location ».\n *      Ce paramètre doit être renseigné si l'option \"méthod\" a la valeur \"DISTANCE\".\n *      Si l'option \"method\" n'est pas renseignée, ce paramètre sera ignoré.\n *\n * @param {Boolean} [options.reverse = false] - Indique si la géométrie résultante doit être lissée (« true ») pour ne pas avoir d'effet d'escalier.\n *      Par défaut, la valeur « false » est appliquée.\n *\n * @param {Boolean} [options.smoothing = false] - Indique si la géométrie résultante doit être lissée (« true ») pour ne pas avoir d'effet d'escalier.\n *      Par défaut, la valeur « false » est appliquée.\n *\n * @param {Boolean} [options.holes = false] - Indique si la géométrie résultante (surface) doit être retournée avec des trous (« true »).\n *      Par défaut, la valeur « false » est appliquée.\n *\n * @example\n *   var options = {\n *      // options communes aux services\n *      apiKey : null,\n *      serverUrl : 'http://localhost/service/',\n *      protocol : 'JSONP', // JSONP|XHR\n *      proxyURL : null,\n *      httpMethod : 'GET', // GET|POST\n *      timeOut : 10000, // ms\n *      rawResponse : false, // true|false\n *      scope : null, // this\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *      // spécifique au service\n *      position : {\n *           x : 2.3242664298058053,\n *           y : 48.86118017324745\n *      },\n *      distance : 200,\n *      [time : ]\n *      method : \"distance\",\n *      exclusions : [\"Bridge\", \"Tunnel\", \"Toll\"],\n *      graph : \"voiture\",\n *      reverse : false,\n *      smoothing : false,\n *      holes : false\n *  };\n * @private\n */\n\nfunction ProcessIsoCurve (options) {\n    if (!(this instanceof ProcessIsoCurve)) {\n        throw new TypeError(_.getMessage(\"CLASS_CONSTRUCTOR\", \"ProcessIsoCurve\"));\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     * FIXME instance ou classe ?\n     */\n    this.CLASSNAME = \"ProcessIsoCurve\";\n\n    // appel du constructeur par heritage\n    CommonService.apply(this, arguments);\n\n    this.logger = Logger.getLogger(\"Gp.Services.ProcessIsoCurve\");\n    this.logger.trace(\"[Constructeur ProcessIsoCurve (options)]\");\n\n    if (!options.position) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"position\"));\n    }\n\n    // on lance une exception afin d'eviter au service de le faire...\n    if (options.position.x === null) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"position.x\"));\n    }\n\n    if (options.position.y === null) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"position.y\"));\n    }\n\n    if (!options.time && !options.distance) {\n        throw new Error(\"Parameter (s) 'distance' missing. Parameter time to calculate an isochrone, parameter distance for an isodistance\");\n    }\n\n    // si on a que le paramètre \"distance\" en entrée, on calcule une isodistance.\n    // Le paramètre \"méthode\" doit pour avoir une réponse du service, être passé à \"distance\"\n    if (!options.time && options.distance) {\n        this.options.method = \"distance\";\n        // on supprime l'éventuel attribut time, résidu d'un appel antérieur\n        if (this.options.time) {\n            delete this.options.time;\n        }\n    }\n\n    // si on a que le paramètre \"time\" en entrée, on calcule une isochrone.\n    // Le paramètre \"méthode\" doit pour avoir une réponse du service, être passé à \"time\"\n    if (options.time && !options.distance) {\n        this.options.method = \"time\";\n        // on supprime l'éventuel attribut time, résidu d'un appel antérieur\n        if (this.options.distance) {\n            delete this.options.distance;\n        }\n    }\n\n    // au cas où on a ni l'un, ni l'autre...\n    this.options.method = this.options.method || \"time\";\n\n    // options par defaut du service\n    this.options.exclusions = options.exclusions || null;\n    this.options.graph = options.graph || \"Voiture\"; // TODO test de la valeur à faire !\n    this.options.reverse = options.reverse || false;\n    this.options.smoothing = options.smoothing || false;\n    this.options.holes = options.holes || false;\n    this.options.srs = options.srs || \"EPSG:4326\";\n\n    // on passe l'option outputFormat en minuscules afin d'éviter des exceptions.\n    this.options.outputFormat = (typeof options.outputFormat === \"string\") ? options.outputFormat.toLowerCase() : \"json\";\n\n    // gestion de l'url du service par defaut\n    // si l'url n'est pas renseignée, il faut utiliser les urls par defaut\n    if (!this.options.serverUrl) {\n        var lstUrlByDefault = DefaultUrlService.ProcessIsoCurve.url(this.options.apiKey);\n\n        var urlFound = lstUrlByDefault[\"iso\" + \"-\" + this.options.outputFormat];\n        if (!urlFound) {\n            throw new Error(\"Url by default not found !\");\n        }\n        this.options.serverUrl = urlFound;\n        this.logger.trace(\"Serveur URL par defaut : \" + this.options.serverUrl);\n    }\n\n    // gestion du type de service\n    // si l'extension de l'url est .json ou .xml, on surcharge le format de sortie (outputFormat)\n    var idx = this.options.serverUrl.lastIndexOf(\".\");\n    if (idx !== -1) {\n        var extension = this.options.serverUrl.substring(idx + 1);\n        if (extension && extension.length < 5) { // FIXME extension de moins de 4 car. ...\n            this.logger.trace(\"Serveur Extension URL : \" + extension);\n            switch (extension.toLowerCase()) {\n                case \"json\":\n                case \"xml\":\n                    this.options.outputFormat = extension.toLowerCase();\n                    break;\n                default:\n                    throw new Error(\"type of service : unknown or unsupported (json or xml) !\");\n            }\n        }\n    }\n}\n\n/**\n * @lends module:ProcessIsoCurve#\n */\nProcessIsoCurve.prototype = Object.create(CommonService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/*\n * Constructeur (alias)\n */\nProcessIsoCurve.prototype.constructor = ProcessIsoCurve;\n\n/**\n * Création de la requête (overwrite)\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nProcessIsoCurve.prototype.buildRequest = function (error, success) {\n    try {\n        var oIsoCurve = new ProcessIsoCurveRequest(this.options);\n        if (!oIsoCurve.processRequestString()) {\n            throw new Error(_.getMessage(\"SERVICE_REQUEST_BUILD\"));\n        }\n\n        this.request = oIsoCurve.requestString;\n    } catch (e) {\n        error.call(this, new ErrorService(e.message));\n        return;\n    }\n\n    success.call(this, this.request);\n};\n\n/**\n * (overwrite)\n * Analyse de la reponse\n *\n * @param {Function} onError   - callback des erreurs\n * @param {Function} onSuccess - callback de succès de l'analyse de la réponse\n */\nProcessIsoCurve.prototype.analyzeResponse = function (onError, onSuccess) {\n    if (this.response) {\n        var options = {\n            response : this.response,\n            outputFormat : this.options.outputFormat,\n            rawResponse : this.options.rawResponse,\n            onSuccess : onSuccess,\n            onError : onError,\n            scope : this\n        };\n\n        ProcessIsoCurveResponseFactory.build(options);\n    } else {\n        onError.call(this, new ErrorService(_.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n    }\n};\n\nexport default ProcessIsoCurve;\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"point|circle|bbox\" }] */\n\n/**\n* Geoportal web services invocation namespace.\n*\n* @module Services\n* @alias Gp.Services\n*/\nimport Alti from \"./Alti/Alti\";\nimport AutoConf from \"./AutoConf/AutoConf\";\nimport Geocode from \"./Geocode/Geocode\";\nimport ReverseGeocode from \"./Geocode/ReverseGeocode\";\nimport AutoComplete from \"./AutoComplete/AutoComplete\";\nimport Route from \"./Route/Route\";\nimport ProcessIsoCurve from \"./ProcessIsoCurve/ProcessIsoCurve\";\n\nvar Services = {\n    /**\n     * Access to Geoportal resources metadata availables with one ore several keys, using [Auto-configuration service]{@link https://wxs.ign.fr/APIKEY/autoconf} of the Geoportal platform.\n     *\n     * @method getConfig\n     * @param {Object} options - Options for function call.\n     * @param {String} options.apiKey - Access key to Geoportal platform, obtained [here]{@link http://professionnels.ign.fr/ign/contrats}.\n     * @param {Function} options.onSuccess - Callback function for getting successful service response. Takes a {@link Gp.Services.GetConfigResponse} object as a parameter except if \"rawResponse\" parameter is set to true : a String will be returned.\n     * @param {Function} [options.onFailure] - Callback function for handling unsuccessful service responses (timeOut, missing rights, ...). Takes a {@link Gp.Error} object as parameter.\n     * @param {Number} [options.timeOut=0] - Number of milliseconds above which a timeOut response will be returned with onFailure callback (see above). Default value is 0 which means timeOut will not be handled.\n     * @param {String} [options.serverUrl=http (s)://wxs.ign.fr/APIKEY/autoconf] - Web service URL. If used, options.apiKey parameter is ignored. Only use if you know what you're doing.\n     * @param {Boolean} [options.ssl = true] - Use of HTTPS or HTTP protocol to request the services. HTTPS by default (ssl=true).\n     * @param {String} [options.protocol=JSONP] - Protocol used to handle dialog with web service. Possible values are 'JSONP' ({@link https://en.wikipedia.org/wiki/JSONP}) and 'XHR' ({@link https://en.wikipedia.org/wiki/XMLHttpRequest}). Only XHR protocol is supported in a NodeJS environment. Only use if you know what you're doing.\n     * @param {String} [options.proxyURL] - Proxy URL to use when requesting an underlying web service. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you're doing.\n     * @param {String} [options.callbackSuffix] - Callback function name suffix to use in case of a JSONP protocol use (see above), to set your own suffix instead of auto-increment. Ignored when options.protocol is set to 'XHR' value. Only use if you know what you're doing.\n     * @param {String} [options.httpMethod=GET] - HTTP method to use when requesting underlying web service in case of a XHR protocol use (see above). Possible values are 'GET' and 'POST'. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {String} [options.contentType=\"application/xml\"] - Content-Type to use when requesting underlying web service in case of a XHR protocol use (see above) and if method HTTP is POST. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {Boolean} [options.rawResponse=false] - Setting this parameter to true implies you want to handle the service response by yourself : it will be returned as an unparsed String in onSuccess callback parameter. Only use if you know what you are doing.\n     * @param {Function} [options.onBeforeParse] - Callback function for handling service response before parsing (as an unparsed String). Takes a String as a parameter (the raw service response). Returns a String that will be parsed as the service response. Only use if you know what you are doing.\n     */\n    getConfig : function (options) {\n        var autoconfService = new AutoConf(options);\n        autoconfService.call();\n    },\n\n    /**\n     * Getting elevations in or along of one or several points on french territories using the [elevation services of the Geoportal Platform]{@link https://geoservices.ign.fr/documentation/geoservices/alti.html}.<br/>\n     * Two use cases are availables :<br/>\n     * 1. getting elevations of the given points : don't use the options.sampling parameter ;<br/>\n     * 2. getting a regular set of elevations along the given points : use the options.sampling parameter.\n     *\n     * @method getAltitude\n     * @param {Object} options - Options for function call.\n     * @param {String} options.apiKey - Access key to Geoportal platform, obtained [here]{@link http://professionnels.ign.fr/ign/contrats}.\n     * @param {Array.<Object>} options.positions - Array of positions ({lon:float, lat:float}) expressed in CRS:84 coordinates system, where to get elevations. 50 positions maximum may be given. 2 positions minimum are required if you use the options.sampling parameter.\n     * @param {Number} [options.sampling] - Number of points to use (between 2 and 5000) in order to compute an elevation path. The points given with the options.positions parameter are used to fix the planimetric path along which the elevations will be computed.<br/>\n     * If not used, only elevations of these positions will be returned.\n     * @param {Boolean} [options.zonly=false] - Set this parameter to true if you only want to have elevations returned without corresponding coordinates.\n     * @param {Function} options.onSuccess - Callback function for getting successful service response. Takes a {@link Gp.Services.AltiResponse} object as a parameter, except if \"rawResponse\" is set to true.\n     * @param {Function} [options.onFailure] - Callback function for handling unsuccessful service responses (timeOut, missing rights, ...). Takes a {@link Gp.Error} object as parameter.\n     * @param {Number} [options.timeOut=0] - Number of milliseconds above which a timeOut response will be returned with onFailure callback (see above). Default value is 0 which means timeOut will not be handled.\n     * @param {String} [options.serverUrl=http (s)://wxs.ign.fr/APIKEY/alti/rest/elevation.json] - Web service URL. If used, options.apiKey parameter is ignored. Only use if you know what you're doing.\n     * @param {Boolean} [options.ssl = true] - Use of HTTPS or HTTP protocol to request the services. HTTPS by default (ssl=true).\n     * @param {String} [options.protocol=XHR] - Protocol used to handle dialog with web service. Possible values are 'JSONP' ({@link https://en.wikipedia.org/wiki/JSONP}) and 'XHR' ({@link https://en.wikipedia.org/wiki/XMLHttpRequest}). Only XHR protocol is supported in a NodeJS environment. Only use if you know what you're doing.\n     * @param {String} [options.proxyURL] - Proxy URL to use when requesting underlying web service. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you're doing.\n     * @param {String} [options.callbackSuffix] - Callback function name suffix to use in case of a JSONP protocol use (see above), to set your own suffix instead of auto-increment. Ignored when options.protocol is set to 'XHR' value. Only use if you know what you're doing.\n     * @param {String} [options.httpMethod=GET] - HTTP method to use when requesting underlying web service in case of a XHR protocol use (see above). Possible values are 'GET' and 'POST'. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {String} [options.contentType=\"application/xml\"] - Content-Type to use when requesting underlying web service in case of a XHR protocol use (see above) and if method HTTP is POST. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {Boolean} [options.rawResponse=false] - Setting this parameter to true implies you want to handle the service response by yourself : it will be returned as an unparsed String in onSuccess callback parameter. Only use if you know what you are doing.\n     * @param {Function} [options.onBeforeParse] - Callback function for handling service response before parsing (as an unparsed String). Takes a String as a parameter (the raw service response). Returns a String that will be parsed as the service response. Only use if you know what you are doing.\n     * @param {String} [options.api='REST'] - What API to use for interacting with underlying web service : 'REST' or 'WPS'. Only use if you know what you are doing.\n     * @param {String} [options.outputFormat='xml'] - Output format for underlying web service response : 'xml' or 'json'. Only use if you know what you are doing.\n     */\n    getAltitude : function (options) {\n        var altiService = new Alti(options);\n        altiService.call();\n    },\n    /**\n     * Getting positon of a geographic identifier (places names, address, cadastral parcel, other...) using the [geocoding web service of the Geoportal Platform]{@link https://geoservices.ign.fr/documentation/geoservices/geocodage.html}.\n     *\n     * @example\n     * Gp.Services.geocode ({\n     *     apiKey : \"jhyvi0fgmnuxvfv0zjzorvdn\",\n     *     location : \"73 avenue de Paris, Saint-Mandé\",\n     *     // traitement des resultats\n     *     onSuccess  : function (result) {\n     *         console.log(\"found (x:\"+result.position.x+\", y:\"+result.position.y+\")\") ;\n     *     }\n     * }) ;\n     *\n     *\n     * @method geocode\n     * @param {Object} options - Options for function call.\n     * @param {String} options.apiKey - Access key to Geoportal platform, obtained [here]{@link http://professionnels.ign.fr/ign/contrats}.\n     * @param {String|Object} options.location - Geographic identifier to locate. May be provided as a single String or a structured Object for an address search. In this last case, the following properties are availaibles.\n     *      @param {Number} [options.location.number] - Street number.\n     *      @param {String} [options.location.street] - Street name.\n     *      @param {String} [options.location.city] - City name.\n     *      @param {Number} [options.location.postalCode] - Postal Code\n     * @param {Object} [options.filterOptions] - Additional filters to apply to search. The following properties may be given.\n     *      @param {Gp.BBox} [options.filterOptions.bbox] - Bounding box where to perform the search. Properties expressed in options.srs coordinates system.\n     *      @param {Array.<String>} [options.filterOptions.type] - Geographical identifier types to search. Values currently availables are : \"PositionOfInterest\" for place names, \"StreetAddress\" for address search, \"CadastralParcel\" for Cadastral parcels search. Default is \"StreetAddress\".\n     *\n     *      @param {String} [options.filterOptions.[prop]] - Additionnal properties to filter search. Properties depends on options.filterOptions.type, and values type should be \"String\".\n     *      <br/><br/>\n     *      Common Properties availables for all search types :<br/>\n     *      \"municipality\", \"insee\", \"department\".\n     *      <br/><br/>\n     *      Properties availables for address search :<br/>\n     *      \"quality\", \"ID\", \"ID_TR\" and \"territory\".\n     *      <br/><br/>\n     *      Properties availables for place names search :<br/>\n     *      \"importance\", \"nature\" and \"territory\".\n     *      <br/><br/>\n     *      Properties availables for cadastral parcels search :<br/>\n     *      \"sheet\", \"section\", and \"absorbedcity\".\n     * @param {Number} [options.maximumResponses = 25] - Maximum number of responses. Default underlying service value applies (25) if not provided.\n     * @param {Boolean} [options.returnFreeForm = false] - Set this parameter to true if you wish to have an address returned in a single String (unstructured). If unset, default underlying service value (false) applies.\n     * @param {String} [options.srs = EPSG:4326] - Coordinates System used to expres coordinates for parameters and responses. Default underlying service value (EPSG:4326) applies.\n     * @param {Function} options.onSuccess - Callback function for getting successful service response. Takes a {@link Gp.Services.GeocodeResponse} object as a parameter except if \"rawResponse\" is set to true.\n     * @param {Function} [options.onFailure] - Callback function for handling unsuccessful service responses (timeOut, missing rights, ...). Takes a {@link Gp.Error} object as parameter.\n     * @param {Number} [options.timeOut=0] - Number of milliseconds above which a timeOut response will be returned with onFailure callback (see above). Default value is 0 which means timeOut will not be handled.\n     * @param {String} [options.serverUrl=http (s)://wxs.ign.fr/APIKEY/geoportail/ols] - Web service URL. If used, options.apiKey parameter is ignored. Only use if you know what you're doing.\n     * @param {Boolean} [options.ssl = true] - Use of HTTPS or HTTP protocol to request the services. HTTPS by default (ssl=true).\n     * @param {String} [options.protocol=XHR] - Protocol used to handle dialog with web service. Possible values are 'JSONP' ({@link https://en.wikipedia.org/wiki/JSONP}) and 'XHR' ({@link https://en.wikipedia.org/wiki/XMLHttpRequest}). Only XHR protocol is supported in a NodeJS environment. Only use if you know what you're doing.\n     * @param {String} [options.proxyURL] - Proxy URL to use when requesting underlying web service. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you're doing.\n     * @param {String} [options.callbackSuffix] - Callback function name suffix to use in case of a JSONP protocol use (see above), to set your own suffix instead of auto-increment. Ignored when options.protocol is set to 'XHR' value. Only use if you know what you're doing.\n     * @param {String} [options.httpMethod=GET] - HTTP method to use when requesting underlying web service in case of a XHR protocol use (see above). Possible values are 'GET' and 'POST'. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {String} [options.contentType=\"application/xml\"] - Content-Type to use when requesting underlying web service in case of a XHR protocol use (see above) and if method HTTP is POST. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {Boolean} [options.rawResponse=false] - Setting this parameter to true implies you want to handle the service response by yourself : it will be returned as an unparsed String in onSuccess callback parameter. Only use if you know what you are doing.\n     * @param {Function} [options.onBeforeParse] - Callback function for handling service response before parsing (as an unparsed String). Takes a String as a parameter (the raw service response). Returns a String that will be parsed as the service response. Only use if you know what you are doing.\n     */\n    geocode : function (options) {\n        var geocodeService = new Geocode(options);\n        geocodeService.call();\n    },\n    /**\n     * Retrieving geographical identifiers (place names, address, cadastral parcels, ...) near a given position, using the [reverse geocoding web service of the Geoportal Platform]{@link https://geoservices.ign.fr/documentation/geoservices/geocodage-inverse.html}.\n     *\n     * @method reverseGeocode\n     * @param {Object} options - Options for function call.\n     * @param {String} options.apiKey - Access key to Geoportal platform, obtained [here]{@link http://professionnels.ign.fr/ign/contrats}.\n     * @param {Gp.Point} options.position - Reference position where to search geographical identifiers. Its coordinates are expressed in the coordinates system given with options.srs parameter. (default is CRS:84, that means position.x is the longitude and position.y the latitude)\n     * @param {Object} [options.filterOptions] - Additional filters to apply to search. The following properties may be given.\n     *      @param {Array.<String>} [options.filterOptions.type] - Geographical identifier types to search. Values currently availables are : \"PositionOfInterest\" for place names, \"StreetAddress\" for address search, \"CadastralParcel\" for Cadastral parcels search. Default is \"StreetAddress\".\n     *      @param {Gp.BBox} [options.filterOptions.bbox] - Bounding box where to perform the search. Expressed in options.srs coordinates system.\n     *      @param {Gp.Circle} [options.filterOptions.circle] - Circle where to perform the search. Expressed in options.srs coordinates system.\n     * @param {Array.<Gp.Point>} [options.filterOptions.polygon] - Polygon where to perform the search. Expressed in options.srs coordinates system.\n     * @param {Number} [options.maximumResponses] - Maximum number of responses. Default underlying service value applies (25) if not provided.\n     * @param {Boolean} [options.returnFreeForm = false] - Set this parameter to true if you wish to have an address returned in a single String (unstructured). If unset, default underlying service value (false) applies.\n     * @param {String} [options.srs = CRS:84] - Coordinates System used to express coordinates for parameters and responses. Only WGS 84 geographical positioning is supported. Therefore, two values are allowed : \"CRS:84\" (position.x is the longitude and position.y the latitude) and \"EPSG:4326\" (position.x is the latitude and position.y the longitude) . Default is CRS:84.\n     * @param {Function} options.onSuccess - Callback function for getting successful service response. Takes a {@link Gp.Services.GeocodeResponse} object as a parameter except if \"rawResponse\" is set to true.\n     * @param {Function} [options.onFailure] - Callback function for handling unsuccessful service responses (timeOut, missing rights, ...). Takes a {@link Gp.Error} object as parameter.\n     * @param {Number} [options.timeOut=0] - Number of milliseconds above which a timeOut response will be returned with onFailure callback (see above). Default value is 0 which means timeOut will not be handled.\n     * @param {String} [options.serverUrl=http (s)://wxs.ign.fr/APIKEY/geoportail/ols] - Web service URL. If used, options.apiKey parameter is ignored. Only use if you know what you're doing.\n     * @param {Boolean} [options.ssl = true] - Use of HTTPS or HTTP protocol to request the services. HTTPS by default (ssl=true).\n     * @param {String} [options.protocol=XHR] - Protocol used to handle dialog with web service. Possible values are 'JSONP' ({@link https://en.wikipedia.org/wiki/JSONP}) and 'XHR' ({@link https://en.wikipedia.org/wiki/XMLHttpRequest}). Only XHR protocol is supported in a NodeJS environment. Only use if you know what you're doing.\n     * @param {String} [options.proxyURL] - Proxy URL to use when requesting underlying web service. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you're doing.\n     * @param {String} [options.callbackSuffix] - Callback function name suffix to use in case of a JSONP protocol use (see above), to set your own suffix instead of auto-increment. Ignored when options.protocol is set to 'XHR' value. Only use if you know what you're doing.\n     * @param {String} [options.httpMethod=GET] - HTTP method to use when requesting underlying web service in case of a XHR protocol use (see above). Possible values are 'GET' and 'POST'. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {String} [options.contentType=\"application/xml\"] - Content-Type to use when requesting underlying web service in case of a XHR protocol use (see above) and if method HTTP is POST. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {Boolean} [options.rawResponse=false] - Setting this parameter to true implies you want to handle the service response by yourself : it will be returned as an unparsed String in onSuccess callback parameter. Only use if you know what you are doing.\n     * @param {Function} [options.onBeforeParse] - Callback function for handling service response before parsing (as an unparsed String). Takes a String as a parameter (the raw service response). Returns a String that will be parsed as the service response. Only use if you know what you are doing.\n     */\n    reverseGeocode : function (options) {\n        var reverseGeocodeService = new ReverseGeocode(options);\n        reverseGeocodeService.call();\n    },\n    /**\n     * Getting suggestions of probable places names or address based on uncomplete texts, using the [autocompletion service of the Geoportal Platform]{@link https://geoservices.ign.fr/documentation/geoservices/autocompletion.html}\n     *\n     * @method autoComplete\n     * @param {Object} options - Options for function call.\n     * @param {String} options.apiKey - Access key to Geoportal platform, obtained [here]{@link http://professionnels.ign.fr/ign/contrats}.\n     * @param {String} options.text - Text input to complete.\n     * @param {Array.<String>} [options.filterOptions.type = \"StreetAddress\"] - Suggestion types to provide : address (\"StreetAddress\") and/or place name (\"PositionOfInterest\").\n     * @param {Array.<String>} [options.filterOptions.territory] - Places where to limit the search of suggestions : \"METROPOLE\" (Corsica and metropolitan France), \"DOMTOM\" (French overseas departments and territories), or an INSEE code of a department. No limitation by default. For instance : ['METROPOLE', '31']\n     * @param {Number} [options.maximumResponses = 10] - Maximum number of responses.\n     * @param {Function} options.onSuccess - Callback function for getting successful service response. Takes a {@link Gp.Services.AutoCompleteResponse} object as a parameter except if \"rawResponse\" is set to true.\n     * @param {Function} [options.onFailure] - Callback function for handling unsuccessful service responses (timeOut, missing rights, ...). Takes a {@link Gp.Error} object as parameter.\n     * @param {Number} [options.timeOut=0] - Number of milliseconds above which a timeOut response will be returned with onFailure callback (see above). Default value is 0 which means timeOut will not be handled.\n     * @param {String} [options.serverUrl=http (s)://wxs.ign.fr/APIKEY/ols/apis/completion] - Web service URL. If used, options.apiKey parameter is ignored. Only use if you know what you're doing.\n     * @param {Boolean} [options.ssl = true] - Use of HTTPS or HTTP protocol to request the services. HTTPS by default (ssl=true).\n     * @param {String} [options.protocol=XHR] - Protocol used to handle dialog with web service. Possible values are 'JSONP' ({@link https://en.wikipedia.org/wiki/JSONP}) and 'XHR' ({@link https://en.wikipedia.org/wiki/XMLHttpRequest}). Only XHR protocol is supported in a NodeJS environment. Only use if you know what you're doing.\n     * @param {String} [options.proxyURL] - Proxy URL to use when requesting underlying web service. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you're doing.\n     * @param {String} [options.callbackSuffix] - Callback function name suffix to use in case of a JSONP protocol use (see above), to set your own suffix instead of auto-increment. Ignored when options.protocol is set to 'XHR' value. Only use if you know what you're doing.\n     * @param {String} [options.httpMethod=GET] - HTTP method to use when requesting underlying web service in case of a XHR protocol use (see above). Possible values are 'GET' and 'POST'. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {String} [options.contentType=\"application/xml\"] - Content-Type to use when requesting underlying web service in case of a XHR protocol use (see above) and if method HTTP is POST. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {Boolean} [options.rawResponse=false] - Setting this parameter to true implies you want to handle the service response by yourself : it will be returned as an unparsed String in onSuccess callback parameter. Only use if you know what you are doing.\n     * @param {Function} [options.onBeforeParse] - Callback function for handling service response before parsing (as an unparsed String). Takes a String as a parameter (the raw service response). Returns a String that will be parsed as the service response. Only use if you know what you are doing.\n     */\n    autoComplete : function (options) {\n        var autoCompleteService = new AutoComplete(options);\n        autoCompleteService.call();\n    },\n    /**\n     * Getting a route from one point to another using the [route service of the Geoportal Platform]{@link https://geoservices.ign.fr/documentation/geoservices/itineraires.html}.\n     *\n     * @method route\n     * @param {Object} options - Options for function call.\n     * @param {String} options.apiKey - Access key to Geoportal platform, obtained [here]{@link http://professionnels.ign.fr/ign/contrats}.\n     * @param {String} [options.routePreference = \"fastest\"] - Indicates the way to compute the route : \"fastest\" (time optimisation) or \"shortest\" (distance optimisation).\n     * @param {Gp.Point} options.startPoint - Start point of the route. Expressed in CRS:84 coordinates system (startPoint.x corresponds to longitude, startPoint.y corresponds to latitude).\n     * @param {Gp.Point} options.endPoint - End point of the route. Expressed in CRS:84 coordinates system (endPoint.x corresponds to longitude, endPoint.y corresponds to latitude).\n     * @param {Array.<Gp.Point>} [options.viaPoints] - Ordered via Points of the route. Expressed in CRS:84 coordinates system (viaPoints[i].x corresponds to longitude, viaPoints[i].y corresponds to latitude).\n     * @param {String} [options.graph = \"Voiture\"] - User profile to use to compute the route : \"Voiture\" (using a vehicule) or \"Pieton\" (pedestrian). Has an influence on the kind of roads the route may use and the average speed.\n     * @param {Array.<String>} [options.exclusions] - Indicates if route has to avoid some features (\"toll\", \"bridge\" or \"tunnel\").\n     * @param {Boolean} [options.geometryInInstructions = false] - Indicates if route geometry has to be also returned with route instructions.\n     * @param {Boolean} [options.provideBoundingBox = true] - Indicates if route instructions has to be localised with a BBOX in the response.\n     * @param {String} [options.distanceUnit = \"km\"] - The unit used to provide distances in the response (\"m\" or \"km\").\n     * @param {Function} options.onSuccess - Callback function for getting successful service response. Takes a {@link Gp.Services.RouteResponse} object as a parameter except if \"rawResponse\" is set to true.\n     * @param {Function} [options.onFailure] - Callback function for handling unsuccessful service responses (timeOut, missing rights, ...). Takes a {@link Gp.Error} object as parameter.\n     * @param {Number} [options.timeOut=0] - Number of milliseconds above which a timeOut response will be returned with onFailure callback (see above). Default value is 0 which means timeOut will not be handled.\n     * @param {String} [options.outputFormat='json'] - Output format (\"json\" or \"xml\") to use for underlying webService. Only use if you know what you are doing.\n     * @param {String} [options.serverUrl=http (s)://wxs.ign.fr/APIKEY/itineraire/rest/route.json] - Web service URL. If used, options.apiKey parameter is ignored. Only use if you know what you're doing.\n     * @param {Boolean} [options.ssl = true] - Use of HTTPS or HTTP protocol to request the services. HTTPS by default (ssl=true).\n     * @param {String} [options.protocol=XHR] - Protocol used to handle dialog with web service. Possible values are 'JSONP' ({@link https://en.wikipedia.org/wiki/JSONP}) and 'XHR' ({@link https://en.wikipedia.org/wiki/XMLHttpRequest}). Only XHR protocol is supported in a NodeJS environment. Only use if you know what you're doing.\n     * @param {String} [options.proxyURL] - Proxy URL to use when requesting underlying web service. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you're doing.\n     * @param {String} [options.callbackSuffix] - Callback function name suffix to use in case of a JSONP protocol use (see above), to set your own suffix instead of auto-increment. Ignored when options.protocol is set to 'XHR' value. Only use if you know what you're doing.\n     * @param {String} [options.httpMethod=GET] - HTTP method to use when requesting underlying web service in case of a XHR protocol use (see above). Possible values are 'GET' and 'POST'. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {String} [options.contentType=\"application/xml\"] - Content-Type to use when requesting underlying web service in case of a XHR protocol use (see above) and if method HTTP is POST. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {Boolean} [options.rawResponse=false] - Setting this parameter to true implies you want to handle the service response by yourself : it will be returned as an unparsed String in onSuccess callback parameter. Only use if you know what you are doing.\n     * @param {Function} [options.onBeforeParse] - Callback function for handling service response before parsing (as an unparsed String). Takes a String as a parameter (the raw service response). Returns a String that will be parsed as the service response. Only use if you know what you are doing.\n     */\n    route : function (options) {\n        var routeService = new Route(options);\n        routeService.call();\n    },\n    /**\n     * Computing a set of places (curve) reachable from a given point (or from where to start to reach a given point) within a time or distance constraint using the [isochrone service of the Geoportal Platform]{@link https://geoservices.ign.fr/documentation/geoservices/isochrones.html}.\n     *\n     * @method isoCurve\n     * @param {Object} options - Options for function call.\n     * @param {String} options.apiKey - Access key to Geoportal platform, obtained [here]{@link http://professionnels.ign.fr/ign/contrats}.\n     * @param {Gp.Point} options.position - Start or Arrival (options.reverse===true) Point for the computing. Expressed in CRS:84 coordinates system (position.x corresponds to longitude, position.y corresponds to latitude).\n     * @param {String} [options.graph = \"Voiture\"] - User profile to use to compute the isoCurve : \"Voiture\" (using a vehicule) or \"Pieton\" (pedestrian). Has an influence on the kind of roads to use and the average speed.\n     * @param {Array.<String>} [options.exclusions] - Indicates if route has to avoid some features (\"toll\", \"bridge\" or \"tunnel\").\n     * @param {String} [options.method = \"time\"] - Computing method to use : \"time\" (using a duration as a constraint) or \"distance\" (using a distance as a constraint).\n     * @param {Float} options.time - Maximum duration (expressed in seconds) to use when options.method is set to \"time\".\n     * @param {Float} options.distance - Maximum distance (expressed in meters) to use when options.method is set to \"distance\".\n     * @param {Boolean} [options.reverse = false] - Set this parameter to true if you want options.position to be the destination (instead of departure) for the computing.\n     * @param {Boolean} [options.smoothing = false] - Set this parameter to true if you want the resulting geometry to be smoothed.\n     * @param {Boolean} [options.holes = false] - Set this parameter to true if you want the resulting geometry (polygon) to have holes if pertinent.\n     * @param {Function} options.onSuccess - Callback function for getting successful service response. Takes a {@link Gp.Services.IsoCurveResponse} object as a parameter except if \"rawResponse\" is set to true.\n     * @param {Function} [options.onFailure] - Callback function for handling unsuccessful service responses (timeOut, missing rights, ...). Takes a {@link Gp.Error} object as parameter.\n     * @param {Number} [options.timeOut=0] - Number of milliseconds above which a timeOut response will be returned with onFailure callback (see above). Default value is 0 which means timeOut will not be handled.\n     * @param {String} [options.outputFormat='json'] - Output format (\"json\" or \"xml\") to use for underlying webService. Only use if you know what you are doing.\n     * @param {String} [options.serverUrl=http (s)://wxs.ign.fr/APIKEY/isochrone/isochrone.json] - Web service URL. If used, options.apiKey parameter is ignored. Only use if you know what you're doing.\n     * @param {Boolean} [options.ssl = true] - Use of HTTPS or HTTP protocol to request the services. HTTPS by default (ssl=true).\n     * @param {String} [options.protocol=XHR] - Protocol used to handle dialog with web service. Possible values are 'JSONP' ({@link https://en.wikipedia.org/wiki/JSONP}) and 'XHR' ({@link https://en.wikipedia.org/wiki/XMLHttpRequest}). Only XHR protocol is supported in a NodeJS environment. Only use if you know what you're doing.\n     * @param {String} [options.proxyURL] - Proxy URL to use when requesting underlying web service. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you're doing.\n     * @param {String} [options.callbackSuffix] - Callback function name suffix to use in case of a JSONP protocol use (see above), to set your own suffix instead of auto-increment. Ignored when options.protocol is set to 'XHR' value. Only use if you know what you're doing.\n     * @param {String} [options.httpMethod=GET] - HTTP method to use when requesting underlying web service in case of a XHR protocol use (see above). Possible values are 'GET' and 'POST'. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {String} [options.contentType=\"application/xml\"] - Content-Type to use when requesting underlying web service in case of a XHR protocol use (see above) and if method HTTP is POST. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {Boolean} [options.rawResponse=false] - Setting this parameter to true implies you want to handle the service response by yourself : it will be returned as an unparsed String in onSuccess callback parameter. Only use if you know what you are doing.\n     * @param {Function} [options.onBeforeParse] - Callback function for handling service response before parsing (as an unparsed String). Takes a String as a parameter (the raw service response). Returns a String that will be parsed as the service response. Only use if you know what you are doing.\n     */\n    isoCurve : function (options) {\n        var processIsoCurveService = new ProcessIsoCurve(options);\n        processIsoCurveService.call();\n    }\n};\n\n/**\n * Point object.\n *\n * @namespace\n * @alias Gp.Point\n *\n * @property {Float} x - Point abscissa\n * @property {Float} y - Point ordinate\n */\nvar point = {};\n\n/**\n * Circle object.\n *\n * @namespace\n * @alias Gp.Circle\n *\n * @property {Float} x - Circle center abscissa.\n * @property {Float} y - Circle center ordinate.\n * @property {Float} radius - Circle radius.\n */\nvar circle = {};\n\n/**\n * Bounding box object, expressed with four coordinates.\n *\n * @namespace\n * @alias Gp.BBox\n *\n * @property {Float} left - minimum abscissa\n * @property {Float} right - maximum abscissa\n * @property {Float} bottom - minimum ordinate\n * @property {Float} top - maximum ordinate\n */\nvar bbox = {};\n\nexport default Services;\n","/**\n* Global variable Gp.\n*\n* @module Gp\n* @alias Gp\n* @description\n*\n* This is the global variable that is exposed in the browser environment.\n* Content is composed of constructor, functions and properties...\n*\n* > {@link Gp.Error Error()}\n*     - .TYPE_SRVERR : \"SERVICE_ERROR\"\n*     - .TYPE_UNKERR : \"UNKNOWN_ERROR\"\n*     - .TYPE_USEERR : \"USAGE_ERROR\"\n*\n* > {@link module:Helper Helper}\n*     - .indent()\n*     - .normalyzeParameters()\n*     - .normalyzeUrl()\n*\n* > {@link module:XHR Protocols.XHR}\n*     - .call()\n*\n* > {@link module:Services Services (objects)}\n*     - .Alti\n*         - {@link Gp.Services.Alti.Elevation .Elevation()}\n*     - {@link Gp.Services.AltiResponse .AltiResponse()}\n*     - .AutoComplete\n*         - {@link Gp.Services.AutoComplete.SuggestedLocation .SuggestedLocation()}\n*     - {@link Gp.Services.AutoCompleteResponse .AutoCompleteResponse()}\n*     - {@link Gp.Services.Config .Config()}\n*     - {@link Gp.Services.DefaultUrl .DefaultUrl()}\n*     - .Geocode\n*         - {@link Gp.Services.Geocode.GeocodedLocation .GeocodedLocation()}\n*         - {@link Gp.Services.Geocode.ReverseGeocodedLocation .ReverseGeocodedLocation()}\n*         - {@link Gp.Services.Geocode.DirectGeocodedLocation .DirectGeocodedLocation()}\n*     - {@link Gp.Services.GeocodeResponse .GeocodeResponse()}\n*     - {@link Gp.Services.GetConfigResponse .GetConfigResponse()}\n*     - {@link Gp.Services.IsoCurveResponse .IsoCurveResponse()}\n*     - .Route\n*         - {@link Gp.Services.Route.RouteInstruction .RouteInstruction()}\n*     - {@link Gp.Services.RouteResponse .RouteResponse()}\n*\n* > Services (factory)\n*     - {@link module:Services~autoComplete .autoComplete()}\n*     - {@link module:Services~geocode .geocode()}\n*     - {@link module:Services~getAltitude .getAltitude()}\n*     - {@link module:Services~getConfig .getConfig()}\n*     - {@link module:Services~isoCurve .isoCurve()}\n*     - {@link module:Services~reverseGeocode .reverseGeocode()}\n*     - {@link module:Services~route .route()}\n*\n* > servicesDate : \"YYYY-MM-DD\"\n*\n* > servicesVersion : \"X.X.X\"\n*\n*/\n\nimport Services from \"./Services/Services\";\nimport DefaultUrl from \"./Services/DefaultUrlService\";\nimport AltiResponse from \"./Services/Alti/Response/model/AltiResponse\";\nimport Elevation from \"./Services/Alti/Response/model/Elevation\";\nimport AutoCompleteResponse from \"./Services/AutoComplete/Response/model/AutoCompleteResponse\";\nimport SuggestedLocation from \"./Services/AutoComplete/Response/model/SuggestedLocation\";\nimport GetConfigResponse from \"./Services/AutoConf/Response/model/AutoConfResponse\";\nimport Constraint from \"./Services/AutoConf/Response/model/Constraint\";\nimport Format from \"./Services/AutoConf/Response/model/Format\";\nimport Layer from \"./Services/AutoConf/Response/model/Layer\";\nimport Legend from \"./Services/AutoConf/Response/model/Legend\";\nimport Metadata from \"./Services/AutoConf/Response/model/Metadata\";\nimport Originator from \"./Services/AutoConf/Response/model/Originator\";\nimport Service from \"./Services/AutoConf/Response/model/Service\";\nimport Style from \"./Services/AutoConf/Response/model/Style\";\nimport Territory from \"./Services/AutoConf/Response/model/Territory\";\nimport Thematic from \"./Services/AutoConf/Response/model/Thematic\";\nimport TM from \"./Services/AutoConf/Response/model/TileMatrix\";\nimport TMLimit from \"./Services/AutoConf/Response/model/TileMatrixLimit\";\nimport TMS from \"./Services/AutoConf/Response/model/TileMatrixSet\";\nimport GeocodeResponse from \"./Services/Geocode/Response/model/GeocodeResponse\";\nimport GeocodedLocation from \"./Services/Geocode/Response/model/GeocodedLocation\";\nimport DirectGeocodedLocation from \"./Services/Geocode/Response/model/DirectGeocodedLocation\";\nimport ReverseGeocodedLocation from \"./Services/Geocode/Response/model/ReverseGeocodedLocation\";\nimport IsoCurveResponse from \"./Services/ProcessIsoCurve/Response/model/ProcessIsoCurveResponse\";\nimport RouteResponse from \"./Services/Route/Response/model/RouteResponse\";\nimport RouteInstruction from \"./Services/Route/Response/model/RouteInstruction\";\nimport XHR from \"./Protocols/XHR\";\nimport Error from \"./Exceptions/ErrorService\";\nimport Helper from \"./Utils/Helper\";\n\nimport Pkg from \"../package.json\";\n\n/** Version */\nexport const servicesVersion = Pkg.version;\n/** Publication date */\nexport const servicesDate = Pkg.date;\n\n// on declare les ns dans root global\nvar Gp = {};\n\nGp.servicesVersion = servicesVersion;\nGp.servicesDate = servicesDate;\n\n// Export Protocols\nGp.Protocols = {};\nGp.Protocols.XHR = XHR;\n// Export services\nGp.Services = Services;\n// Export DefaultUrls\nGp.Services.DefaultUrl = DefaultUrl;\n// Export Alti\nGp.Services.AltiResponse = AltiResponse;\nGp.Services.Alti = {};\nGp.Services.Alti.Elevation = Elevation;\n// Export Autocomplete\nGp.Services.AutoCompleteResponse = AutoCompleteResponse;\nGp.Services.AutoComplete = {};\nGp.Services.AutoComplete.SuggestedLocation = SuggestedLocation;\n// Export Autoconf\nGp.Services.GetConfigResponse = GetConfigResponse;\nGp.Services.Config = {};\nGp.Services.Config.Constraint = Constraint;\nGp.Services.Config.Format = Format;\nGp.Services.Config.Layer = Layer;\nGp.Services.Config.Legend = Legend;\nGp.Services.Config.Metadata = Metadata;\nGp.Services.Config.Originator = Originator;\nGp.Services.Config.Service = Service;\nGp.Services.Config.Style = Style;\nGp.Services.Config.Territory = Territory;\nGp.Services.Config.Thematic = Thematic;\nGp.Services.Config.TileMatrix = TM;\nGp.Services.Config.TileMatrixLimit = TMLimit;\nGp.Services.Config.TileMatrixSet = TMS;\n// Export Geocode\nGp.Services.GeocodeResponse = GeocodeResponse;\nGp.Services.Geocode = {};\nGp.Services.Geocode.GeocodedLocation = GeocodedLocation;\nGp.Services.Geocode.DirectGeocodedLocation = DirectGeocodedLocation;\nGp.Services.Geocode.ReverseGeocodedLocation = ReverseGeocodedLocation;\n// Export IsoCurve\nGp.Services.IsoCurveResponse = IsoCurveResponse;\n// Export Route\nGp.Services.RouteResponse = RouteResponse;\nGp.Services.Route = {};\nGp.Services.Route.RouteInstruction = RouteInstruction;\n// Export Erreurs et Outils\nGp.Error = Error;\nGp.Helper = Helper;\n\nexport default Gp;\n","/*\n * DOM Level 2\n * Object DOMException\n * @see http://www.w3.org/TR/REC-DOM-Level-1/ecma-script-language-binding.html\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/ecma-script-binding.html\n */\n\nfunction copy(src,dest){\n\tfor(var p in src){\n\t\tdest[p] = src[p];\n\t}\n}\n/**\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*((?:.*\\{\\s*?[\\r\\n][\\s\\S]*?^})|\\S.*?(?=[;\\r\\n]));?\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*(\\S.*?(?=[;\\r\\n]));?\n */\nfunction _extends(Class,Super){\n\tvar pt = Class.prototype;\n\tif(Object.create){\n\t\tvar ppt = Object.create(Super.prototype)\n\t\tpt.__proto__ = ppt;\n\t}\n\tif(!(pt instanceof Super)){\n\t\tfunction t(){};\n\t\tt.prototype = Super.prototype;\n\t\tt = new t();\n\t\tcopy(pt,t);\n\t\tClass.prototype = pt = t;\n\t}\n\tif(pt.constructor != Class){\n\t\tif(typeof Class != 'function'){\n\t\t\tconsole.error(\"unknow Class:\"+Class)\n\t\t}\n\t\tpt.constructor = Class\n\t}\n}\nvar htmlns = 'http://www.w3.org/1999/xhtml' ;\n// Node Types\nvar NodeType = {}\nvar ELEMENT_NODE                = NodeType.ELEMENT_NODE                = 1;\nvar ATTRIBUTE_NODE              = NodeType.ATTRIBUTE_NODE              = 2;\nvar TEXT_NODE                   = NodeType.TEXT_NODE                   = 3;\nvar CDATA_SECTION_NODE          = NodeType.CDATA_SECTION_NODE          = 4;\nvar ENTITY_REFERENCE_NODE       = NodeType.ENTITY_REFERENCE_NODE       = 5;\nvar ENTITY_NODE                 = NodeType.ENTITY_NODE                 = 6;\nvar PROCESSING_INSTRUCTION_NODE = NodeType.PROCESSING_INSTRUCTION_NODE = 7;\nvar COMMENT_NODE                = NodeType.COMMENT_NODE                = 8;\nvar DOCUMENT_NODE               = NodeType.DOCUMENT_NODE               = 9;\nvar DOCUMENT_TYPE_NODE          = NodeType.DOCUMENT_TYPE_NODE          = 10;\nvar DOCUMENT_FRAGMENT_NODE      = NodeType.DOCUMENT_FRAGMENT_NODE      = 11;\nvar NOTATION_NODE               = NodeType.NOTATION_NODE               = 12;\n\n// ExceptionCode\nvar ExceptionCode = {}\nvar ExceptionMessage = {};\nvar INDEX_SIZE_ERR              = ExceptionCode.INDEX_SIZE_ERR              = ((ExceptionMessage[1]=\"Index size error\"),1);\nvar DOMSTRING_SIZE_ERR          = ExceptionCode.DOMSTRING_SIZE_ERR          = ((ExceptionMessage[2]=\"DOMString size error\"),2);\nvar HIERARCHY_REQUEST_ERR       = ExceptionCode.HIERARCHY_REQUEST_ERR       = ((ExceptionMessage[3]=\"Hierarchy request error\"),3);\nvar WRONG_DOCUMENT_ERR          = ExceptionCode.WRONG_DOCUMENT_ERR          = ((ExceptionMessage[4]=\"Wrong document\"),4);\nvar INVALID_CHARACTER_ERR       = ExceptionCode.INVALID_CHARACTER_ERR       = ((ExceptionMessage[5]=\"Invalid character\"),5);\nvar NO_DATA_ALLOWED_ERR         = ExceptionCode.NO_DATA_ALLOWED_ERR         = ((ExceptionMessage[6]=\"No data allowed\"),6);\nvar NO_MODIFICATION_ALLOWED_ERR = ExceptionCode.NO_MODIFICATION_ALLOWED_ERR = ((ExceptionMessage[7]=\"No modification allowed\"),7);\nvar NOT_FOUND_ERR               = ExceptionCode.NOT_FOUND_ERR               = ((ExceptionMessage[8]=\"Not found\"),8);\nvar NOT_SUPPORTED_ERR           = ExceptionCode.NOT_SUPPORTED_ERR           = ((ExceptionMessage[9]=\"Not supported\"),9);\nvar INUSE_ATTRIBUTE_ERR         = ExceptionCode.INUSE_ATTRIBUTE_ERR         = ((ExceptionMessage[10]=\"Attribute in use\"),10);\n//level2\nvar INVALID_STATE_ERR        \t= ExceptionCode.INVALID_STATE_ERR        \t= ((ExceptionMessage[11]=\"Invalid state\"),11);\nvar SYNTAX_ERR               \t= ExceptionCode.SYNTAX_ERR               \t= ((ExceptionMessage[12]=\"Syntax error\"),12);\nvar INVALID_MODIFICATION_ERR \t= ExceptionCode.INVALID_MODIFICATION_ERR \t= ((ExceptionMessage[13]=\"Invalid modification\"),13);\nvar NAMESPACE_ERR            \t= ExceptionCode.NAMESPACE_ERR           \t= ((ExceptionMessage[14]=\"Invalid namespace\"),14);\nvar INVALID_ACCESS_ERR       \t= ExceptionCode.INVALID_ACCESS_ERR      \t= ((ExceptionMessage[15]=\"Invalid access\"),15);\n\n\nfunction DOMException(code, message) {\n\tif(message instanceof Error){\n\t\tvar error = message;\n\t}else{\n\t\terror = this;\n\t\tError.call(this, ExceptionMessage[code]);\n\t\tthis.message = ExceptionMessage[code];\n\t\tif(Error.captureStackTrace) Error.captureStackTrace(this, DOMException);\n\t}\n\terror.code = code;\n\tif(message) this.message = this.message + \": \" + message;\n\treturn error;\n};\nDOMException.prototype = Error.prototype;\ncopy(ExceptionCode,DOMException)\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-536297177\n * The NodeList interface provides the abstraction of an ordered collection of nodes, without defining or constraining how this collection is implemented. NodeList objects in the DOM are live.\n * The items in the NodeList are accessible via an integral index, starting from 0.\n */\nfunction NodeList() {\n};\nNodeList.prototype = {\n\t/**\n\t * The number of nodes in the list. The range of valid child node indices is 0 to length-1 inclusive.\n\t * @standard level1\n\t */\n\tlength:0, \n\t/**\n\t * Returns the indexth item in the collection. If index is greater than or equal to the number of nodes in the list, this returns null.\n\t * @standard level1\n\t * @param index  unsigned long \n\t *   Index into the collection.\n\t * @return Node\n\t * \tThe node at the indexth position in the NodeList, or null if that is not a valid index. \n\t */\n\titem: function(index) {\n\t\treturn this[index] || null;\n\t},\n\ttoString:function(isHTML,nodeFilter){\n\t\tfor(var buf = [], i = 0;i<this.length;i++){\n\t\t\tserializeToString(this[i],buf,isHTML,nodeFilter);\n\t\t}\n\t\treturn buf.join('');\n\t}\n};\nfunction LiveNodeList(node,refresh){\n\tthis._node = node;\n\tthis._refresh = refresh\n\t_updateLiveList(this);\n}\nfunction _updateLiveList(list){\n\tvar inc = list._node._inc || list._node.ownerDocument._inc;\n\tif(list._inc != inc){\n\t\tvar ls = list._refresh(list._node);\n\t\t//console.log(ls.length)\n\t\t__set__(list,'length',ls.length);\n\t\tcopy(ls,list);\n\t\tlist._inc = inc;\n\t}\n}\nLiveNodeList.prototype.item = function(i){\n\t_updateLiveList(this);\n\treturn this[i];\n}\n\n_extends(LiveNodeList,NodeList);\n/**\n * \n * Objects implementing the NamedNodeMap interface are used to represent collections of nodes that can be accessed by name. Note that NamedNodeMap does not inherit from NodeList; NamedNodeMaps are not maintained in any particular order. Objects contained in an object implementing NamedNodeMap may also be accessed by an ordinal index, but this is simply to allow convenient enumeration of the contents of a NamedNodeMap, and does not imply that the DOM specifies an order to these Nodes.\n * NamedNodeMap objects in the DOM are live.\n * used for attributes or DocumentType entities \n */\nfunction NamedNodeMap() {\n};\n\nfunction _findNodeIndex(list,node){\n\tvar i = list.length;\n\twhile(i--){\n\t\tif(list[i] === node){return i}\n\t}\n}\n\nfunction _addNamedNode(el,list,newAttr,oldAttr){\n\tif(oldAttr){\n\t\tlist[_findNodeIndex(list,oldAttr)] = newAttr;\n\t}else{\n\t\tlist[list.length++] = newAttr;\n\t}\n\tif(el){\n\t\tnewAttr.ownerElement = el;\n\t\tvar doc = el.ownerDocument;\n\t\tif(doc){\n\t\t\toldAttr && _onRemoveAttribute(doc,el,oldAttr);\n\t\t\t_onAddAttribute(doc,el,newAttr);\n\t\t}\n\t}\n}\nfunction _removeNamedNode(el,list,attr){\n\t//console.log('remove attr:'+attr)\n\tvar i = _findNodeIndex(list,attr);\n\tif(i>=0){\n\t\tvar lastIndex = list.length-1\n\t\twhile(i<lastIndex){\n\t\t\tlist[i] = list[++i]\n\t\t}\n\t\tlist.length = lastIndex;\n\t\tif(el){\n\t\t\tvar doc = el.ownerDocument;\n\t\t\tif(doc){\n\t\t\t\t_onRemoveAttribute(doc,el,attr);\n\t\t\t\tattr.ownerElement = null;\n\t\t\t}\n\t\t}\n\t}else{\n\t\tthrow DOMException(NOT_FOUND_ERR,new Error(el.tagName+'@'+attr))\n\t}\n}\nNamedNodeMap.prototype = {\n\tlength:0,\n\titem:NodeList.prototype.item,\n\tgetNamedItem: function(key) {\n//\t\tif(key.indexOf(':')>0 || key == 'xmlns'){\n//\t\t\treturn null;\n//\t\t}\n\t\t//console.log()\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar attr = this[i];\n\t\t\t//console.log(attr.nodeName,key)\n\t\t\tif(attr.nodeName == key){\n\t\t\t\treturn attr;\n\t\t\t}\n\t\t}\n\t},\n\tsetNamedItem: function(attr) {\n\t\tvar el = attr.ownerElement;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\tvar oldAttr = this.getNamedItem(attr.nodeName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\t/* returns Node */\n\tsetNamedItemNS: function(attr) {// raises: WRONG_DOCUMENT_ERR,NO_MODIFICATION_ALLOWED_ERR,INUSE_ATTRIBUTE_ERR\n\t\tvar el = attr.ownerElement, oldAttr;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\toldAttr = this.getNamedItemNS(attr.namespaceURI,attr.localName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\n\t/* returns Node */\n\tremoveNamedItem: function(key) {\n\t\tvar attr = this.getNamedItem(key);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\t\t\n\t\t\n\t},// raises: NOT_FOUND_ERR,NO_MODIFICATION_ALLOWED_ERR\n\t\n\t//for level2\n\tremoveNamedItemNS:function(namespaceURI,localName){\n\t\tvar attr = this.getNamedItemNS(namespaceURI,localName);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\t},\n\tgetNamedItemNS: function(namespaceURI, localName) {\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar node = this[i];\n\t\t\tif(node.localName == localName && node.namespaceURI == namespaceURI){\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n};\n/**\n * @see http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-102161490\n */\nfunction DOMImplementation(/* Object */ features) {\n\tthis._features = {};\n\tif (features) {\n\t\tfor (var feature in features) {\n\t\t\t this._features = features[feature];\n\t\t}\n\t}\n};\n\nDOMImplementation.prototype = {\n\thasFeature: function(/* string */ feature, /* string */ version) {\n\t\tvar versions = this._features[feature.toLowerCase()];\n\t\tif (versions && (!version || version in versions)) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateDocument:function(namespaceURI,  qualifiedName, doctype){// raises:INVALID_CHARACTER_ERR,NAMESPACE_ERR,WRONG_DOCUMENT_ERR\n\t\tvar doc = new Document();\n\t\tdoc.implementation = this;\n\t\tdoc.childNodes = new NodeList();\n\t\tdoc.doctype = doctype;\n\t\tif(doctype){\n\t\t\tdoc.appendChild(doctype);\n\t\t}\n\t\tif(qualifiedName){\n\t\t\tvar root = doc.createElementNS(namespaceURI,qualifiedName);\n\t\t\tdoc.appendChild(root);\n\t\t}\n\t\treturn doc;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateDocumentType:function(qualifiedName, publicId, systemId){// raises:INVALID_CHARACTER_ERR,NAMESPACE_ERR\n\t\tvar node = new DocumentType();\n\t\tnode.name = qualifiedName;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.publicId = publicId;\n\t\tnode.systemId = systemId;\n\t\t// Introduced in DOM Level 2:\n\t\t//readonly attribute DOMString        internalSubset;\n\t\t\n\t\t//TODO:..\n\t\t//  readonly attribute NamedNodeMap     entities;\n\t\t//  readonly attribute NamedNodeMap     notations;\n\t\treturn node;\n\t}\n};\n\n\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-1950641247\n */\n\nfunction Node() {\n};\n\nNode.prototype = {\n\tfirstChild : null,\n\tlastChild : null,\n\tpreviousSibling : null,\n\tnextSibling : null,\n\tattributes : null,\n\tparentNode : null,\n\tchildNodes : null,\n\townerDocument : null,\n\tnodeValue : null,\n\tnamespaceURI : null,\n\tprefix : null,\n\tlocalName : null,\n\t// Modified in DOM Level 2:\n\tinsertBefore:function(newChild, refChild){//raises \n\t\treturn _insertBefore(this,newChild,refChild);\n\t},\n\treplaceChild:function(newChild, oldChild){//raises \n\t\tthis.insertBefore(newChild,oldChild);\n\t\tif(oldChild){\n\t\t\tthis.removeChild(oldChild);\n\t\t}\n\t},\n\tremoveChild:function(oldChild){\n\t\treturn _removeChild(this,oldChild);\n\t},\n\tappendChild:function(newChild){\n\t\treturn this.insertBefore(newChild,null);\n\t},\n\thasChildNodes:function(){\n\t\treturn this.firstChild != null;\n\t},\n\tcloneNode:function(deep){\n\t\treturn cloneNode(this.ownerDocument||this,this,deep);\n\t},\n\t// Modified in DOM Level 2:\n\tnormalize:function(){\n\t\tvar child = this.firstChild;\n\t\twhile(child){\n\t\t\tvar next = child.nextSibling;\n\t\t\tif(next && next.nodeType == TEXT_NODE && child.nodeType == TEXT_NODE){\n\t\t\t\tthis.removeChild(next);\n\t\t\t\tchild.appendData(next.data);\n\t\t\t}else{\n\t\t\t\tchild.normalize();\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t}\n\t},\n  \t// Introduced in DOM Level 2:\n\tisSupported:function(feature, version){\n\t\treturn this.ownerDocument.implementation.hasFeature(feature,version);\n\t},\n    // Introduced in DOM Level 2:\n    hasAttributes:function(){\n    \treturn this.attributes.length>0;\n    },\n    lookupPrefix:function(namespaceURI){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tfor(var n in map){\n    \t\t\t\tif(map[n] == namespaceURI){\n    \t\t\t\t\treturn n;\n    \t\t\t\t}\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    lookupNamespaceURI:function(prefix){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tif(prefix in map){\n    \t\t\t\treturn map[prefix] ;\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    isDefaultNamespace:function(namespaceURI){\n    \tvar prefix = this.lookupPrefix(namespaceURI);\n    \treturn prefix == null;\n    }\n};\n\n\nfunction _xmlEncoder(c){\n\treturn c == '<' && '&lt;' ||\n         c == '>' && '&gt;' ||\n         c == '&' && '&amp;' ||\n         c == '\"' && '&quot;' ||\n         '&#'+c.charCodeAt()+';'\n}\n\n\ncopy(NodeType,Node);\ncopy(NodeType,Node.prototype);\n\n/**\n * @param callback return true for continue,false for break\n * @return boolean true: break visit;\n */\nfunction _visitNode(node,callback){\n\tif(callback(node)){\n\t\treturn true;\n\t}\n\tif(node = node.firstChild){\n\t\tdo{\n\t\t\tif(_visitNode(node,callback)){return true}\n        }while(node=node.nextSibling)\n    }\n}\n\n\n\nfunction Document(){\n}\nfunction _onAddAttribute(doc,el,newAttr){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns == 'http://www.w3.org/2000/xmlns/'){\n\t\t//update namespace\n\t\tel._nsMap[newAttr.prefix?newAttr.localName:''] = newAttr.value\n\t}\n}\nfunction _onRemoveAttribute(doc,el,newAttr,remove){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns == 'http://www.w3.org/2000/xmlns/'){\n\t\t//update namespace\n\t\tdelete el._nsMap[newAttr.prefix?newAttr.localName:'']\n\t}\n}\nfunction _onUpdateChild(doc,el,newChild){\n\tif(doc && doc._inc){\n\t\tdoc._inc++;\n\t\t//update childNodes\n\t\tvar cs = el.childNodes;\n\t\tif(newChild){\n\t\t\tcs[cs.length++] = newChild;\n\t\t}else{\n\t\t\t//console.log(1)\n\t\t\tvar child = el.firstChild;\n\t\t\tvar i = 0;\n\t\t\twhile(child){\n\t\t\t\tcs[i++] = child;\n\t\t\t\tchild =child.nextSibling;\n\t\t\t}\n\t\t\tcs.length = i;\n\t\t}\n\t}\n}\n\n/**\n * attributes;\n * children;\n * \n * writeable properties:\n * nodeValue,Attr:value,CharacterData:data\n * prefix\n */\nfunction _removeChild(parentNode,child){\n\tvar previous = child.previousSibling;\n\tvar next = child.nextSibling;\n\tif(previous){\n\t\tprevious.nextSibling = next;\n\t}else{\n\t\tparentNode.firstChild = next\n\t}\n\tif(next){\n\t\tnext.previousSibling = previous;\n\t}else{\n\t\tparentNode.lastChild = previous;\n\t}\n\t_onUpdateChild(parentNode.ownerDocument,parentNode);\n\treturn child;\n}\n/**\n * preformance key(refChild == null)\n */\nfunction _insertBefore(parentNode,newChild,nextChild){\n\tvar cp = newChild.parentNode;\n\tif(cp){\n\t\tcp.removeChild(newChild);//remove and update\n\t}\n\tif(newChild.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\tvar newFirst = newChild.firstChild;\n\t\tif (newFirst == null) {\n\t\t\treturn newChild;\n\t\t}\n\t\tvar newLast = newChild.lastChild;\n\t}else{\n\t\tnewFirst = newLast = newChild;\n\t}\n\tvar pre = nextChild ? nextChild.previousSibling : parentNode.lastChild;\n\n\tnewFirst.previousSibling = pre;\n\tnewLast.nextSibling = nextChild;\n\t\n\t\n\tif(pre){\n\t\tpre.nextSibling = newFirst;\n\t}else{\n\t\tparentNode.firstChild = newFirst;\n\t}\n\tif(nextChild == null){\n\t\tparentNode.lastChild = newLast;\n\t}else{\n\t\tnextChild.previousSibling = newLast;\n\t}\n\tdo{\n\t\tnewFirst.parentNode = parentNode;\n\t}while(newFirst !== newLast && (newFirst= newFirst.nextSibling))\n\t_onUpdateChild(parentNode.ownerDocument||parentNode,parentNode);\n\t//console.log(parentNode.lastChild.nextSibling == null)\n\tif (newChild.nodeType == DOCUMENT_FRAGMENT_NODE) {\n\t\tnewChild.firstChild = newChild.lastChild = null;\n\t}\n\treturn newChild;\n}\nfunction _appendSingleChild(parentNode,newChild){\n\tvar cp = newChild.parentNode;\n\tif(cp){\n\t\tvar pre = parentNode.lastChild;\n\t\tcp.removeChild(newChild);//remove and update\n\t\tvar pre = parentNode.lastChild;\n\t}\n\tvar pre = parentNode.lastChild;\n\tnewChild.parentNode = parentNode;\n\tnewChild.previousSibling = pre;\n\tnewChild.nextSibling = null;\n\tif(pre){\n\t\tpre.nextSibling = newChild;\n\t}else{\n\t\tparentNode.firstChild = newChild;\n\t}\n\tparentNode.lastChild = newChild;\n\t_onUpdateChild(parentNode.ownerDocument,parentNode,newChild);\n\treturn newChild;\n\t//console.log(\"__aa\",parentNode.lastChild.nextSibling == null)\n}\nDocument.prototype = {\n\t//implementation : null,\n\tnodeName :  '#document',\n\tnodeType :  DOCUMENT_NODE,\n\tdoctype :  null,\n\tdocumentElement :  null,\n\t_inc : 1,\n\t\n\tinsertBefore :  function(newChild, refChild){//raises \n\t\tif(newChild.nodeType == DOCUMENT_FRAGMENT_NODE){\n\t\t\tvar child = newChild.firstChild;\n\t\t\twhile(child){\n\t\t\t\tvar next = child.nextSibling;\n\t\t\t\tthis.insertBefore(child,refChild);\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t\treturn newChild;\n\t\t}\n\t\tif(this.documentElement == null && newChild.nodeType == ELEMENT_NODE){\n\t\t\tthis.documentElement = newChild;\n\t\t}\n\t\t\n\t\treturn _insertBefore(this,newChild,refChild),(newChild.ownerDocument = this),newChild;\n\t},\n\tremoveChild :  function(oldChild){\n\t\tif(this.documentElement == oldChild){\n\t\t\tthis.documentElement = null;\n\t\t}\n\t\treturn _removeChild(this,oldChild);\n\t},\n\t// Introduced in DOM Level 2:\n\timportNode : function(importedNode,deep){\n\t\treturn importNode(this,importedNode,deep);\n\t},\n\t// Introduced in DOM Level 2:\n\tgetElementById :\tfunction(id){\n\t\tvar rtv = null;\n\t\t_visitNode(this.documentElement,function(node){\n\t\t\tif(node.nodeType == ELEMENT_NODE){\n\t\t\t\tif(node.getAttribute('id') == id){\n\t\t\t\t\trtv = node;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\treturn rtv;\n\t},\n\t\n\t//document factory method:\n\tcreateElement :\tfunction(tagName){\n\t\tvar node = new Element();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = tagName;\n\t\tnode.tagName = tagName;\n\t\tnode.childNodes = new NodeList();\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\tcreateDocumentFragment :\tfunction(){\n\t\tvar node = new DocumentFragment();\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\treturn node;\n\t},\n\tcreateTextNode :\tfunction(data){\n\t\tvar node = new Text();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateComment :\tfunction(data){\n\t\tvar node = new Comment();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateCDATASection :\tfunction(data){\n\t\tvar node = new CDATASection();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateProcessingInstruction :\tfunction(target,data){\n\t\tvar node = new ProcessingInstruction();\n\t\tnode.ownerDocument = this;\n\t\tnode.tagName = node.target = target;\n\t\tnode.nodeValue= node.data = data;\n\t\treturn node;\n\t},\n\tcreateAttribute :\tfunction(name){\n\t\tvar node = new Attr();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.name = name;\n\t\tnode.nodeName\t= name;\n\t\tnode.localName = name;\n\t\tnode.specified = true;\n\t\treturn node;\n\t},\n\tcreateEntityReference :\tfunction(name){\n\t\tvar node = new EntityReference();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.nodeName\t= name;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateElementNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Element();\n\t\tvar pl = qualifiedName.split(':');\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tnode.childNodes = new NodeList();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.tagName = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateAttributeNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Attr();\n\t\tvar pl = qualifiedName.split(':');\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.name = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tnode.specified = true;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\treturn node;\n\t}\n};\n_extends(Document,Node);\n\n\nfunction Element() {\n\tthis._nsMap = {};\n};\nElement.prototype = {\n\tnodeType : ELEMENT_NODE,\n\thasAttribute : function(name){\n\t\treturn this.getAttributeNode(name)!=null;\n\t},\n\tgetAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name);\n\t\treturn attr && attr.value || '';\n\t},\n\tgetAttributeNode : function(name){\n\t\treturn this.attributes.getNamedItem(name);\n\t},\n\tsetAttribute : function(name, value){\n\t\tvar attr = this.ownerDocument.createAttribute(name);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tremoveAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name)\n\t\tattr && this.removeAttributeNode(attr);\n\t},\n\t\n\t//four real opeartion method\n\tappendChild:function(newChild){\n\t\tif(newChild.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\t\treturn this.insertBefore(newChild,null);\n\t\t}else{\n\t\t\treturn _appendSingleChild(this,newChild);\n\t\t}\n\t},\n\tsetAttributeNode : function(newAttr){\n\t\treturn this.attributes.setNamedItem(newAttr);\n\t},\n\tsetAttributeNodeNS : function(newAttr){\n\t\treturn this.attributes.setNamedItemNS(newAttr);\n\t},\n\tremoveAttributeNode : function(oldAttr){\n\t\t//console.log(this == oldAttr.ownerElement)\n\t\treturn this.attributes.removeNamedItem(oldAttr.nodeName);\n\t},\n\t//get real attribute name,and remove it by removeAttributeNode\n\tremoveAttributeNS : function(namespaceURI, localName){\n\t\tvar old = this.getAttributeNodeNS(namespaceURI, localName);\n\t\told && this.removeAttributeNode(old);\n\t},\n\t\n\thasAttributeNS : function(namespaceURI, localName){\n\t\treturn this.getAttributeNodeNS(namespaceURI, localName)!=null;\n\t},\n\tgetAttributeNS : function(namespaceURI, localName){\n\t\tvar attr = this.getAttributeNodeNS(namespaceURI, localName);\n\t\treturn attr && attr.value || '';\n\t},\n\tsetAttributeNS : function(namespaceURI, qualifiedName, value){\n\t\tvar attr = this.ownerDocument.createAttributeNS(namespaceURI, qualifiedName);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tgetAttributeNodeNS : function(namespaceURI, localName){\n\t\treturn this.attributes.getNamedItemNS(namespaceURI, localName);\n\t},\n\t\n\tgetElementsByTagName : function(tagName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType == ELEMENT_NODE && (tagName === '*' || node.tagName == tagName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t});\n\t},\n\tgetElementsByTagNameNS : function(namespaceURI, localName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType === ELEMENT_NODE && (namespaceURI === '*' || node.namespaceURI === namespaceURI) && (localName === '*' || node.localName == localName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t\t\n\t\t});\n\t}\n};\nDocument.prototype.getElementsByTagName = Element.prototype.getElementsByTagName;\nDocument.prototype.getElementsByTagNameNS = Element.prototype.getElementsByTagNameNS;\n\n\n_extends(Element,Node);\nfunction Attr() {\n};\nAttr.prototype.nodeType = ATTRIBUTE_NODE;\n_extends(Attr,Node);\n\n\nfunction CharacterData() {\n};\nCharacterData.prototype = {\n\tdata : '',\n\tsubstringData : function(offset, count) {\n\t\treturn this.data.substring(offset, offset+count);\n\t},\n\tappendData: function(text) {\n\t\ttext = this.data+text;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t},\n\tinsertData: function(offset,text) {\n\t\tthis.replaceData(offset,0,text);\n\t\n\t},\n\tappendChild:function(newChild){\n\t\tthrow new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])\n\t},\n\tdeleteData: function(offset, count) {\n\t\tthis.replaceData(offset,count,\"\");\n\t},\n\treplaceData: function(offset, count, text) {\n\t\tvar start = this.data.substring(0,offset);\n\t\tvar end = this.data.substring(offset+count);\n\t\ttext = start + text + end;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t}\n}\n_extends(CharacterData,Node);\nfunction Text() {\n};\nText.prototype = {\n\tnodeName : \"#text\",\n\tnodeType : TEXT_NODE,\n\tsplitText : function(offset) {\n\t\tvar text = this.data;\n\t\tvar newText = text.substring(offset);\n\t\ttext = text.substring(0, offset);\n\t\tthis.data = this.nodeValue = text;\n\t\tthis.length = text.length;\n\t\tvar newNode = this.ownerDocument.createTextNode(newText);\n\t\tif(this.parentNode){\n\t\t\tthis.parentNode.insertBefore(newNode, this.nextSibling);\n\t\t}\n\t\treturn newNode;\n\t}\n}\n_extends(Text,CharacterData);\nfunction Comment() {\n};\nComment.prototype = {\n\tnodeName : \"#comment\",\n\tnodeType : COMMENT_NODE\n}\n_extends(Comment,CharacterData);\n\nfunction CDATASection() {\n};\nCDATASection.prototype = {\n\tnodeName : \"#cdata-section\",\n\tnodeType : CDATA_SECTION_NODE\n}\n_extends(CDATASection,CharacterData);\n\n\nfunction DocumentType() {\n};\nDocumentType.prototype.nodeType = DOCUMENT_TYPE_NODE;\n_extends(DocumentType,Node);\n\nfunction Notation() {\n};\nNotation.prototype.nodeType = NOTATION_NODE;\n_extends(Notation,Node);\n\nfunction Entity() {\n};\nEntity.prototype.nodeType = ENTITY_NODE;\n_extends(Entity,Node);\n\nfunction EntityReference() {\n};\nEntityReference.prototype.nodeType = ENTITY_REFERENCE_NODE;\n_extends(EntityReference,Node);\n\nfunction DocumentFragment() {\n};\nDocumentFragment.prototype.nodeName =\t\"#document-fragment\";\nDocumentFragment.prototype.nodeType =\tDOCUMENT_FRAGMENT_NODE;\n_extends(DocumentFragment,Node);\n\n\nfunction ProcessingInstruction() {\n}\nProcessingInstruction.prototype.nodeType = PROCESSING_INSTRUCTION_NODE;\n_extends(ProcessingInstruction,Node);\nfunction XMLSerializer(){}\nXMLSerializer.prototype.serializeToString = function(node,isHtml,nodeFilter){\n\treturn nodeSerializeToString.call(node,isHtml,nodeFilter);\n}\nNode.prototype.toString = nodeSerializeToString;\nfunction nodeSerializeToString(isHtml,nodeFilter){\n\tvar buf = [];\n\tvar refNode = this.nodeType == 9?this.documentElement:this;\n\tvar prefix = refNode.prefix;\n\tvar uri = refNode.namespaceURI;\n\t\n\tif(uri && prefix == null){\n\t\t//console.log(prefix)\n\t\tvar prefix = refNode.lookupPrefix(uri);\n\t\tif(prefix == null){\n\t\t\t//isHTML = true;\n\t\t\tvar visibleNamespaces=[\n\t\t\t{namespace:uri,prefix:null}\n\t\t\t//{namespace:uri,prefix:''}\n\t\t\t]\n\t\t}\n\t}\n\tserializeToString(this,buf,isHtml,nodeFilter,visibleNamespaces);\n\t//console.log('###',this.nodeType,uri,prefix,buf.join(''))\n\treturn buf.join('');\n}\nfunction needNamespaceDefine(node,isHTML, visibleNamespaces) {\n\tvar prefix = node.prefix||'';\n\tvar uri = node.namespaceURI;\n\tif (!prefix && !uri){\n\t\treturn false;\n\t}\n\tif (prefix === \"xml\" && uri === \"http://www.w3.org/XML/1998/namespace\" \n\t\t|| uri == 'http://www.w3.org/2000/xmlns/'){\n\t\treturn false;\n\t}\n\t\n\tvar i = visibleNamespaces.length \n\t//console.log('@@@@',node.tagName,prefix,uri,visibleNamespaces)\n\twhile (i--) {\n\t\tvar ns = visibleNamespaces[i];\n\t\t// get namespace prefix\n\t\t//console.log(node.nodeType,node.tagName,ns.prefix,prefix)\n\t\tif (ns.prefix == prefix){\n\t\t\treturn ns.namespace != uri;\n\t\t}\n\t}\n\t//console.log(isHTML,uri,prefix=='')\n\t//if(isHTML && prefix ==null && uri == 'http://www.w3.org/1999/xhtml'){\n\t//\treturn false;\n\t//}\n\t//node.flag = '11111'\n\t//console.error(3,true,node.flag,node.prefix,node.namespaceURI)\n\treturn true;\n}\nfunction serializeToString(node,buf,isHTML,nodeFilter,visibleNamespaces){\n\tif(nodeFilter){\n\t\tnode = nodeFilter(node);\n\t\tif(node){\n\t\t\tif(typeof node == 'string'){\n\t\t\t\tbuf.push(node);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}else{\n\t\t\treturn;\n\t\t}\n\t\t//buf.sort.apply(attrs, attributeSorter);\n\t}\n\tswitch(node.nodeType){\n\tcase ELEMENT_NODE:\n\t\tif (!visibleNamespaces) visibleNamespaces = [];\n\t\tvar startVisibleNamespaces = visibleNamespaces.length;\n\t\tvar attrs = node.attributes;\n\t\tvar len = attrs.length;\n\t\tvar child = node.firstChild;\n\t\tvar nodeName = node.tagName;\n\t\t\n\t\tisHTML =  (htmlns === node.namespaceURI) ||isHTML \n\t\tbuf.push('<',nodeName);\n\t\t\n\t\t\n\t\t\n\t\tfor(var i=0;i<len;i++){\n\t\t\t// add namespaces for attributes\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (attr.prefix == 'xmlns') {\n\t\t\t\tvisibleNamespaces.push({ prefix: attr.localName, namespace: attr.value });\n\t\t\t}else if(attr.nodeName == 'xmlns'){\n\t\t\t\tvisibleNamespaces.push({ prefix: '', namespace: attr.value });\n\t\t\t}\n\t\t}\n\t\tfor(var i=0;i<len;i++){\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (needNamespaceDefine(attr,isHTML, visibleNamespaces)) {\n\t\t\t\tvar prefix = attr.prefix||'';\n\t\t\t\tvar uri = attr.namespaceURI;\n\t\t\t\tvar ns = prefix ? ' xmlns:' + prefix : \" xmlns\";\n\t\t\t\tbuf.push(ns, '=\"' , uri , '\"');\n\t\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t\t}\n\t\t\tserializeToString(attr,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t}\n\t\t// add namespace for current node\t\t\n\t\tif (needNamespaceDefine(node,isHTML, visibleNamespaces)) {\n\t\t\tvar prefix = node.prefix||'';\n\t\t\tvar uri = node.namespaceURI;\n\t\t\tvar ns = prefix ? ' xmlns:' + prefix : \" xmlns\";\n\t\t\tbuf.push(ns, '=\"' , uri , '\"');\n\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t}\n\t\t\n\t\tif(child || isHTML && !/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)){\n\t\t\tbuf.push('>');\n\t\t\t//if is cdata child node\n\t\t\tif(isHTML && /^script$/i.test(nodeName)){\n\t\t\t\twhile(child){\n\t\t\t\t\tif(child.data){\n\t\t\t\t\t\tbuf.push(child.data);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tserializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t\t\t\t}\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}else\n\t\t\t{\n\t\t\t\twhile(child){\n\t\t\t\t\tserializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbuf.push('</',nodeName,'>');\n\t\t}else{\n\t\t\tbuf.push('/>');\n\t\t}\n\t\t// remove added visible namespaces\n\t\t//visibleNamespaces.length = startVisibleNamespaces;\n\t\treturn;\n\tcase DOCUMENT_NODE:\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tserializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t\treturn;\n\tcase ATTRIBUTE_NODE:\n\t\treturn buf.push(' ',node.name,'=\"',node.value.replace(/[<&\"]/g,_xmlEncoder),'\"');\n\tcase TEXT_NODE:\n\t\treturn buf.push(node.data.replace(/[<&]/g,_xmlEncoder));\n\tcase CDATA_SECTION_NODE:\n\t\treturn buf.push( '<![CDATA[',node.data,']]>');\n\tcase COMMENT_NODE:\n\t\treturn buf.push( \"<!--\",node.data,\"-->\");\n\tcase DOCUMENT_TYPE_NODE:\n\t\tvar pubid = node.publicId;\n\t\tvar sysid = node.systemId;\n\t\tbuf.push('<!DOCTYPE ',node.name);\n\t\tif(pubid){\n\t\t\tbuf.push(' PUBLIC \"',pubid);\n\t\t\tif (sysid && sysid!='.') {\n\t\t\t\tbuf.push( '\" \"',sysid);\n\t\t\t}\n\t\t\tbuf.push('\">');\n\t\t}else if(sysid && sysid!='.'){\n\t\t\tbuf.push(' SYSTEM \"',sysid,'\">');\n\t\t}else{\n\t\t\tvar sub = node.internalSubset;\n\t\t\tif(sub){\n\t\t\t\tbuf.push(\" [\",sub,\"]\");\n\t\t\t}\n\t\t\tbuf.push(\">\");\n\t\t}\n\t\treturn;\n\tcase PROCESSING_INSTRUCTION_NODE:\n\t\treturn buf.push( \"<?\",node.target,\" \",node.data,\"?>\");\n\tcase ENTITY_REFERENCE_NODE:\n\t\treturn buf.push( '&',node.nodeName,';');\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE:\n\tdefault:\n\t\tbuf.push('??',node.nodeName);\n\t}\n}\nfunction importNode(doc,node,deep){\n\tvar node2;\n\tswitch (node.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tnode2 = node.cloneNode(false);\n\t\tnode2.ownerDocument = doc;\n\t\t//var attrs = node2.attributes;\n\t\t//var len = attrs.length;\n\t\t//for(var i=0;i<len;i++){\n\t\t\t//node2.setAttributeNodeNS(importNode(doc,attrs.item(i),deep));\n\t\t//}\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tbreak;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t\tbreak;\n\t//case ENTITY_REFERENCE_NODE:\n\t//case PROCESSING_INSTRUCTION_NODE:\n\t////case TEXT_NODE:\n\t//case CDATA_SECTION_NODE:\n\t//case COMMENT_NODE:\n\t//\tdeep = false;\n\t//\tbreak;\n\t//case DOCUMENT_NODE:\n\t//case DOCUMENT_TYPE_NODE:\n\t//cannot be imported.\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE：\n\t//can not hit in level3\n\t//default:throw e;\n\t}\n\tif(!node2){\n\t\tnode2 = node.cloneNode(false);//false\n\t}\n\tnode2.ownerDocument = doc;\n\tnode2.parentNode = null;\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(importNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n//\n//var _relationMap = {firstChild:1,lastChild:1,previousSibling:1,nextSibling:1,\n//\t\t\t\t\tattributes:1,childNodes:1,parentNode:1,documentElement:1,doctype,};\nfunction cloneNode(doc,node,deep){\n\tvar node2 = new node.constructor();\n\tfor(var n in node){\n\t\tvar v = node[n];\n\t\tif(typeof v != 'object' ){\n\t\t\tif(v != node2[n]){\n\t\t\t\tnode2[n] = v;\n\t\t\t}\n\t\t}\n\t}\n\tif(node.childNodes){\n\t\tnode2.childNodes = new NodeList();\n\t}\n\tnode2.ownerDocument = doc;\n\tswitch (node2.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tvar attrs\t= node.attributes;\n\t\tvar attrs2\t= node2.attributes = new NamedNodeMap();\n\t\tvar len = attrs.length\n\t\tattrs2._ownerElement = node2;\n\t\tfor(var i=0;i<len;i++){\n\t\t\tnode2.setAttributeNode(cloneNode(doc,attrs.item(i),true));\n\t\t}\n\t\tbreak;;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t}\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(cloneNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n\nfunction __set__(object,key,value){\n\tobject[key] = value\n}\n//do dynamic\ntry{\n\tif(Object.defineProperty){\n\t\tObject.defineProperty(LiveNodeList.prototype,'length',{\n\t\t\tget:function(){\n\t\t\t\t_updateLiveList(this);\n\t\t\t\treturn this.$$length;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(Node.prototype,'textContent',{\n\t\t\tget:function(){\n\t\t\t\treturn getTextContent(this);\n\t\t\t},\n\t\t\tset:function(data){\n\t\t\t\tswitch(this.nodeType){\n\t\t\t\tcase ELEMENT_NODE:\n\t\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\t\twhile(this.firstChild){\n\t\t\t\t\t\tthis.removeChild(this.firstChild);\n\t\t\t\t\t}\n\t\t\t\t\tif(data || String(data)){\n\t\t\t\t\t\tthis.appendChild(this.ownerDocument.createTextNode(data));\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t//TODO:\n\t\t\t\t\tthis.data = data;\n\t\t\t\t\tthis.value = data;\n\t\t\t\t\tthis.nodeValue = data;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\t\n\t\tfunction getTextContent(node){\n\t\t\tswitch(node.nodeType){\n\t\t\tcase ELEMENT_NODE:\n\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\tvar buf = [];\n\t\t\t\tnode = node.firstChild;\n\t\t\t\twhile(node){\n\t\t\t\t\tif(node.nodeType!==7 && node.nodeType !==8){\n\t\t\t\t\t\tbuf.push(getTextContent(node));\n\t\t\t\t\t}\n\t\t\t\t\tnode = node.nextSibling;\n\t\t\t\t}\n\t\t\t\treturn buf.join('');\n\t\t\tdefault:\n\t\t\t\treturn node.nodeValue;\n\t\t\t}\n\t\t}\n\t\t__set__ = function(object,key,value){\n\t\t\t//console.log(value)\n\t\t\tobject['$$'+key] = value\n\t\t}\n\t}\n}catch(e){//ie8\n}\n\n//if(typeof require == 'function'){\n\texports.DOMImplementation = DOMImplementation;\n\texports.XMLSerializer = XMLSerializer;\n//}\n","/*!\n  * vue-router v3.5.1\n  * (c) 2021 Evan You\n  * @license MIT\n  */\n/*  */\n\nfunction assert (condition, message) {\n  if (!condition) {\n    throw new Error((\"[vue-router] \" + message))\n  }\n}\n\nfunction warn (condition, message) {\n  if (process.env.NODE_ENV !== 'production' && !condition) {\n    typeof console !== 'undefined' && console.warn((\"[vue-router] \" + message));\n  }\n}\n\nfunction extend (a, b) {\n  for (var key in b) {\n    a[key] = b[key];\n  }\n  return a\n}\n\n/*  */\n\nvar encodeReserveRE = /[!'()*]/g;\nvar encodeReserveReplacer = function (c) { return '%' + c.charCodeAt(0).toString(16); };\nvar commaRE = /%2C/g;\n\n// fixed encodeURIComponent which is more conformant to RFC3986:\n// - escapes [!'()*]\n// - preserve commas\nvar encode = function (str) { return encodeURIComponent(str)\n    .replace(encodeReserveRE, encodeReserveReplacer)\n    .replace(commaRE, ','); };\n\nfunction decode (str) {\n  try {\n    return decodeURIComponent(str)\n  } catch (err) {\n    if (process.env.NODE_ENV !== 'production') {\n      warn(false, (\"Error decoding \\\"\" + str + \"\\\". Leaving it intact.\"));\n    }\n  }\n  return str\n}\n\nfunction resolveQuery (\n  query,\n  extraQuery,\n  _parseQuery\n) {\n  if ( extraQuery === void 0 ) extraQuery = {};\n\n  var parse = _parseQuery || parseQuery;\n  var parsedQuery;\n  try {\n    parsedQuery = parse(query || '');\n  } catch (e) {\n    process.env.NODE_ENV !== 'production' && warn(false, e.message);\n    parsedQuery = {};\n  }\n  for (var key in extraQuery) {\n    var value = extraQuery[key];\n    parsedQuery[key] = Array.isArray(value)\n      ? value.map(castQueryParamValue)\n      : castQueryParamValue(value);\n  }\n  return parsedQuery\n}\n\nvar castQueryParamValue = function (value) { return (value == null || typeof value === 'object' ? value : String(value)); };\n\nfunction parseQuery (query) {\n  var res = {};\n\n  query = query.trim().replace(/^(\\?|#|&)/, '');\n\n  if (!query) {\n    return res\n  }\n\n  query.split('&').forEach(function (param) {\n    var parts = param.replace(/\\+/g, ' ').split('=');\n    var key = decode(parts.shift());\n    var val = parts.length > 0 ? decode(parts.join('=')) : null;\n\n    if (res[key] === undefined) {\n      res[key] = val;\n    } else if (Array.isArray(res[key])) {\n      res[key].push(val);\n    } else {\n      res[key] = [res[key], val];\n    }\n  });\n\n  return res\n}\n\nfunction stringifyQuery (obj) {\n  var res = obj\n    ? Object.keys(obj)\n      .map(function (key) {\n        var val = obj[key];\n\n        if (val === undefined) {\n          return ''\n        }\n\n        if (val === null) {\n          return encode(key)\n        }\n\n        if (Array.isArray(val)) {\n          var result = [];\n          val.forEach(function (val2) {\n            if (val2 === undefined) {\n              return\n            }\n            if (val2 === null) {\n              result.push(encode(key));\n            } else {\n              result.push(encode(key) + '=' + encode(val2));\n            }\n          });\n          return result.join('&')\n        }\n\n        return encode(key) + '=' + encode(val)\n      })\n      .filter(function (x) { return x.length > 0; })\n      .join('&')\n    : null;\n  return res ? (\"?\" + res) : ''\n}\n\n/*  */\n\nvar trailingSlashRE = /\\/?$/;\n\nfunction createRoute (\n  record,\n  location,\n  redirectedFrom,\n  router\n) {\n  var stringifyQuery = router && router.options.stringifyQuery;\n\n  var query = location.query || {};\n  try {\n    query = clone(query);\n  } catch (e) {}\n\n  var route = {\n    name: location.name || (record && record.name),\n    meta: (record && record.meta) || {},\n    path: location.path || '/',\n    hash: location.hash || '',\n    query: query,\n    params: location.params || {},\n    fullPath: getFullPath(location, stringifyQuery),\n    matched: record ? formatMatch(record) : []\n  };\n  if (redirectedFrom) {\n    route.redirectedFrom = getFullPath(redirectedFrom, stringifyQuery);\n  }\n  return Object.freeze(route)\n}\n\nfunction clone (value) {\n  if (Array.isArray(value)) {\n    return value.map(clone)\n  } else if (value && typeof value === 'object') {\n    var res = {};\n    for (var key in value) {\n      res[key] = clone(value[key]);\n    }\n    return res\n  } else {\n    return value\n  }\n}\n\n// the starting route that represents the initial state\nvar START = createRoute(null, {\n  path: '/'\n});\n\nfunction formatMatch (record) {\n  var res = [];\n  while (record) {\n    res.unshift(record);\n    record = record.parent;\n  }\n  return res\n}\n\nfunction getFullPath (\n  ref,\n  _stringifyQuery\n) {\n  var path = ref.path;\n  var query = ref.query; if ( query === void 0 ) query = {};\n  var hash = ref.hash; if ( hash === void 0 ) hash = '';\n\n  var stringify = _stringifyQuery || stringifyQuery;\n  return (path || '/') + stringify(query) + hash\n}\n\nfunction isSameRoute (a, b, onlyPath) {\n  if (b === START) {\n    return a === b\n  } else if (!b) {\n    return false\n  } else if (a.path && b.path) {\n    return a.path.replace(trailingSlashRE, '') === b.path.replace(trailingSlashRE, '') && (onlyPath ||\n      a.hash === b.hash &&\n      isObjectEqual(a.query, b.query))\n  } else if (a.name && b.name) {\n    return (\n      a.name === b.name &&\n      (onlyPath || (\n        a.hash === b.hash &&\n      isObjectEqual(a.query, b.query) &&\n      isObjectEqual(a.params, b.params))\n      )\n    )\n  } else {\n    return false\n  }\n}\n\nfunction isObjectEqual (a, b) {\n  if ( a === void 0 ) a = {};\n  if ( b === void 0 ) b = {};\n\n  // handle null value #1566\n  if (!a || !b) { return a === b }\n  var aKeys = Object.keys(a).sort();\n  var bKeys = Object.keys(b).sort();\n  if (aKeys.length !== bKeys.length) {\n    return false\n  }\n  return aKeys.every(function (key, i) {\n    var aVal = a[key];\n    var bKey = bKeys[i];\n    if (bKey !== key) { return false }\n    var bVal = b[key];\n    // query values can be null and undefined\n    if (aVal == null || bVal == null) { return aVal === bVal }\n    // check nested equality\n    if (typeof aVal === 'object' && typeof bVal === 'object') {\n      return isObjectEqual(aVal, bVal)\n    }\n    return String(aVal) === String(bVal)\n  })\n}\n\nfunction isIncludedRoute (current, target) {\n  return (\n    current.path.replace(trailingSlashRE, '/').indexOf(\n      target.path.replace(trailingSlashRE, '/')\n    ) === 0 &&\n    (!target.hash || current.hash === target.hash) &&\n    queryIncludes(current.query, target.query)\n  )\n}\n\nfunction queryIncludes (current, target) {\n  for (var key in target) {\n    if (!(key in current)) {\n      return false\n    }\n  }\n  return true\n}\n\nfunction handleRouteEntered (route) {\n  for (var i = 0; i < route.matched.length; i++) {\n    var record = route.matched[i];\n    for (var name in record.instances) {\n      var instance = record.instances[name];\n      var cbs = record.enteredCbs[name];\n      if (!instance || !cbs) { continue }\n      delete record.enteredCbs[name];\n      for (var i$1 = 0; i$1 < cbs.length; i$1++) {\n        if (!instance._isBeingDestroyed) { cbs[i$1](instance); }\n      }\n    }\n  }\n}\n\nvar View = {\n  name: 'RouterView',\n  functional: true,\n  props: {\n    name: {\n      type: String,\n      default: 'default'\n    }\n  },\n  render: function render (_, ref) {\n    var props = ref.props;\n    var children = ref.children;\n    var parent = ref.parent;\n    var data = ref.data;\n\n    // used by devtools to display a router-view badge\n    data.routerView = true;\n\n    // directly use parent context's createElement() function\n    // so that components rendered by router-view can resolve named slots\n    var h = parent.$createElement;\n    var name = props.name;\n    var route = parent.$route;\n    var cache = parent._routerViewCache || (parent._routerViewCache = {});\n\n    // determine current view depth, also check to see if the tree\n    // has been toggled inactive but kept-alive.\n    var depth = 0;\n    var inactive = false;\n    while (parent && parent._routerRoot !== parent) {\n      var vnodeData = parent.$vnode ? parent.$vnode.data : {};\n      if (vnodeData.routerView) {\n        depth++;\n      }\n      if (vnodeData.keepAlive && parent._directInactive && parent._inactive) {\n        inactive = true;\n      }\n      parent = parent.$parent;\n    }\n    data.routerViewDepth = depth;\n\n    // render previous view if the tree is inactive and kept-alive\n    if (inactive) {\n      var cachedData = cache[name];\n      var cachedComponent = cachedData && cachedData.component;\n      if (cachedComponent) {\n        // #2301\n        // pass props\n        if (cachedData.configProps) {\n          fillPropsinData(cachedComponent, data, cachedData.route, cachedData.configProps);\n        }\n        return h(cachedComponent, data, children)\n      } else {\n        // render previous empty view\n        return h()\n      }\n    }\n\n    var matched = route.matched[depth];\n    var component = matched && matched.components[name];\n\n    // render empty node if no matched route or no config component\n    if (!matched || !component) {\n      cache[name] = null;\n      return h()\n    }\n\n    // cache component\n    cache[name] = { component: component };\n\n    // attach instance registration hook\n    // this will be called in the instance's injected lifecycle hooks\n    data.registerRouteInstance = function (vm, val) {\n      // val could be undefined for unregistration\n      var current = matched.instances[name];\n      if (\n        (val && current !== vm) ||\n        (!val && current === vm)\n      ) {\n        matched.instances[name] = val;\n      }\n    }\n\n    // also register instance in prepatch hook\n    // in case the same component instance is reused across different routes\n    ;(data.hook || (data.hook = {})).prepatch = function (_, vnode) {\n      matched.instances[name] = vnode.componentInstance;\n    };\n\n    // register instance in init hook\n    // in case kept-alive component be actived when routes changed\n    data.hook.init = function (vnode) {\n      if (vnode.data.keepAlive &&\n        vnode.componentInstance &&\n        vnode.componentInstance !== matched.instances[name]\n      ) {\n        matched.instances[name] = vnode.componentInstance;\n      }\n\n      // if the route transition has already been confirmed then we weren't\n      // able to call the cbs during confirmation as the component was not\n      // registered yet, so we call it here.\n      handleRouteEntered(route);\n    };\n\n    var configProps = matched.props && matched.props[name];\n    // save route and configProps in cache\n    if (configProps) {\n      extend(cache[name], {\n        route: route,\n        configProps: configProps\n      });\n      fillPropsinData(component, data, route, configProps);\n    }\n\n    return h(component, data, children)\n  }\n};\n\nfunction fillPropsinData (component, data, route, configProps) {\n  // resolve props\n  var propsToPass = data.props = resolveProps(route, configProps);\n  if (propsToPass) {\n    // clone to prevent mutation\n    propsToPass = data.props = extend({}, propsToPass);\n    // pass non-declared props as attrs\n    var attrs = data.attrs = data.attrs || {};\n    for (var key in propsToPass) {\n      if (!component.props || !(key in component.props)) {\n        attrs[key] = propsToPass[key];\n        delete propsToPass[key];\n      }\n    }\n  }\n}\n\nfunction resolveProps (route, config) {\n  switch (typeof config) {\n    case 'undefined':\n      return\n    case 'object':\n      return config\n    case 'function':\n      return config(route)\n    case 'boolean':\n      return config ? route.params : undefined\n    default:\n      if (process.env.NODE_ENV !== 'production') {\n        warn(\n          false,\n          \"props in \\\"\" + (route.path) + \"\\\" is a \" + (typeof config) + \", \" +\n          \"expecting an object, function or boolean.\"\n        );\n      }\n  }\n}\n\n/*  */\n\nfunction resolvePath (\n  relative,\n  base,\n  append\n) {\n  var firstChar = relative.charAt(0);\n  if (firstChar === '/') {\n    return relative\n  }\n\n  if (firstChar === '?' || firstChar === '#') {\n    return base + relative\n  }\n\n  var stack = base.split('/');\n\n  // remove trailing segment if:\n  // - not appending\n  // - appending to trailing slash (last segment is empty)\n  if (!append || !stack[stack.length - 1]) {\n    stack.pop();\n  }\n\n  // resolve relative path\n  var segments = relative.replace(/^\\//, '').split('/');\n  for (var i = 0; i < segments.length; i++) {\n    var segment = segments[i];\n    if (segment === '..') {\n      stack.pop();\n    } else if (segment !== '.') {\n      stack.push(segment);\n    }\n  }\n\n  // ensure leading slash\n  if (stack[0] !== '') {\n    stack.unshift('');\n  }\n\n  return stack.join('/')\n}\n\nfunction parsePath (path) {\n  var hash = '';\n  var query = '';\n\n  var hashIndex = path.indexOf('#');\n  if (hashIndex >= 0) {\n    hash = path.slice(hashIndex);\n    path = path.slice(0, hashIndex);\n  }\n\n  var queryIndex = path.indexOf('?');\n  if (queryIndex >= 0) {\n    query = path.slice(queryIndex + 1);\n    path = path.slice(0, queryIndex);\n  }\n\n  return {\n    path: path,\n    query: query,\n    hash: hash\n  }\n}\n\nfunction cleanPath (path) {\n  return path.replace(/\\/\\//g, '/')\n}\n\nvar isarray = Array.isArray || function (arr) {\n  return Object.prototype.toString.call(arr) == '[object Array]';\n};\n\n/**\n * Expose `pathToRegexp`.\n */\nvar pathToRegexp_1 = pathToRegexp;\nvar parse_1 = parse;\nvar compile_1 = compile;\nvar tokensToFunction_1 = tokensToFunction;\nvar tokensToRegExp_1 = tokensToRegExp;\n\n/**\n * The main path matching regexp utility.\n *\n * @type {RegExp}\n */\nvar PATH_REGEXP = new RegExp([\n  // Match escaped characters that would otherwise appear in future matches.\n  // This allows the user to escape special characters that won't transform.\n  '(\\\\\\\\.)',\n  // Match Express-style parameters and un-named parameters with a prefix\n  // and optional suffixes. Matches appear as:\n  //\n  // \"/:test(\\\\d+)?\" => [\"/\", \"test\", \"\\d+\", undefined, \"?\", undefined]\n  // \"/route(\\\\d+)\"  => [undefined, undefined, undefined, \"\\d+\", undefined, undefined]\n  // \"/*\"            => [\"/\", undefined, undefined, undefined, undefined, \"*\"]\n  '([\\\\/.])?(?:(?:\\\\:(\\\\w+)(?:\\\\(((?:\\\\\\\\.|[^\\\\\\\\()])+)\\\\))?|\\\\(((?:\\\\\\\\.|[^\\\\\\\\()])+)\\\\))([+*?])?|(\\\\*))'\n].join('|'), 'g');\n\n/**\n * Parse a string for the raw tokens.\n *\n * @param  {string}  str\n * @param  {Object=} options\n * @return {!Array}\n */\nfunction parse (str, options) {\n  var tokens = [];\n  var key = 0;\n  var index = 0;\n  var path = '';\n  var defaultDelimiter = options && options.delimiter || '/';\n  var res;\n\n  while ((res = PATH_REGEXP.exec(str)) != null) {\n    var m = res[0];\n    var escaped = res[1];\n    var offset = res.index;\n    path += str.slice(index, offset);\n    index = offset + m.length;\n\n    // Ignore already escaped sequences.\n    if (escaped) {\n      path += escaped[1];\n      continue\n    }\n\n    var next = str[index];\n    var prefix = res[2];\n    var name = res[3];\n    var capture = res[4];\n    var group = res[5];\n    var modifier = res[6];\n    var asterisk = res[7];\n\n    // Push the current path onto the tokens.\n    if (path) {\n      tokens.push(path);\n      path = '';\n    }\n\n    var partial = prefix != null && next != null && next !== prefix;\n    var repeat = modifier === '+' || modifier === '*';\n    var optional = modifier === '?' || modifier === '*';\n    var delimiter = res[2] || defaultDelimiter;\n    var pattern = capture || group;\n\n    tokens.push({\n      name: name || key++,\n      prefix: prefix || '',\n      delimiter: delimiter,\n      optional: optional,\n      repeat: repeat,\n      partial: partial,\n      asterisk: !!asterisk,\n      pattern: pattern ? escapeGroup(pattern) : (asterisk ? '.*' : '[^' + escapeString(delimiter) + ']+?')\n    });\n  }\n\n  // Match any characters still remaining.\n  if (index < str.length) {\n    path += str.substr(index);\n  }\n\n  // If the path exists, push it onto the end.\n  if (path) {\n    tokens.push(path);\n  }\n\n  return tokens\n}\n\n/**\n * Compile a string to a template function for the path.\n *\n * @param  {string}             str\n * @param  {Object=}            options\n * @return {!function(Object=, Object=)}\n */\nfunction compile (str, options) {\n  return tokensToFunction(parse(str, options), options)\n}\n\n/**\n * Prettier encoding of URI path segments.\n *\n * @param  {string}\n * @return {string}\n */\nfunction encodeURIComponentPretty (str) {\n  return encodeURI(str).replace(/[\\/?#]/g, function (c) {\n    return '%' + c.charCodeAt(0).toString(16).toUpperCase()\n  })\n}\n\n/**\n * Encode the asterisk parameter. Similar to `pretty`, but allows slashes.\n *\n * @param  {string}\n * @return {string}\n */\nfunction encodeAsterisk (str) {\n  return encodeURI(str).replace(/[?#]/g, function (c) {\n    return '%' + c.charCodeAt(0).toString(16).toUpperCase()\n  })\n}\n\n/**\n * Expose a method for transforming tokens into the path function.\n */\nfunction tokensToFunction (tokens, options) {\n  // Compile all the tokens into regexps.\n  var matches = new Array(tokens.length);\n\n  // Compile all the patterns before compilation.\n  for (var i = 0; i < tokens.length; i++) {\n    if (typeof tokens[i] === 'object') {\n      matches[i] = new RegExp('^(?:' + tokens[i].pattern + ')$', flags(options));\n    }\n  }\n\n  return function (obj, opts) {\n    var path = '';\n    var data = obj || {};\n    var options = opts || {};\n    var encode = options.pretty ? encodeURIComponentPretty : encodeURIComponent;\n\n    for (var i = 0; i < tokens.length; i++) {\n      var token = tokens[i];\n\n      if (typeof token === 'string') {\n        path += token;\n\n        continue\n      }\n\n      var value = data[token.name];\n      var segment;\n\n      if (value == null) {\n        if (token.optional) {\n          // Prepend partial segment prefixes.\n          if (token.partial) {\n            path += token.prefix;\n          }\n\n          continue\n        } else {\n          throw new TypeError('Expected \"' + token.name + '\" to be defined')\n        }\n      }\n\n      if (isarray(value)) {\n        if (!token.repeat) {\n          throw new TypeError('Expected \"' + token.name + '\" to not repeat, but received `' + JSON.stringify(value) + '`')\n        }\n\n        if (value.length === 0) {\n          if (token.optional) {\n            continue\n          } else {\n            throw new TypeError('Expected \"' + token.name + '\" to not be empty')\n          }\n        }\n\n        for (var j = 0; j < value.length; j++) {\n          segment = encode(value[j]);\n\n          if (!matches[i].test(segment)) {\n            throw new TypeError('Expected all \"' + token.name + '\" to match \"' + token.pattern + '\", but received `' + JSON.stringify(segment) + '`')\n          }\n\n          path += (j === 0 ? token.prefix : token.delimiter) + segment;\n        }\n\n        continue\n      }\n\n      segment = token.asterisk ? encodeAsterisk(value) : encode(value);\n\n      if (!matches[i].test(segment)) {\n        throw new TypeError('Expected \"' + token.name + '\" to match \"' + token.pattern + '\", but received \"' + segment + '\"')\n      }\n\n      path += token.prefix + segment;\n    }\n\n    return path\n  }\n}\n\n/**\n * Escape a regular expression string.\n *\n * @param  {string} str\n * @return {string}\n */\nfunction escapeString (str) {\n  return str.replace(/([.+*?=^!:${}()[\\]|\\/\\\\])/g, '\\\\$1')\n}\n\n/**\n * Escape the capturing group by escaping special characters and meaning.\n *\n * @param  {string} group\n * @return {string}\n */\nfunction escapeGroup (group) {\n  return group.replace(/([=!:$\\/()])/g, '\\\\$1')\n}\n\n/**\n * Attach the keys as a property of the regexp.\n *\n * @param  {!RegExp} re\n * @param  {Array}   keys\n * @return {!RegExp}\n */\nfunction attachKeys (re, keys) {\n  re.keys = keys;\n  return re\n}\n\n/**\n * Get the flags for a regexp from the options.\n *\n * @param  {Object} options\n * @return {string}\n */\nfunction flags (options) {\n  return options && options.sensitive ? '' : 'i'\n}\n\n/**\n * Pull out keys from a regexp.\n *\n * @param  {!RegExp} path\n * @param  {!Array}  keys\n * @return {!RegExp}\n */\nfunction regexpToRegexp (path, keys) {\n  // Use a negative lookahead to match only capturing groups.\n  var groups = path.source.match(/\\((?!\\?)/g);\n\n  if (groups) {\n    for (var i = 0; i < groups.length; i++) {\n      keys.push({\n        name: i,\n        prefix: null,\n        delimiter: null,\n        optional: false,\n        repeat: false,\n        partial: false,\n        asterisk: false,\n        pattern: null\n      });\n    }\n  }\n\n  return attachKeys(path, keys)\n}\n\n/**\n * Transform an array into a regexp.\n *\n * @param  {!Array}  path\n * @param  {Array}   keys\n * @param  {!Object} options\n * @return {!RegExp}\n */\nfunction arrayToRegexp (path, keys, options) {\n  var parts = [];\n\n  for (var i = 0; i < path.length; i++) {\n    parts.push(pathToRegexp(path[i], keys, options).source);\n  }\n\n  var regexp = new RegExp('(?:' + parts.join('|') + ')', flags(options));\n\n  return attachKeys(regexp, keys)\n}\n\n/**\n * Create a path regexp from string input.\n *\n * @param  {string}  path\n * @param  {!Array}  keys\n * @param  {!Object} options\n * @return {!RegExp}\n */\nfunction stringToRegexp (path, keys, options) {\n  return tokensToRegExp(parse(path, options), keys, options)\n}\n\n/**\n * Expose a function for taking tokens and returning a RegExp.\n *\n * @param  {!Array}          tokens\n * @param  {(Array|Object)=} keys\n * @param  {Object=}         options\n * @return {!RegExp}\n */\nfunction tokensToRegExp (tokens, keys, options) {\n  if (!isarray(keys)) {\n    options = /** @type {!Object} */ (keys || options);\n    keys = [];\n  }\n\n  options = options || {};\n\n  var strict = options.strict;\n  var end = options.end !== false;\n  var route = '';\n\n  // Iterate over the tokens and create our regexp string.\n  for (var i = 0; i < tokens.length; i++) {\n    var token = tokens[i];\n\n    if (typeof token === 'string') {\n      route += escapeString(token);\n    } else {\n      var prefix = escapeString(token.prefix);\n      var capture = '(?:' + token.pattern + ')';\n\n      keys.push(token);\n\n      if (token.repeat) {\n        capture += '(?:' + prefix + capture + ')*';\n      }\n\n      if (token.optional) {\n        if (!token.partial) {\n          capture = '(?:' + prefix + '(' + capture + '))?';\n        } else {\n          capture = prefix + '(' + capture + ')?';\n        }\n      } else {\n        capture = prefix + '(' + capture + ')';\n      }\n\n      route += capture;\n    }\n  }\n\n  var delimiter = escapeString(options.delimiter || '/');\n  var endsWithDelimiter = route.slice(-delimiter.length) === delimiter;\n\n  // In non-strict mode we allow a slash at the end of match. If the path to\n  // match already ends with a slash, we remove it for consistency. The slash\n  // is valid at the end of a path match, not in the middle. This is important\n  // in non-ending mode, where \"/test/\" shouldn't match \"/test//route\".\n  if (!strict) {\n    route = (endsWithDelimiter ? route.slice(0, -delimiter.length) : route) + '(?:' + delimiter + '(?=$))?';\n  }\n\n  if (end) {\n    route += '$';\n  } else {\n    // In non-ending mode, we need the capturing groups to match as much as\n    // possible by using a positive lookahead to the end or next path segment.\n    route += strict && endsWithDelimiter ? '' : '(?=' + delimiter + '|$)';\n  }\n\n  return attachKeys(new RegExp('^' + route, flags(options)), keys)\n}\n\n/**\n * Normalize the given path string, returning a regular expression.\n *\n * An empty array can be passed in for the keys, which will hold the\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.\n *\n * @param  {(string|RegExp|Array)} path\n * @param  {(Array|Object)=}       keys\n * @param  {Object=}               options\n * @return {!RegExp}\n */\nfunction pathToRegexp (path, keys, options) {\n  if (!isarray(keys)) {\n    options = /** @type {!Object} */ (keys || options);\n    keys = [];\n  }\n\n  options = options || {};\n\n  if (path instanceof RegExp) {\n    return regexpToRegexp(path, /** @type {!Array} */ (keys))\n  }\n\n  if (isarray(path)) {\n    return arrayToRegexp(/** @type {!Array} */ (path), /** @type {!Array} */ (keys), options)\n  }\n\n  return stringToRegexp(/** @type {string} */ (path), /** @type {!Array} */ (keys), options)\n}\npathToRegexp_1.parse = parse_1;\npathToRegexp_1.compile = compile_1;\npathToRegexp_1.tokensToFunction = tokensToFunction_1;\npathToRegexp_1.tokensToRegExp = tokensToRegExp_1;\n\n/*  */\n\n// $flow-disable-line\nvar regexpCompileCache = Object.create(null);\n\nfunction fillParams (\n  path,\n  params,\n  routeMsg\n) {\n  params = params || {};\n  try {\n    var filler =\n      regexpCompileCache[path] ||\n      (regexpCompileCache[path] = pathToRegexp_1.compile(path));\n\n    // Fix #2505 resolving asterisk routes { name: 'not-found', params: { pathMatch: '/not-found' }}\n    // and fix #3106 so that you can work with location descriptor object having params.pathMatch equal to empty string\n    if (typeof params.pathMatch === 'string') { params[0] = params.pathMatch; }\n\n    return filler(params, { pretty: true })\n  } catch (e) {\n    if (process.env.NODE_ENV !== 'production') {\n      // Fix #3072 no warn if `pathMatch` is string\n      warn(typeof params.pathMatch === 'string', (\"missing param for \" + routeMsg + \": \" + (e.message)));\n    }\n    return ''\n  } finally {\n    // delete the 0 if it was added\n    delete params[0];\n  }\n}\n\n/*  */\n\nfunction normalizeLocation (\n  raw,\n  current,\n  append,\n  router\n) {\n  var next = typeof raw === 'string' ? { path: raw } : raw;\n  // named target\n  if (next._normalized) {\n    return next\n  } else if (next.name) {\n    next = extend({}, raw);\n    var params = next.params;\n    if (params && typeof params === 'object') {\n      next.params = extend({}, params);\n    }\n    return next\n  }\n\n  // relative params\n  if (!next.path && next.params && current) {\n    next = extend({}, next);\n    next._normalized = true;\n    var params$1 = extend(extend({}, current.params), next.params);\n    if (current.name) {\n      next.name = current.name;\n      next.params = params$1;\n    } else if (current.matched.length) {\n      var rawPath = current.matched[current.matched.length - 1].path;\n      next.path = fillParams(rawPath, params$1, (\"path \" + (current.path)));\n    } else if (process.env.NODE_ENV !== 'production') {\n      warn(false, \"relative params navigation requires a current route.\");\n    }\n    return next\n  }\n\n  var parsedPath = parsePath(next.path || '');\n  var basePath = (current && current.path) || '/';\n  var path = parsedPath.path\n    ? resolvePath(parsedPath.path, basePath, append || next.append)\n    : basePath;\n\n  var query = resolveQuery(\n    parsedPath.query,\n    next.query,\n    router && router.options.parseQuery\n  );\n\n  var hash = next.hash || parsedPath.hash;\n  if (hash && hash.charAt(0) !== '#') {\n    hash = \"#\" + hash;\n  }\n\n  return {\n    _normalized: true,\n    path: path,\n    query: query,\n    hash: hash\n  }\n}\n\n/*  */\n\n// work around weird flow bug\nvar toTypes = [String, Object];\nvar eventTypes = [String, Array];\n\nvar noop = function () {};\n\nvar warnedCustomSlot;\nvar warnedTagProp;\nvar warnedEventProp;\n\nvar Link = {\n  name: 'RouterLink',\n  props: {\n    to: {\n      type: toTypes,\n      required: true\n    },\n    tag: {\n      type: String,\n      default: 'a'\n    },\n    custom: Boolean,\n    exact: Boolean,\n    exactPath: Boolean,\n    append: Boolean,\n    replace: Boolean,\n    activeClass: String,\n    exactActiveClass: String,\n    ariaCurrentValue: {\n      type: String,\n      default: 'page'\n    },\n    event: {\n      type: eventTypes,\n      default: 'click'\n    }\n  },\n  render: function render (h) {\n    var this$1 = this;\n\n    var router = this.$router;\n    var current = this.$route;\n    var ref = router.resolve(\n      this.to,\n      current,\n      this.append\n    );\n    var location = ref.location;\n    var route = ref.route;\n    var href = ref.href;\n\n    var classes = {};\n    var globalActiveClass = router.options.linkActiveClass;\n    var globalExactActiveClass = router.options.linkExactActiveClass;\n    // Support global empty active class\n    var activeClassFallback =\n      globalActiveClass == null ? 'router-link-active' : globalActiveClass;\n    var exactActiveClassFallback =\n      globalExactActiveClass == null\n        ? 'router-link-exact-active'\n        : globalExactActiveClass;\n    var activeClass =\n      this.activeClass == null ? activeClassFallback : this.activeClass;\n    var exactActiveClass =\n      this.exactActiveClass == null\n        ? exactActiveClassFallback\n        : this.exactActiveClass;\n\n    var compareTarget = route.redirectedFrom\n      ? createRoute(null, normalizeLocation(route.redirectedFrom), null, router)\n      : route;\n\n    classes[exactActiveClass] = isSameRoute(current, compareTarget, this.exactPath);\n    classes[activeClass] = this.exact || this.exactPath\n      ? classes[exactActiveClass]\n      : isIncludedRoute(current, compareTarget);\n\n    var ariaCurrentValue = classes[exactActiveClass] ? this.ariaCurrentValue : null;\n\n    var handler = function (e) {\n      if (guardEvent(e)) {\n        if (this$1.replace) {\n          router.replace(location, noop);\n        } else {\n          router.push(location, noop);\n        }\n      }\n    };\n\n    var on = { click: guardEvent };\n    if (Array.isArray(this.event)) {\n      this.event.forEach(function (e) {\n        on[e] = handler;\n      });\n    } else {\n      on[this.event] = handler;\n    }\n\n    var data = { class: classes };\n\n    var scopedSlot =\n      !this.$scopedSlots.$hasNormal &&\n      this.$scopedSlots.default &&\n      this.$scopedSlots.default({\n        href: href,\n        route: route,\n        navigate: handler,\n        isActive: classes[activeClass],\n        isExactActive: classes[exactActiveClass]\n      });\n\n    if (scopedSlot) {\n      if (process.env.NODE_ENV !== 'production' && !this.custom) {\n        !warnedCustomSlot && warn(false, 'In Vue Router 4, the v-slot API will by default wrap its content with an <a> element. Use the custom prop to remove this warning:\\n<router-link v-slot=\"{ navigate, href }\" custom></router-link>\\n');\n        warnedCustomSlot = true;\n      }\n      if (scopedSlot.length === 1) {\n        return scopedSlot[0]\n      } else if (scopedSlot.length > 1 || !scopedSlot.length) {\n        if (process.env.NODE_ENV !== 'production') {\n          warn(\n            false,\n            (\"<router-link> with to=\\\"\" + (this.to) + \"\\\" is trying to use a scoped slot but it didn't provide exactly one child. Wrapping the content with a span element.\")\n          );\n        }\n        return scopedSlot.length === 0 ? h() : h('span', {}, scopedSlot)\n      }\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      if ('tag' in this.$options.propsData && !warnedTagProp) {\n        warn(\n          false,\n          \"<router-link>'s tag prop is deprecated and has been removed in Vue Router 4. Use the v-slot API to remove this warning: https://next.router.vuejs.org/guide/migration/#removal-of-event-and-tag-props-in-router-link.\"\n        );\n        warnedTagProp = true;\n      }\n      if ('event' in this.$options.propsData && !warnedEventProp) {\n        warn(\n          false,\n          \"<router-link>'s event prop is deprecated and has been removed in Vue Router 4. Use the v-slot API to remove this warning: https://next.router.vuejs.org/guide/migration/#removal-of-event-and-tag-props-in-router-link.\"\n        );\n        warnedEventProp = true;\n      }\n    }\n\n    if (this.tag === 'a') {\n      data.on = on;\n      data.attrs = { href: href, 'aria-current': ariaCurrentValue };\n    } else {\n      // find the first <a> child and apply listener and href\n      var a = findAnchor(this.$slots.default);\n      if (a) {\n        // in case the <a> is a static node\n        a.isStatic = false;\n        var aData = (a.data = extend({}, a.data));\n        aData.on = aData.on || {};\n        // transform existing events in both objects into arrays so we can push later\n        for (var event in aData.on) {\n          var handler$1 = aData.on[event];\n          if (event in on) {\n            aData.on[event] = Array.isArray(handler$1) ? handler$1 : [handler$1];\n          }\n        }\n        // append new listeners for router-link\n        for (var event$1 in on) {\n          if (event$1 in aData.on) {\n            // on[event] is always a function\n            aData.on[event$1].push(on[event$1]);\n          } else {\n            aData.on[event$1] = handler;\n          }\n        }\n\n        var aAttrs = (a.data.attrs = extend({}, a.data.attrs));\n        aAttrs.href = href;\n        aAttrs['aria-current'] = ariaCurrentValue;\n      } else {\n        // doesn't have <a> child, apply listener to self\n        data.on = on;\n      }\n    }\n\n    return h(this.tag, data, this.$slots.default)\n  }\n};\n\nfunction guardEvent (e) {\n  // don't redirect with control keys\n  if (e.metaKey || e.altKey || e.ctrlKey || e.shiftKey) { return }\n  // don't redirect when preventDefault called\n  if (e.defaultPrevented) { return }\n  // don't redirect on right click\n  if (e.button !== undefined && e.button !== 0) { return }\n  // don't redirect if `target=\"_blank\"`\n  if (e.currentTarget && e.currentTarget.getAttribute) {\n    var target = e.currentTarget.getAttribute('target');\n    if (/\\b_blank\\b/i.test(target)) { return }\n  }\n  // this may be a Weex event which doesn't have this method\n  if (e.preventDefault) {\n    e.preventDefault();\n  }\n  return true\n}\n\nfunction findAnchor (children) {\n  if (children) {\n    var child;\n    for (var i = 0; i < children.length; i++) {\n      child = children[i];\n      if (child.tag === 'a') {\n        return child\n      }\n      if (child.children && (child = findAnchor(child.children))) {\n        return child\n      }\n    }\n  }\n}\n\nvar _Vue;\n\nfunction install (Vue) {\n  if (install.installed && _Vue === Vue) { return }\n  install.installed = true;\n\n  _Vue = Vue;\n\n  var isDef = function (v) { return v !== undefined; };\n\n  var registerInstance = function (vm, callVal) {\n    var i = vm.$options._parentVnode;\n    if (isDef(i) && isDef(i = i.data) && isDef(i = i.registerRouteInstance)) {\n      i(vm, callVal);\n    }\n  };\n\n  Vue.mixin({\n    beforeCreate: function beforeCreate () {\n      if (isDef(this.$options.router)) {\n        this._routerRoot = this;\n        this._router = this.$options.router;\n        this._router.init(this);\n        Vue.util.defineReactive(this, '_route', this._router.history.current);\n      } else {\n        this._routerRoot = (this.$parent && this.$parent._routerRoot) || this;\n      }\n      registerInstance(this, this);\n    },\n    destroyed: function destroyed () {\n      registerInstance(this);\n    }\n  });\n\n  Object.defineProperty(Vue.prototype, '$router', {\n    get: function get () { return this._routerRoot._router }\n  });\n\n  Object.defineProperty(Vue.prototype, '$route', {\n    get: function get () { return this._routerRoot._route }\n  });\n\n  Vue.component('RouterView', View);\n  Vue.component('RouterLink', Link);\n\n  var strats = Vue.config.optionMergeStrategies;\n  // use the same hook merging strategy for route hooks\n  strats.beforeRouteEnter = strats.beforeRouteLeave = strats.beforeRouteUpdate = strats.created;\n}\n\n/*  */\n\nvar inBrowser = typeof window !== 'undefined';\n\n/*  */\n\nfunction createRouteMap (\n  routes,\n  oldPathList,\n  oldPathMap,\n  oldNameMap,\n  parentRoute\n) {\n  // the path list is used to control path matching priority\n  var pathList = oldPathList || [];\n  // $flow-disable-line\n  var pathMap = oldPathMap || Object.create(null);\n  // $flow-disable-line\n  var nameMap = oldNameMap || Object.create(null);\n\n  routes.forEach(function (route) {\n    addRouteRecord(pathList, pathMap, nameMap, route, parentRoute);\n  });\n\n  // ensure wildcard routes are always at the end\n  for (var i = 0, l = pathList.length; i < l; i++) {\n    if (pathList[i] === '*') {\n      pathList.push(pathList.splice(i, 1)[0]);\n      l--;\n      i--;\n    }\n  }\n\n  if (process.env.NODE_ENV === 'development') {\n    // warn if routes do not include leading slashes\n    var found = pathList\n    // check for missing leading slash\n      .filter(function (path) { return path && path.charAt(0) !== '*' && path.charAt(0) !== '/'; });\n\n    if (found.length > 0) {\n      var pathNames = found.map(function (path) { return (\"- \" + path); }).join('\\n');\n      warn(false, (\"Non-nested routes must include a leading slash character. Fix the following routes: \\n\" + pathNames));\n    }\n  }\n\n  return {\n    pathList: pathList,\n    pathMap: pathMap,\n    nameMap: nameMap\n  }\n}\n\nfunction addRouteRecord (\n  pathList,\n  pathMap,\n  nameMap,\n  route,\n  parent,\n  matchAs\n) {\n  var path = route.path;\n  var name = route.name;\n  if (process.env.NODE_ENV !== 'production') {\n    assert(path != null, \"\\\"path\\\" is required in a route configuration.\");\n    assert(\n      typeof route.component !== 'string',\n      \"route config \\\"component\\\" for path: \" + (String(\n        path || name\n      )) + \" cannot be a \" + \"string id. Use an actual component instead.\"\n    );\n\n    warn(\n      // eslint-disable-next-line no-control-regex\n      !/[^\\u0000-\\u007F]+/.test(path),\n      \"Route with path \\\"\" + path + \"\\\" contains unencoded characters, make sure \" +\n        \"your path is correctly encoded before passing it to the router. Use \" +\n        \"encodeURI to encode static segments of your path.\"\n    );\n  }\n\n  var pathToRegexpOptions =\n    route.pathToRegexpOptions || {};\n  var normalizedPath = normalizePath(path, parent, pathToRegexpOptions.strict);\n\n  if (typeof route.caseSensitive === 'boolean') {\n    pathToRegexpOptions.sensitive = route.caseSensitive;\n  }\n\n  var record = {\n    path: normalizedPath,\n    regex: compileRouteRegex(normalizedPath, pathToRegexpOptions),\n    components: route.components || { default: route.component },\n    alias: route.alias\n      ? typeof route.alias === 'string'\n        ? [route.alias]\n        : route.alias\n      : [],\n    instances: {},\n    enteredCbs: {},\n    name: name,\n    parent: parent,\n    matchAs: matchAs,\n    redirect: route.redirect,\n    beforeEnter: route.beforeEnter,\n    meta: route.meta || {},\n    props:\n      route.props == null\n        ? {}\n        : route.components\n          ? route.props\n          : { default: route.props }\n  };\n\n  if (route.children) {\n    // Warn if route is named, does not redirect and has a default child route.\n    // If users navigate to this route by name, the default child will\n    // not be rendered (GH Issue #629)\n    if (process.env.NODE_ENV !== 'production') {\n      if (\n        route.name &&\n        !route.redirect &&\n        route.children.some(function (child) { return /^\\/?$/.test(child.path); })\n      ) {\n        warn(\n          false,\n          \"Named Route '\" + (route.name) + \"' has a default child route. \" +\n            \"When navigating to this named route (:to=\\\"{name: '\" + (route.name) + \"'\\\"), \" +\n            \"the default child route will not be rendered. Remove the name from \" +\n            \"this route and use the name of the default child route for named \" +\n            \"links instead.\"\n        );\n      }\n    }\n    route.children.forEach(function (child) {\n      var childMatchAs = matchAs\n        ? cleanPath((matchAs + \"/\" + (child.path)))\n        : undefined;\n      addRouteRecord(pathList, pathMap, nameMap, child, record, childMatchAs);\n    });\n  }\n\n  if (!pathMap[record.path]) {\n    pathList.push(record.path);\n    pathMap[record.path] = record;\n  }\n\n  if (route.alias !== undefined) {\n    var aliases = Array.isArray(route.alias) ? route.alias : [route.alias];\n    for (var i = 0; i < aliases.length; ++i) {\n      var alias = aliases[i];\n      if (process.env.NODE_ENV !== 'production' && alias === path) {\n        warn(\n          false,\n          (\"Found an alias with the same value as the path: \\\"\" + path + \"\\\". You have to remove that alias. It will be ignored in development.\")\n        );\n        // skip in dev to make it work\n        continue\n      }\n\n      var aliasRoute = {\n        path: alias,\n        children: route.children\n      };\n      addRouteRecord(\n        pathList,\n        pathMap,\n        nameMap,\n        aliasRoute,\n        parent,\n        record.path || '/' // matchAs\n      );\n    }\n  }\n\n  if (name) {\n    if (!nameMap[name]) {\n      nameMap[name] = record;\n    } else if (process.env.NODE_ENV !== 'production' && !matchAs) {\n      warn(\n        false,\n        \"Duplicate named routes definition: \" +\n          \"{ name: \\\"\" + name + \"\\\", path: \\\"\" + (record.path) + \"\\\" }\"\n      );\n    }\n  }\n}\n\nfunction compileRouteRegex (\n  path,\n  pathToRegexpOptions\n) {\n  var regex = pathToRegexp_1(path, [], pathToRegexpOptions);\n  if (process.env.NODE_ENV !== 'production') {\n    var keys = Object.create(null);\n    regex.keys.forEach(function (key) {\n      warn(\n        !keys[key.name],\n        (\"Duplicate param keys in route with path: \\\"\" + path + \"\\\"\")\n      );\n      keys[key.name] = true;\n    });\n  }\n  return regex\n}\n\nfunction normalizePath (\n  path,\n  parent,\n  strict\n) {\n  if (!strict) { path = path.replace(/\\/$/, ''); }\n  if (path[0] === '/') { return path }\n  if (parent == null) { return path }\n  return cleanPath(((parent.path) + \"/\" + path))\n}\n\n/*  */\n\n\n\nfunction createMatcher (\n  routes,\n  router\n) {\n  var ref = createRouteMap(routes);\n  var pathList = ref.pathList;\n  var pathMap = ref.pathMap;\n  var nameMap = ref.nameMap;\n\n  function addRoutes (routes) {\n    createRouteMap(routes, pathList, pathMap, nameMap);\n  }\n\n  function addRoute (parentOrRoute, route) {\n    var parent = (typeof parentOrRoute !== 'object') ? nameMap[parentOrRoute] : undefined;\n    // $flow-disable-line\n    createRouteMap([route || parentOrRoute], pathList, pathMap, nameMap, parent);\n\n    // add aliases of parent\n    if (parent) {\n      createRouteMap(\n        // $flow-disable-line route is defined if parent is\n        parent.alias.map(function (alias) { return ({ path: alias, children: [route] }); }),\n        pathList,\n        pathMap,\n        nameMap,\n        parent\n      );\n    }\n  }\n\n  function getRoutes () {\n    return pathList.map(function (path) { return pathMap[path]; })\n  }\n\n  function match (\n    raw,\n    currentRoute,\n    redirectedFrom\n  ) {\n    var location = normalizeLocation(raw, currentRoute, false, router);\n    var name = location.name;\n\n    if (name) {\n      var record = nameMap[name];\n      if (process.env.NODE_ENV !== 'production') {\n        warn(record, (\"Route with name '\" + name + \"' does not exist\"));\n      }\n      if (!record) { return _createRoute(null, location) }\n      var paramNames = record.regex.keys\n        .filter(function (key) { return !key.optional; })\n        .map(function (key) { return key.name; });\n\n      if (typeof location.params !== 'object') {\n        location.params = {};\n      }\n\n      if (currentRoute && typeof currentRoute.params === 'object') {\n        for (var key in currentRoute.params) {\n          if (!(key in location.params) && paramNames.indexOf(key) > -1) {\n            location.params[key] = currentRoute.params[key];\n          }\n        }\n      }\n\n      location.path = fillParams(record.path, location.params, (\"named route \\\"\" + name + \"\\\"\"));\n      return _createRoute(record, location, redirectedFrom)\n    } else if (location.path) {\n      location.params = {};\n      for (var i = 0; i < pathList.length; i++) {\n        var path = pathList[i];\n        var record$1 = pathMap[path];\n        if (matchRoute(record$1.regex, location.path, location.params)) {\n          return _createRoute(record$1, location, redirectedFrom)\n        }\n      }\n    }\n    // no match\n    return _createRoute(null, location)\n  }\n\n  function redirect (\n    record,\n    location\n  ) {\n    var originalRedirect = record.redirect;\n    var redirect = typeof originalRedirect === 'function'\n      ? originalRedirect(createRoute(record, location, null, router))\n      : originalRedirect;\n\n    if (typeof redirect === 'string') {\n      redirect = { path: redirect };\n    }\n\n    if (!redirect || typeof redirect !== 'object') {\n      if (process.env.NODE_ENV !== 'production') {\n        warn(\n          false, (\"invalid redirect option: \" + (JSON.stringify(redirect)))\n        );\n      }\n      return _createRoute(null, location)\n    }\n\n    var re = redirect;\n    var name = re.name;\n    var path = re.path;\n    var query = location.query;\n    var hash = location.hash;\n    var params = location.params;\n    query = re.hasOwnProperty('query') ? re.query : query;\n    hash = re.hasOwnProperty('hash') ? re.hash : hash;\n    params = re.hasOwnProperty('params') ? re.params : params;\n\n    if (name) {\n      // resolved named direct\n      var targetRecord = nameMap[name];\n      if (process.env.NODE_ENV !== 'production') {\n        assert(targetRecord, (\"redirect failed: named route \\\"\" + name + \"\\\" not found.\"));\n      }\n      return match({\n        _normalized: true,\n        name: name,\n        query: query,\n        hash: hash,\n        params: params\n      }, undefined, location)\n    } else if (path) {\n      // 1. resolve relative redirect\n      var rawPath = resolveRecordPath(path, record);\n      // 2. resolve params\n      var resolvedPath = fillParams(rawPath, params, (\"redirect route with path \\\"\" + rawPath + \"\\\"\"));\n      // 3. rematch with existing query and hash\n      return match({\n        _normalized: true,\n        path: resolvedPath,\n        query: query,\n        hash: hash\n      }, undefined, location)\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        warn(false, (\"invalid redirect option: \" + (JSON.stringify(redirect))));\n      }\n      return _createRoute(null, location)\n    }\n  }\n\n  function alias (\n    record,\n    location,\n    matchAs\n  ) {\n    var aliasedPath = fillParams(matchAs, location.params, (\"aliased route with path \\\"\" + matchAs + \"\\\"\"));\n    var aliasedMatch = match({\n      _normalized: true,\n      path: aliasedPath\n    });\n    if (aliasedMatch) {\n      var matched = aliasedMatch.matched;\n      var aliasedRecord = matched[matched.length - 1];\n      location.params = aliasedMatch.params;\n      return _createRoute(aliasedRecord, location)\n    }\n    return _createRoute(null, location)\n  }\n\n  function _createRoute (\n    record,\n    location,\n    redirectedFrom\n  ) {\n    if (record && record.redirect) {\n      return redirect(record, redirectedFrom || location)\n    }\n    if (record && record.matchAs) {\n      return alias(record, location, record.matchAs)\n    }\n    return createRoute(record, location, redirectedFrom, router)\n  }\n\n  return {\n    match: match,\n    addRoute: addRoute,\n    getRoutes: getRoutes,\n    addRoutes: addRoutes\n  }\n}\n\nfunction matchRoute (\n  regex,\n  path,\n  params\n) {\n  var m = path.match(regex);\n\n  if (!m) {\n    return false\n  } else if (!params) {\n    return true\n  }\n\n  for (var i = 1, len = m.length; i < len; ++i) {\n    var key = regex.keys[i - 1];\n    if (key) {\n      // Fix #1994: using * with props: true generates a param named 0\n      params[key.name || 'pathMatch'] = typeof m[i] === 'string' ? decode(m[i]) : m[i];\n    }\n  }\n\n  return true\n}\n\nfunction resolveRecordPath (path, record) {\n  return resolvePath(path, record.parent ? record.parent.path : '/', true)\n}\n\n/*  */\n\n// use User Timing api (if present) for more accurate key precision\nvar Time =\n  inBrowser && window.performance && window.performance.now\n    ? window.performance\n    : Date;\n\nfunction genStateKey () {\n  return Time.now().toFixed(3)\n}\n\nvar _key = genStateKey();\n\nfunction getStateKey () {\n  return _key\n}\n\nfunction setStateKey (key) {\n  return (_key = key)\n}\n\n/*  */\n\nvar positionStore = Object.create(null);\n\nfunction setupScroll () {\n  // Prevent browser scroll behavior on History popstate\n  if ('scrollRestoration' in window.history) {\n    window.history.scrollRestoration = 'manual';\n  }\n  // Fix for #1585 for Firefox\n  // Fix for #2195 Add optional third attribute to workaround a bug in safari https://bugs.webkit.org/show_bug.cgi?id=182678\n  // Fix for #2774 Support for apps loaded from Windows file shares not mapped to network drives: replaced location.origin with\n  // window.location.protocol + '//' + window.location.host\n  // location.host contains the port and location.hostname doesn't\n  var protocolAndPath = window.location.protocol + '//' + window.location.host;\n  var absolutePath = window.location.href.replace(protocolAndPath, '');\n  // preserve existing history state as it could be overriden by the user\n  var stateCopy = extend({}, window.history.state);\n  stateCopy.key = getStateKey();\n  window.history.replaceState(stateCopy, '', absolutePath);\n  window.addEventListener('popstate', handlePopState);\n  return function () {\n    window.removeEventListener('popstate', handlePopState);\n  }\n}\n\nfunction handleScroll (\n  router,\n  to,\n  from,\n  isPop\n) {\n  if (!router.app) {\n    return\n  }\n\n  var behavior = router.options.scrollBehavior;\n  if (!behavior) {\n    return\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    assert(typeof behavior === 'function', \"scrollBehavior must be a function\");\n  }\n\n  // wait until re-render finishes before scrolling\n  router.app.$nextTick(function () {\n    var position = getScrollPosition();\n    var shouldScroll = behavior.call(\n      router,\n      to,\n      from,\n      isPop ? position : null\n    );\n\n    if (!shouldScroll) {\n      return\n    }\n\n    if (typeof shouldScroll.then === 'function') {\n      shouldScroll\n        .then(function (shouldScroll) {\n          scrollToPosition((shouldScroll), position);\n        })\n        .catch(function (err) {\n          if (process.env.NODE_ENV !== 'production') {\n            assert(false, err.toString());\n          }\n        });\n    } else {\n      scrollToPosition(shouldScroll, position);\n    }\n  });\n}\n\nfunction saveScrollPosition () {\n  var key = getStateKey();\n  if (key) {\n    positionStore[key] = {\n      x: window.pageXOffset,\n      y: window.pageYOffset\n    };\n  }\n}\n\nfunction handlePopState (e) {\n  saveScrollPosition();\n  if (e.state && e.state.key) {\n    setStateKey(e.state.key);\n  }\n}\n\nfunction getScrollPosition () {\n  var key = getStateKey();\n  if (key) {\n    return positionStore[key]\n  }\n}\n\nfunction getElementPosition (el, offset) {\n  var docEl = document.documentElement;\n  var docRect = docEl.getBoundingClientRect();\n  var elRect = el.getBoundingClientRect();\n  return {\n    x: elRect.left - docRect.left - offset.x,\n    y: elRect.top - docRect.top - offset.y\n  }\n}\n\nfunction isValidPosition (obj) {\n  return isNumber(obj.x) || isNumber(obj.y)\n}\n\nfunction normalizePosition (obj) {\n  return {\n    x: isNumber(obj.x) ? obj.x : window.pageXOffset,\n    y: isNumber(obj.y) ? obj.y : window.pageYOffset\n  }\n}\n\nfunction normalizeOffset (obj) {\n  return {\n    x: isNumber(obj.x) ? obj.x : 0,\n    y: isNumber(obj.y) ? obj.y : 0\n  }\n}\n\nfunction isNumber (v) {\n  return typeof v === 'number'\n}\n\nvar hashStartsWithNumberRE = /^#\\d/;\n\nfunction scrollToPosition (shouldScroll, position) {\n  var isObject = typeof shouldScroll === 'object';\n  if (isObject && typeof shouldScroll.selector === 'string') {\n    // getElementById would still fail if the selector contains a more complicated query like #main[data-attr]\n    // but at the same time, it doesn't make much sense to select an element with an id and an extra selector\n    var el = hashStartsWithNumberRE.test(shouldScroll.selector) // $flow-disable-line\n      ? document.getElementById(shouldScroll.selector.slice(1)) // $flow-disable-line\n      : document.querySelector(shouldScroll.selector);\n\n    if (el) {\n      var offset =\n        shouldScroll.offset && typeof shouldScroll.offset === 'object'\n          ? shouldScroll.offset\n          : {};\n      offset = normalizeOffset(offset);\n      position = getElementPosition(el, offset);\n    } else if (isValidPosition(shouldScroll)) {\n      position = normalizePosition(shouldScroll);\n    }\n  } else if (isObject && isValidPosition(shouldScroll)) {\n    position = normalizePosition(shouldScroll);\n  }\n\n  if (position) {\n    // $flow-disable-line\n    if ('scrollBehavior' in document.documentElement.style) {\n      window.scrollTo({\n        left: position.x,\n        top: position.y,\n        // $flow-disable-line\n        behavior: shouldScroll.behavior\n      });\n    } else {\n      window.scrollTo(position.x, position.y);\n    }\n  }\n}\n\n/*  */\n\nvar supportsPushState =\n  inBrowser &&\n  (function () {\n    var ua = window.navigator.userAgent;\n\n    if (\n      (ua.indexOf('Android 2.') !== -1 || ua.indexOf('Android 4.0') !== -1) &&\n      ua.indexOf('Mobile Safari') !== -1 &&\n      ua.indexOf('Chrome') === -1 &&\n      ua.indexOf('Windows Phone') === -1\n    ) {\n      return false\n    }\n\n    return window.history && typeof window.history.pushState === 'function'\n  })();\n\nfunction pushState (url, replace) {\n  saveScrollPosition();\n  // try...catch the pushState call to get around Safari\n  // DOM Exception 18 where it limits to 100 pushState calls\n  var history = window.history;\n  try {\n    if (replace) {\n      // preserve existing history state as it could be overriden by the user\n      var stateCopy = extend({}, history.state);\n      stateCopy.key = getStateKey();\n      history.replaceState(stateCopy, '', url);\n    } else {\n      history.pushState({ key: setStateKey(genStateKey()) }, '', url);\n    }\n  } catch (e) {\n    window.location[replace ? 'replace' : 'assign'](url);\n  }\n}\n\nfunction replaceState (url) {\n  pushState(url, true);\n}\n\n/*  */\n\nfunction runQueue (queue, fn, cb) {\n  var step = function (index) {\n    if (index >= queue.length) {\n      cb();\n    } else {\n      if (queue[index]) {\n        fn(queue[index], function () {\n          step(index + 1);\n        });\n      } else {\n        step(index + 1);\n      }\n    }\n  };\n  step(0);\n}\n\n// When changing thing, also edit router.d.ts\nvar NavigationFailureType = {\n  redirected: 2,\n  aborted: 4,\n  cancelled: 8,\n  duplicated: 16\n};\n\nfunction createNavigationRedirectedError (from, to) {\n  return createRouterError(\n    from,\n    to,\n    NavigationFailureType.redirected,\n    (\"Redirected when going from \\\"\" + (from.fullPath) + \"\\\" to \\\"\" + (stringifyRoute(\n      to\n    )) + \"\\\" via a navigation guard.\")\n  )\n}\n\nfunction createNavigationDuplicatedError (from, to) {\n  var error = createRouterError(\n    from,\n    to,\n    NavigationFailureType.duplicated,\n    (\"Avoided redundant navigation to current location: \\\"\" + (from.fullPath) + \"\\\".\")\n  );\n  // backwards compatible with the first introduction of Errors\n  error.name = 'NavigationDuplicated';\n  return error\n}\n\nfunction createNavigationCancelledError (from, to) {\n  return createRouterError(\n    from,\n    to,\n    NavigationFailureType.cancelled,\n    (\"Navigation cancelled from \\\"\" + (from.fullPath) + \"\\\" to \\\"\" + (to.fullPath) + \"\\\" with a new navigation.\")\n  )\n}\n\nfunction createNavigationAbortedError (from, to) {\n  return createRouterError(\n    from,\n    to,\n    NavigationFailureType.aborted,\n    (\"Navigation aborted from \\\"\" + (from.fullPath) + \"\\\" to \\\"\" + (to.fullPath) + \"\\\" via a navigation guard.\")\n  )\n}\n\nfunction createRouterError (from, to, type, message) {\n  var error = new Error(message);\n  error._isRouter = true;\n  error.from = from;\n  error.to = to;\n  error.type = type;\n\n  return error\n}\n\nvar propertiesToLog = ['params', 'query', 'hash'];\n\nfunction stringifyRoute (to) {\n  if (typeof to === 'string') { return to }\n  if ('path' in to) { return to.path }\n  var location = {};\n  propertiesToLog.forEach(function (key) {\n    if (key in to) { location[key] = to[key]; }\n  });\n  return JSON.stringify(location, null, 2)\n}\n\nfunction isError (err) {\n  return Object.prototype.toString.call(err).indexOf('Error') > -1\n}\n\nfunction isNavigationFailure (err, errorType) {\n  return (\n    isError(err) &&\n    err._isRouter &&\n    (errorType == null || err.type === errorType)\n  )\n}\n\n/*  */\n\nfunction resolveAsyncComponents (matched) {\n  return function (to, from, next) {\n    var hasAsync = false;\n    var pending = 0;\n    var error = null;\n\n    flatMapComponents(matched, function (def, _, match, key) {\n      // if it's a function and doesn't have cid attached,\n      // assume it's an async component resolve function.\n      // we are not using Vue's default async resolving mechanism because\n      // we want to halt the navigation until the incoming component has been\n      // resolved.\n      if (typeof def === 'function' && def.cid === undefined) {\n        hasAsync = true;\n        pending++;\n\n        var resolve = once(function (resolvedDef) {\n          if (isESModule(resolvedDef)) {\n            resolvedDef = resolvedDef.default;\n          }\n          // save resolved on async factory in case it's used elsewhere\n          def.resolved = typeof resolvedDef === 'function'\n            ? resolvedDef\n            : _Vue.extend(resolvedDef);\n          match.components[key] = resolvedDef;\n          pending--;\n          if (pending <= 0) {\n            next();\n          }\n        });\n\n        var reject = once(function (reason) {\n          var msg = \"Failed to resolve async component \" + key + \": \" + reason;\n          process.env.NODE_ENV !== 'production' && warn(false, msg);\n          if (!error) {\n            error = isError(reason)\n              ? reason\n              : new Error(msg);\n            next(error);\n          }\n        });\n\n        var res;\n        try {\n          res = def(resolve, reject);\n        } catch (e) {\n          reject(e);\n        }\n        if (res) {\n          if (typeof res.then === 'function') {\n            res.then(resolve, reject);\n          } else {\n            // new syntax in Vue 2.3\n            var comp = res.component;\n            if (comp && typeof comp.then === 'function') {\n              comp.then(resolve, reject);\n            }\n          }\n        }\n      }\n    });\n\n    if (!hasAsync) { next(); }\n  }\n}\n\nfunction flatMapComponents (\n  matched,\n  fn\n) {\n  return flatten(matched.map(function (m) {\n    return Object.keys(m.components).map(function (key) { return fn(\n      m.components[key],\n      m.instances[key],\n      m, key\n    ); })\n  }))\n}\n\nfunction flatten (arr) {\n  return Array.prototype.concat.apply([], arr)\n}\n\nvar hasSymbol =\n  typeof Symbol === 'function' &&\n  typeof Symbol.toStringTag === 'symbol';\n\nfunction isESModule (obj) {\n  return obj.__esModule || (hasSymbol && obj[Symbol.toStringTag] === 'Module')\n}\n\n// in Webpack 2, require.ensure now also returns a Promise\n// so the resolve/reject functions may get called an extra time\n// if the user uses an arrow function shorthand that happens to\n// return that Promise.\nfunction once (fn) {\n  var called = false;\n  return function () {\n    var args = [], len = arguments.length;\n    while ( len-- ) args[ len ] = arguments[ len ];\n\n    if (called) { return }\n    called = true;\n    return fn.apply(this, args)\n  }\n}\n\n/*  */\n\nvar History = function History (router, base) {\n  this.router = router;\n  this.base = normalizeBase(base);\n  // start with a route object that stands for \"nowhere\"\n  this.current = START;\n  this.pending = null;\n  this.ready = false;\n  this.readyCbs = [];\n  this.readyErrorCbs = [];\n  this.errorCbs = [];\n  this.listeners = [];\n};\n\nHistory.prototype.listen = function listen (cb) {\n  this.cb = cb;\n};\n\nHistory.prototype.onReady = function onReady (cb, errorCb) {\n  if (this.ready) {\n    cb();\n  } else {\n    this.readyCbs.push(cb);\n    if (errorCb) {\n      this.readyErrorCbs.push(errorCb);\n    }\n  }\n};\n\nHistory.prototype.onError = function onError (errorCb) {\n  this.errorCbs.push(errorCb);\n};\n\nHistory.prototype.transitionTo = function transitionTo (\n  location,\n  onComplete,\n  onAbort\n) {\n    var this$1 = this;\n\n  var route;\n  // catch redirect option https://github.com/vuejs/vue-router/issues/3201\n  try {\n    route = this.router.match(location, this.current);\n  } catch (e) {\n    this.errorCbs.forEach(function (cb) {\n      cb(e);\n    });\n    // Exception should still be thrown\n    throw e\n  }\n  var prev = this.current;\n  this.confirmTransition(\n    route,\n    function () {\n      this$1.updateRoute(route);\n      onComplete && onComplete(route);\n      this$1.ensureURL();\n      this$1.router.afterHooks.forEach(function (hook) {\n        hook && hook(route, prev);\n      });\n\n      // fire ready cbs once\n      if (!this$1.ready) {\n        this$1.ready = true;\n        this$1.readyCbs.forEach(function (cb) {\n          cb(route);\n        });\n      }\n    },\n    function (err) {\n      if (onAbort) {\n        onAbort(err);\n      }\n      if (err && !this$1.ready) {\n        // Initial redirection should not mark the history as ready yet\n        // because it's triggered by the redirection instead\n        // https://github.com/vuejs/vue-router/issues/3225\n        // https://github.com/vuejs/vue-router/issues/3331\n        if (!isNavigationFailure(err, NavigationFailureType.redirected) || prev !== START) {\n          this$1.ready = true;\n          this$1.readyErrorCbs.forEach(function (cb) {\n            cb(err);\n          });\n        }\n      }\n    }\n  );\n};\n\nHistory.prototype.confirmTransition = function confirmTransition (route, onComplete, onAbort) {\n    var this$1 = this;\n\n  var current = this.current;\n  this.pending = route;\n  var abort = function (err) {\n    // changed after adding errors with\n    // https://github.com/vuejs/vue-router/pull/3047 before that change,\n    // redirect and aborted navigation would produce an err == null\n    if (!isNavigationFailure(err) && isError(err)) {\n      if (this$1.errorCbs.length) {\n        this$1.errorCbs.forEach(function (cb) {\n          cb(err);\n        });\n      } else {\n        warn(false, 'uncaught error during route navigation:');\n        console.error(err);\n      }\n    }\n    onAbort && onAbort(err);\n  };\n  var lastRouteIndex = route.matched.length - 1;\n  var lastCurrentIndex = current.matched.length - 1;\n  if (\n    isSameRoute(route, current) &&\n    // in the case the route map has been dynamically appended to\n    lastRouteIndex === lastCurrentIndex &&\n    route.matched[lastRouteIndex] === current.matched[lastCurrentIndex]\n  ) {\n    this.ensureURL();\n    return abort(createNavigationDuplicatedError(current, route))\n  }\n\n  var ref = resolveQueue(\n    this.current.matched,\n    route.matched\n  );\n    var updated = ref.updated;\n    var deactivated = ref.deactivated;\n    var activated = ref.activated;\n\n  var queue = [].concat(\n    // in-component leave guards\n    extractLeaveGuards(deactivated),\n    // global before hooks\n    this.router.beforeHooks,\n    // in-component update hooks\n    extractUpdateHooks(updated),\n    // in-config enter guards\n    activated.map(function (m) { return m.beforeEnter; }),\n    // async components\n    resolveAsyncComponents(activated)\n  );\n\n  var iterator = function (hook, next) {\n    if (this$1.pending !== route) {\n      return abort(createNavigationCancelledError(current, route))\n    }\n    try {\n      hook(route, current, function (to) {\n        if (to === false) {\n          // next(false) -> abort navigation, ensure current URL\n          this$1.ensureURL(true);\n          abort(createNavigationAbortedError(current, route));\n        } else if (isError(to)) {\n          this$1.ensureURL(true);\n          abort(to);\n        } else if (\n          typeof to === 'string' ||\n          (typeof to === 'object' &&\n            (typeof to.path === 'string' || typeof to.name === 'string'))\n        ) {\n          // next('/') or next({ path: '/' }) -> redirect\n          abort(createNavigationRedirectedError(current, route));\n          if (typeof to === 'object' && to.replace) {\n            this$1.replace(to);\n          } else {\n            this$1.push(to);\n          }\n        } else {\n          // confirm transition and pass on the value\n          next(to);\n        }\n      });\n    } catch (e) {\n      abort(e);\n    }\n  };\n\n  runQueue(queue, iterator, function () {\n    // wait until async components are resolved before\n    // extracting in-component enter guards\n    var enterGuards = extractEnterGuards(activated);\n    var queue = enterGuards.concat(this$1.router.resolveHooks);\n    runQueue(queue, iterator, function () {\n      if (this$1.pending !== route) {\n        return abort(createNavigationCancelledError(current, route))\n      }\n      this$1.pending = null;\n      onComplete(route);\n      if (this$1.router.app) {\n        this$1.router.app.$nextTick(function () {\n          handleRouteEntered(route);\n        });\n      }\n    });\n  });\n};\n\nHistory.prototype.updateRoute = function updateRoute (route) {\n  this.current = route;\n  this.cb && this.cb(route);\n};\n\nHistory.prototype.setupListeners = function setupListeners () {\n  // Default implementation is empty\n};\n\nHistory.prototype.teardown = function teardown () {\n  // clean up event listeners\n  // https://github.com/vuejs/vue-router/issues/2341\n  this.listeners.forEach(function (cleanupListener) {\n    cleanupListener();\n  });\n  this.listeners = [];\n\n  // reset current history route\n  // https://github.com/vuejs/vue-router/issues/3294\n  this.current = START;\n  this.pending = null;\n};\n\nfunction normalizeBase (base) {\n  if (!base) {\n    if (inBrowser) {\n      // respect <base> tag\n      var baseEl = document.querySelector('base');\n      base = (baseEl && baseEl.getAttribute('href')) || '/';\n      // strip full URL origin\n      base = base.replace(/^https?:\\/\\/[^\\/]+/, '');\n    } else {\n      base = '/';\n    }\n  }\n  // make sure there's the starting slash\n  if (base.charAt(0) !== '/') {\n    base = '/' + base;\n  }\n  // remove trailing slash\n  return base.replace(/\\/$/, '')\n}\n\nfunction resolveQueue (\n  current,\n  next\n) {\n  var i;\n  var max = Math.max(current.length, next.length);\n  for (i = 0; i < max; i++) {\n    if (current[i] !== next[i]) {\n      break\n    }\n  }\n  return {\n    updated: next.slice(0, i),\n    activated: next.slice(i),\n    deactivated: current.slice(i)\n  }\n}\n\nfunction extractGuards (\n  records,\n  name,\n  bind,\n  reverse\n) {\n  var guards = flatMapComponents(records, function (def, instance, match, key) {\n    var guard = extractGuard(def, name);\n    if (guard) {\n      return Array.isArray(guard)\n        ? guard.map(function (guard) { return bind(guard, instance, match, key); })\n        : bind(guard, instance, match, key)\n    }\n  });\n  return flatten(reverse ? guards.reverse() : guards)\n}\n\nfunction extractGuard (\n  def,\n  key\n) {\n  if (typeof def !== 'function') {\n    // extend now so that global mixins are applied.\n    def = _Vue.extend(def);\n  }\n  return def.options[key]\n}\n\nfunction extractLeaveGuards (deactivated) {\n  return extractGuards(deactivated, 'beforeRouteLeave', bindGuard, true)\n}\n\nfunction extractUpdateHooks (updated) {\n  return extractGuards(updated, 'beforeRouteUpdate', bindGuard)\n}\n\nfunction bindGuard (guard, instance) {\n  if (instance) {\n    return function boundRouteGuard () {\n      return guard.apply(instance, arguments)\n    }\n  }\n}\n\nfunction extractEnterGuards (\n  activated\n) {\n  return extractGuards(\n    activated,\n    'beforeRouteEnter',\n    function (guard, _, match, key) {\n      return bindEnterGuard(guard, match, key)\n    }\n  )\n}\n\nfunction bindEnterGuard (\n  guard,\n  match,\n  key\n) {\n  return function routeEnterGuard (to, from, next) {\n    return guard(to, from, function (cb) {\n      if (typeof cb === 'function') {\n        if (!match.enteredCbs[key]) {\n          match.enteredCbs[key] = [];\n        }\n        match.enteredCbs[key].push(cb);\n      }\n      next(cb);\n    })\n  }\n}\n\n/*  */\n\nvar HTML5History = /*@__PURE__*/(function (History) {\n  function HTML5History (router, base) {\n    History.call(this, router, base);\n\n    this._startLocation = getLocation(this.base);\n  }\n\n  if ( History ) HTML5History.__proto__ = History;\n  HTML5History.prototype = Object.create( History && History.prototype );\n  HTML5History.prototype.constructor = HTML5History;\n\n  HTML5History.prototype.setupListeners = function setupListeners () {\n    var this$1 = this;\n\n    if (this.listeners.length > 0) {\n      return\n    }\n\n    var router = this.router;\n    var expectScroll = router.options.scrollBehavior;\n    var supportsScroll = supportsPushState && expectScroll;\n\n    if (supportsScroll) {\n      this.listeners.push(setupScroll());\n    }\n\n    var handleRoutingEvent = function () {\n      var current = this$1.current;\n\n      // Avoiding first `popstate` event dispatched in some browsers but first\n      // history route not updated since async guard at the same time.\n      var location = getLocation(this$1.base);\n      if (this$1.current === START && location === this$1._startLocation) {\n        return\n      }\n\n      this$1.transitionTo(location, function (route) {\n        if (supportsScroll) {\n          handleScroll(router, route, current, true);\n        }\n      });\n    };\n    window.addEventListener('popstate', handleRoutingEvent);\n    this.listeners.push(function () {\n      window.removeEventListener('popstate', handleRoutingEvent);\n    });\n  };\n\n  HTML5History.prototype.go = function go (n) {\n    window.history.go(n);\n  };\n\n  HTML5History.prototype.push = function push (location, onComplete, onAbort) {\n    var this$1 = this;\n\n    var ref = this;\n    var fromRoute = ref.current;\n    this.transitionTo(location, function (route) {\n      pushState(cleanPath(this$1.base + route.fullPath));\n      handleScroll(this$1.router, route, fromRoute, false);\n      onComplete && onComplete(route);\n    }, onAbort);\n  };\n\n  HTML5History.prototype.replace = function replace (location, onComplete, onAbort) {\n    var this$1 = this;\n\n    var ref = this;\n    var fromRoute = ref.current;\n    this.transitionTo(location, function (route) {\n      replaceState(cleanPath(this$1.base + route.fullPath));\n      handleScroll(this$1.router, route, fromRoute, false);\n      onComplete && onComplete(route);\n    }, onAbort);\n  };\n\n  HTML5History.prototype.ensureURL = function ensureURL (push) {\n    if (getLocation(this.base) !== this.current.fullPath) {\n      var current = cleanPath(this.base + this.current.fullPath);\n      push ? pushState(current) : replaceState(current);\n    }\n  };\n\n  HTML5History.prototype.getCurrentLocation = function getCurrentLocation () {\n    return getLocation(this.base)\n  };\n\n  return HTML5History;\n}(History));\n\nfunction getLocation (base) {\n  var path = window.location.pathname;\n  if (base && path.toLowerCase().indexOf(base.toLowerCase()) === 0) {\n    path = path.slice(base.length);\n  }\n  return (path || '/') + window.location.search + window.location.hash\n}\n\n/*  */\n\nvar HashHistory = /*@__PURE__*/(function (History) {\n  function HashHistory (router, base, fallback) {\n    History.call(this, router, base);\n    // check history fallback deeplinking\n    if (fallback && checkFallback(this.base)) {\n      return\n    }\n    ensureSlash();\n  }\n\n  if ( History ) HashHistory.__proto__ = History;\n  HashHistory.prototype = Object.create( History && History.prototype );\n  HashHistory.prototype.constructor = HashHistory;\n\n  // this is delayed until the app mounts\n  // to avoid the hashchange listener being fired too early\n  HashHistory.prototype.setupListeners = function setupListeners () {\n    var this$1 = this;\n\n    if (this.listeners.length > 0) {\n      return\n    }\n\n    var router = this.router;\n    var expectScroll = router.options.scrollBehavior;\n    var supportsScroll = supportsPushState && expectScroll;\n\n    if (supportsScroll) {\n      this.listeners.push(setupScroll());\n    }\n\n    var handleRoutingEvent = function () {\n      var current = this$1.current;\n      if (!ensureSlash()) {\n        return\n      }\n      this$1.transitionTo(getHash(), function (route) {\n        if (supportsScroll) {\n          handleScroll(this$1.router, route, current, true);\n        }\n        if (!supportsPushState) {\n          replaceHash(route.fullPath);\n        }\n      });\n    };\n    var eventType = supportsPushState ? 'popstate' : 'hashchange';\n    window.addEventListener(\n      eventType,\n      handleRoutingEvent\n    );\n    this.listeners.push(function () {\n      window.removeEventListener(eventType, handleRoutingEvent);\n    });\n  };\n\n  HashHistory.prototype.push = function push (location, onComplete, onAbort) {\n    var this$1 = this;\n\n    var ref = this;\n    var fromRoute = ref.current;\n    this.transitionTo(\n      location,\n      function (route) {\n        pushHash(route.fullPath);\n        handleScroll(this$1.router, route, fromRoute, false);\n        onComplete && onComplete(route);\n      },\n      onAbort\n    );\n  };\n\n  HashHistory.prototype.replace = function replace (location, onComplete, onAbort) {\n    var this$1 = this;\n\n    var ref = this;\n    var fromRoute = ref.current;\n    this.transitionTo(\n      location,\n      function (route) {\n        replaceHash(route.fullPath);\n        handleScroll(this$1.router, route, fromRoute, false);\n        onComplete && onComplete(route);\n      },\n      onAbort\n    );\n  };\n\n  HashHistory.prototype.go = function go (n) {\n    window.history.go(n);\n  };\n\n  HashHistory.prototype.ensureURL = function ensureURL (push) {\n    var current = this.current.fullPath;\n    if (getHash() !== current) {\n      push ? pushHash(current) : replaceHash(current);\n    }\n  };\n\n  HashHistory.prototype.getCurrentLocation = function getCurrentLocation () {\n    return getHash()\n  };\n\n  return HashHistory;\n}(History));\n\nfunction checkFallback (base) {\n  var location = getLocation(base);\n  if (!/^\\/#/.test(location)) {\n    window.location.replace(cleanPath(base + '/#' + location));\n    return true\n  }\n}\n\nfunction ensureSlash () {\n  var path = getHash();\n  if (path.charAt(0) === '/') {\n    return true\n  }\n  replaceHash('/' + path);\n  return false\n}\n\nfunction getHash () {\n  // We can't use window.location.hash here because it's not\n  // consistent across browsers - Firefox will pre-decode it!\n  var href = window.location.href;\n  var index = href.indexOf('#');\n  // empty path\n  if (index < 0) { return '' }\n\n  href = href.slice(index + 1);\n\n  return href\n}\n\nfunction getUrl (path) {\n  var href = window.location.href;\n  var i = href.indexOf('#');\n  var base = i >= 0 ? href.slice(0, i) : href;\n  return (base + \"#\" + path)\n}\n\nfunction pushHash (path) {\n  if (supportsPushState) {\n    pushState(getUrl(path));\n  } else {\n    window.location.hash = path;\n  }\n}\n\nfunction replaceHash (path) {\n  if (supportsPushState) {\n    replaceState(getUrl(path));\n  } else {\n    window.location.replace(getUrl(path));\n  }\n}\n\n/*  */\n\nvar AbstractHistory = /*@__PURE__*/(function (History) {\n  function AbstractHistory (router, base) {\n    History.call(this, router, base);\n    this.stack = [];\n    this.index = -1;\n  }\n\n  if ( History ) AbstractHistory.__proto__ = History;\n  AbstractHistory.prototype = Object.create( History && History.prototype );\n  AbstractHistory.prototype.constructor = AbstractHistory;\n\n  AbstractHistory.prototype.push = function push (location, onComplete, onAbort) {\n    var this$1 = this;\n\n    this.transitionTo(\n      location,\n      function (route) {\n        this$1.stack = this$1.stack.slice(0, this$1.index + 1).concat(route);\n        this$1.index++;\n        onComplete && onComplete(route);\n      },\n      onAbort\n    );\n  };\n\n  AbstractHistory.prototype.replace = function replace (location, onComplete, onAbort) {\n    var this$1 = this;\n\n    this.transitionTo(\n      location,\n      function (route) {\n        this$1.stack = this$1.stack.slice(0, this$1.index).concat(route);\n        onComplete && onComplete(route);\n      },\n      onAbort\n    );\n  };\n\n  AbstractHistory.prototype.go = function go (n) {\n    var this$1 = this;\n\n    var targetIndex = this.index + n;\n    if (targetIndex < 0 || targetIndex >= this.stack.length) {\n      return\n    }\n    var route = this.stack[targetIndex];\n    this.confirmTransition(\n      route,\n      function () {\n        var prev = this$1.current;\n        this$1.index = targetIndex;\n        this$1.updateRoute(route);\n        this$1.router.afterHooks.forEach(function (hook) {\n          hook && hook(route, prev);\n        });\n      },\n      function (err) {\n        if (isNavigationFailure(err, NavigationFailureType.duplicated)) {\n          this$1.index = targetIndex;\n        }\n      }\n    );\n  };\n\n  AbstractHistory.prototype.getCurrentLocation = function getCurrentLocation () {\n    var current = this.stack[this.stack.length - 1];\n    return current ? current.fullPath : '/'\n  };\n\n  AbstractHistory.prototype.ensureURL = function ensureURL () {\n    // noop\n  };\n\n  return AbstractHistory;\n}(History));\n\n/*  */\n\nvar VueRouter = function VueRouter (options) {\n  if ( options === void 0 ) options = {};\n\n  this.app = null;\n  this.apps = [];\n  this.options = options;\n  this.beforeHooks = [];\n  this.resolveHooks = [];\n  this.afterHooks = [];\n  this.matcher = createMatcher(options.routes || [], this);\n\n  var mode = options.mode || 'hash';\n  this.fallback =\n    mode === 'history' && !supportsPushState && options.fallback !== false;\n  if (this.fallback) {\n    mode = 'hash';\n  }\n  if (!inBrowser) {\n    mode = 'abstract';\n  }\n  this.mode = mode;\n\n  switch (mode) {\n    case 'history':\n      this.history = new HTML5History(this, options.base);\n      break\n    case 'hash':\n      this.history = new HashHistory(this, options.base, this.fallback);\n      break\n    case 'abstract':\n      this.history = new AbstractHistory(this, options.base);\n      break\n    default:\n      if (process.env.NODE_ENV !== 'production') {\n        assert(false, (\"invalid mode: \" + mode));\n      }\n  }\n};\n\nvar prototypeAccessors = { currentRoute: { configurable: true } };\n\nVueRouter.prototype.match = function match (raw, current, redirectedFrom) {\n  return this.matcher.match(raw, current, redirectedFrom)\n};\n\nprototypeAccessors.currentRoute.get = function () {\n  return this.history && this.history.current\n};\n\nVueRouter.prototype.init = function init (app /* Vue component instance */) {\n    var this$1 = this;\n\n  process.env.NODE_ENV !== 'production' &&\n    assert(\n      install.installed,\n      \"not installed. Make sure to call `Vue.use(VueRouter)` \" +\n        \"before creating root instance.\"\n    );\n\n  this.apps.push(app);\n\n  // set up app destroyed handler\n  // https://github.com/vuejs/vue-router/issues/2639\n  app.$once('hook:destroyed', function () {\n    // clean out app from this.apps array once destroyed\n    var index = this$1.apps.indexOf(app);\n    if (index > -1) { this$1.apps.splice(index, 1); }\n    // ensure we still have a main app or null if no apps\n    // we do not release the router so it can be reused\n    if (this$1.app === app) { this$1.app = this$1.apps[0] || null; }\n\n    if (!this$1.app) { this$1.history.teardown(); }\n  });\n\n  // main app previously initialized\n  // return as we don't need to set up new history listener\n  if (this.app) {\n    return\n  }\n\n  this.app = app;\n\n  var history = this.history;\n\n  if (history instanceof HTML5History || history instanceof HashHistory) {\n    var handleInitialScroll = function (routeOrError) {\n      var from = history.current;\n      var expectScroll = this$1.options.scrollBehavior;\n      var supportsScroll = supportsPushState && expectScroll;\n\n      if (supportsScroll && 'fullPath' in routeOrError) {\n        handleScroll(this$1, routeOrError, from, false);\n      }\n    };\n    var setupListeners = function (routeOrError) {\n      history.setupListeners();\n      handleInitialScroll(routeOrError);\n    };\n    history.transitionTo(\n      history.getCurrentLocation(),\n      setupListeners,\n      setupListeners\n    );\n  }\n\n  history.listen(function (route) {\n    this$1.apps.forEach(function (app) {\n      app._route = route;\n    });\n  });\n};\n\nVueRouter.prototype.beforeEach = function beforeEach (fn) {\n  return registerHook(this.beforeHooks, fn)\n};\n\nVueRouter.prototype.beforeResolve = function beforeResolve (fn) {\n  return registerHook(this.resolveHooks, fn)\n};\n\nVueRouter.prototype.afterEach = function afterEach (fn) {\n  return registerHook(this.afterHooks, fn)\n};\n\nVueRouter.prototype.onReady = function onReady (cb, errorCb) {\n  this.history.onReady(cb, errorCb);\n};\n\nVueRouter.prototype.onError = function onError (errorCb) {\n  this.history.onError(errorCb);\n};\n\nVueRouter.prototype.push = function push (location, onComplete, onAbort) {\n    var this$1 = this;\n\n  // $flow-disable-line\n  if (!onComplete && !onAbort && typeof Promise !== 'undefined') {\n    return new Promise(function (resolve, reject) {\n      this$1.history.push(location, resolve, reject);\n    })\n  } else {\n    this.history.push(location, onComplete, onAbort);\n  }\n};\n\nVueRouter.prototype.replace = function replace (location, onComplete, onAbort) {\n    var this$1 = this;\n\n  // $flow-disable-line\n  if (!onComplete && !onAbort && typeof Promise !== 'undefined') {\n    return new Promise(function (resolve, reject) {\n      this$1.history.replace(location, resolve, reject);\n    })\n  } else {\n    this.history.replace(location, onComplete, onAbort);\n  }\n};\n\nVueRouter.prototype.go = function go (n) {\n  this.history.go(n);\n};\n\nVueRouter.prototype.back = function back () {\n  this.go(-1);\n};\n\nVueRouter.prototype.forward = function forward () {\n  this.go(1);\n};\n\nVueRouter.prototype.getMatchedComponents = function getMatchedComponents (to) {\n  var route = to\n    ? to.matched\n      ? to\n      : this.resolve(to).route\n    : this.currentRoute;\n  if (!route) {\n    return []\n  }\n  return [].concat.apply(\n    [],\n    route.matched.map(function (m) {\n      return Object.keys(m.components).map(function (key) {\n        return m.components[key]\n      })\n    })\n  )\n};\n\nVueRouter.prototype.resolve = function resolve (\n  to,\n  current,\n  append\n) {\n  current = current || this.history.current;\n  var location = normalizeLocation(to, current, append, this);\n  var route = this.match(location, current);\n  var fullPath = route.redirectedFrom || route.fullPath;\n  var base = this.history.base;\n  var href = createHref(base, fullPath, this.mode);\n  return {\n    location: location,\n    route: route,\n    href: href,\n    // for backwards compat\n    normalizedTo: location,\n    resolved: route\n  }\n};\n\nVueRouter.prototype.getRoutes = function getRoutes () {\n  return this.matcher.getRoutes()\n};\n\nVueRouter.prototype.addRoute = function addRoute (parentOrRoute, route) {\n  this.matcher.addRoute(parentOrRoute, route);\n  if (this.history.current !== START) {\n    this.history.transitionTo(this.history.getCurrentLocation());\n  }\n};\n\nVueRouter.prototype.addRoutes = function addRoutes (routes) {\n  if (process.env.NODE_ENV !== 'production') {\n    warn(false, 'router.addRoutes() is deprecated and has been removed in Vue Router 4. Use router.addRoute() instead.');\n  }\n  this.matcher.addRoutes(routes);\n  if (this.history.current !== START) {\n    this.history.transitionTo(this.history.getCurrentLocation());\n  }\n};\n\nObject.defineProperties( VueRouter.prototype, prototypeAccessors );\n\nfunction registerHook (list, fn) {\n  list.push(fn);\n  return function () {\n    var i = list.indexOf(fn);\n    if (i > -1) { list.splice(i, 1); }\n  }\n}\n\nfunction createHref (base, fullPath, mode) {\n  var path = mode === 'hash' ? '#' + fullPath : fullPath;\n  return base ? cleanPath(base + '/' + path) : path\n}\n\nVueRouter.install = install;\nVueRouter.version = '3.5.1';\nVueRouter.isNavigationFailure = isNavigationFailure;\nVueRouter.NavigationFailureType = NavigationFailureType;\nVueRouter.START_LOCATION = START;\n\nif (inBrowser && window.Vue) {\n  window.Vue.use(VueRouter);\n}\n\nexport default VueRouter;\n","\"use strict\";\n\n// ref: https://github.com/tc39/proposal-global\nvar getGlobal = function () {\n\t// the only reliable means to get the global object is\n\t// `Function('return this')()`\n\t// However, this causes CSP violations in Chrome apps.\n\tif (typeof self !== 'undefined') { return self; }\n\tif (typeof window !== 'undefined') { return window; }\n\tif (typeof global !== 'undefined') { return global; }\n\tthrow new Error('unable to locate global object');\n}\n\nvar global = getGlobal();\n\nmodule.exports = exports = global.fetch;\n\n// Needed for TypeScript and Webpack.\nif (global.fetch) {\n\texports.default = global.fetch.bind(global);\n}\n\nexports.Headers = global.Headers;\nexports.Request = global.Request;\nexports.Response = global.Response;","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","//[4]   \tNameStartChar\t   ::=   \t\":\" | [A-Z] | \"_\" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]\r\n//[4a]   \tNameChar\t   ::=   \tNameStartChar | \"-\" | \".\" | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]\r\n//[5]   \tName\t   ::=   \tNameStartChar (NameChar)*\r\nvar nameStartChar = /[A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]///\\u10000-\\uEFFFF\r\nvar nameChar = new RegExp(\"[\\\\-\\\\.0-9\"+nameStartChar.source.slice(1,-1)+\"\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]\");\r\nvar tagNamePattern = new RegExp('^'+nameStartChar.source+nameChar.source+'*(?:\\:'+nameStartChar.source+nameChar.source+'*)?$');\r\n//var tagNamePattern = /^[a-zA-Z_][\\w\\-\\.]*(?:\\:[a-zA-Z_][\\w\\-\\.]*)?$/\r\n//var handlers = 'resolveEntity,getExternalSubset,characters,endDocument,endElement,endPrefixMapping,ignorableWhitespace,processingInstruction,setDocumentLocator,skippedEntity,startDocument,startElement,startPrefixMapping,notationDecl,unparsedEntityDecl,error,fatalError,warning,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,comment,endCDATA,endDTD,endEntity,startCDATA,startDTD,startEntity'.split(',')\r\n\r\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\r\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\r\nvar S_TAG = 0;//tag name offerring\r\nvar S_ATTR = 1;//attr name offerring \r\nvar S_ATTR_SPACE=2;//attr name end and space offer\r\nvar S_EQ = 3;//=space?\r\nvar S_ATTR_NOQUOT_VALUE = 4;//attr value(no quot value only)\r\nvar S_ATTR_END = 5;//attr value end and no space(quot end)\r\nvar S_TAG_SPACE = 6;//(attr value end || tag end ) && (space offer)\r\nvar S_TAG_CLOSE = 7;//closed el<el />\r\n\r\nfunction XMLReader(){\r\n\t\r\n}\r\n\r\nXMLReader.prototype = {\r\n\tparse:function(source,defaultNSMap,entityMap){\r\n\t\tvar domBuilder = this.domBuilder;\r\n\t\tdomBuilder.startDocument();\r\n\t\t_copy(defaultNSMap ,defaultNSMap = {})\r\n\t\tparse(source,defaultNSMap,entityMap,\r\n\t\t\t\tdomBuilder,this.errorHandler);\r\n\t\tdomBuilder.endDocument();\r\n\t}\r\n}\r\nfunction parse(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){\r\n\tfunction fixedFromCharCode(code) {\r\n\t\t// String.prototype.fromCharCode does not supports\r\n\t\t// > 2 bytes unicode chars directly\r\n\t\tif (code > 0xffff) {\r\n\t\t\tcode -= 0x10000;\r\n\t\t\tvar surrogate1 = 0xd800 + (code >> 10)\r\n\t\t\t\t, surrogate2 = 0xdc00 + (code & 0x3ff);\r\n\r\n\t\t\treturn String.fromCharCode(surrogate1, surrogate2);\r\n\t\t} else {\r\n\t\t\treturn String.fromCharCode(code);\r\n\t\t}\r\n\t}\r\n\tfunction entityReplacer(a){\r\n\t\tvar k = a.slice(1,-1);\r\n\t\tif(k in entityMap){\r\n\t\t\treturn entityMap[k]; \r\n\t\t}else if(k.charAt(0) === '#'){\r\n\t\t\treturn fixedFromCharCode(parseInt(k.substr(1).replace('x','0x')))\r\n\t\t}else{\r\n\t\t\terrorHandler.error('entity not found:'+a);\r\n\t\t\treturn a;\r\n\t\t}\r\n\t}\r\n\tfunction appendText(end){//has some bugs\r\n\t\tif(end>start){\r\n\t\t\tvar xt = source.substring(start,end).replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\tlocator&&position(start);\r\n\t\t\tdomBuilder.characters(xt,0,end-start);\r\n\t\t\tstart = end\r\n\t\t}\r\n\t}\r\n\tfunction position(p,m){\r\n\t\twhile(p>=lineEnd && (m = linePattern.exec(source))){\r\n\t\t\tlineStart = m.index;\r\n\t\t\tlineEnd = lineStart + m[0].length;\r\n\t\t\tlocator.lineNumber++;\r\n\t\t\t//console.log('line++:',locator,startPos,endPos)\r\n\t\t}\r\n\t\tlocator.columnNumber = p-lineStart+1;\r\n\t}\r\n\tvar lineStart = 0;\r\n\tvar lineEnd = 0;\r\n\tvar linePattern = /.*(?:\\r\\n?|\\n)|.*$/g\r\n\tvar locator = domBuilder.locator;\r\n\t\r\n\tvar parseStack = [{currentNSMap:defaultNSMapCopy}]\r\n\tvar closeMap = {};\r\n\tvar start = 0;\r\n\twhile(true){\r\n\t\ttry{\r\n\t\t\tvar tagStart = source.indexOf('<',start);\r\n\t\t\tif(tagStart<0){\r\n\t\t\t\tif(!source.substr(start).match(/^\\s*$/)){\r\n\t\t\t\t\tvar doc = domBuilder.doc;\r\n\t    \t\t\tvar text = doc.createTextNode(source.substr(start));\r\n\t    \t\t\tdoc.appendChild(text);\r\n\t    \t\t\tdomBuilder.currentElement = text;\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(tagStart>start){\r\n\t\t\t\tappendText(tagStart);\r\n\t\t\t}\r\n\t\t\tswitch(source.charAt(tagStart+1)){\r\n\t\t\tcase '/':\r\n\t\t\t\tvar end = source.indexOf('>',tagStart+3);\r\n\t\t\t\tvar tagName = source.substring(tagStart+2,end);\r\n\t\t\t\tvar config = parseStack.pop();\r\n\t\t\t\tif(end<0){\r\n\t\t\t\t\t\r\n\t        \t\ttagName = source.substring(tagStart+2).replace(/[\\s<].*/,'');\r\n\t        \t\t//console.error('#@@@@@@'+tagName)\r\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' is not complete:'+config.tagName);\r\n\t        \t\tend = tagStart+1+tagName.length;\r\n\t        \t}else if(tagName.match(/\\s</)){\r\n\t        \t\ttagName = tagName.replace(/[\\s<].*/,'');\r\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' maybe not complete');\r\n\t        \t\tend = tagStart+1+tagName.length;\r\n\t\t\t\t}\r\n\t\t\t\t//console.error(parseStack.length,parseStack)\r\n\t\t\t\t//console.error(config);\r\n\t\t\t\tvar localNSMap = config.localNSMap;\r\n\t\t\t\tvar endMatch = config.tagName == tagName;\r\n\t\t\t\tvar endIgnoreCaseMach = endMatch || config.tagName&&config.tagName.toLowerCase() == tagName.toLowerCase()\r\n\t\t        if(endIgnoreCaseMach){\r\n\t\t        \tdomBuilder.endElement(config.uri,config.localName,tagName);\r\n\t\t\t\t\tif(localNSMap){\r\n\t\t\t\t\t\tfor(var prefix in localNSMap){\r\n\t\t\t\t\t\t\tdomBuilder.endPrefixMapping(prefix) ;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!endMatch){\r\n\t\t            \terrorHandler.fatalError(\"end tag name: \"+tagName+' is not match the current start tagName:'+config.tagName );\r\n\t\t\t\t\t}\r\n\t\t        }else{\r\n\t\t        \tparseStack.push(config)\r\n\t\t        }\r\n\t\t\t\t\r\n\t\t\t\tend++;\r\n\t\t\t\tbreak;\r\n\t\t\t\t// end elment\r\n\t\t\tcase '?':// <?...?>\r\n\t\t\t\tlocator&&position(tagStart);\r\n\t\t\t\tend = parseInstruction(source,tagStart,domBuilder);\r\n\t\t\t\tbreak;\r\n\t\t\tcase '!':// <!doctype,<![CDATA,<!--\r\n\t\t\t\tlocator&&position(tagStart);\r\n\t\t\t\tend = parseDCC(source,tagStart,domBuilder,errorHandler);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tlocator&&position(tagStart);\r\n\t\t\t\tvar el = new ElementAttributes();\r\n\t\t\t\tvar currentNSMap = parseStack[parseStack.length-1].currentNSMap;\r\n\t\t\t\t//elStartEnd\r\n\t\t\t\tvar end = parseElementStartPart(source,tagStart,el,currentNSMap,entityReplacer,errorHandler);\r\n\t\t\t\tvar len = el.length;\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif(!el.closed && fixSelfClosed(source,end,el.tagName,closeMap)){\r\n\t\t\t\t\tel.closed = true;\r\n\t\t\t\t\tif(!entityMap.nbsp){\r\n\t\t\t\t\t\terrorHandler.warning('unclosed xml attribute');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(locator && len){\r\n\t\t\t\t\tvar locator2 = copyLocator(locator,{});\r\n\t\t\t\t\t//try{//attribute position fixed\r\n\t\t\t\t\tfor(var i = 0;i<len;i++){\r\n\t\t\t\t\t\tvar a = el[i];\r\n\t\t\t\t\t\tposition(a.offset);\r\n\t\t\t\t\t\ta.locator = copyLocator(locator,{});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//}catch(e){console.error('@@@@@'+e)}\r\n\t\t\t\t\tdomBuilder.locator = locator2\r\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\r\n\t\t\t\t\t\tparseStack.push(el)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdomBuilder.locator = locator;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\r\n\t\t\t\t\t\tparseStack.push(el)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif(el.uri === 'http://www.w3.org/1999/xhtml' && !el.closed){\r\n\t\t\t\t\tend = parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder)\r\n\t\t\t\t}else{\r\n\t\t\t\t\tend++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}catch(e){\r\n\t\t\terrorHandler.error('element parse error: '+e)\r\n\t\t\t//errorHandler.error('element parse error: '+e);\r\n\t\t\tend = -1;\r\n\t\t\t//throw e;\r\n\t\t}\r\n\t\tif(end>start){\r\n\t\t\tstart = end;\r\n\t\t}else{\r\n\t\t\t//TODO: 这里有可能sax回退，有位置错误风险\r\n\t\t\tappendText(Math.max(tagStart,start)+1);\r\n\t\t}\r\n\t}\r\n}\r\nfunction copyLocator(f,t){\r\n\tt.lineNumber = f.lineNumber;\r\n\tt.columnNumber = f.columnNumber;\r\n\treturn t;\r\n}\r\n\r\n/**\r\n * @see #appendElement(source,elStartEnd,el,selfClosed,entityReplacer,domBuilder,parseStack);\r\n * @return end of the elementStartPart(end of elementEndPart for selfClosed el)\r\n */\r\nfunction parseElementStartPart(source,start,el,currentNSMap,entityReplacer,errorHandler){\r\n\tvar attrName;\r\n\tvar value;\r\n\tvar p = ++start;\r\n\tvar s = S_TAG;//status\r\n\twhile(true){\r\n\t\tvar c = source.charAt(p);\r\n\t\tswitch(c){\r\n\t\tcase '=':\r\n\t\t\tif(s === S_ATTR){//attrName\r\n\t\t\t\tattrName = source.slice(start,p);\r\n\t\t\t\ts = S_EQ;\r\n\t\t\t}else if(s === S_ATTR_SPACE){\r\n\t\t\t\ts = S_EQ;\r\n\t\t\t}else{\r\n\t\t\t\t//fatalError: equal must after attrName or space after attrName\r\n\t\t\t\tthrow new Error('attribute equal must after attrName');\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase '\\'':\r\n\t\tcase '\"':\r\n\t\t\tif(s === S_EQ || s === S_ATTR //|| s == S_ATTR_SPACE\r\n\t\t\t\t){//equal\r\n\t\t\t\tif(s === S_ATTR){\r\n\t\t\t\t\terrorHandler.warning('attribute value must after \"=\"')\r\n\t\t\t\t\tattrName = source.slice(start,p)\r\n\t\t\t\t}\r\n\t\t\t\tstart = p+1;\r\n\t\t\t\tp = source.indexOf(c,start)\r\n\t\t\t\tif(p>0){\r\n\t\t\t\t\tvalue = source.slice(start,p).replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\t\t\tel.add(attrName,value,start-1);\r\n\t\t\t\t\ts = S_ATTR_END;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t//fatalError: no end quot match\r\n\t\t\t\t\tthrow new Error('attribute value no end \\''+c+'\\' match');\r\n\t\t\t\t}\r\n\t\t\t}else if(s == S_ATTR_NOQUOT_VALUE){\r\n\t\t\t\tvalue = source.slice(start,p).replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\t\t//console.log(attrName,value,start,p)\r\n\t\t\t\tel.add(attrName,value,start);\r\n\t\t\t\t//console.dir(el)\r\n\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed start quot('+c+')!!');\r\n\t\t\t\tstart = p+1;\r\n\t\t\t\ts = S_ATTR_END\r\n\t\t\t}else{\r\n\t\t\t\t//fatalError: no equal before\r\n\t\t\t\tthrow new Error('attribute value must after \"=\"');\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase '/':\r\n\t\t\tswitch(s){\r\n\t\t\tcase S_TAG:\r\n\t\t\t\tel.setTagName(source.slice(start,p));\r\n\t\t\tcase S_ATTR_END:\r\n\t\t\tcase S_TAG_SPACE:\r\n\t\t\tcase S_TAG_CLOSE:\r\n\t\t\t\ts =S_TAG_CLOSE;\r\n\t\t\t\tel.closed = true;\r\n\t\t\tcase S_ATTR_NOQUOT_VALUE:\r\n\t\t\tcase S_ATTR:\r\n\t\t\tcase S_ATTR_SPACE:\r\n\t\t\t\tbreak;\r\n\t\t\t//case S_EQ:\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(\"attribute invalid close char('/')\")\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase ''://end document\r\n\t\t\t//throw new Error('unexpected end of input')\r\n\t\t\terrorHandler.error('unexpected end of input');\r\n\t\t\tif(s == S_TAG){\r\n\t\t\t\tel.setTagName(source.slice(start,p));\r\n\t\t\t}\r\n\t\t\treturn p;\r\n\t\tcase '>':\r\n\t\t\tswitch(s){\r\n\t\t\tcase S_TAG:\r\n\t\t\t\tel.setTagName(source.slice(start,p));\r\n\t\t\tcase S_ATTR_END:\r\n\t\t\tcase S_TAG_SPACE:\r\n\t\t\tcase S_TAG_CLOSE:\r\n\t\t\t\tbreak;//normal\r\n\t\t\tcase S_ATTR_NOQUOT_VALUE://Compatible state\r\n\t\t\tcase S_ATTR:\r\n\t\t\t\tvalue = source.slice(start,p);\r\n\t\t\t\tif(value.slice(-1) === '/'){\r\n\t\t\t\t\tel.closed  = true;\r\n\t\t\t\t\tvalue = value.slice(0,-1)\r\n\t\t\t\t}\r\n\t\t\tcase S_ATTR_SPACE:\r\n\t\t\t\tif(s === S_ATTR_SPACE){\r\n\t\t\t\t\tvalue = attrName;\r\n\t\t\t\t}\r\n\t\t\t\tif(s == S_ATTR_NOQUOT_VALUE){\r\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!!');\r\n\t\t\t\t\tel.add(attrName,value.replace(/&#?\\w+;/g,entityReplacer),start)\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(currentNSMap[''] !== 'http://www.w3.org/1999/xhtml' || !value.match(/^(?:disabled|checked|selected)$/i)){\r\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed value!! \"'+value+'\" instead!!')\r\n\t\t\t\t\t}\r\n\t\t\t\t\tel.add(value,value,start)\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase S_EQ:\r\n\t\t\t\tthrow new Error('attribute value missed!!');\r\n\t\t\t}\r\n//\t\t\tconsole.log(tagName,tagNamePattern,tagNamePattern.test(tagName))\r\n\t\t\treturn p;\r\n\t\t/*xml space '\\x20' | #x9 | #xD | #xA; */\r\n\t\tcase '\\u0080':\r\n\t\t\tc = ' ';\r\n\t\tdefault:\r\n\t\t\tif(c<= ' '){//space\r\n\t\t\t\tswitch(s){\r\n\t\t\t\tcase S_TAG:\r\n\t\t\t\t\tel.setTagName(source.slice(start,p));//tagName\r\n\t\t\t\t\ts = S_TAG_SPACE;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_ATTR:\r\n\t\t\t\t\tattrName = source.slice(start,p)\r\n\t\t\t\t\ts = S_ATTR_SPACE;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_ATTR_NOQUOT_VALUE:\r\n\t\t\t\t\tvar value = source.slice(start,p).replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!!');\r\n\t\t\t\t\tel.add(attrName,value,start)\r\n\t\t\t\tcase S_ATTR_END:\r\n\t\t\t\t\ts = S_TAG_SPACE;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t//case S_TAG_SPACE:\r\n\t\t\t\t//case S_EQ:\r\n\t\t\t\t//case S_ATTR_SPACE:\r\n\t\t\t\t//\tvoid();break;\r\n\t\t\t\t//case S_TAG_CLOSE:\r\n\t\t\t\t\t//ignore warning\r\n\t\t\t\t}\r\n\t\t\t}else{//not space\r\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\r\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\r\n\t\t\t\tswitch(s){\r\n\t\t\t\t//case S_TAG:void();break;\r\n\t\t\t\t//case S_ATTR:void();break;\r\n\t\t\t\t//case S_ATTR_NOQUOT_VALUE:void();break;\r\n\t\t\t\tcase S_ATTR_SPACE:\r\n\t\t\t\t\tvar tagName =  el.tagName;\r\n\t\t\t\t\tif(currentNSMap[''] !== 'http://www.w3.org/1999/xhtml' || !attrName.match(/^(?:disabled|checked|selected)$/i)){\r\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed value!! \"'+attrName+'\" instead2!!')\r\n\t\t\t\t\t}\r\n\t\t\t\t\tel.add(attrName,attrName,start);\r\n\t\t\t\t\tstart = p;\r\n\t\t\t\t\ts = S_ATTR;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_ATTR_END:\r\n\t\t\t\t\terrorHandler.warning('attribute space is required\"'+attrName+'\"!!')\r\n\t\t\t\tcase S_TAG_SPACE:\r\n\t\t\t\t\ts = S_ATTR;\r\n\t\t\t\t\tstart = p;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_EQ:\r\n\t\t\t\t\ts = S_ATTR_NOQUOT_VALUE;\r\n\t\t\t\t\tstart = p;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_TAG_CLOSE:\r\n\t\t\t\t\tthrow new Error(\"elements closed character '/' and '>' must be connected to\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}//end outer switch\r\n\t\t//console.log('p++',p)\r\n\t\tp++;\r\n\t}\r\n}\r\n/**\r\n * @return true if has new namespace define\r\n */\r\nfunction appendElement(el,domBuilder,currentNSMap){\r\n\tvar tagName = el.tagName;\r\n\tvar localNSMap = null;\r\n\t//var currentNSMap = parseStack[parseStack.length-1].currentNSMap;\r\n\tvar i = el.length;\r\n\twhile(i--){\r\n\t\tvar a = el[i];\r\n\t\tvar qName = a.qName;\r\n\t\tvar value = a.value;\r\n\t\tvar nsp = qName.indexOf(':');\r\n\t\tif(nsp>0){\r\n\t\t\tvar prefix = a.prefix = qName.slice(0,nsp);\r\n\t\t\tvar localName = qName.slice(nsp+1);\r\n\t\t\tvar nsPrefix = prefix === 'xmlns' && localName\r\n\t\t}else{\r\n\t\t\tlocalName = qName;\r\n\t\t\tprefix = null\r\n\t\t\tnsPrefix = qName === 'xmlns' && ''\r\n\t\t}\r\n\t\t//can not set prefix,because prefix !== ''\r\n\t\ta.localName = localName ;\r\n\t\t//prefix == null for no ns prefix attribute \r\n\t\tif(nsPrefix !== false){//hack!!\r\n\t\t\tif(localNSMap == null){\r\n\t\t\t\tlocalNSMap = {}\r\n\t\t\t\t//console.log(currentNSMap,0)\r\n\t\t\t\t_copy(currentNSMap,currentNSMap={})\r\n\t\t\t\t//console.log(currentNSMap,1)\r\n\t\t\t}\r\n\t\t\tcurrentNSMap[nsPrefix] = localNSMap[nsPrefix] = value;\r\n\t\t\ta.uri = 'http://www.w3.org/2000/xmlns/'\r\n\t\t\tdomBuilder.startPrefixMapping(nsPrefix, value) \r\n\t\t}\r\n\t}\r\n\tvar i = el.length;\r\n\twhile(i--){\r\n\t\ta = el[i];\r\n\t\tvar prefix = a.prefix;\r\n\t\tif(prefix){//no prefix attribute has no namespace\r\n\t\t\tif(prefix === 'xml'){\r\n\t\t\t\ta.uri = 'http://www.w3.org/XML/1998/namespace';\r\n\t\t\t}if(prefix !== 'xmlns'){\r\n\t\t\t\ta.uri = currentNSMap[prefix || '']\r\n\t\t\t\t\r\n\t\t\t\t//{console.log('###'+a.qName,domBuilder.locator.systemId+'',currentNSMap,a.uri)}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tvar nsp = tagName.indexOf(':');\r\n\tif(nsp>0){\r\n\t\tprefix = el.prefix = tagName.slice(0,nsp);\r\n\t\tlocalName = el.localName = tagName.slice(nsp+1);\r\n\t}else{\r\n\t\tprefix = null;//important!!\r\n\t\tlocalName = el.localName = tagName;\r\n\t}\r\n\t//no prefix element has default namespace\r\n\tvar ns = el.uri = currentNSMap[prefix || ''];\r\n\tdomBuilder.startElement(ns,localName,tagName,el);\r\n\t//endPrefixMapping and startPrefixMapping have not any help for dom builder\r\n\t//localNSMap = null\r\n\tif(el.closed){\r\n\t\tdomBuilder.endElement(ns,localName,tagName);\r\n\t\tif(localNSMap){\r\n\t\t\tfor(prefix in localNSMap){\r\n\t\t\t\tdomBuilder.endPrefixMapping(prefix) \r\n\t\t\t}\r\n\t\t}\r\n\t}else{\r\n\t\tel.currentNSMap = currentNSMap;\r\n\t\tel.localNSMap = localNSMap;\r\n\t\t//parseStack.push(el);\r\n\t\treturn true;\r\n\t}\r\n}\r\nfunction parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){\r\n\tif(/^(?:script|textarea)$/i.test(tagName)){\r\n\t\tvar elEndStart =  source.indexOf('</'+tagName+'>',elStartEnd);\r\n\t\tvar text = source.substring(elStartEnd+1,elEndStart);\r\n\t\tif(/[&<]/.test(text)){\r\n\t\t\tif(/^script$/i.test(tagName)){\r\n\t\t\t\t//if(!/\\]\\]>/.test(text)){\r\n\t\t\t\t\t//lexHandler.startCDATA();\r\n\t\t\t\t\tdomBuilder.characters(text,0,text.length);\r\n\t\t\t\t\t//lexHandler.endCDATA();\r\n\t\t\t\t\treturn elEndStart;\r\n\t\t\t\t//}\r\n\t\t\t}//}else{//text area\r\n\t\t\t\ttext = text.replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\t\tdomBuilder.characters(text,0,text.length);\r\n\t\t\t\treturn elEndStart;\r\n\t\t\t//}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\treturn elStartEnd+1;\r\n}\r\nfunction fixSelfClosed(source,elStartEnd,tagName,closeMap){\r\n\t//if(tagName in closeMap){\r\n\tvar pos = closeMap[tagName];\r\n\tif(pos == null){\r\n\t\t//console.log(tagName)\r\n\t\tpos =  source.lastIndexOf('</'+tagName+'>')\r\n\t\tif(pos<elStartEnd){//忘记闭合\r\n\t\t\tpos = source.lastIndexOf('</'+tagName)\r\n\t\t}\r\n\t\tcloseMap[tagName] =pos\r\n\t}\r\n\treturn pos<elStartEnd;\r\n\t//} \r\n}\r\nfunction _copy(source,target){\r\n\tfor(var n in source){target[n] = source[n]}\r\n}\r\nfunction parseDCC(source,start,domBuilder,errorHandler){//sure start with '<!'\r\n\tvar next= source.charAt(start+2)\r\n\tswitch(next){\r\n\tcase '-':\r\n\t\tif(source.charAt(start + 3) === '-'){\r\n\t\t\tvar end = source.indexOf('-->',start+4);\r\n\t\t\t//append comment source.substring(4,end)//<!--\r\n\t\t\tif(end>start){\r\n\t\t\t\tdomBuilder.comment(source,start+4,end-start-4);\r\n\t\t\t\treturn end+3;\r\n\t\t\t}else{\r\n\t\t\t\terrorHandler.error(\"Unclosed comment\");\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\t//error\r\n\t\t\treturn -1;\r\n\t\t}\r\n\tdefault:\r\n\t\tif(source.substr(start+3,6) == 'CDATA['){\r\n\t\t\tvar end = source.indexOf(']]>',start+9);\r\n\t\t\tdomBuilder.startCDATA();\r\n\t\t\tdomBuilder.characters(source,start+9,end-start-9);\r\n\t\t\tdomBuilder.endCDATA() \r\n\t\t\treturn end+3;\r\n\t\t}\r\n\t\t//<!DOCTYPE\r\n\t\t//startDTD(java.lang.String name, java.lang.String publicId, java.lang.String systemId) \r\n\t\tvar matchs = split(source,start);\r\n\t\tvar len = matchs.length;\r\n\t\tif(len>1 && /!doctype/i.test(matchs[0][0])){\r\n\t\t\tvar name = matchs[1][0];\r\n\t\t\tvar pubid = len>3 && /^public$/i.test(matchs[2][0]) && matchs[3][0]\r\n\t\t\tvar sysid = len>4 && matchs[4][0];\r\n\t\t\tvar lastMatch = matchs[len-1]\r\n\t\t\tdomBuilder.startDTD(name,pubid && pubid.replace(/^(['\"])(.*?)\\1$/,'$2'),\r\n\t\t\t\t\tsysid && sysid.replace(/^(['\"])(.*?)\\1$/,'$2'));\r\n\t\t\tdomBuilder.endDTD();\r\n\t\t\t\r\n\t\t\treturn lastMatch.index+lastMatch[0].length\r\n\t\t}\r\n\t}\r\n\treturn -1;\r\n}\r\n\r\n\r\n\r\nfunction parseInstruction(source,start,domBuilder){\r\n\tvar end = source.indexOf('?>',start);\r\n\tif(end){\r\n\t\tvar match = source.substring(start,end).match(/^<\\?(\\S*)\\s*([\\s\\S]*?)\\s*$/);\r\n\t\tif(match){\r\n\t\t\tvar len = match[0].length;\r\n\t\t\tdomBuilder.processingInstruction(match[1], match[2]) ;\r\n\t\t\treturn end+2;\r\n\t\t}else{//error\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t}\r\n\treturn -1;\r\n}\r\n\r\n/**\r\n * @param source\r\n */\r\nfunction ElementAttributes(source){\r\n\t\r\n}\r\nElementAttributes.prototype = {\r\n\tsetTagName:function(tagName){\r\n\t\tif(!tagNamePattern.test(tagName)){\r\n\t\t\tthrow new Error('invalid tagName:'+tagName)\r\n\t\t}\r\n\t\tthis.tagName = tagName\r\n\t},\r\n\tadd:function(qName,value,offset){\r\n\t\tif(!tagNamePattern.test(qName)){\r\n\t\t\tthrow new Error('invalid attribute:'+qName)\r\n\t\t}\r\n\t\tthis[this.length++] = {qName:qName,value:value,offset:offset}\r\n\t},\r\n\tlength:0,\r\n\tgetLocalName:function(i){return this[i].localName},\r\n\tgetLocator:function(i){return this[i].locator},\r\n\tgetQName:function(i){return this[i].qName},\r\n\tgetURI:function(i){return this[i].uri},\r\n\tgetValue:function(i){return this[i].value}\r\n//\t,getIndex:function(uri, localName)){\r\n//\t\tif(localName){\r\n//\t\t\t\r\n//\t\t}else{\r\n//\t\t\tvar qName = uri\r\n//\t\t}\r\n//\t},\r\n//\tgetValue:function(){return this.getValue(this.getIndex.apply(this,arguments))},\r\n//\tgetType:function(uri,localName){}\r\n//\tgetType:function(i){},\r\n}\r\n\r\n\r\n\r\n\r\nfunction _set_proto_(thiz,parent){\r\n\tthiz.__proto__ = parent;\r\n\treturn thiz;\r\n}\r\nif(!(_set_proto_({},_set_proto_.prototype) instanceof _set_proto_)){\r\n\t_set_proto_ = function(thiz,parent){\r\n\t\tfunction p(){};\r\n\t\tp.prototype = parent;\r\n\t\tp = new p();\r\n\t\tfor(parent in thiz){\r\n\t\t\tp[parent] = thiz[parent];\r\n\t\t}\r\n\t\treturn p;\r\n\t}\r\n}\r\n\r\nfunction split(source,start){\r\n\tvar match;\r\n\tvar buf = [];\r\n\tvar reg = /'[^']+'|\"[^\"]+\"|[^\\s<>\\/=]+=?|(\\/?\\s*>|<)/g;\r\n\treg.lastIndex = start;\r\n\treg.exec(source);//skip <\r\n\twhile(match = reg.exec(source)){\r\n\t\tbuf.push(match);\r\n\t\tif(match[1])return buf;\r\n\t}\r\n}\r\n\r\nexports.XMLReader = XMLReader;\r\n\r\n","// .dirname, .basename, and .extname methods are extracted from Node.js v8.11.1,\n// backported and transplited with Babel, with backwards-compat fixes\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  if (path.length === 0) return '.';\n  var code = path.charCodeAt(0);\n  var hasRoot = code === 47 /*/*/;\n  var end = -1;\n  var matchedSlash = true;\n  for (var i = path.length - 1; i >= 1; --i) {\n    code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n      // We saw the first non-path separator\n      matchedSlash = false;\n    }\n  }\n\n  if (end === -1) return hasRoot ? '/' : '.';\n  if (hasRoot && end === 1) {\n    // return '//';\n    // Backwards-compat fix:\n    return '/';\n  }\n  return path.slice(0, end);\n};\n\nfunction basename(path) {\n  if (typeof path !== 'string') path = path + '';\n\n  var start = 0;\n  var end = -1;\n  var matchedSlash = true;\n  var i;\n\n  for (i = path.length - 1; i >= 0; --i) {\n    if (path.charCodeAt(i) === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // path component\n      matchedSlash = false;\n      end = i + 1;\n    }\n  }\n\n  if (end === -1) return '';\n  return path.slice(start, end);\n}\n\n// Uses a mixed approach for backwards-compatibility, as ext behavior changed\n// in new Node.js versions, so only basename() above is backported here\nexports.basename = function (path, ext) {\n  var f = basename(path);\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\nexports.extname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  var startDot = -1;\n  var startPart = 0;\n  var end = -1;\n  var matchedSlash = true;\n  // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find\n  var preDotState = 0;\n  for (var i = path.length - 1; i >= 0; --i) {\n    var code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n    if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension\n      matchedSlash = false;\n      end = i + 1;\n    }\n    if (code === 46 /*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n    } else if (startDot !== -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension\n      preDotState = -1;\n    }\n  }\n\n  if (startDot === -1 || end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n    return '';\n  }\n  return path.slice(startDot, end);\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n"],"sourceRoot":""}